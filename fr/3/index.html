<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Projet Tsar-e-Bomba : Analyse Interactive</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F5F5F0; /* Warm Neutral Background */
            color: #1F2937;
        }
        
        .section-card {
            background-color: #FFFFFF;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            transition: transform 0.2s ease-in-out;
        }
        
        .interactive-btn {
            transition: all 0.2s;
        }
        .interactive-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .interactive-btn.active {
            background-color: #1F2937;
            color: #FFFFFF;
        }

        /* Chart Container Styling - MANDATORY */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px; /* Max width for readability */
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 400px;
        }
        
        @media (max-width: 640px) {
            .chart-container {
                height: 300px;
            }
        }

        /* Custom Scrollbar for cleaner look */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #F5F5F0;
        }
        ::-webkit-scrollbar-thumb {
            background: #CBD5E1;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #94A3B8;
        }
    </style>

    <!-- Placeholder Comments Required by Prompt -->
    <!-- Chosen Palette: Warm Neutral (Background #F5F5F0), Deep Charcoal (Text #1F2937), Muted Red (#EF4444) for danger, Muted Blue (#3B82F6) for context, Warning Yellow (#EAB308) for radiation. -->
    
    <!-- Application Structure Plan: 
         Structured as a 'Semantic Investigation' inspired by the SEO context.
         1. Hero Section: Sets the tone, introduces the two subjects (Little Boy vs Tsar).
         2. Comparative Dashboard: Direct data comparison using charts and toggleable cards. Goal: Grasp the scale difference.
         3. The Detonation Timeline: Step-by-step interactive flow of the 1961 test. Goal: Narrative understanding.
         4. Blast Simulation: Canvas-based visualizer of blast radii. Goal: Spatial realization of the destruction power.
         This structure moves from Abstract Data -> Narrative -> Concrete Spatial Impact, facilitating deep understanding.
    -->

    <!-- Visualization & Content Choices:
         1. Yield Comparison: Bar Chart (Logarithmic). Goal: Compare 15kt vs 50,000kt without losing the small bar. Interaction: None/Tooltip. Justification: Magnitude difference requires log scale.
         2. Cloud Height: Bar Chart. Goal: Visualize vertical scale against Mt Everest. Interaction: Tooltip.
         3. Blast Radius: Custom Canvas. Goal: Show concentric destruction zones. Interaction: Toggle between bombs to redraw circles to scale. Justification: Canvas allows precise drawing of radii (3.5km vs 60km) better than static images. NO SVG used.
    -->

    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->

</head>
<body class="antialiased selection:bg-red-100 selection:text-red-900">

    <!-- Navigation -->
    <nav class="sticky top-0 z-50 bg-white/90 backdrop-blur-sm border-b border-gray-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <span class="text-xl font-bold tracking-tight text-gray-900">PROJET <span class="text-red-600">TSAR-E-BOMBA</span></span>
                </div>
                <div class="hidden md:flex space-x-8">
                    <button onclick="scrollToSection('context')" class="text-gray-600 hover:text-gray-900 text-sm font-medium transition-colors">Contexte</button>
                    <button onclick="scrollToSection('comparison')" class="text-gray-600 hover:text-gray-900 text-sm font-medium transition-colors">Donn√©es</button>
                    <button onclick="scrollToSection('simulation')" class="text-gray-600 hover:text-red-600 text-sm font-medium transition-colors">Simulation</button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10 space-y-16">

        <!-- Hero / Intro -->
        <header class="text-center space-y-4 animate-fade-in">
            <div class="inline-flex items-center px-3 py-1 rounded-full bg-red-100 text-red-800 text-xs font-semibold uppercase tracking-wide">
                Dossier Classifi√© : RDS-220
            </div>
            <h1 class="text-4xl md:text-6xl font-bold text-gray-900 tracking-tight">
                L'Apex de l'√àre Nucl√©aire
            </h1>
            <p class="max-w-2xl mx-auto text-xl text-gray-600 leading-relaxed">
                Une analyse comparative interactive entre <strong>Little Boy</strong> (Hiroshima) et la <strong>Tsar Bomba</strong>, l'engin explosif le plus puissant jamais test√© par l'humanit√©. Comprendre l'√©chelle de l'impensable.
            </p>
        </header>

        <!-- Section 1: Context & Introduction -->
        <section id="context" class="grid grid-cols-1 md:grid-cols-2 gap-8 items-start">
            <div class="space-y-4">
                <h2 class="text-2xl font-bold text-gray-900 border-l-4 border-red-500 pl-4">Le Contexte Historique</h2>
                <p class="text-gray-600 leading-relaxed">
                    Au c≈ìur de la Guerre Froide, la course aux armements atteint son paroxysme en 1961. L'Union Sovi√©tique, cherchant √† d√©montrer sa sup√©riorit√© technologique et militaire, initie le projet de la bombe AN-602, surnomm√©e "Tsar Bomba" (La Reine des Bombes).
                </p>
                <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-100">
                    <h3 class="font-semibold text-gray-800 mb-2">Les Acteurs du Duel</h3>
                    <ul class="space-y-3">
                        <li class="flex items-start">
                            <span class="flex-shrink-0 h-6 w-6 rounded-full bg-gray-200 text-gray-600 flex items-center justify-center text-xs font-bold mr-3">1</span>
                            <span><strong>Little Boy (1945) :</strong> La premi√®re bombe utilis√©e en conflit. Fission √† l'uranium. Une puissance terrifiante pour l'√©poque, mais minuscule compar√©e √† la suite.</span>
                        </li>
                        <li class="flex items-start">
                            <span class="flex-shrink-0 h-6 w-6 rounded-full bg-red-100 text-red-600 flex items-center justify-center text-xs font-bold mr-3">2</span>
                            <span><strong>Tsar Bomba (1961) :</strong> Bombe H (Hydrog√®ne) √† trois √©tages. Con√ßue pour 100 M√©gatonnes, r√©duite √† 50 pour limiter les retomb√©es. Le "Monstre" absolu.</span>
                        </li>
                    </ul>
                </div>
            </div>
            
            <!-- Quick Stats Cards -->
            <div class="grid grid-cols-2 gap-4">
                <div class="section-card p-6 text-center hover:scale-[1.02] transition-transform">
                    <div class="text-gray-500 text-sm uppercase tracking-wider mb-1">Date du Test</div>
                    <div class="text-3xl font-bold text-gray-900">30 Oct</div>
                    <div class="text-gray-600 font-medium">1961</div>
                </div>
                <div class="section-card p-6 text-center hover:scale-[1.02] transition-transform">
                    <div class="text-gray-500 text-sm uppercase tracking-wider mb-1">Lieu</div>
                    <div class="text-2xl font-bold text-gray-900">Novaya</div>
                    <div class="text-gray-600 font-medium">Zemlya</div>
                </div>
                <div class="section-card p-6 text-center col-span-2 bg-gradient-to-r from-gray-900 to-gray-800 text-white">
                    <div class="text-gray-400 text-sm uppercase tracking-wider mb-1">Puissance Totale</div>
                    <div class="text-4xl md:text-5xl font-bold text-white">50 Mt</div>
                    <div class="text-gray-300 font-medium mt-1">50 M√©gatonnes de TNT</div>
                    <div class="text-xs text-gray-400 mt-2 italic">1 570x la puissance de Hiroshima et Nagasaki r√©unies</div>
                </div>
            </div>
        </section>

        <!-- Section 2: Comparative Analysis (Charts) -->
        <section id="comparison" class="bg-white rounded-2xl shadow-sm border border-gray-100 p-6 md:p-8">
            <div class="mb-8">
                <h2 class="text-2xl font-bold text-gray-900 mb-2">Analyse Comparative des Donn√©es</h2>
                <p class="text-gray-600">
                    Visualiser l'√©cart technologique et destructeur entre le d√©but et l'apog√©e de l'√®re nucl√©aire. Ces graphiques comparent directement la puissance (rendement) et l'impact atmosph√©rique.
                </p>
            </div>

            <!-- Controls -->
            <div class="flex justify-center space-x-4 mb-8">
                <button id="btn-yield" class="interactive-btn active px-6 py-2 rounded-full border border-gray-300 text-sm font-semibold" onclick="updateChartDisplay('yield')">
                    üí• Comparaison de Puissance (TNT)
                </button>
                <button id="btn-height" class="interactive-btn px-6 py-2 rounded-full border border-gray-300 text-sm font-semibold" onclick="updateChartDisplay('height')">
                    ‚òÅÔ∏è Altitude du Champignon
                </button>
            </div>

            <!-- Chart Container -->
            <div class="w-full flex flex-col items-center">
                <div class="chart-container">
                    <canvas id="comparisonChart"></canvas>
                </div>
                <div id="chart-description" class="mt-6 text-center text-sm text-gray-500 max-w-2xl mx-auto p-4 bg-gray-50 rounded-lg">
                    <!-- Dynamic Text will appear here -->
                </div>
            </div>
        </section>

        <!-- Section 3: Blast Simulation (Canvas) -->
        <section id="simulation" class="space-y-6">
            <div class="text-center max-w-3xl mx-auto">
                <h2 class="text-2xl font-bold text-gray-900">Simulateur de Rayon d'Impact</h2>
                <p class="text-gray-600 mt-2">
                    Cette simulation visualise les zones de destruction th√©oriques si les bombes explosaient au point z√©ro. 
                    Observez comment la zone de "destruction totale" de la Tsar Bomba engloutit des r√©gions enti√®res par rapport √† Little Boy.
                </p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Controls Panel -->
                <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100 flex flex-col justify-center space-y-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-3">S√©lectionner l'Engin</label>
                        <div class="grid grid-cols-2 gap-2">
                            <button id="sim-littleboy" onclick="setSimulation('littleboy')" class="px-4 py-3 border-2 border-gray-200 rounded-lg text-sm font-semibold hover:border-gray-400 focus:border-blue-500 focus:outline-none transition-colors text-left">
                                <div class="font-bold text-gray-900">Little Boy</div>
                                <div class="text-xs text-gray-500">15 Kilotonnes</div>
                            </button>
                            <button id="sim-tsar" onclick="setSimulation('tsar')" class="px-4 py-3 border-2 border-red-500 bg-red-50 rounded-lg text-sm font-semibold text-left ring-2 ring-red-200">
                                <div class="font-bold text-gray-900">Tsar Bomba</div>
                                <div class="text-xs text-gray-500">50 M√©gatonnes</div>
                            </button>
                        </div>
                    </div>

                    <div id="sim-stats" class="space-y-4">
                        <!-- Stats injected via JS -->
                    </div>

                    <div class="bg-yellow-50 p-4 rounded-lg border border-yellow-100">
                        <h4 class="text-xs font-bold text-yellow-800 uppercase tracking-wide mb-2">L√©gende des Zones</h4>
                        <ul class="space-y-2 text-xs text-yellow-900">
                            <li class="flex items-center"><span class="w-3 h-3 rounded-full bg-gray-900 mr-2"></span> Boule de feu (Vaporisation)</li>
                            <li class="flex items-center"><span class="w-3 h-3 rounded-full bg-red-500 mr-2"></span> Destruction Lourde (20 psi)</li>
                            <li class="flex items-center"><span class="w-3 h-3 rounded-full bg-orange-400 mr-2"></span> Rayonnement Thermique (3e degr√©)</li>
                        </ul>
                    </div>
                </div>

                <!-- Canvas Visualizer -->
                <div class="lg:col-span-2 bg-gray-900 rounded-xl overflow-hidden relative shadow-inner" style="height: 500px;">
                    <canvas id="blastCanvas" class="w-full h-full block"></canvas>
                    
                    <!-- Scale Indicator Overlay -->
                    <div class="absolute bottom-4 right-4 bg-black/60 text-white text-xs px-3 py-1 rounded backdrop-blur-sm">
                        √âchelle : 1 Pixel ‚âà <span id="scale-indicator">100</span> m√®tres
                    </div>
                    
                    <!-- City Reference Overlay (Conceptual) -->
                    <div class="absolute top-4 left-4 text-white/50 text-xs pointer-events-none">
                        *Cercles concentriques th√©oriques sur terrain plat
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 4: Timeline -->
        <section class="bg-white rounded-2xl shadow-sm border border-gray-100 p-8">
             <h2 class="text-2xl font-bold text-gray-900 mb-6">Chronologie du 30 Octobre 1961</h2>
             <div class="relative border-l-2 border-gray-200 ml-3 space-y-8">
                
                <div class="relative pl-8 group cursor-pointer" onclick="highlightTimeline(this)">
                    <div class="absolute -left-[9px] top-0 w-4 h-4 rounded-full bg-gray-300 group-hover:bg-blue-500 transition-colors border-2 border-white"></div>
                    <div class="text-sm text-gray-500 font-mono mb-1">11:32 (Heure de Moscou)</div>
                    <h3 class="text-lg font-bold text-gray-900">Largage</h3>
                    <p class="text-gray-600 text-sm mt-1">Le Tu-95V largue la bombe de 27 tonnes √† une altitude de 10 500 m√®tres. Un parachute g√©ant de 800 kg se d√©ploie pour ralentir la chute et laisser le temps √† l'√©quipage de fuir.</p>
                </div>

                <div class="relative pl-8 group cursor-pointer" onclick="highlightTimeline(this)">
                    <div class="absolute -left-[9px] top-0 w-4 h-4 rounded-full bg-gray-300 group-hover:bg-red-500 transition-colors border-2 border-white"></div>
                    <div class="text-sm text-gray-500 font-mono mb-1">T + 188 secondes</div>
                    <h3 class="text-lg font-bold text-gray-900">D√©tonation</h3>
                    <p class="text-gray-600 text-sm mt-1">√Ä 4 000 m√®tres d'altitude, la bombe explose. La boule de feu atteint instantan√©ment 8 km de diam√®tre, touchant le sol malgr√© l'altitude.</p>
                </div>

                <div class="relative pl-8 group cursor-pointer" onclick="highlightTimeline(this)">
                    <div class="absolute -left-[9px] top-0 w-4 h-4 rounded-full bg-gray-300 group-hover:bg-orange-500 transition-colors border-2 border-white"></div>
                    <div class="text-sm text-gray-500 font-mono mb-1">Cons√©quences Imm√©diates</div>
                    <h3 class="text-lg font-bold text-gray-900">L'Onde de Choc</h3>
                    <p class="text-gray-600 text-sm mt-1">L'√©clair est visible √† 1 000 km. L'onde de choc fait le tour de la Terre trois fois. Le village de Severny (55 km) est totalement ras√©.</p>
                </div>

             </div>
        </section>

        <!-- Footer -->
        <footer class="text-center text-gray-500 text-sm py-8 border-t border-gray-200 mt-12">
            <p>¬© Analyse Interactive Tsar-e-Bomba. Donn√©es bas√©es sur les archives historiques.</p>
            <p class="mt-2 text-xs">Ce projet est une visualisation √©ducative.</p>
        </footer>

    </main>

    <!-- JavaScript Application Logic -->
    <script>
        // --- State Management ---
        const appState = {
            activeChart: 'yield', // 'yield' or 'height'
            activeSimulation: 'tsar', // 'littleboy' or 'tsar'
            charts: {},
            canvasContext: null
        };

        // --- Data Store ---
        const bombData = {
            littleboy: {
                name: "Little Boy",
                yield: 15, // kt
                weight: 4400, // kg
                fireballRadius: 180, // meters (approx)
                heavyBlastRadius: 340, // meters (20psi)
                thermalRadius: 1910, // meters (3rd degree burns)
                color: '#3B82F6',
                description: "La bombe d'Hiroshima. Une puissance d√©vastatrice pour une ville, mais une '√©tincelle' compar√©e √† la bombe H."
            },
            tsar: {
                name: "Tsar Bomba",
                yield: 50000, // kt
                weight: 27000, // kg
                fireballRadius: 4600, // meters
                heavyBlastRadius: 35000, // meters (approx for high destruction zone, heavily variable based on altitude)
                // Note: Real Tsar bomba thermal radius was ~100km, but for canvas scaling we use effective visual scale
                thermalRadius: 60000, // meters
                color: '#EF4444',
                description: "La Tsar Bomba. Sa boule de feu seule (4.6km) √©tait plus grande que toute la zone de destruction de Little Boy."
            }
        };

        // --- Initialization ---
        document.addEventListener('DOMContentLoaded', () => {
            initComparisonChart();
            initBlastSimulation();
            setSimulation('tsar'); // Default view
        });

        // --- Navigation ---
        function scrollToSection(id) {
            document.getElementById(id).scrollIntoView({ behavior: 'smooth' });
        }

        // --- Chart Logic (Chart.js) ---
        function initComparisonChart() {
            const ctx = document.getElementById('comparisonChart').getContext('2d');
            
            // Initial Data: Yield (Logarithmic is best for this massive difference)
            appState.charts.comparison = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Little Boy (1945)', 'Tsar Bomba (1961)'],
                    datasets: [{
                        label: 'Puissance (Kilotonnes de TNT)',
                        data: [15, 50000],
                        backgroundColor: ['#93C5FD', '#FCA5A5'],
                        borderColor: ['#3B82F6', '#EF4444'],
                        borderWidth: 2,
                        borderRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y', // Horizontal bars for better length comparison
                    scales: {
                        x: {
                            type: 'logarithmic', // Critical for 15 vs 50000
                            title: { display: true, text: 'Puissance en Kilotonnes (√âchelle Logarithmique)' },
                            grid: { color: '#E5E7EB' }
                        },
                        y: {
                            grid: { display: false }
                        }
                    },
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.raw.toLocaleString() + ' kt de TNT';
                                }
                            }
                        }
                    }
                }
            });
            updateChartText('yield');
        }

        function updateChartDisplay(type) {
            const chart = appState.charts.comparison;
            appState.activeChart = type;

            // Update Buttons style
            document.getElementById('btn-yield').className = `interactive-btn px-6 py-2 rounded-full border border-gray-300 text-sm font-semibold ${type === 'yield' ? 'active' : 'bg-white text-gray-600'}`;
            document.getElementById('btn-height').className = `interactive-btn px-6 py-2 rounded-full border border-gray-300 text-sm font-semibold ${type === 'height' ? 'active' : 'bg-white text-gray-600'}`;

            if (type === 'yield') {
                chart.data.datasets[0].label = 'Puissance (Kilotonnes)';
                chart.data.datasets[0].data = [15, 50000];
                chart.options.scales.x.type = 'logarithmic';
                chart.options.scales.x.title.text = 'Puissance en Kilotonnes (√âchelle Logarithmique)';
                chart.update();
            } else {
                // Cloud Height Comparison
                chart.data.datasets[0].label = 'Hauteur du Champignon (km)';
                chart.data.datasets[0].data = [18, 64]; // Approx heights
                // Add Everest for context? Hard with current label structure, keeping simple
                chart.options.scales.x.type = 'linear';
                chart.options.scales.x.title.text = 'Altitude en Kilom√®tres';
                chart.update();
            }
            updateChartText(type);
        }

        function updateChartText(type) {
            const el = document.getElementById('chart-description');
            if (type === 'yield') {
                el.innerHTML = "<strong>Note :</strong> L'√©chelle logarithmique est utilis√©e car la Tsar Bomba est <span class='text-red-600 font-bold'>3 300 fois</span> plus puissante que Little Boy. Sur une √©chelle lin√©aire standard, la barre de Little Boy serait invisible.";
            } else {
                el.innerHTML = "<strong>Contexte :</strong> Le champignon de la Tsar Bomba a atteint 64 km d'altitude, per√ßant la stratosph√®re et la m√©sosph√®re. C'est plus de <strong>7 fois la hauteur du mont Everest</strong> (8.8 km).";
            }
        }

        // --- Blast Simulation Logic (Canvas) ---
        function initBlastSimulation() {
            const canvas = document.getElementById('blastCanvas');
            // Set canvas resolution matches display size
            canvas.width = canvas.parentElement.offsetWidth;
            canvas.height = canvas.parentElement.offsetHeight;
            
            // Resize listener
            window.addEventListener('resize', () => {
                canvas.width = canvas.parentElement.offsetWidth;
                canvas.height = canvas.parentElement.offsetHeight;
                drawBlast(appState.activeSimulation);
            });
        }

        function setSimulation(bombKey) {
            appState.activeSimulation = bombKey;
            
            // Update UI buttons
            const isTsar = bombKey === 'tsar';
            document.getElementById('sim-tsar').className = isTsar 
                ? "px-4 py-3 border-2 border-red-500 bg-red-50 rounded-lg text-sm font-semibold text-left ring-2 ring-red-200 transition-all"
                : "px-4 py-3 border-2 border-gray-200 rounded-lg text-sm font-semibold hover:border-gray-400 text-left transition-all";
                
            document.getElementById('sim-littleboy').className = !isTsar 
                ? "px-4 py-3 border-2 border-blue-500 bg-blue-50 rounded-lg text-sm font-semibold text-left ring-2 ring-blue-200 transition-all"
                : "px-4 py-3 border-2 border-gray-200 rounded-lg text-sm font-semibold hover:border-gray-400 text-left transition-all";

            // Update Stats Text
            const data = bombData[bombKey];
            const statsHtml = `
                <div class="border-t border-gray-100 pt-4">
                    <h3 class="font-bold text-gray-900 mb-2">${data.name}</h3>
                    <p class="text-sm text-gray-600 mb-4">${data.description}</p>
                    <div class="grid grid-cols-2 gap-4 text-sm">
                        <div>
                            <span class="block text-xs text-gray-500">Rayon Boule de Feu</span>
                            <span class="font-mono font-bold">${data.fireballRadius.toLocaleString()} m</span>
                        </div>
                        <div>
                            <span class="block text-xs text-gray-500">Rayon Thermique</span>
                            <span class="font-mono font-bold">${(data.thermalRadius/1000).toFixed(1)} km</span>
                        </div>
                    </div>
                </div>
            `;
            document.getElementById('sim-stats').innerHTML = statsHtml;

            drawBlast(bombKey);
        }

        function drawBlast(bombKey) {
            const canvas = document.getElementById('blastCanvas');
            const ctx = canvas.getContext('2d');
            const w = canvas.width;
            const h = canvas.height;
            const center = { x: w / 2, y: h / 2 };
            const data = bombData[bombKey];

            // Clear
            ctx.clearRect(0, 0, w, h);

            // Determine Scale
            // We want the Thermal Radius to fit within the canvas (approx 90% of smallest dimension)
            // But we need a consistent scale to show the massive difference? 
            // If we keep scale constant, Little Boy is a dot.
            // Let's use a "Zoom" approach. We calculate pixels per meter based on the CURRENT bomb to fill the view.
            
            // To make it interesting, we will use a "Base Scale" for Tsar Bomba, and Zoom in for Little Boy?
            // No, user wants to see them clearly. Let's fit the active bomb to the screen, but update the "Scale Indicator".
            
            const padding = 40;
            const maxRadiusToFit = data.thermalRadius; // The largest circle
            const minCanvasDim = Math.min(w, h);
            
            // pixels = meters * scaleFactor
            // maxRadiusToFit * scaleFactor = (minCanvasDim / 2) - padding
            const scaleFactor = ((minCanvasDim / 2) - padding) / maxRadiusToFit;

            document.getElementById('scale-indicator').innerText = (1 / scaleFactor).toFixed(1);

            // Draw Background Grid (Radar style)
            ctx.strokeStyle = '#374151'; // gray-700
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(center.x, 0); ctx.lineTo(center.x, h);
            ctx.moveTo(0, center.y); ctx.lineTo(w, center.y);
            ctx.stroke();

            // Helper for circle drawing
            function drawCircle(radiusMeters, color, fill = true) {
                const r = radiusMeters * scaleFactor;
                ctx.beginPath();
                ctx.arc(center.x, center.y, r, 0, 2 * Math.PI);
                if (fill) {
                    ctx.fillStyle = color;
                    ctx.fill();
                } else {
                    ctx.strokeStyle = color;
                    ctx.lineWidth = 2;
                    ctx.stroke();
                }
            }

            // 1. Thermal Radiation (Largest) - Orange
            drawCircle(data.thermalRadius, 'rgba(251, 146, 60, 0.2)'); // Orange-400 low opacity
            ctx.strokeStyle = '#FB923C'; ctx.stroke(); // Border

            // 2. Heavy Blast (20 psi) - Red
            drawCircle(data.heavyBlastRadius, 'rgba(239, 68, 68, 0.3)'); // Red-500 low opacity
            ctx.strokeStyle = '#EF4444'; ctx.stroke();

            // 3. Fireball - Black/Yellow
            drawCircle(data.fireballRadius, 'rgba(0, 0, 0, 0.8)'); 
            
            // Labels
            ctx.fillStyle = 'white';
            ctx.font = '10px Inter';
            ctx.textAlign = 'center';
            ctx.fillText("Boule de Feu", center.x, center.y - (data.fireballRadius * scaleFactor) - 5);
            
            ctx.fillStyle = '#FB923C';
            ctx.fillText("Rayonnement Thermique", center.x, center.y + (data.thermalRadius * scaleFactor) - 10);
        }

        // Timeline Interaction
        function highlightTimeline(el) {
            // Reset all
            document.querySelectorAll('.border-l-2 > div > div:first-child').forEach(dot => {
                dot.classList.remove('bg-gray-800');
                dot.classList.add('bg-gray-300');
            });
            // Highlight clicked
            const dot = el.querySelector('div:first-child');
            dot.classList.remove('bg-gray-300');
            dot.classList.add('bg-gray-800');
        }

    </script>
</body>
</html>
