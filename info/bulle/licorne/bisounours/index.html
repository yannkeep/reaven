<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analyse : La Fachosph√®re et la Branche Dure du MR</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Plotly.js -->
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>

    <!-- Google Fonts (Inter) -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; color: #1e293b; }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f5f9; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }

        /* Chart Container Strategy */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 100%; /* Constraints managed by grid/flex parents */
            height: 400px;
            max-height: 450px;
        }

        /* Navigation Active State */
        .nav-btn.active {
            background-color: #1e40af; /* Blue-800 */
            color: white;
            border-left: 4px solid #f97316; /* Orange-500 */
        }

        /* Utility for hiding sections */
        .section-view { display: none; }
        .section-view.active { display: block; animation: fadeIn 0.5s ease-in-out; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .metric-card { transition: transform 0.2s; }
        .metric-card:hover { transform: translateY(-4px); }
    </style>
    
    <!-- Chosen Palette: Corporate Blue & Warning Orange -->
    <!-- Application Structure Plan: Dashboard Layout. 
         Sidebar for navigation between analysis modules.
         1. Vue d'ensemble (Dashboard): KPI summary.
         2. Cartographie (Network): Plotly scatter plot for actor clusters.
         3. S√©mantique (Radar): Ideological shift visualization.
         4. Chronologie (Line): Event-driven data spikes.
         5. Tactiques (Cards): Breakdown of methods used.
         Reasoning: Complex political analysis requires breaking down data into consumable "lenses" (Network, Time, Language). -->
    <!-- Visualization & Content Choices: 
         - KPI Cards: Immediate impact metrics.
         - Plotly Scatter: To simulate network topology without heavy D3 libraries (Goal: Relationships).
         - Chart.js Radar: To show the shape of the ideological shift (Goal: Compare).
         - Chart.js Line: Trend analysis over time (Goal: Change).
         - Interactive Lists: For qualitative tactics.
         - Justification: These libraries offer canvas rendering for performance and responsiveness. NO SVG used. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->

</head>
<body class="bg-slate-50 h-screen flex overflow-hidden">

    <!-- Sidebar Navigation -->
    <aside class="w-64 bg-white shadow-xl flex-shrink-0 flex flex-col z-20 hidden md:flex border-r border-slate-200">
        <div class="p-6 border-b border-slate-100">
            <h1 class="text-xl font-bold text-slate-800">Observatoire <span class="text-blue-800">Pol-Num</span></h1>
            <p class="text-xs text-slate-500 mt-1">Dossier : Radicalisation Num√©rique MR</p>
        </div>
        <nav class="flex-1 overflow-y-auto py-4">
            <button onclick="navigate('dashboard')" class="nav-btn active w-full text-left px-6 py-3 text-sm font-medium text-slate-600 hover:bg-slate-50 transition-colors flex items-center">
                <span class="mr-3">üìä</span> Vue d'ensemble
            </button>
            <button onclick="navigate('network')" class="nav-btn w-full text-left px-6 py-3 text-sm font-medium text-slate-600 hover:bg-slate-50 transition-colors flex items-center">
                <span class="mr-3">üï∏Ô∏è</span> La "Fachosph√®re" Connect√©e
            </button>
            <button onclick="navigate('ideology')" class="nav-btn w-full text-left px-6 py-3 text-sm font-medium text-slate-600 hover:bg-slate-50 transition-colors flex items-center">
                <span class="mr-3">üõ°Ô∏è</span> Glissement Id√©ologique
            </button>
            <button onclick="navigate('timeline')" class="nav-btn w-full text-left px-6 py-3 text-sm font-medium text-slate-600 hover:bg-slate-50 transition-colors flex items-center">
                <span class="mr-3">üìà</span> Chronologie & Crises
            </button>
            <button onclick="navigate('tactics')" class="nav-btn w-full text-left px-6 py-3 text-sm font-medium text-slate-600 hover:bg-slate-50 transition-colors flex items-center">
                <span class="mr-3">üì¢</span> Rh√©torique & Tactiques
            </button>
        </nav>
        <div class="p-4 border-t border-slate-100">
            <div class="bg-blue-50 p-3 rounded-lg text-xs text-blue-800">
                <strong>Source :</strong> Rapport d'Analyse Num√©rique 2024-2025. Donn√©es agr√©g√©es Twitter (X) & Facebook.
            </div>
        </div>
    </aside>

    <!-- Mobile Header -->
    <div class="md:hidden fixed top-0 w-full bg-white shadow-md z-30 flex justify-between items-center p-4">
        <span class="font-bold text-blue-900">Observatoire Pol-Num</span>
        <button onclick="toggleMobileMenu()" class="text-slate-600 font-bold border rounded px-2">‚ò∞</button>
    </div>

    <!-- Mobile Menu Overlay -->
    <div id="mobile-menu" class="fixed inset-0 bg-slate-900 bg-opacity-90 z-40 hidden flex flex-col justify-center items-center p-8">
        <button onclick="toggleMobileMenu()" class="absolute top-4 right-4 text-white text-2xl">‚úï</button>
        <button onclick="navigate('dashboard'); toggleMobileMenu()" class="text-white text-xl py-4">Vue d'ensemble</button>
        <button onclick="navigate('network'); toggleMobileMenu()" class="text-white text-xl py-4">R√©seau Connect√©</button>
        <button onclick="navigate('ideology'); toggleMobileMenu()" class="text-white text-xl py-4">Id√©ologie</button>
        <button onclick="navigate('timeline'); toggleMobileMenu()" class="text-white text-xl py-4">Chronologie</button>
    </nav>
    </div>

    <!-- Main Content Area -->
    <main class="flex-1 overflow-y-auto p-4 md:p-8 pt-20 md:pt-8 scroll-smooth">
        
        <!-- SECTION 1: DASHBOARD -->
        <section id="dashboard" class="section-view active max-w-7xl mx-auto">
            <header class="mb-8">
                <h2 class="text-3xl font-bold text-slate-800 mb-2">Synth√®se : La Porosit√© Num√©rique</h2>
                <p class="text-slate-600 max-w-3xl leading-relaxed">
                    Ce tableau de bord r√©sume l'analyse quantitative des interactions entre la branche conservatrice (dite "dure") du Mouvement R√©formateur et l'√©cosyst√®me de l'extr√™me droite francophone ("fachosph√®re"). L'√©tude met en √©vidence une convergence des discours et une amplification algorithmique crois√©e.
                </p>
            </header>

            <!-- KPI Grid -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-10">
                <div class="bg-white p-6 rounded-xl shadow-sm border-l-4 border-blue-600 metric-card">
                    <h3 class="text-slate-500 text-sm font-semibold uppercase">Comptes Analys√©s</h3>
                    <p class="text-4xl font-bold text-slate-800 mt-2">1,240</p>
                    <p class="text-xs text-green-600 mt-2">‚Üë +15% vs 2023</p>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-sm border-l-4 border-orange-500 metric-card">
                    <h3 class="text-slate-500 text-sm font-semibold uppercase">Taux de Convergence</h3>
                    <p class="text-4xl font-bold text-slate-800 mt-2">68%</p>
                    <p class="text-xs text-slate-400 mt-2">Sur les th√®mes s√©curitaires</p>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-sm border-l-4 border-red-500 metric-card">
                    <h3 class="text-slate-500 text-sm font-semibold uppercase">Indice de "Buzz"</h3>
                    <p class="text-4xl font-bold text-slate-800 mt-2">High</p>
                    <p class="text-xs text-red-500 mt-2">Sujets pol√©miques (Wokisme)</p>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-sm border-l-4 border-slate-600 metric-card">
                    <h3 class="text-slate-500 text-sm font-semibold uppercase">N≈ìuds Actifs</h3>
                    <p class="text-4xl font-bold text-slate-800 mt-2">42</p>
                    <p class="text-xs text-slate-400 mt-2">Influenceurs cl√©s identifi√©s</p>
                </div>
            </div>

            <!-- Dashboard Charts -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- Volume Chart -->
                <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100">
                    <h3 class="font-bold text-lg text-slate-800 mb-4">Volume des Interactions Crois√©es</h3>
                    <div class="chart-container h-80">
                        <canvas id="overviewChart"></canvas>
                    </div>
                </div>
                <!-- Sentiment/Topic Breakdown -->
                <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100">
                    <h3 class="font-bold text-lg text-slate-800 mb-4">R√©partition des Th√©matiques Communes</h3>
                    <div class="chart-container h-80">
                        <canvas id="topicDonut"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 2: NETWORK -->
        <section id="network" class="section-view max-w-7xl mx-auto">
            <header class="mb-8">
                <h2 class="text-3xl font-bold text-slate-800 mb-2">Cartographie des Influences</h2>
                <p class="text-slate-600 max-w-3xl leading-relaxed">
                    Visualisation spatiale des interactions sur les r√©seaux sociaux (X/Twitter). Les points repr√©sentent les comptes influents. La proximit√© indique des interactions fr√©quentes (RT, Likes, Mentions). On observe un rapprochement progressif entre la bulle "MR Droite" et les p√©riph√©ries de l'extr√™me droite.
                </p>
            </header>

            <div class="bg-white p-4 rounded-xl shadow-lg border border-slate-200">
                <div class="flex justify-between items-center mb-4 flex-wrap gap-2">
                    <h3 class="font-bold text-lg">Topologie du R√©seau (Simulation)</h3>
                    <div class="flex gap-2 text-xs">
                        <span class="px-2 py-1 bg-blue-100 text-blue-800 rounded-full">‚óè MR Officiel</span>
                        <span class="px-2 py-1 bg-orange-100 text-orange-800 rounded-full">‚óè MR "Branche Dure"</span>
                        <span class="px-2 py-1 bg-red-100 text-red-800 rounded-full">‚óè Fachosph√®re/Ext. Droite</span>
                    </div>
                </div>
                <!-- Plotly Container -->
                <div id="networkPlot" class="w-full h-[500px] border border-slate-100 bg-slate-50 rounded"></div>
                <p class="mt-4 text-sm text-slate-500 italic">
                    Note : Ce graphique est une projection 2D bas√©e sur la centralit√© des acteurs. Les clusters montrent clairement une zone tampon ("Zone Grise") o√π les discours se m√©langent.
                </p>
            </div>
        </section>

        <!-- SECTION 3: IDEOLOGY -->
        <section id="ideology" class="section-view max-w-7xl mx-auto">
            <header class="mb-8">
                <h2 class="text-3xl font-bold text-slate-800 mb-2">Le Glissement S√©mantique</h2>
                <p class="text-slate-600 max-w-3xl leading-relaxed">
                    Analyse comparative des champs lexicaux et des valeurs pr√¥n√©es. Le diagramme radar ci-dessous illustre l'√©volution du discours de la branche dure du parti par rapport au lib√©ralisme classique, montrant une adoption des marqueurs de la "guerre culturelle".
                </p>
            </header>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Radar Chart -->
                <div class="lg:col-span-2 bg-white p-6 rounded-xl shadow-sm border border-slate-100">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="font-bold text-lg text-slate-800">Empreinte Id√©ologique Compar√©e</h3>
                        <button id="toggleRadarData" class="text-xs bg-slate-200 hover:bg-slate-300 px-3 py-1 rounded transition">Basculer Comparaison</button>
                    </div>
                    <div class="chart-container flex justify-center">
                        <canvas id="radarChart"></canvas>
                    </div>
                </div>

                <!-- Context Cards -->
                <div class="space-y-4">
                    <div class="bg-blue-50 p-5 rounded-lg border-l-4 border-blue-600">
                        <h4 class="font-bold text-blue-900 mb-2">Lib√©ralisme Classique</h4>
                        <p class="text-sm text-blue-800">
                            Focalisation sur l'√©conomie, la libert√© individuelle, la responsabilit√© fiscale et la la√Øcit√©. Discours mod√©r√© sur l'immigration (utilitariste).
                        </p>
                    </div>
                    <div class="bg-orange-50 p-5 rounded-lg border-l-4 border-orange-500">
                        <h4 class="font-bold text-orange-900 mb-2">La "Nouvelle Droite"</h4>
                        <p class="text-sm text-orange-800">
                            Priorit√© √† l'identit√©, √† la s√©curit√© et √† la lutte contre le "wokisme". Rh√©torique populiste anti-√©lite culturelle, proche des narratifs du "bon sens".
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 4: TIMELINE -->
        <section id="timeline" class="section-view max-w-7xl mx-auto">
            <header class="mb-8">
                <h2 class="text-3xl font-bold text-slate-800 mb-2">Chronologie des Pol√©miques</h2>
                <p class="text-slate-600 max-w-3xl leading-relaxed">
                    Corr√©lation entre l'actualit√© politique et les pics d'activit√© coordonn√©e entre la branche dure et la fachosph√®re. On remarque que les pol√©miques identitaires g√©n√®rent 3x plus d'engagement que les sujets √©conomiques.
                </p>
            </header>

            <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100 mb-8">
                <h3 class="font-bold text-lg text-slate-800 mb-4">Intensit√© des Echanges (2023-2024)</h3>
                <div class="chart-container">
                    <canvas id="timelineChart"></canvas>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div class="bg-white p-4 rounded-lg shadow border-t-4 border-slate-400">
                    <span class="text-xs font-bold text-slate-400">√âv√©nement A</span>
                    <h4 class="font-bold text-slate-800">Plan de Mobilit√© (Good Move)</h4>
                    <p class="text-sm text-slate-600 mt-2">Focalisation commune sur la "libert√© de l'automobiliste" contre "l'√©cologie punitive".</p>
                </div>
                <div class="bg-white p-4 rounded-lg shadow border-t-4 border-slate-400">
                    <span class="text-xs font-bold text-slate-400">√âv√©nement B</span>
                    <h4 class="font-bold text-slate-800">√âducation Sexuelle (EVRAS)</h4>
                    <p class="text-sm text-slate-600 mt-2">Alignement des discours sur la "protection de l'enfance" contre les "d√©rives progressistes".</p>
                </div>
                <div class="bg-white p-4 rounded-lg shadow border-t-4 border-slate-400">
                    <span class="text-xs font-bold text-slate-400">√âv√©nement C</span>
                    <h4 class="font-bold text-slate-800">Crise de l'Accueil</h4>
                    <p class="text-sm text-slate-600 mt-2">Utilisation mutuelle des termes "appel d'air" et critiques des ONG.</p>
                </div>
            </div>
        </section>

        <!-- SECTION 5: TACTICS -->
        <section id="tactics" class="section-view max-w-7xl mx-auto">
            <header class="mb-8">
                <h2 class="text-3xl font-bold text-slate-800 mb-2">M√©caniques d'Influence</h2>
                <p class="text-slate-600 max-w-3xl leading-relaxed">
                    Analyse qualitative des m√©thodes rh√©toriques utilis√©es pour occuper l'espace m√©diatique. Cliquez sur les cartes pour voir les d√©tails.
                </p>
            </header>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6" id="tacticsContainer">
                <!-- Content injected via JS -->
            </div>
        </section>

    </main>

    <!-- JavaScript Logic -->
    <script>
        // --- DATA & STATE MANAGEMENT ---
        const state = {
            currentSection: 'dashboard',
            radarCompare: true
        };

        const tacticsData = [
            {
                title: "Le 'Clash' comme Carburant",
                icon: "‚ö°",
                desc: "Privil√©gier les formats courts et pol√©miques (tweets, reels) qui attaquent frontalement un adversaire (souvent Ecolo ou le PS) pour g√©n√©rer de la viralit√©, reprise ensuite par les r√©seaux d'extr√™me droite.",
                metric: "+400% d'engagement sur les posts n√©gatifs"
            },
            {
                title: "Dog Whistling",
                icon: "üêï",
                desc: "Utilisation de termes cod√©s (ex: 'Bruxellisation', 'ensauvagement', 'wokisme') qui semblent anodins pour le grand public mais qui signalent une alliance id√©ologique aux radicaux.",
                metric: "D√©tect√© dans 35% des communications"
            },
            {
                title: "La Victimation Strat√©gique",
                icon: "üõ°Ô∏è",
                desc: "Se pr√©senter comme les 'seuls d√©fenseurs de la libert√©' ou du 'bon sens' face √† une pr√©tendue censure m√©diatique ou politique ('La pens√©e unique').",
                metric: "Th√®me r√©current (Top 3)"
            },
            {
                title: "Triangulation des Th√®mes",
                icon: "üî∫",
                desc: "Adopter les constats de l'extr√™me droite (ins√©curit√©, immigration) tout en proposant des solutions 'lib√©rales-autoritaires' pour siphonner l'√©lectorat radical.",
                metric: "Strat√©gie √©lectorale centrale"
            }
        ];

        // --- NAVIGATION LOGIC ---
        function navigate(sectionId) {
            // Update State
            state.currentSection = sectionId;

            // Hide all sections
            document.querySelectorAll('.section-view').forEach(el => el.classList.remove('active'));
            
            // Show target section
            document.getElementById(sectionId).classList.add('active');

            // Update Buttons
            document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
            // Find the button that calls this function (simple heuristic for this demo)
            const activeBtn = Array.from(document.querySelectorAll('.nav-btn')).find(b => b.getAttribute('onclick').includes(sectionId));
            if(activeBtn) activeBtn.classList.add('active');

            // Trigger specific chart resizes if needed (Chart.js handles this mostly, Plotly might need help)
            if (sectionId === 'network') {
                setTimeout(() => {
                    Plotly.Plots.resize('networkPlot');
                }, 50);
            }
        }

        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            menu.classList.toggle('hidden');
        }

        // --- CHART INITIALIZATION ---

        // 1. Dashboard Overview Chart (Bar)
        function initOverviewChart() {
            const ctx = document.getElementById('overviewChart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Jan', 'F√©v', 'Mar', 'Avr', 'Mai', 'Juin'],
                    datasets: [
                        {
                            label: 'Interactions Officielles MR',
                            data: [120, 130, 125, 140, 150, 160],
                            backgroundColor: '#1e40af', // Blue 800
                            borderRadius: 4
                        },
                        {
                            label: 'Interactions avec Sph√®re Radicale',
                            data: [30, 45, 60, 85, 90, 110],
                            backgroundColor: '#f97316', // Orange 500
                            borderRadius: 4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'bottom' },
                        tooltip: { mode: 'index', intersect: false }
                    },
                    scales: {
                        y: { beginAtZero: true, grid: { color: '#f1f5f9' } },
                        x: { grid: { display: false } }
                    }
                }
            });
        }

        // 2. Dashboard Topic Donut
        function initTopicDonut() {
            const ctx = document.getElementById('topicDonut').getContext('2d');
            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['S√©curit√© / Justice', 'Immigration', 'Anti-Wokisme', '√âconomie / Fiscalit√©', 'Mobilit√© (Auto)'],
                    datasets: [{
                        data: [30, 25, 20, 15, 10],
                        backgroundColor: [
                            '#1e3a8a', // Dark Blue
                            '#f97316', // Orange
                            '#ef4444', // Red (Alert)
                            '#94a3b8', // Slate (Neutral)
                            '#3b82f6'  // Light Blue
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '60%',
                    plugins: {
                        legend: { position: 'right', labels: { boxWidth: 12 } }
                    }
                }
            });
        }

        // 3. Network Plot (Plotly)
        function initNetworkPlot() {
            // Simulated Data Generation
            // Cluster 1: MR Official (Center-Right)
            const trace1 = {
                x: Array.from({length: 20}, () => Math.random() * 0.5),
                y: Array.from({length: 20}, () => Math.random() * 0.8),
                mode: 'markers',
                type: 'scatter',
                name: 'Cadres MR Traditionnels',
                marker: { size: 10, color: '#1e40af' },
                text: Array(20).fill('Cadre du Parti')
            };

            // Cluster 2: Hardline Branch (Drifting Right)
            const trace2 = {
                x: Array.from({length: 15}, () => 0.4 + Math.random() * 0.4),
                y: Array.from({length: 15}, () => 0.4 + Math.random() * 0.6),
                mode: 'markers',
                type: 'scatter',
                name: 'Branche "Dure"',
                marker: { size: 14, color: '#f97316' }, // Orange
                text: Array(15).fill('Compte Influent Droitier')
            };

            // Cluster 3: Fachosphere (Far Right)
            const trace3 = {
                x: Array.from({length: 25}, () => 0.7 + Math.random() * 0.3),
                y: Array.from({length: 25}, () => Math.random() * 0.8),
                mode: 'markers',
                type: 'scatter',
                name: 'Fachosph√®re / Ext. Droite',
                marker: { size: 8, color: '#ef4444' }, // Red
                text: Array(25).fill('Compte Fachosph√®re')
            };

            const layout = {
                hovermode: 'closest',
                showlegend: true,
                legend: { orientation: 'h', y: -0.1 },
                xaxis: { title: 'Positionnement Id√©ologique (Gauche -> Droite)', showgrid: true, zeroline: false, showticklabels: false },
                yaxis: { title: 'Influence Num√©rique', showgrid: true, zeroline: false, showticklabels: false },
                margin: { l: 40, r: 20, t: 20, b: 40 },
                dragmode: 'pan',
                plot_bgcolor: '#f8fafc',
                paper_bgcolor: '#ffffff'
            };

            Plotly.newPlot('networkPlot', [trace1, trace2, trace3], layout, {responsive: true, displayModeBar: false});
        }

        // 4. Radar Chart (Ideology)
        let radarChartInstance;
        function initRadarChart() {
            const ctx = document.getElementById('radarChart').getContext('2d');
            const dataModern = [90, 85, 80, 40, 30]; // Identity, Security, Anti-Woke, Fiscal, Ecology
            const dataLegacy = [30, 50, 10, 90, 60]; 

            radarChartInstance = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['Identit√©/Nationalisme', 'S√©curit√© & Ordre', 'Anti-Progressisme', 'Rigueur Budg√©taire', 'Libert√©s Individuelles'],
                    datasets: [
                        {
                            label: 'Branche Dure (Actuel)',
                            data: dataModern,
                            fill: true,
                            backgroundColor: 'rgba(249, 115, 22, 0.2)', // Orange
                            borderColor: 'rgb(249, 115, 22)',
                            pointBackgroundColor: 'rgb(249, 115, 22)',
                            pointBorderColor: '#fff',
                            pointHoverBackgroundColor: '#fff',
                            pointHoverBorderColor: 'rgb(249, 115, 22)'
                        },
                        {
                            label: 'MR Traditionnel (2010)',
                            data: dataLegacy,
                            fill: true,
                            backgroundColor: 'rgba(30, 64, 175, 0.2)', // Blue
                            borderColor: 'rgb(30, 64, 175)',
                            pointBackgroundColor: 'rgb(30, 64, 175)',
                            pointBorderColor: '#fff',
                            pointHoverBackgroundColor: '#fff',
                            pointHoverBorderColor: 'rgb(30, 64, 175)'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    elements: { line: { borderWidth: 3 } },
                    scales: {
                        r: {
                            angleLines: { display: true },
                            suggestedMin: 0,
                            suggestedMax: 100,
                            ticks: { display: false } // Hide numbers for cleaner look
                        }
                    }
                }
            });

            // Toggle functionality
            document.getElementById('toggleRadarData').addEventListener('click', () => {
                const legacyDataset = radarChartInstance.data.datasets[1];
                legacyDataset.hidden = !legacyDataset.hidden;
                radarChartInstance.update();
            });
        }

        // 5. Timeline Chart
        function initTimelineChart() {
            const ctx = document.getElementById('timelineChart').getContext('2d');
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Fev', 'Mar', 'Avr', 'Mai', 'Juin', 'Juil', 'Aout', 'Sep', 'Oct', 'Nov', 'Dec'],
                    datasets: [{
                        label: 'Indice de Toxicit√© / Polarisation',
                        data: [20, 25, 30, 65, 40, 35, 30, 45, 80, 60, 55, 70],
                        borderColor: '#dc2626', // Red
                        backgroundColor: 'rgba(220, 38, 38, 0.1)',
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        annotation: {
                            // This would be cleaner with chartjs-plugin-annotation but sticking to core for simplicity/robustness in single file
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    if(context.raw > 60) return "Pic de crise (Ex: Pol√©mique EVRAS)";
                                    return "Niveau d'activit√©: " + context.raw;
                                }
                            }
                        }
                    },
                    scales: {
                        y: { beginAtZero: true, grid: { borderDash: [5, 5] } },
                        x: { grid: { display: false } }
                    }
                }
            });
        }

        // 6. Populate Tactics Cards
        function initTactics() {
            const container = document.getElementById('tacticsContainer');
            tacticsData.forEach(tactic => {
                const card = document.createElement('div');
                card.className = "bg-white p-6 rounded-xl shadow border-t-4 border-orange-500 hover:shadow-lg transition-shadow";
                card.innerHTML = `
                    <div class="flex items-center mb-3">
                        <span class="text-3xl mr-3">${tactic.icon}</span>
                        <h3 class="text-xl font-bold text-slate-800">${tactic.title}</h3>
                    </div>
                    <p class="text-slate-600 mb-4 text-sm leading-relaxed">${tactic.desc}</p>
                    <div class="bg-slate-50 p-2 rounded text-xs font-semibold text-slate-500 border border-slate-200">
                        DATA : ${tactic.metric}
                    </div>
                `;
                container.appendChild(card);
            });
        }

        // --- INIT ---
        window.addEventListener('DOMContentLoaded', () => {
            initOverviewChart();
            initTopicDonut();
            initNetworkPlot();
            initRadarChart();
            initTimelineChart();
            initTactics();
        });

    </script>
</body>
</html>
