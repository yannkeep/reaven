<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<meta name="theme-color" content="#0a0a0f">
<meta name="description" content="Casino Luna Park Cynico-Politico â€” RÃ©vise la dÃ©mocratie belge en jouant. ouaisfieu.">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<link rel="manifest" href="manifest.json">
<title>ğŸ° OUAISFIEU ARCADE â€” Casino Cynico-Politico</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=VT323&family=Orbitron:wght@400;700;900&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
<style>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ROOT & TOKENS
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
:root {
  --mint: #48bb78;
  --mint-glow: #48bb7888;
  --lilac: #9f7aea;
  --lilac-glow: #9f7aea88;
  --neon-pink: #ff2d75;
  --neon-yellow: #ffd700;
  --neon-cyan: #00f5ff;
  --neon-orange: #ff6b2b;
  --bg-deep: #0a0a0f;
  --bg-card: #13131f;
  --bg-card-hover: #1a1a2e;
  --text: #e8e8f0;
  --text-dim: #8888aa;
  --danger: #ef4444;
  --success: #22c55e;
  --font-pixel: 'Press Start 2P', monospace;
  --font-terminal: 'VT323', monospace;
  --font-orbit: 'Orbitron', sans-serif;
  --font-mono: 'Space Mono', monospace;
  --safe-top: env(safe-area-inset-top, 0px);
  --safe-bottom: env(safe-area-inset-bottom, 0px);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RESET & BASE
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html { font-size: 16px; -webkit-text-size-adjust: 100%; }
body {
  font-family: var(--font-terminal);
  background: var(--bg-deep);
  color: var(--text);
  min-height: 100dvh;
  overflow-x: hidden;
  padding-top: var(--safe-top);
  padding-bottom: var(--safe-bottom);
}

/* CRT Scanline overlay */
body::after {
  content: '';
  position: fixed;
  inset: 0;
  background: repeating-linear-gradient(
    0deg,
    transparent,
    transparent 2px,
    rgba(0,0,0,0.08) 2px,
    rgba(0,0,0,0.08) 4px
  );
  pointer-events: none;
  z-index: 9999;
}

/* Scrollbar */
::-webkit-scrollbar { width: 6px; }
::-webkit-scrollbar-track { background: var(--bg-deep); }
::-webkit-scrollbar-thumb { background: var(--lilac); border-radius: 3px; }

a { color: var(--neon-cyan); text-decoration: none; }
button {
  font-family: var(--font-terminal);
  cursor: pointer;
  border: none;
  outline: none;
  -webkit-tap-highlight-color: transparent;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ANIMATIONS
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
@keyframes neonPulse {
  0%, 100% { text-shadow: 0 0 7px var(--mint), 0 0 20px var(--mint-glow); }
  50% { text-shadow: 0 0 12px var(--mint), 0 0 35px var(--mint-glow), 0 0 60px var(--mint-glow); }
}
@keyframes glitch {
  0% { transform: translate(0); }
  20% { transform: translate(-2px, 2px); }
  40% { transform: translate(-2px, -2px); }
  60% { transform: translate(2px, 2px); }
  80% { transform: translate(2px, -2px); }
  100% { transform: translate(0); }
}
@keyframes slideUp {
  from { opacity: 0; transform: translateY(30px); }
  to { opacity: 1; transform: translateY(0); }
}
@keyframes spin { to { transform: rotate(360deg); } }
@keyframes jackpot {
  0%, 100% { transform: scale(1); filter: hue-rotate(0deg); }
  25% { transform: scale(1.05); filter: hue-rotate(90deg); }
  50% { transform: scale(1.1); filter: hue-rotate(180deg); }
  75% { transform: scale(1.05); filter: hue-rotate(270deg); }
}
@keyframes marquee {
  from { transform: translateX(100%); }
  to { transform: translateX(-100%); }
}
@keyframes float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-8px); }
}
@keyframes typewriter {
  from { width: 0; }
  to { width: 100%; }
}
@keyframes blink { 50% { opacity: 0; } }
@keyframes shake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-5px); }
  75% { transform: translateX(5px); }
}
@keyframes confetti-fall {
  0% { transform: translateY(-100vh) rotate(0deg); opacity: 1; }
  100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   HEADER / TOP BAR
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.top-bar {
  position: sticky;
  top: 0;
  z-index: 100;
  background: linear-gradient(180deg, #0a0a0fee 0%, #0a0a0fcc 100%);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border-bottom: 2px solid var(--lilac);
  padding: 8px 12px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.top-bar .logo {
  font-family: var(--font-pixel);
  font-size: 10px;
  color: var(--mint);
  animation: neonPulse 2s infinite;
  letter-spacing: 1px;
}
.top-bar .logo span { color: var(--lilac); }

.xp-bar-container {
  flex: 1;
  max-width: 140px;
  margin: 0 10px;
}
.xp-bar-label {
  font-family: var(--font-pixel);
  font-size: 7px;
  color: var(--neon-yellow);
  text-align: center;
  margin-bottom: 2px;
}
.xp-bar {
  height: 8px;
  background: #1a1a2e;
  border-radius: 4px;
  border: 1px solid var(--neon-yellow);
  overflow: hidden;
}
.xp-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--neon-yellow), var(--neon-orange));
  border-radius: 4px;
  transition: width 0.8s cubic-bezier(.4,0,.2,1);
  width: 0%;
}

.coin-display {
  display: flex;
  align-items: center;
  gap: 4px;
  font-family: var(--font-pixel);
  font-size: 10px;
  color: var(--neon-yellow);
}
.coin-display .coin-icon {
  width: 18px;
  height: 18px;
  background: radial-gradient(circle at 35% 35%, var(--neon-yellow), #b8860b);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 10px;
  color: #000;
  font-weight: bold;
  box-shadow: 0 0 8px var(--neon-yellow);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MARQUEE TICKER
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.ticker {
  background: var(--bg-card);
  border-bottom: 1px solid #333;
  overflow: hidden;
  white-space: nowrap;
  padding: 4px 0;
}
.ticker-content {
  display: inline-block;
  animation: marquee 45s linear infinite;
  font-family: var(--font-mono);
  font-size: 11px;
  color: var(--neon-cyan);
}
.ticker-content .sep { color: var(--neon-pink); margin: 0 16px; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SCREENS / NAVIGATION
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.screen {
  display: none;
  padding: 16px 12px 100px;
  animation: slideUp 0.4s ease;
  min-height: calc(100dvh - 120px);
}
.screen.active { display: block; }

/* Bottom nav */
.bottom-nav {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: 100;
  background: linear-gradient(0deg, #0a0a0fee 0%, #0a0a0fcc 100%);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border-top: 2px solid var(--mint);
  display: flex;
  justify-content: space-around;
  padding: 6px 4px calc(6px + var(--safe-bottom));
}
.nav-btn {
  background: none;
  color: var(--text-dim);
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2px;
  font-family: var(--font-pixel);
  font-size: 7px;
  padding: 4px 8px;
  transition: all 0.2s;
  position: relative;
}
.nav-btn .nav-icon { font-size: 20px; }
.nav-btn.active { color: var(--mint); }
.nav-btn.active::after {
  content: '';
  position: absolute;
  top: -2px;
  left: 50%;
  transform: translateX(-50%);
  width: 24px;
  height: 2px;
  background: var(--mint);
  box-shadow: 0 0 8px var(--mint);
}
.nav-btn:active { transform: scale(0.9); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   HOME SCREEN
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.hero-title {
  text-align: center;
  padding: 20px 0 10px;
}
.hero-title h1 {
  font-family: var(--font-pixel);
  font-size: 14px;
  color: var(--neon-pink);
  text-shadow: 0 0 20px var(--neon-pink), 0 0 40px #ff2d7544;
  line-height: 1.8;
  animation: neonPulse 3s infinite;
}
.hero-title h1 .accent { color: var(--neon-yellow); }
.hero-subtitle {
  font-family: var(--font-terminal);
  font-size: 18px;
  color: var(--text-dim);
  margin-top: 8px;
}

/* Game cards grid */
.game-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 12px;
  padding: 16px 0;
}
.game-card {
  background: var(--bg-card);
  border: 2px solid transparent;
  border-radius: 12px;
  padding: 16px 12px;
  text-align: center;
  transition: all 0.3s;
  position: relative;
  overflow: hidden;
  cursor: pointer;
}
.game-card::before {
  content: '';
  position: absolute;
  inset: 0;
  background: radial-gradient(circle at 50% 0%, var(--card-glow, transparent) 0%, transparent 70%);
  opacity: 0.15;
}
.game-card:active {
  transform: scale(0.95);
  border-color: var(--card-border, var(--mint));
}
.game-card .card-icon {
  font-size: 36px;
  display: block;
  margin-bottom: 8px;
  animation: float 3s ease-in-out infinite;
}
.game-card .card-title {
  font-family: var(--font-pixel);
  font-size: 8px;
  color: var(--card-color, var(--mint));
  line-height: 1.6;
  margin-bottom: 4px;
}
.game-card .card-desc {
  font-size: 14px;
  color: var(--text-dim);
  line-height: 1.3;
}
.game-card .card-badge {
  position: absolute;
  top: 8px;
  right: 8px;
  font-family: var(--font-pixel);
  font-size: 7px;
  background: var(--neon-pink);
  color: #fff;
  padding: 2px 6px;
  border-radius: 4px;
}
.game-card[data-game="quiz"] { --card-glow: var(--mint); --card-border: var(--mint); --card-color: var(--mint); }
.game-card[data-game="slots"] { --card-glow: var(--neon-yellow); --card-border: var(--neon-yellow); --card-color: var(--neon-yellow); }
.game-card[data-game="wheel"] { --card-glow: var(--neon-pink); --card-border: var(--neon-pink); --card-color: var(--neon-pink); }
.game-card[data-game="glossary"] { --card-glow: var(--lilac); --card-border: var(--lilac); --card-color: var(--lilac); }
.game-card[data-game="boss"] { --card-glow: var(--danger); --card-border: var(--danger); --card-color: var(--danger); }
.game-card[data-game="timeline"] { --card-glow: var(--neon-cyan); --card-border: var(--neon-cyan); --card-color: var(--neon-cyan); }

/* Stats panel on home */
.stats-panel {
  background: var(--bg-card);
  border: 1px solid #333;
  border-radius: 12px;
  padding: 16px;
  margin-top: 12px;
}
.stats-panel h3 {
  font-family: var(--font-pixel);
  font-size: 9px;
  color: var(--lilac);
  margin-bottom: 12px;
  text-align: center;
}
.stats-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 8px;
}
.stat-item {
  text-align: center;
}
.stat-value {
  font-family: var(--font-orbit);
  font-size: 22px;
  font-weight: 900;
  color: var(--neon-yellow);
}
.stat-label {
  font-size: 12px;
  color: var(--text-dim);
  margin-top: 2px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SHARED GAME UI
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.game-header {
  text-align: center;
  margin-bottom: 20px;
}
.game-header h2 {
  font-family: var(--font-pixel);
  font-size: 12px;
  line-height: 1.8;
}
.game-header .subtitle {
  font-size: 16px;
  color: var(--text-dim);
  margin-top: 4px;
}

.btn-primary {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  background: linear-gradient(135deg, var(--mint), #38a169);
  color: #000;
  font-family: var(--font-pixel);
  font-size: 10px;
  padding: 14px 28px;
  border-radius: 8px;
  font-weight: bold;
  text-transform: uppercase;
  transition: all 0.2s;
  box-shadow: 0 0 20px var(--mint-glow);
}
.btn-primary:active { transform: scale(0.95); }
.btn-primary:disabled { opacity: 0.4; pointer-events: none; }

.btn-secondary {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  background: transparent;
  color: var(--lilac);
  font-family: var(--font-pixel);
  font-size: 9px;
  padding: 10px 20px;
  border-radius: 8px;
  border: 2px solid var(--lilac);
  transition: all 0.2s;
}
.btn-secondary:active { transform: scale(0.95); background: var(--lilac); color: #000; }

.btn-back {
  background: none;
  color: var(--text-dim);
  font-size: 14px;
  padding: 8px;
  display: flex;
  align-items: center;
  gap: 4px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   QUIZ GAME
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#screen-quiz .game-header h2 { color: var(--mint); }

.quiz-progress {
  display: flex;
  gap: 4px;
  justify-content: center;
  margin-bottom: 16px;
}
.quiz-pip {
  width: 24px;
  height: 4px;
  background: #333;
  border-radius: 2px;
  transition: background 0.3s;
}
.quiz-pip.done { background: var(--success); }
.quiz-pip.fail { background: var(--danger); }
.quiz-pip.current { background: var(--neon-yellow); box-shadow: 0 0 6px var(--neon-yellow); }

.quiz-category {
  font-family: var(--font-pixel);
  font-size: 7px;
  color: var(--lilac);
  text-align: center;
  text-transform: uppercase;
  letter-spacing: 2px;
  margin-bottom: 8px;
}

.quiz-question-box {
  background: var(--bg-card);
  border: 2px solid var(--mint);
  border-radius: 12px;
  padding: 20px 16px;
  margin-bottom: 16px;
  position: relative;
}
.quiz-question-box::before {
  content: '?';
  position: absolute;
  top: -12px;
  right: 16px;
  font-family: var(--font-orbit);
  font-size: 28px;
  font-weight: 900;
  color: var(--mint);
  opacity: 0.2;
}
.quiz-question {
  font-size: 20px;
  line-height: 1.5;
  font-family: var(--font-terminal);
}

.quiz-answers {
  display: flex;
  flex-direction: column;
  gap: 8px;
}
.quiz-answer-btn {
  background: var(--bg-card);
  border: 2px solid #333;
  border-radius: 10px;
  padding: 14px 16px;
  text-align: left;
  font-size: 17px;
  font-family: var(--font-terminal);
  color: var(--text);
  transition: all 0.2s;
  position: relative;
  overflow: hidden;
}
.quiz-answer-btn:active:not(.locked) { transform: scale(0.98); }
.quiz-answer-btn .answer-letter {
  font-family: var(--font-pixel);
  font-size: 10px;
  color: var(--lilac);
  margin-right: 10px;
}
.quiz-answer-btn.correct {
  border-color: var(--success);
  background: #22c55e15;
  animation: none;
}
.quiz-answer-btn.correct::after {
  content: 'âœ“';
  position: absolute;
  right: 14px;
  top: 50%;
  transform: translateY(-50%);
  font-size: 22px;
  color: var(--success);
}
.quiz-answer-btn.wrong {
  border-color: var(--danger);
  background: #ef444415;
  animation: shake 0.4s;
}
.quiz-answer-btn.wrong::after {
  content: 'âœ—';
  position: absolute;
  right: 14px;
  top: 50%;
  transform: translateY(-50%);
  font-size: 22px;
  color: var(--danger);
}

.quiz-explanation {
  background: #1a1a2e;
  border-left: 3px solid var(--neon-cyan);
  padding: 12px 14px;
  margin-top: 12px;
  border-radius: 0 8px 8px 0;
  font-size: 15px;
  line-height: 1.5;
  color: var(--text-dim);
  animation: slideUp 0.3s ease;
}
.quiz-explanation strong { color: var(--neon-cyan); }

.quiz-next-btn {
  display: block;
  width: 100%;
  margin-top: 16px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SLOT MACHINE
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#screen-slots .game-header h2 { color: var(--neon-yellow); }

.slot-machine {
  background: linear-gradient(180deg, #1a0a2e, #0a0a1f);
  border: 3px solid var(--neon-yellow);
  border-radius: 16px;
  padding: 20px 16px;
  box-shadow: 0 0 30px #ffd70033, inset 0 0 30px #00000066;
  position: relative;
  overflow: hidden;
}
.slot-machine::before {
  content: 'ğŸ° ARIZONA JACKPOT ğŸ°';
  display: block;
  font-family: var(--font-pixel);
  font-size: 9px;
  color: var(--neon-yellow);
  text-align: center;
  margin-bottom: 16px;
  animation: neonPulse 2s infinite;
}

.slot-reels {
  display: flex;
  justify-content: center;
  gap: 8px;
  margin-bottom: 16px;
}
.slot-reel {
  width: 80px;
  height: 80px;
  background: #000;
  border: 2px solid var(--neon-yellow);
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 36px;
  overflow: hidden;
  box-shadow: inset 0 0 20px rgba(255,215,0,0.1);
}
.slot-reel.spinning {
  animation: spin 0.15s linear infinite;
}

.slot-result {
  background: #000;
  border: 1px solid #333;
  border-radius: 8px;
  padding: 14px;
  margin-top: 12px;
  min-height: 80px;
  animation: slideUp 0.4s ease;
}
.slot-result .result-label {
  font-family: var(--font-pixel);
  font-size: 8px;
  color: var(--neon-pink);
  margin-bottom: 6px;
}
.slot-result .result-value {
  font-family: var(--font-orbit);
  font-size: 24px;
  font-weight: 900;
  color: var(--neon-yellow);
  margin-bottom: 4px;
}
.slot-result .result-desc {
  font-size: 15px;
  color: var(--text-dim);
  line-height: 1.4;
}

.slot-pull-btn {
  display: block;
  width: 100%;
  margin-top: 16px;
  background: linear-gradient(135deg, var(--neon-yellow), var(--neon-orange));
  padding: 16px;
  font-family: var(--font-pixel);
  font-size: 12px;
  color: #000;
  border-radius: 10px;
  text-transform: uppercase;
  box-shadow: 0 0 25px #ffd70044;
  transition: all 0.15s;
}
.slot-pull-btn:active { transform: scale(0.95); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   WHEEL OF MISFORTUNE
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#screen-wheel .game-header h2 { color: var(--neon-pink); }

.wheel-container {
  position: relative;
  width: 300px;
  height: 300px;
  margin: 0 auto 20px;
}
.wheel-canvas {
  width: 100%;
  height: 100%;
  border-radius: 50%;
  border: 4px solid var(--neon-pink);
  box-shadow: 0 0 40px #ff2d7544;
  transition: transform 4s cubic-bezier(.17,.67,.12,.99);
}
.wheel-pointer {
  position: absolute;
  top: -12px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 28px;
  filter: drop-shadow(0 0 8px var(--neon-pink));
  z-index: 2;
}
.wheel-center {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 50px;
  height: 50px;
  border-radius: 50%;
  background: radial-gradient(circle at 35% 35%, var(--neon-pink), #991b4b);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 20px;
  box-shadow: 0 0 15px var(--neon-pink);
  z-index: 2;
}

.wheel-spin-btn {
  display: block;
  width: 100%;
  background: linear-gradient(135deg, var(--neon-pink), #cc1155);
  padding: 16px;
  font-family: var(--font-pixel);
  font-size: 11px;
  color: #fff;
  border-radius: 10px;
  text-transform: uppercase;
  box-shadow: 0 0 25px #ff2d7544;
}
.wheel-spin-btn:active { transform: scale(0.95); }

.wheel-result {
  background: var(--bg-card);
  border: 2px solid var(--neon-pink);
  border-radius: 12px;
  padding: 16px;
  margin-top: 16px;
  animation: slideUp 0.4s ease;
}
.wheel-result h3 {
  font-family: var(--font-pixel);
  font-size: 9px;
  color: var(--neon-pink);
  margin-bottom: 8px;
}
.wheel-result p {
  font-size: 16px;
  line-height: 1.5;
  color: var(--text);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   GLOSSARY MEMORY GAME
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#screen-glossary .game-header h2 { color: var(--lilac); }

.glossary-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 8px;
}
.glossary-card {
  aspect-ratio: 1;
  background: var(--bg-card);
  border: 2px solid #333;
  border-radius: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  padding: 6px;
  font-size: 13px;
  font-family: var(--font-terminal);
  cursor: pointer;
  transition: all 0.3s;
  position: relative;
}
.glossary-card.face-down {
  background: linear-gradient(135deg, var(--lilac), #7c3aed);
  color: transparent;
}
.glossary-card.face-down::after {
  content: '?';
  color: #fff;
  font-family: var(--font-pixel);
  font-size: 18px;
}
.glossary-card.revealed {
  border-color: var(--lilac);
  color: var(--text);
  font-size: 11px;
}
.glossary-card.matched {
  border-color: var(--success);
  background: #22c55e15;
  opacity: 0.7;
}
.glossary-card:active { transform: scale(0.95); }

.glossary-score {
  text-align: center;
  margin-bottom: 12px;
  font-family: var(--font-pixel);
  font-size: 9px;
  color: var(--lilac);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   BOSS FIGHT
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#screen-boss .game-header h2 { color: var(--danger); }

.boss-arena {
  background: linear-gradient(180deg, #1a0000, #0a0a0f);
  border: 2px solid var(--danger);
  border-radius: 16px;
  padding: 20px;
  position: relative;
  overflow: hidden;
}
.boss-arena::before {
  content: '';
  position: absolute;
  inset: 0;
  background: radial-gradient(circle at 50% 20%, #ff000015 0%, transparent 60%);
}
.boss-sprite {
  text-align: center;
  font-size: 60px;
  margin-bottom: 12px;
  animation: float 2s ease-in-out infinite;
}
.boss-name {
  font-family: var(--font-pixel);
  font-size: 10px;
  color: var(--danger);
  text-align: center;
  margin-bottom: 12px;
}
.boss-hp-bar {
  height: 16px;
  background: #333;
  border-radius: 8px;
  border: 2px solid var(--danger);
  overflow: hidden;
  margin-bottom: 4px;
}
.boss-hp-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--danger), #ff6b2b);
  border-radius: 8px;
  transition: width 0.5s ease;
  width: 100%;
}
.boss-hp-text {
  font-family: var(--font-pixel);
  font-size: 7px;
  color: var(--danger);
  text-align: right;
}

.player-hp-bar {
  height: 10px;
  background: #333;
  border-radius: 5px;
  border: 1px solid var(--success);
  overflow: hidden;
  margin: 12px 0 4px;
}
.player-hp-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--success), var(--mint));
  border-radius: 5px;
  transition: width 0.5s ease;
  width: 100%;
}
.player-hp-text {
  font-family: var(--font-pixel);
  font-size: 7px;
  color: var(--success);
}

.boss-question {
  background: #000;
  border: 1px solid #333;
  border-radius: 8px;
  padding: 14px;
  margin: 16px 0;
  font-size: 17px;
  line-height: 1.5;
}

.boss-answers {
  display: flex;
  flex-direction: column;
  gap: 6px;
}
.boss-answer-btn {
  background: var(--bg-card);
  border: 2px solid #333;
  border-radius: 8px;
  padding: 12px;
  font-size: 15px;
  font-family: var(--font-terminal);
  color: var(--text);
  text-align: left;
  transition: all 0.2s;
}
.boss-answer-btn:active { transform: scale(0.98); }
.boss-answer-btn.correct { border-color: var(--success); background: #22c55e15; }
.boss-answer-btn.wrong { border-color: var(--danger); background: #ef444415; animation: shake 0.4s; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TIMELINE RUNNER
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#screen-timeline .game-header h2 { color: var(--neon-cyan); }

.timeline-game-area {
  position: relative;
}
.timeline-event-card {
  background: var(--bg-card);
  border: 2px solid var(--neon-cyan);
  border-radius: 12px;
  padding: 16px;
  margin-bottom: 12px;
  animation: slideUp 0.4s ease;
}
.timeline-event-card .event-text {
  font-size: 18px;
  line-height: 1.5;
  margin-bottom: 12px;
}
.timeline-event-card .event-type {
  font-family: var(--font-pixel);
  font-size: 7px;
  color: var(--neon-cyan);
  text-transform: uppercase;
  letter-spacing: 2px;
  margin-bottom: 8px;
}

.timeline-choices {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 8px;
}
.timeline-choice-btn {
  background: #1a1a2e;
  border: 2px solid #444;
  border-radius: 8px;
  padding: 14px 10px;
  font-family: var(--font-orbit);
  font-size: 16px;
  font-weight: 700;
  color: var(--text);
  text-align: center;
  transition: all 0.2s;
}
.timeline-choice-btn:active { transform: scale(0.96); }
.timeline-choice-btn.correct { border-color: var(--success); background: #22c55e15; }
.timeline-choice-btn.wrong { border-color: var(--danger); background: #ef444415; }

.timeline-streak {
  text-align: center;
  font-family: var(--font-pixel);
  font-size: 9px;
  color: var(--neon-cyan);
  margin-bottom: 12px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PROFILE / STATS SCREEN
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#screen-profile .game-header h2 { color: var(--neon-yellow); }

.profile-avatar {
  width: 80px;
  height: 80px;
  margin: 0 auto 12px;
  background: linear-gradient(135deg, var(--mint), var(--lilac));
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 40px;
  border: 3px solid var(--neon-yellow);
  box-shadow: 0 0 20px var(--neon-yellow);
}

.profile-rank {
  text-align: center;
  font-family: var(--font-pixel);
  font-size: 10px;
  color: var(--neon-yellow);
  margin-bottom: 4px;
}
.profile-rank-title {
  text-align: center;
  font-size: 16px;
  color: var(--text-dim);
  margin-bottom: 20px;
}

.achievements-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 8px;
  margin-top: 16px;
}
.achievement {
  background: var(--bg-card);
  border: 1px solid #333;
  border-radius: 10px;
  padding: 12px 8px;
  text-align: center;
  transition: all 0.3s;
}
.achievement.unlocked {
  border-color: var(--neon-yellow);
  box-shadow: 0 0 10px #ffd70022;
}
.achievement .ach-icon { font-size: 28px; margin-bottom: 4px; display: block; }
.achievement .ach-name {
  font-family: var(--font-pixel);
  font-size: 6px;
  color: var(--text-dim);
  line-height: 1.4;
}
.achievement.unlocked .ach-name { color: var(--neon-yellow); }
.achievement:not(.unlocked) { opacity: 0.4; }
.achievement:not(.unlocked) .ach-icon { filter: grayscale(1); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LEARN SCREEN (corpus browser)
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#screen-learn .game-header h2 { color: var(--neon-cyan); }

.learn-tabs {
  display: flex;
  gap: 6px;
  overflow-x: auto;
  padding-bottom: 8px;
  margin-bottom: 16px;
  -webkit-overflow-scrolling: touch;
}
.learn-tab {
  flex-shrink: 0;
  background: var(--bg-card);
  border: 1px solid #333;
  border-radius: 20px;
  padding: 8px 14px;
  font-family: var(--font-pixel);
  font-size: 7px;
  color: var(--text-dim);
  white-space: nowrap;
  transition: all 0.2s;
}
.learn-tab.active {
  border-color: var(--neon-cyan);
  color: var(--neon-cyan);
  background: #00f5ff10;
}

.learn-card {
  background: var(--bg-card);
  border: 1px solid #333;
  border-radius: 12px;
  padding: 14px;
  margin-bottom: 10px;
  transition: all 0.2s;
}
.learn-card:active { border-color: var(--neon-cyan); }
.learn-card h4 {
  font-family: var(--font-pixel);
  font-size: 8px;
  color: var(--neon-cyan);
  margin-bottom: 6px;
  line-height: 1.6;
}
.learn-card p {
  font-size: 15px;
  color: var(--text-dim);
  line-height: 1.4;
}
.learn-card .learn-tag {
  display: inline-block;
  font-family: var(--font-pixel);
  font-size: 6px;
  color: var(--lilac);
  border: 1px solid var(--lilac);
  border-radius: 4px;
  padding: 2px 6px;
  margin-top: 6px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RESULT / GAME OVER OVERLAY
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.overlay {
  display: none;
  position: fixed;
  inset: 0;
  z-index: 200;
  background: rgba(10,10,15,0.95);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  align-items: center;
  justify-content: center;
  padding: 20px;
}
.overlay.active { display: flex; }
.overlay-content {
  text-align: center;
  animation: slideUp 0.5s ease;
  max-width: 340px;
  width: 100%;
}
.overlay-icon { font-size: 64px; margin-bottom: 16px; display: block; }
.overlay-title {
  font-family: var(--font-pixel);
  font-size: 14px;
  line-height: 1.8;
  margin-bottom: 8px;
}
.overlay-subtitle {
  font-size: 18px;
  color: var(--text-dim);
  margin-bottom: 20px;
  line-height: 1.4;
}
.overlay-score {
  font-family: var(--font-orbit);
  font-size: 42px;
  font-weight: 900;
  color: var(--neon-yellow);
  margin-bottom: 8px;
}
.overlay-xp {
  font-family: var(--font-pixel);
  font-size: 10px;
  color: var(--success);
  margin-bottom: 20px;
}
.overlay-buttons {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CONFETTI
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.confetti-container {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 300;
  overflow: hidden;
}
.confetti-piece {
  position: absolute;
  width: 8px;
  height: 8px;
  top: -20px;
  animation: confetti-fall 3s linear forwards;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RESPONSIVE
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
@media (min-width: 420px) {
  .game-grid { grid-template-columns: repeat(3, 1fr); }
  .slot-reel { width: 90px; height: 90px; font-size: 42px; }
  .wheel-container { width: 340px; height: 340px; }
}
@media (min-width: 768px) {
  .screen { padding: 24px 20px 100px; max-width: 600px; margin: 0 auto; }
}
</style>
</head>
<body>

<!-- â•â•â•â•â•â•â•â•â•â•â• TOP BAR â•â•â•â•â•â•â•â•â•â•â• -->
<div class="top-bar">
  <div class="logo">OUAIS<span>FIEU</span></div>
  <div class="xp-bar-container">
    <div class="xp-bar-label">LVL <span id="player-level">1</span></div>
    <div class="xp-bar"><div class="xp-fill" id="xp-fill"></div></div>
  </div>
  <div class="coin-display">
    <div class="coin-icon">Â¢</div>
    <span id="coin-count">0</span>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â• TICKER â•â•â•â•â•â•â•â•â•â•â• -->
<div class="ticker">
  <div class="ticker-content">
    <span>978.000 inactifs contraints</span><span class="sep">â˜…</span>
    <span>30.122 exclusions Vague 1</span><span class="sep">â˜…</span>
    <span>9,2 Mrdâ‚¬ d'ajustement Arizona</span><span class="sep">â˜…</span>
    <span>518â‚¬/an de compensation par exclu</span><span class="sep">â˜…</span>
    <span>500.000 malades longue durÃ©e</span><span class="sep">â˜…</span>
    <span>Satisfaction dÃ©mo : 26%</span><span class="sep">â˜…</span>
    <span>Dette 155% PIB en 2042</span><span class="sep">â˜…</span>
    <span>Budget ouaisfieu : 0â‚¬ opÃ©rationnel</span><span class="sep">â˜…</span>
    <span>280 asbl EP reconnues â€” moratoire 2026-2028</span><span class="sep">â˜…</span>
    <span>Sanctions quadruplÃ©es : 2,5% â†’ 10%</span><span class="sep">â˜…</span>
    <span>ğŸ° JOUE POUR COMPRENDRE â€” COMPRENDS POUR AGIR ğŸ°</span><span class="sep">â˜…</span>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â• HOME SCREEN â•â•â•â•â•â•â•â•â•â•â• -->
<div class="screen active" id="screen-home">
  <div class="hero-title">
    <h1>ğŸª CASINO<br><span class="accent">CYNICO-POLITICO</span></h1>
    <div class="hero-subtitle">RÃ©vise la dÃ©mocratie belge en jouant.</div>
  </div>

  <div class="game-grid">
    <div class="game-card" data-game="quiz" onclick="startGame('quiz')">
      <span class="card-icon">ğŸ§ </span>
      <div class="card-title">QUIZ<br>PARTICRATIQUE</div>
      <div class="card-desc">10 questions sur la Belgique</div>
      <div class="card-badge">+50 XP</div>
    </div>
    <div class="game-card" data-game="slots" onclick="startGame('slots')">
      <span class="card-icon">ğŸ°</span>
      <div class="card-title">MACHINE<br>ARIZONA</div>
      <div class="card-desc">Tire le bras, dÃ©couvre les chiffres</div>
    </div>
    <div class="game-card" data-game="wheel" onclick="startGame('wheel')">
      <span class="card-icon">ğŸ¡</span>
      <div class="card-title">ROUE DE<br>L'INFORTUNE</div>
      <div class="card-desc">Tourne et apprends</div>
    </div>
    <div class="game-card" data-game="glossary" onclick="startGame('glossary')">
      <span class="card-icon">ğŸƒ</span>
      <div class="card-title">MÃ‰MOIRE<br>CITOYENNE</div>
      <div class="card-desc">Associe termes et dÃ©finitions</div>
    </div>
    <div class="game-card" data-game="boss" onclick="startGame('boss')">
      <span class="card-icon">ğŸ‘¹</span>
      <div class="card-title">BOSS<br>FIGHT</div>
      <div class="card-desc">Affronte la Particratie</div>
      <div class="card-badge">HARD</div>
    </div>
    <div class="game-card" data-game="timeline" onclick="startGame('timeline')">
      <span class="card-icon">â³</span>
      <div class="card-title">CHRONO<br>RUNNER</div>
      <div class="card-desc">Place les dates dans l'ordre</div>
    </div>
  </div>

  <div class="stats-panel">
    <h3>ğŸ“Š TABLEAU DE BORD</h3>
    <div class="stats-grid">
      <div class="stat-item">
        <div class="stat-value" id="stat-games">0</div>
        <div class="stat-label">Parties</div>
      </div>
      <div class="stat-item">
        <div class="stat-value" id="stat-correct">0</div>
        <div class="stat-label">Bonnes rÃ©p.</div>
      </div>
      <div class="stat-item">
        <div class="stat-value" id="stat-streak">0</div>
        <div class="stat-label">Meilleur streak</div>
      </div>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â• QUIZ SCREEN â•â•â•â•â•â•â•â•â•â•â• -->
<div class="screen" id="screen-quiz">
  <button class="btn-back" onclick="goHome()">â† Retour</button>
  <div class="game-header">
    <h2>ğŸ§  QUIZ PARTICRATIQUE</h2>
    <div class="subtitle">10 questions â€” rÃ©ponds juste, gagne des jetons</div>
  </div>
  <div class="quiz-progress" id="quiz-progress"></div>
  <div class="quiz-category" id="quiz-category"></div>
  <div class="quiz-question-box">
    <div class="quiz-question" id="quiz-question"></div>
  </div>
  <div class="quiz-answers" id="quiz-answers"></div>
  <div id="quiz-explanation-box"></div>
  <button class="btn-primary quiz-next-btn" id="quiz-next" style="display:none" onclick="nextQuizQuestion()">SUIVANTE â†’</button>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â• SLOTS SCREEN â•â•â•â•â•â•â•â•â•â•â• -->
<div class="screen" id="screen-slots">
  <button class="btn-back" onclick="goHome()">â† Retour</button>
  <div class="game-header">
    <h2>ğŸ° MACHINE Ã€ SOUS ARIZONA</h2>
    <div class="subtitle">Chaque tirage rÃ©vÃ¨le un chiffre de l'austÃ©ritÃ©</div>
  </div>
  <div class="slot-machine">
    <div class="slot-reels">
      <div class="slot-reel" id="reel1">ğŸ›ï¸</div>
      <div class="slot-reel" id="reel2">ğŸ’°</div>
      <div class="slot-reel" id="reel3">ğŸ“‰</div>
    </div>
    <button class="slot-pull-btn" id="slot-btn" onclick="pullSlots()">ğŸ° TIRE LE BRAS !</button>
    <div id="slot-result"></div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â• WHEEL SCREEN â•â•â•â•â•â•â•â•â•â•â• -->
<div class="screen" id="screen-wheel">
  <button class="btn-back" onclick="goHome()">â† Retour</button>
  <div class="game-header">
    <h2>ğŸ¡ ROUE DE L'INFORTUNE</h2>
    <div class="subtitle">Tourne et dÃ©couvre les boucles destructrices</div>
  </div>
  <div class="wheel-container">
    <div class="wheel-pointer">â–¼</div>
    <canvas class="wheel-canvas" id="wheel-canvas" width="600" height="600"></canvas>
    <div class="wheel-center">ğŸª</div>
  </div>
  <button class="wheel-spin-btn" id="wheel-btn" onclick="spinWheel()">ğŸŒ€ TOURNE LA ROUE !</button>
  <div id="wheel-result"></div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â• GLOSSARY MEMORY SCREEN â•â•â•â•â•â•â•â•â•â•â• -->
<div class="screen" id="screen-glossary">
  <button class="btn-back" onclick="goHome()">â† Retour</button>
  <div class="game-header">
    <h2>ğŸƒ MÃ‰MOIRE CITOYENNE</h2>
    <div class="subtitle">Retrouve les paires terme â†” dÃ©finition</div>
  </div>
  <div class="glossary-score" id="glossary-score">Paires: 0/6 | Essais: 0</div>
  <div class="glossary-grid" id="glossary-grid"></div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â• BOSS FIGHT SCREEN â•â•â•â•â•â•â•â•â•â•â• -->
<div class="screen" id="screen-boss">
  <button class="btn-back" onclick="goHome()">â† Retour</button>
  <div class="game-header">
    <h2>ğŸ‘¹ BOSS FIGHT</h2>
    <div class="subtitle">Affronte le systÃ¨me particratique</div>
  </div>
  <div class="boss-arena" id="boss-arena">
    <div class="boss-sprite" id="boss-sprite">ğŸ›ï¸</div>
    <div class="boss-name" id="boss-name">LA PARTICRATIE â€” Niveau 1</div>
    <div class="boss-hp-bar"><div class="boss-hp-fill" id="boss-hp"></div></div>
    <div class="boss-hp-text" id="boss-hp-text">HP: 100/100</div>
    <div class="player-hp-bar"><div class="player-hp-fill" id="player-hp"></div></div>
    <div class="player-hp-text" id="player-hp-text">ğŸ›¡ï¸ Citoyen HP: 100/100</div>
    <div class="boss-question" id="boss-question"></div>
    <div class="boss-answers" id="boss-answers"></div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â• TIMELINE SCREEN â•â•â•â•â•â•â•â•â•â•â• -->
<div class="screen" id="screen-timeline">
  <button class="btn-back" onclick="goHome()">â† Retour</button>
  <div class="game-header">
    <h2>â³ CHRONO RUNNER</h2>
    <div class="subtitle">Quand est-ce arrivÃ© ? Place la bonne date !</div>
  </div>
  <div class="timeline-streak" id="timeline-streak">ğŸ”¥ Streak: 0</div>
  <div class="timeline-game-area" id="timeline-area"></div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â• LEARN SCREEN â•â•â•â•â•â•â•â•â•â•â• -->
<div class="screen" id="screen-learn">
  <div class="game-header">
    <h2>ğŸ“š ENCYCLOPÃ‰DIE CITOYENNE</h2>
    <div class="subtitle">Le corpus ouaisfieu en fiches</div>
  </div>
  <div class="learn-tabs" id="learn-tabs"></div>
  <div id="learn-content"></div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â• PROFILE SCREEN â•â•â•â•â•â•â•â•â•â•â• -->
<div class="screen" id="screen-profile">
  <div class="game-header">
    <h2>ğŸ† PROFIL CITOYEN</h2>
  </div>
  <div class="profile-avatar" id="profile-avatar">ğŸ¦Š</div>
  <div class="profile-rank" id="profile-rank">RANG : OBSERVATEUR</div>
  <div class="profile-rank-title" id="profile-rank-desc">Tu commences Ã  ouvrir les yeux...</div>
  <div class="xp-bar-container" style="max-width:100%;margin-bottom:20px">
    <div class="xp-bar-label">NIVEAU <span id="profile-level">1</span> â€” <span id="profile-xp-text">0/100 XP</span></div>
    <div class="xp-bar" style="height:12px"><div class="xp-fill" id="profile-xp-fill"></div></div>
  </div>
  <div class="stats-panel">
    <h3>ğŸ“Š STATISTIQUES</h3>
    <div class="stats-grid">
      <div class="stat-item"><div class="stat-value" id="p-games">0</div><div class="stat-label">Parties</div></div>
      <div class="stat-item"><div class="stat-value" id="p-correct">0</div><div class="stat-label">Bonnes rÃ©p.</div></div>
      <div class="stat-item"><div class="stat-value" id="p-coins">0</div><div class="stat-label">Jetons</div></div>
    </div>
  </div>
  <h3 style="font-family:var(--font-pixel);font-size:9px;color:var(--neon-yellow);margin:20px 0 12px;text-align:center">ğŸ… ACHIEVEMENTS</h3>
  <div class="achievements-grid" id="achievements-grid"></div>
  <div style="text-align:center;margin-top:24px">
    <button class="btn-secondary" onclick="resetProgress()">ğŸ—‘ï¸ RESET PROGRÃˆS</button>
  </div>
  <div style="text-align:center;margin-top:20px;padding:16px;background:var(--bg-card);border-radius:12px;border:1px solid #333">
    <div style="font-family:var(--font-pixel);font-size:7px;color:var(--mint);margin-bottom:8px">PROPULSÃ‰ PAR</div>
    <div style="font-size:16px;color:var(--text-dim)">ouaisfieu â€” Contre-Institution NumÃ©rique</div>
    <div style="font-size:13px;color:var(--text-dim);margin-top:4px">Fork Â· Hack Â· Spread</div>
    <div style="font-size:12px;color:var(--lilac);margin-top:8px">ouaisfi.eu â€¢ CC BY-NC 4.0</div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â• GAME OVER OVERLAY â•â•â•â•â•â•â•â•â•â•â• -->
<div class="overlay" id="overlay-gameover">
  <div class="overlay-content">
    <span class="overlay-icon" id="overlay-icon">ğŸ†</span>
    <div class="overlay-title" id="overlay-title" style="color:var(--neon-yellow)">BRAVO !</div>
    <div class="overlay-subtitle" id="overlay-subtitle">Tu maÃ®trises la particratie</div>
    <div class="overlay-score" id="overlay-score">8/10</div>
    <div class="overlay-xp" id="overlay-xp">+50 XP | +20 ğŸª™</div>
    <div class="overlay-buttons">
      <button class="btn-primary" id="overlay-retry" onclick="retryGame()">ğŸ”„ REJOUER</button>
      <button class="btn-secondary" onclick="goHomeFromOverlay()">ğŸ  MENU</button>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â• CONFETTI â•â•â•â•â•â•â•â•â•â•â• -->
<div class="confetti-container" id="confetti"></div>

<!-- â•â•â•â•â•â•â•â•â•â•â• BOTTOM NAV â•â•â•â•â•â•â•â•â•â•â• -->
<div class="bottom-nav">
  <button class="nav-btn active" data-screen="home" onclick="switchScreen('home')">
    <span class="nav-icon">ğŸª</span>
    <span>ARCADE</span>
  </button>
  <button class="nav-btn" data-screen="learn" onclick="switchScreen('learn')">
    <span class="nav-icon">ğŸ“š</span>
    <span>SAVOIR</span>
  </button>
  <button class="nav-btn" data-screen="profile" onclick="switchScreen('profile')">
    <span class="nav-icon">ğŸ†</span>
    <span>PROFIL</span>
  </button>
</div>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// DATA â€” THE ENTIRE CORPUS AS GAME CONTENT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

const QUIZ_BANK = [
  // Particratie & DÃ©mocratie
  {cat:"Particratie",q:"Qu'est-ce que la particratie belge ?",a:["Un rÃ©gime oÃ¹ le pouvoir rÃ©el est chez les prÃ©sidents de parti","Un systÃ¨me multipartite classique","La rÃ©partition des ministÃ¨res","Le cumul des mandats"],correct:0,explain:"Les dÃ©putÃ©s votent comme leur parti dÃ©cide. Le pouvoir lÃ©gislatif est de facto capturÃ© par les Ã©tats-majors."},
  {cat:"Particratie",q:"Combien de niveaux de pouvoir compte la Belgique ?",a:["5 (FÃ©dÃ©ral, CommunautÃ©s, RÃ©gions, Provinces, Communes)","3 (FÃ©dÃ©ral, RÃ©gional, Communal)","4 (FÃ©dÃ©ral, RÃ©gional, Provincial, Communal)","7 niveaux"],correct:0,explain:"FÃ©dÃ©ral, 3 CommunautÃ©s, 3 RÃ©gions, 10 Provinces, 581 Communes. La complexitÃ© comme outil de domination."},
  {cat:"Particratie",q:"Quelle est la thÃ¨se d'ouaisfieu sur la complexitÃ© institutionnelle ?",a:["C'est un outil de domination pour dÃ©courager le citoyen","C'est un hÃ©ritage historique positif","C'est une garantie de dÃ©mocratie","C'est un accident de l'histoire"],correct:0,explain:"En rendant le systÃ¨me incomprÃ©hensible, on dÃ©courage la participation citoyenne."},
  {cat:"Belgique",q:"Quels sont les 3 clivages historiques de la Belgique ?",a:["Philosophique, socio-Ã©conomique, linguistique","Gauche-droite, nord-sud, riche-pauvre","Religieux, ethnique, culturel","Urbain-rural, jeune-vieux, homme-femme"],correct:0,explain:"Ã‰glise/Ã‰tat, Capital/Travail, Centre/PÃ©riphÃ©rie structurent toute la vie politique."},
  {cat:"Pilarisation",q:"Quels sont les 3 piliers de la sociÃ©tÃ© belge ?",a:["Catholique, socialiste, libÃ©ral","Flamand, wallon, bruxellois","Patronal, syndical, agricole","Monarchie, parlement, justice"],correct:0,explain:"La pilarisation organise syndicats, mutuelles, Ã©coles et mÃ©dias en blocs idÃ©ologiques."},

  // Coalition Arizona
  {cat:"Arizona",q:"Quels partis forment la coalition Arizona ?",a:["N-VA, MR, CD&V, Vooruit, Les EngagÃ©s","PS, Ã‰colo, MR, CD&V, N-VA","PTB, PS, Ã‰colo, Vooruit, DÃ©FI","N-VA, Vlaams Belang, MR, CD&V, Open VLD"],correct:0,explain:"Coalition confÃ©dÃ©raliste et nÃ©olibÃ©rale menÃ©e par Bart De Wever (N-VA)."},
  {cat:"Arizona",q:"Quel est le montant de l'ajustement budgÃ©taire visÃ© par Arizona (2025-2029) ?",a:["9,2 milliards â‚¬","5 milliards â‚¬","15 milliards â‚¬","3,4 milliards â‚¬"],correct:0,explain:"60% Ã©conomies, 40% recettes nouvelles. Ratio : pour 1â‚¬ taxÃ© sur le capital, 5-6â‚¬ coupÃ©s dans le social."},
  {cat:"Arizona",q:"Combien de personnes seront exclues du chÃ´mage lors de la Vague 1 (janvier 2026) ?",a:["30.122","10.000","5.500","75.000"],correct:0,explain:"30.122 personnes basculent vers le RIS/CPAS. 90.000 exclusions cumulÃ©es d'ici fin 2027."},
  {cat:"Arizona",q:"La limitation du chÃ´mage est fixÃ©e Ã  combien de mois ?",a:["24 mois","36 mois","12 mois","18 mois"],correct:0,explain:"AprÃ¨s 24 mois, exclusion vers le CPAS. Impact : 902M Ã  2 Mrdâ‚¬ sur 2026-2029."},
  {cat:"Arizona",q:"De combien les sanctions maladie ont-elles Ã©tÃ© multipliÃ©es au 01/01/2026 ?",a:["Ã—4 (de 2,5% Ã  10%)","Ã—2 (de 5% Ã  10%)","Ã—3 (de 3% Ã  9%)","Ã—1,5 (de 5% Ã  7,5%)"],correct:0,explain:"Les sanctions passent de 2,5% Ã  10% de l'indemnitÃ©. Effet punitif sur les malades longue durÃ©e."},

  // Chiffres clÃ©s
  {cat:"Chiffres",q:"Combien de personnes en inactivitÃ© contrainte en Belgique ?",a:["978.000","450.000","1.500.000","250.000"],correct:0,explain:"CoÃ»t : 21-24 Mrdâ‚¬/an en dÃ©penses passives, soit 1Mâ‚¬/heure."},
  {cat:"Chiffres",q:"Combien de malades longue durÃ©e en Belgique ?",a:["500.000","200.000","150.000","750.000"],correct:0,explain:"Plus que le nombre total de chÃ´meurs. Objectif Arizona : 100.000 retours (irrÃ©aliste)."},
  {cat:"Chiffres",q:"Quel est le taux de satisfaction dÃ©mocratique en Wallonie (IWEPS 2023) ?",a:["26%","52%","43%","68%"],correct:0,explain:"Seulement 26% des Wallons sont satisfaits du fonctionnement dÃ©mocratique."},
  {cat:"Chiffres",q:"Quelle dette publique est projetÃ©e en 2042 ?",a:["155% du PIB","120% du PIB","100% du PIB","180% du PIB"],correct:0,explain:"Convergence des crises : climat + vieillissement + dette. Charge d'intÃ©rÃªts : 40 Mrdâ‚¬/an."},
  {cat:"Chiffres",q:"Combien de Belges sont en risque AROPE ?",a:["2.100.000 (18,3%)","800.000 (7%)","3.500.000 (30%)","1.200.000 (10%)"],correct:0,explain:"AROPE = At Risk Of Poverty or social Exclusion. Indicateur europÃ©en multidimensionnel."},
  {cat:"Chiffres",q:"Quelle est la compensation fÃ©dÃ©rale par exclu du chÃ´mage ?",a:["518â‚¬/an","2.400â‚¬/an","5.000â‚¬/an","1.200â‚¬/an"],correct:0,explain:"CoÃ»t rÃ©el pour les CPAS : plusieurs milliers d'euros. Le diffÃ©rentiel est une charge communale."},

  // Boucles destructrices
  {cat:"Boucles",q:"Qu'est-ce que le 'transfert comptable fantÃ´me' ?",a:["L'exclusion fÃ©dÃ©rale crÃ©e un surcoÃ»t communal sans Ã©conomie rÃ©elle","Un transfert d'argent entre rÃ©gions","Une fraude comptable du gouvernement","Un mÃ©canisme de TVA"],correct:0,explain:"Exclusion chÃ´mage fÃ©dÃ©ral â†’ basculement RIS communal â†’ Ã©conomie fÃ©dÃ©rale = surcoÃ»t communal. Bilan consolidÃ© nul ou nÃ©gatif."},
  {cat:"Boucles",q:"Que signifie un taux marginal >100% pour les prÃ©caires ?",a:["Reprendre un emploi fait perdre plus qu'on gagne","Les impÃ´ts dÃ©passent 100% du salaire","La TVA est trop Ã©levÃ©e","Les cotisations sociales sont excessives"],correct:0,explain:"PiÃ¨ge Ã  pauvretÃ© rationnel : activation vers emplois prÃ©caires = appauvrissement paradoxal."},
  {cat:"Boucles",q:"Quel est le risque de la 'spirale austÃ©ritaire' (piÃ¨ge grec) ?",a:["Les Ã©conomies creusent le dÃ©ficit â†’ plus d'austÃ©ritÃ© â†’ cercle vicieux","La GrÃ¨ce envahit la Belgique","Les taux d'intÃ©rÃªt grecs sont appliquÃ©s","L'euro est abandonnÃ©"],correct:0,explain:"Ã‰conomies â†’ contraction Ã©conomique â†’ creusement du dÃ©ficit â†’ nouvelles Ã©conomies â†’ spirale sans fin."},
  
  // MÃ©thodologie ouaisfieu
  {cat:"Ouaisfieu",q:"Que signifie DIKW dans la mÃ©thodologie ouaisfieu ?",a:["DonnÃ©es â†’ Information â†’ Connaissance â†’ Sagesse","Digital Information Knowledge Web","Documenter Informer Kiffer Watcher","Data Intelligence Knowledge Wisdom"],correct:0,explain:"Pyramide mÃ©thodologique : des donnÃ©es brutes Ã  la sagesse citoyenne."},
  {cat:"Ouaisfieu",q:"Quel est le budget opÃ©rationnel mensuel d'ouaisfieu ?",a:["0â‚¬ (zÃ©ro euro)","29â‚¬","150â‚¬","500â‚¬"],correct:0,explain:"HÃ©bergement gratuit (GitHub Pages), logiciels libres, bÃ©nÃ©volat. CoÃ»t quasi-nul."},
  {cat:"Ouaisfieu",q:"Que signifie 'ForkÂ·HackÂ·Spread' ?",a:["Tout citoyen peut cloner le projet et l'adapter","Un type de cyberattaque","Une mÃ©thode de cuisine","Un protocole rÃ©seau"],correct:0,explain:"InspirÃ© de l'open source : le projet est conÃ§u pour Ãªtre rÃ©pliquÃ© n'importe oÃ¹."},
  {cat:"Ouaisfieu",q:"Combien d'associations d'Ã©ducation permanente sont reconnues en FWB ?",a:["280","50","500","1.200"],correct:0,explain:"280 ASBL reconnues, 2.300 professionnels formÃ©s. Moratoire 2026-2028 sur les nouvelles reconnaissances."},
  {cat:"Ouaisfieu",q:"Qu'est-ce que l'Intelligence Civile ?",a:["La transposition de l'intelligence Ã©conomique au service de la sociÃ©tÃ© civile","Un service secret citoyen","Un algorithme de surveillance","Un think tank politique"],correct:0,explain:"Veille sociale, protection Ã©thique des donnÃ©es, influence d'intÃ©rÃªt gÃ©nÃ©ral, gouvernance participative."},
  
  // Comparaisons internationales
  {cat:"International",q:"Quel pays a connu 590 suicides liÃ©s Ã  son systÃ¨me d'activation ?",a:["Le Royaume-Uni (Work Capability Assessment)","L'Allemagne (Hartz IV)","La France (RSA)","Les Pays-Bas (WW/WIA)"],correct:0,explain:"Le Universal Credit et le WCA britanniques ont causÃ© une hausse documentÃ©e de la pauvretÃ© et des dÃ©cÃ¨s."},
  {cat:"International",q:"Qu'est-il arrivÃ© Ã  la rÃ©forme chÃ´mage franÃ§aise similaire Ã  Arizona ?",a:["Elle a Ã©tÃ© annulÃ©e sous pression sociale","Elle a Ã©tÃ© durcie","Elle a Ã©tÃ© appliquÃ©e avec succÃ¨s","Elle n'a jamais existÃ©"],correct:0,explain:"La France a dÃ» reculer face Ã  la mobilisation. La Belgique poursuit la mÃªme trajectoire."},
  {cat:"ECP",q:"Qu'est-ce que l'Ã‰conomie Contributive ProvisionnÃ©e (ECP) ?",a:["Un modÃ¨le oÃ¹ les allocataires contribuent sans perte de droits","Un impÃ´t sur les contributions","Un fonds de pension privÃ©","Un systÃ¨me de troc"],correct:0,explain:"Via un ruling fiscal SDA et la loi volontariat 2005 : contribution valorisÃ©e sans perte d'allocations."},
];

const SLOT_DATA = [
  {icons:["ğŸ›ï¸","ğŸ’°","ğŸ“‰"],label:"EXCLUSIONS VAGUE 1",value:"30.122",desc:"personnes exclues du chÃ´mage en janvier 2026, basculÃ©es vers le CPAS."},
  {icons:["ğŸ¥","ğŸ’Š","ğŸš«"],label:"MALADES LONGUE DURÃ‰E",value:"500.000",desc:"plus que le nombre total de chÃ´meurs. Objectif retour : 100.000 (irrÃ©aliste)."},
  {icons:["ğŸ’¸","ğŸ“Š","ğŸ”»"],label:"AJUSTEMENT ARIZONA",value:"9,2 Mrdâ‚¬",desc:"d'ajustement 2025-2029. 60% coupes, 40% recettes. Ratio capital/social : 1 pour 5-6."},
  {icons:["ğŸšï¸","ğŸ‘¨â€ğŸ‘©â€ğŸ‘§","ğŸ˜°"],label:"BELGES EN RISQUE AROPE",value:"2.100.000",desc:"personnes en risque de pauvretÃ©. 18,3% de la population totale."},
  {icons:["ğŸ“ˆ","ğŸ’£","ğŸ•³ï¸"],label:"DETTE 2042",value:"155% PIB",desc:"convergence crises : climat + vieillissement + dette. Charge intÃ©rÃªts : 40 Mrdâ‚¬/an."},
  {icons:["ğŸ¤’","â¬‡ï¸","ğŸ¦"],label:"SANCTIONS Ã—4",value:"10%",desc:"de l'indemnitÃ©. Ã‰tait 2,5%. Sanctions quadruplÃ©es au 01/01/2026."},
  {icons:["ğŸ˜ï¸","ğŸ‘·","âŒ"],label:"COMPENSATION PAR EXCLU",value:"518â‚¬/an",desc:"vs coÃ»t rÃ©el de plusieurs milliers. Le diffÃ©rentiel = charge communale pure."},
  {icons:["ğŸ§Š","â„ï¸","ğŸ›‘"],label:"GEL ENVELOPPE BIEN-ÃŠTRE",value:"2,8 Mrdâ‚¬",desc:"gelÃ©s pendant 5 ans. Ã‰rosion du pouvoir d'achat des allocataires."},
  {icons:["ğŸ¦","âœ‚ï¸","ğŸ©º"],label:"TROU BUDGET SANTÃ‰",value:"2 Mrdâ‚¬",desc:"norme croissance rÃ©duite Ã  2% vs besoin 3,2%. Renoncement aux soins."},
  {icons:["âš”ï¸","ğŸ›¡ï¸","ğŸ’°"],label:"BUDGET DÃ‰FENSE",value:"50Mâ†’400M",desc:"croissance annuelle financÃ©e par vente Proximus, bpost, BNP Paribas."},
  {icons:["ğŸ“‰","ğŸ‡§ğŸ‡ª","âš ï¸"],label:"FITCH DÃ‰GRADE",value:"A+",desc:"dÃ©gradation juin 2025 pour dÃ©ficits chroniques et inertie des coalitions."},
  {icons:["ğŸ‘¤","ğŸš¶","ğŸ“‹"],label:"INACTIFS CONTRAINTS",value:"978.000",desc:"personnes. CoÃ»t : 21-24 Mrdâ‚¬/an en dÃ©penses passives = 1Mâ‚¬/heure."},
];

const WHEEL_SEGMENTS = [
  {label:"Transfert\nfantÃ´me",color:"#ff2d75",text:"Le transfert comptable fantÃ´me : l'exclusion fÃ©dÃ©rale crÃ©e un surcoÃ»t communal. Compensation 518â‚¬/an vs coÃ»t rÃ©el de milliers. Bilan consolidÃ© : nul ou nÃ©gatif. Le gouvernement dÃ©place la misÃ¨re, pas la rÃ©sout."},
  {label:"PiÃ¨ge\nmarginal",color:"#9f7aea",text:"Le taux marginal >100% : reprendre un emploi fait PERDRE de l'argent aux prÃ©caires. L'activation coercitive vers emplois prÃ©caires = appauvrissement paradoxal. Le maintien en inactivitÃ© est Ã©conomiquement rationnel."},
  {label:"Spirale\naustÃ©ritaire",color:"#48bb78",text:"Le piÃ¨ge grec : Ã©conomies â†’ dÃ©ficit structurel 11 Mrd 2029 â†’ nouvelles Ã©conomies â†’ contraction Ã©conomique â†’ creusement dÃ©ficit â†’ plus d'austÃ©ritÃ©. Un cercle vicieux auto-alimentÃ©."},
  {label:"Fragment.\nrÃ©gionale",color:"#ffd700",text:"Mesures calibrÃ©es pour la Flandre (plein emploi) appliquÃ©es Ã  BXL/Wallonie (chÃ´mage structurel). Suppression d'allocations sans emplois disponibles = misÃ¨re, pas emploi."},
  {label:"DÃ©gradation\ncapital",color:"#00f5ff",text:"Gel 5 ans + renoncement soins + prÃ©carisation â†’ dÃ©gradation de l'employabilitÃ© â†’ coÃ»tent plus longtemps â†’ inverse de l'objectif affichÃ©. On dÃ©truit ce qu'on prÃ©tend activer."},
  {label:"PiÃ¨ge\nBIM",color:"#ff6b2b",text:"Perte du statut BIM â†’ perte tarifs sociaux â†’ renoncement aux soins â†’ dÃ©gradation santÃ© â†’ coÃ»t futur accru pour la sÃ©cu. Cascade destructrice silencieuse."},
  {label:"Effet\nboule neige",color:"#ef4444",text:"Charge d'intÃ©rÃªts : 10 â†’ 21 Mrdâ‚¬. Quand le taux d'intÃ©rÃªt dÃ©passe la croissance, la dette s'auto-alimente. Spirale auto-destructrice."},
  {label:"Alternatives\nignorees",color:"#22c55e",text:"Taxe patrimoine : 17 Mrdâ‚¬ possibles (chiffrage PTB). Ratio Arizona : 60/40 = choix idÃ©ologique. Les alternatives fiscales existent mais sont dÃ©libÃ©rÃ©ment ignorÃ©es."},
];

const GLOSSARY = [
  {term:"Particratie",def:"Pouvoir rÃ©el chez les prÃ©sidents de parti, pas au Parlement"},
  {term:"Pilarisation",def:"SociÃ©tÃ© belge organisÃ©e en piliers : catholique, socialiste, libÃ©ral"},
  {term:"DIKW",def:"DonnÃ©es â†’ Information â†’ Connaissance â†’ Sagesse"},
  {term:"CCPLC",def:"Collectif Citoyen pour la Participation Libre & Consciente"},
  {term:"Lead-dexing",def:"Fiches personnalitÃ©s publiques avec appel Ã  rÃ©action citoyenne"},
  {term:"ECP",def:"Ã‰conomie Contributive ProvisionnÃ©e â€” contribution sans perte de droits"},
  {term:"Intelligence Civile",def:"IE transposÃ©e au service de la sociÃ©tÃ© civile"},
  {term:"RIS",def:"Revenu d'IntÃ©gration Sociale â€” aide de dernier recours via CPAS"},
  {term:"BIM",def:"BÃ©nÃ©ficiaire Intervention MajorÃ©e â€” accÃ¨s tarifs sociaux"},
  {term:"AROPE",def:"At Risk Of Poverty or Exclusion â€” indicateur europÃ©en"},
  {term:"OSINT",def:"Renseignement Ã  partir de sources ouvertes et publiques"},
  {term:"Standstill",def:"Principe constitutionnel interdisant la rÃ©gression des droits sociaux"},
  {term:"Forkability",def:"CapacitÃ© d'un projet Ã  Ãªtre clonÃ© et adaptÃ© par quiconque"},
  {term:"Contre-Institution",def:"Infrastructure de connaissance autonome et critique"},
  {term:"ReAT",def:"Return to Action Teams â€” rÃ©insertion malades longue durÃ©e"},
  {term:"SDA",def:"Service DÃ©cisions AnticipÃ©es â€” organe fiscal pour rulings"},
];

const BOSS_QUESTIONS = [
  {q:"Combien de jours de nÃ©gociation pour former la coalition Arizona ?",a:["239","180","365","120"],correct:0},
  {q:"Quel est le premier ministre de la coalition Arizona ?",a:["Bart De Wever (N-VA)","Alexander De Croo (Open VLD)","Paul Magnette (PS)","Georges-Louis Bouchez (MR)"],correct:0},
  {q:"Combien coÃ»te l'inactivitÃ© contrainte en Belgique PAR HEURE ?",a:["1 million â‚¬","100.000â‚¬","10 millions â‚¬","500.000â‚¬"],correct:0},
  {q:"Quel % du PIB reprÃ©sente le dÃ©ficit prÃ©vu en 2030 ?",a:["6,5%","3,2%","4,8%","8,1%"],correct:0},
  {q:"Combien d'ETP manquent aux CPAS bruxellois face Ã  Arizona ?",a:["240","50","500","100"],correct:0},
  {q:"Quel est le surcoÃ»t estimÃ© pour les 19 CPAS bruxellois ?",a:["80 millions â‚¬","20 millions â‚¬","150 millions â‚¬","5 millions â‚¬"],correct:0},
  {q:"Combien de dossiers d'invaliditÃ© doivent Ãªtre rÃ©examinÃ©s d'ici 2029 ?",a:["218.000","50.000","100.000","500.000"],correct:0},
  {q:"Quel article de la Constitution protÃ¨ge les droits sociaux ?",a:["Article 23","Article 10","Article 1","Article 48"],correct:0},
  {q:"Quel % de risque accru d'invaliditÃ© pour les BIM ?",a:["68%","45%","25%","90%"],correct:0},
  {q:"Combien coÃ»terait une taxe sur les patrimoines >1Mâ‚¬ ?",a:["17 milliards â‚¬","5 milliards â‚¬","1 milliard â‚¬","50 milliards â‚¬"],correct:0},
];

const TIMELINE_EVENTS = [
  {date:"2021",text:"Vague 1 ReAT â€” CrÃ©ation coordinateurs retour au travail"},
  {date:"2023",text:"Vague 2 â€” Contacts obligatoires, sanction 2,5%"},
  {date:"2025-01",text:"Accord coalition Arizona signÃ©"},
  {date:"2025-04",text:"S&P rÃ©vise perspective Belgique Ã  nÃ©gative"},
  {date:"2025-06",text:"Fitch dÃ©grade la Belgique Ã  A+"},
  {date:"2025-10",text:"Recours constitutionnel Article 23"},
  {date:"2025-12",text:"GrÃ¨ve front commun syndical"},
  {date:"2026-01",text:"Vague 3 Arizona â€” Sanctions 10%, exclusions Vague 1"},
  {date:"2027",text:"90.000 exclusions cumulÃ©es"},
  {date:"2029",text:"Objectif 80% taux emploi â€” fin ajustement"},
  {date:"2030",text:"DÃ©ficit prÃ©vu 6,5% PIB"},
  {date:"2042",text:"Convergence crises : climat + vieillissement + dette"},
];

const LEARN_DATA = {
  "Particratie":[
    {title:"Particratie belge",text:"RÃ©gime oÃ¹ le pouvoir dÃ©cisionnel glisse des assemblÃ©es vers les Ã©tats-majors des partis. Les dÃ©putÃ©s = soldats de vote."},
    {title:"Pilarisation",text:"3 piliers (catholique, socialiste, libÃ©ral) structurent syndicats, mutuelles, Ã©coles. Dimension sociologique Ã©rodÃ©e, structures de pouvoir survivantes."},
    {title:"ComplexitÃ© institutionnelle",text:"5 niveaux de pouvoir, 6 gouvernements, 581 communes. La complexitÃ© comme outil de domination."},
  ],
  "Arizona":[
    {title:"Coalition Arizona",text:"N-VA, MR, CD&V, Vooruit, Les EngagÃ©s. 239 jours de nÃ©gociation. Agenda confÃ©dÃ©raliste et nÃ©olibÃ©ral."},
    {title:"9,2 Mrdâ‚¬ d'ajustement",text:"60% Ã©conomies / 40% recettes. Limitation chÃ´mage 24 mois, rÃ©insertion MLD, gel bien-Ãªtre 5 ans."},
    {title:"30.122 exclusions Vague 1",text:"Basculement vers RIS/CPAS. Compensation 518â‚¬/an vs coÃ»t rÃ©el milliers. 90.000 d'ici 2027."},
    {title:"Sanctions quadruplÃ©es",text:"De 2,5% Ã  10% de l'indemnitÃ© maladie au 01/01/2026."},
  ],
  "Chiffres":[
    {title:"978.000 inactifs contraints",text:"CoÃ»t : 21-24 Mrdâ‚¬/an = 1Mâ‚¬/heure en dÃ©penses passives."},
    {title:"500.000 malades longue durÃ©e",text:"Plus que le total des chÃ´meurs. 218.000 dossiers Ã  rÃ©examiner."},
    {title:"Dette publique",text:"104% PIB (2025) â†’ 155% PIB (2042). Charge intÃ©rÃªts : 10 â†’ 40 Mrdâ‚¬/an."},
    {title:"2,1M Belges AROPE",text:"18,3% de la population en risque de pauvretÃ© ou exclusion sociale."},
  ],
  "Boucles":[
    {title:"Transfert comptable fantÃ´me",text:"Exclusion fÃ©dÃ©rale â†’ surcoÃ»t communal â†’ bilan nul ou nÃ©gatif."},
    {title:"Taux marginal >100%",text:"Reprendre un emploi = perdre plus qu'on gagne. PiÃ¨ge Ã  pauvretÃ© rationnel."},
    {title:"Spirale austÃ©ritaire",text:"Ã‰conomies â†’ contraction â†’ creusement dÃ©ficit â†’ plus d'austÃ©ritÃ©."},
    {title:"DÃ©gradation capital humain",text:"Gel + renoncement soins â†’ moins employables â†’ coÃ»tent plus â†’ inverse objectif."},
  ],
  "Ouaisfieu":[
    {title:"Contre-Institution NumÃ©rique",text:"11 plateformes, 3 SSG, hÃ©bergement gratuit, 0â‚¬ opÃ©rationnel, CC BY-NC 4.0."},
    {title:"DIKW + VPA",text:"DonnÃ©esâ†’Infoâ†’Connaissanceâ†’Sagesse + Voir-Penser-Agir. MÃ©thode d'Ã©ducation permanente."},
    {title:"ForkÂ·HackÂ·Spread",text:"Tout citoyen peut cloner le projet. Forkability maximale."},
    {title:"Intelligence Civile",text:"IE pour la sociÃ©tÃ© civile : veille, protection donnÃ©es, influence d'intÃ©rÃªt gÃ©nÃ©ral."},
    {title:"ECP",text:"Ã‰conomie Contributive ProvisionnÃ©e : contribution sans perte de droits via ruling SDA."},
  ]
};

const ACHIEVEMENTS = [
  {id:"first_quiz",icon:"ğŸ§ ",name:"PREMIER QUIZ",check:s=>s.quizComplete>=1},
  {id:"quiz_master",icon:"ğŸ“",name:"MAÃTRE QUIZ",check:s=>s.quizPerfect>=1},
  {id:"slot_addict",icon:"ğŸ°",name:"ACCRO SLOTS",check:s=>s.slotPulls>=10},
  {id:"wheel_spinner",icon:"ğŸ¡",name:"TOURNEUR FOU",check:s=>s.wheelSpins>=5},
  {id:"memory_king",icon:"ğŸƒ",name:"ROI MÃ‰MOIRE",check:s=>s.glossaryComplete>=1},
  {id:"boss_slayer",icon:"âš”ï¸",name:"TUEUR DE BOSS",check:s=>s.bossDefeated>=1},
  {id:"chrono_5",icon:"â³",name:"STREAK Ã—5",check:s=>s.bestStreak>=5},
  {id:"coins_100",icon:"ğŸ’°",name:"100 JETONS",check:s=>s.coins>=100},
  {id:"level_5",icon:"â­",name:"NIVEAU 5",check:s=>s.level>=5},
  {id:"level_10",icon:"ğŸŒŸ",name:"NIVEAU 10",check:s=>s.level>=10},
  {id:"games_25",icon:"ğŸ®",name:"25 PARTIES",check:s=>s.totalGames>=25},
  {id:"savant",icon:"ğŸ“š",name:"ENCYCLOPÃ‰DISTE",check:s=>s.totalCorrect>=50},
];

const RANKS = [
  {min:1,name:"OBSERVATEUR",desc:"Tu commences Ã  ouvrir les yeux...",avatar:"ğŸ£"},
  {min:3,name:"DOCUMENTEUR",desc:"Tu collectes les preuves.",avatar:"ğŸ¦Š"},
  {min:5,name:"OUTILLÃ‰",desc:"Tu maÃ®trises les outils citoyens.",avatar:"ğŸ¦‰"},
  {min:8,name:"ACTIVISTE",desc:"Tu passes Ã  l'action Ã©clairÃ©e.",avatar:"ğŸ¦…"},
  {min:12,name:"SENTINELLE",desc:"Tu veilles sur la dÃ©mocratie.",avatar:"ğŸº"},
  {min:15,name:"HACKTIVISTE",desc:"Tu dÃ©tournes le systÃ¨me.",avatar:"ğŸ¦Š"},
  {min:20,name:"ARCHITECTE CIVIQUE",desc:"Tu construis la contre-institution.",avatar:"ğŸ—ï¸"},
];

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// STATE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let state = JSON.parse(localStorage.getItem('ouaisfieu-arcade')||'null') || {
  xp:0, level:1, coins:0,
  totalGames:0, totalCorrect:0, bestStreak:0,
  quizComplete:0, quizPerfect:0,
  slotPulls:0, wheelSpins:0,
  glossaryComplete:0, bossDefeated:0,
  achievements:[],
};

let currentGame = null;
let quizState = {};
let bossState = {};
let timelineState = {};
let glossaryState = {};

function save() { localStorage.setItem('ouaisfieu-arcade', JSON.stringify(state)); }

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// XP & PROGRESSION
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function xpForLevel(l) { return 50 + (l-1)*30; }

function addXP(amount) {
  state.xp += amount;
  while(state.xp >= xpForLevel(state.level)) {
    state.xp -= xpForLevel(state.level);
    state.level++;
  }
  save();
  updateUI();
}

function addCoins(amount) {
  state.coins += amount;
  save();
  updateUI();
}

function updateUI() {
  const needed = xpForLevel(state.level);
  const pct = (state.xp/needed*100).toFixed(0);
  document.getElementById('xp-fill').style.width = pct+'%';
  document.getElementById('player-level').textContent = state.level;
  document.getElementById('coin-count').textContent = state.coins;
  document.getElementById('stat-games').textContent = state.totalGames;
  document.getElementById('stat-correct').textContent = state.totalCorrect;
  document.getElementById('stat-streak').textContent = state.bestStreak;
  
  // Profile
  const rank = [...RANKS].reverse().find(r=>state.level>=r.min) || RANKS[0];
  document.getElementById('profile-avatar').textContent = rank.avatar;
  document.getElementById('profile-rank').textContent = 'RANG : '+rank.name;
  document.getElementById('profile-rank-desc').textContent = rank.desc;
  document.getElementById('profile-level').textContent = state.level;
  document.getElementById('profile-xp-text').textContent = state.xp+'/'+needed+' XP';
  document.getElementById('profile-xp-fill').style.width = pct+'%';
  document.getElementById('p-games').textContent = state.totalGames;
  document.getElementById('p-correct').textContent = state.totalCorrect;
  document.getElementById('p-coins').textContent = state.coins;
  
  // Achievements
  const grid = document.getElementById('achievements-grid');
  grid.innerHTML = ACHIEVEMENTS.map(a=>{
    const unlocked = a.check(state);
    if(unlocked && !state.achievements.includes(a.id)) { state.achievements.push(a.id); save(); }
    return `<div class="achievement ${unlocked?'unlocked':''}"><span class="ach-icon">${a.icon}</span><div class="ach-name">${a.name}</div></div>`;
  }).join('');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// NAVIGATION
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function switchScreen(name) {
  document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));
  document.getElementById('screen-'+name).classList.add('active');
  document.querySelectorAll('.nav-btn').forEach(b=>{
    b.classList.toggle('active', b.dataset.screen===name);
  });
  if(name==='learn') initLearn();
  if(name==='profile') updateUI();
}

function goHome() { switchScreen('home'); currentGame=null; }
function goHomeFromOverlay() { 
  document.getElementById('overlay-gameover').classList.remove('active'); 
  goHome(); 
}

function startGame(game) {
  currentGame = game;
  document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));
  document.getElementById('screen-'+game).classList.add('active');
  document.querySelectorAll('.nav-btn').forEach(b=>b.classList.remove('active'));
  
  if(game==='quiz') initQuiz();
  if(game==='slots') initSlots();
  if(game==='wheel') initWheel();
  if(game==='glossary') initGlossary();
  if(game==='boss') initBoss();
  if(game==='timeline') initTimeline();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// QUIZ GAME
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function initQuiz() {
  const shuffled = [...QUIZ_BANK].sort(()=>Math.random()-0.5).slice(0,10);
  quizState = { questions: shuffled, current: 0, correct: 0, locked: false };
  renderQuiz();
}

function renderQuiz() {
  const qs = quizState;
  const q = qs.questions[qs.current];
  
  // Progress pips
  const prog = document.getElementById('quiz-progress');
  prog.innerHTML = qs.questions.map((_,i)=>{
    let cls = i<qs.current ? (qs.questions[i]._correct?'done':'fail') : i===qs.current ? 'current' : '';
    return `<div class="quiz-pip ${cls}"></div>`;
  }).join('');
  
  document.getElementById('quiz-category').textContent = q.cat;
  document.getElementById('quiz-question').textContent = q.q;
  document.getElementById('quiz-explanation-box').innerHTML = '';
  document.getElementById('quiz-next').style.display = 'none';
  qs.locked = false;
  
  const ans = document.getElementById('quiz-answers');
  const letters = ['A','B','C','D'];
  const indices = [0,1,2,3].sort(()=>Math.random()-0.5);
  const correctNew = indices.indexOf(q.correct);
  
  ans.innerHTML = indices.map((origIdx,i) => 
    `<button class="quiz-answer-btn" data-idx="${origIdx}" onclick="answerQuiz(this,${origIdx},${q.correct})">
      <span class="answer-letter">${letters[i]}</span>${q.a[origIdx]}
    </button>`
  ).join('');
}

function answerQuiz(btn, chosen, correct) {
  if(quizState.locked) return;
  quizState.locked = true;
  
  const q = quizState.questions[quizState.current];
  const isCorrect = chosen === correct;
  
  document.querySelectorAll('.quiz-answer-btn').forEach(b=>{
    b.classList.add('locked');
    if(parseInt(b.dataset.idx)===correct) b.classList.add('correct');
  });
  
  if(isCorrect) {
    quizState.correct++;
    state.totalCorrect++;
    q._correct = true;
    addCoins(2);
  } else {
    btn.classList.add('wrong');
    q._correct = false;
  }
  
  document.getElementById('quiz-explanation-box').innerHTML = 
    `<div class="quiz-explanation"><strong>ğŸ’¡</strong> ${q.explain}</div>`;
  
  document.getElementById('quiz-next').style.display = 'block';
  document.getElementById('quiz-next').textContent = 
    quizState.current < quizState.questions.length-1 ? 'SUIVANTE â†’' : 'RÃ‰SULTATS ğŸ†';
  
  // Update progress
  const pips = document.querySelectorAll('.quiz-pip');
  pips[quizState.current].className = 'quiz-pip '+(isCorrect?'done':'fail');
  
  save();
}

function nextQuizQuestion() {
  quizState.current++;
  if(quizState.current >= quizState.questions.length) {
    endQuiz();
  } else {
    renderQuiz();
  }
}

function endQuiz() {
  state.quizComplete++;
  state.totalGames++;
  const score = quizState.correct;
  const total = quizState.questions.length;
  const xp = score * 5 + (score===total?20:0);
  if(score===total) state.quizPerfect++;
  addXP(xp);
  save();
  
  showOverlay(
    score>=8?'ğŸ†':score>=5?'ğŸ‘':'ğŸ’€',
    score>=8?'MAGISTRAL !':score>=5?'PAS MAL...':'GAME OVER',
    score>=8?'Tu maÃ®trises le corpus !':score>=5?'Continue Ã  jouer pour progresser':'La particratie t\'a eu...',
    `${score}/${total}`,
    `+${xp} XP | +${score*2} ğŸª™`,
    'quiz'
  );
  if(score>=8) spawnConfetti();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SLOT MACHINE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function initSlots() {
  document.getElementById('slot-result').innerHTML = '';
  document.getElementById('reel1').textContent = 'ğŸ›ï¸';
  document.getElementById('reel2').textContent = 'ğŸ’°';
  document.getElementById('reel3').textContent = 'ğŸ“‰';
}

function pullSlots() {
  const btn = document.getElementById('slot-btn');
  btn.disabled = true;
  
  const data = SLOT_DATA[Math.floor(Math.random()*SLOT_DATA.length)];
  const reels = ['reel1','reel2','reel3'];
  const allIcons = ['ğŸ›ï¸','ğŸ’°','ğŸ“‰','ğŸ¥','ğŸ’Š','ğŸš«','ğŸ’¸','ğŸ“Š','ğŸ”»','ğŸšï¸','ğŸ‘¨â€ğŸ‘©â€ğŸ‘§','ğŸ˜°','ğŸ“ˆ','ğŸ’£','ğŸ•³ï¸','ğŸ¤’','â¬‡ï¸','ğŸ¦','ğŸ§Š','â„ï¸','ğŸ›‘','âš”ï¸','ğŸ›¡ï¸','ğŸ‘¤','ğŸš¶','ğŸ“‹'];
  
  reels.forEach(r=>document.getElementById(r).classList.add('spinning'));
  
  let tick = 0;
  const interval = setInterval(()=>{
    reels.forEach(r=>{
      document.getElementById(r).textContent = allIcons[Math.floor(Math.random()*allIcons.length)];
    });
    tick++;
    if(tick>15) {
      clearInterval(interval);
      reels.forEach((r,i)=>{
        document.getElementById(r).classList.remove('spinning');
        document.getElementById(r).textContent = data.icons[i];
      });
      
      document.getElementById('slot-result').innerHTML = `
        <div class="slot-result">
          <div class="result-label">${data.label}</div>
          <div class="result-value">${data.value}</div>
          <div class="result-desc">${data.desc}</div>
        </div>`;
      
      state.slotPulls++;
      state.totalGames++;
      addXP(3);
      addCoins(1);
      save();
      btn.disabled = false;
    }
  }, 80);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// WHEEL OF MISFORTUNE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let wheelAngle = 0;
function initWheel() {
  const canvas = document.getElementById('wheel-canvas');
  const ctx = canvas.getContext('2d');
  const cx=300, cy=300, r=280;
  const n = WHEEL_SEGMENTS.length;
  const arc = 2*Math.PI/n;
  
  ctx.clearRect(0,0,600,600);
  WHEEL_SEGMENTS.forEach((seg,i)=>{
    ctx.beginPath();
    ctx.moveTo(cx,cy);
    ctx.arc(cx,cy,r,i*arc,(i+1)*arc);
    ctx.fillStyle = seg.color;
    ctx.fill();
    ctx.strokeStyle = '#000';
    ctx.lineWidth = 2;
    ctx.stroke();
    
    ctx.save();
    ctx.translate(cx,cy);
    ctx.rotate(i*arc+arc/2);
    ctx.textAlign = 'right';
    ctx.fillStyle = '#fff';
    ctx.font = 'bold 18px "Space Mono", monospace';
    const lines = seg.label.split('\n');
    lines.forEach((line,li)=>{
      ctx.fillText(line, r-20, (li-lines.length/2+0.5)*22);
    });
    ctx.restore();
  });
  
  document.getElementById('wheel-result').innerHTML = '';
}

function spinWheel() {
  const btn = document.getElementById('wheel-btn');
  btn.disabled = true;
  const canvas = document.getElementById('wheel-canvas');
  
  const spins = 5 + Math.random()*5;
  const extraDeg = Math.random()*360;
  wheelAngle += spins*360 + extraDeg;
  
  canvas.style.transition = 'transform 4s cubic-bezier(.17,.67,.12,.99)';
  canvas.style.transform = `rotate(${wheelAngle}deg)`;
  
  setTimeout(()=>{
    const n = WHEEL_SEGMENTS.length;
    const segDeg = 360/n;
    const normalizedAngle = ((wheelAngle % 360) + 360) % 360;
    const pointerAngle = (360 - normalizedAngle + 90) % 360;
    const idx = Math.floor(pointerAngle / segDeg) % n;
    const seg = WHEEL_SEGMENTS[idx];
    
    document.getElementById('wheel-result').innerHTML = `
      <div class="wheel-result">
        <h3>ğŸ¡ ${seg.label.replace('\n',' ')}</h3>
        <p>${seg.text}</p>
      </div>`;
    
    state.wheelSpins++;
    state.totalGames++;
    addXP(5);
    addCoins(2);
    save();
    btn.disabled = false;
  }, 4200);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// GLOSSARY MEMORY GAME
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function initGlossary() {
  const selected = [...GLOSSARY].sort(()=>Math.random()-0.5).slice(0,6);
  const cards = [];
  selected.forEach((g,i)=>{
    cards.push({id:i, type:'term', text:g.term, pairId:i});
    cards.push({id:i, type:'def', text:g.def, pairId:i});
  });
  cards.sort(()=>Math.random()-0.5);
  
  glossaryState = { cards, revealed:[], matched:[], attempts:0, pairs:0 };
  renderGlossary();
}

function renderGlossary() {
  const gs = glossaryState;
  document.getElementById('glossary-score').textContent = `Paires: ${gs.pairs}/6 | Essais: ${gs.attempts}`;
  
  const grid = document.getElementById('glossary-grid');
  grid.innerHTML = gs.cards.map((c,i)=>{
    const isRevealed = gs.revealed.includes(i);
    const isMatched = gs.matched.includes(c.pairId);
    let cls = isMatched ? 'matched revealed' : isRevealed ? 'revealed' : 'face-down';
    return `<div class="glossary-card ${cls}" onclick="flipGlossary(${i})" data-idx="${i}">${isRevealed||isMatched ? c.text : ''}</div>`;
  }).join('');
}

function flipGlossary(idx) {
  const gs = glossaryState;
  if(gs.revealed.length>=2 || gs.revealed.includes(idx) || gs.matched.includes(gs.cards[idx].pairId)) return;
  
  gs.revealed.push(idx);
  renderGlossary();
  
  if(gs.revealed.length===2) {
    gs.attempts++;
    const [a,b] = gs.revealed;
    const cardA = gs.cards[a], cardB = gs.cards[b];
    
    if(cardA.pairId===cardB.pairId && cardA.type!==cardB.type) {
      gs.matched.push(cardA.pairId);
      gs.pairs++;
      gs.revealed = [];
      addCoins(3);
      state.totalCorrect++;
      renderGlossary();
      
      if(gs.pairs===6) {
        state.glossaryComplete++;
        state.totalGames++;
        const xp = Math.max(10, 40 - gs.attempts);
        addXP(xp);
        save();
        setTimeout(()=>{
          showOverlay('ğŸƒ','MÃ‰MOIRE COMPLÃˆTE !','Toutes les paires trouvÃ©es',`${gs.attempts} essais`,`+${xp} XP | +18 ğŸª™`,'glossary');
          if(gs.attempts<=12) spawnConfetti();
        },500);
      }
    } else {
      setTimeout(()=>{
        gs.revealed = [];
        renderGlossary();
      },1000);
    }
    save();
  }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// BOSS FIGHT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function initBoss() {
  const questions = [...BOSS_QUESTIONS].sort(()=>Math.random()-0.5);
  bossState = { questions, current:0, bossHP:100, playerHP:100, locked:false };
  renderBoss();
}

function renderBoss() {
  const bs = bossState;
  document.getElementById('boss-hp').style.width = bs.bossHP+'%';
  document.getElementById('boss-hp-text').textContent = `HP: ${bs.bossHP}/100`;
  document.getElementById('player-hp').style.width = bs.playerHP+'%';
  document.getElementById('player-hp-text').textContent = `ğŸ›¡ï¸ Citoyen HP: ${bs.playerHP}/100`;
  
  if(bs.current >= bs.questions.length) {
    endBoss(bs.bossHP<=0);
    return;
  }
  
  const q = bs.questions[bs.current];
  document.getElementById('boss-question').textContent = q.q;
  bs.locked = false;
  
  const letters = ['A','B','C','D'];
  const indices = [0,1,2,3].sort(()=>Math.random()-0.5);
  document.getElementById('boss-answers').innerHTML = indices.map((origIdx,i) =>
    `<button class="boss-answer-btn" onclick="answerBoss(this,${origIdx},${q.correct})">${letters[i]}. ${q.a[origIdx]}</button>`
  ).join('');
  
  // Boss sprite reactions
  const sprites = ['ğŸ›ï¸','ğŸ¦','âš–ï¸','ğŸ‘”','ğŸ©'];
  document.getElementById('boss-sprite').textContent = sprites[bs.current % sprites.length];
  document.getElementById('boss-name').textContent = `LA PARTICRATIE â€” Round ${bs.current+1}/${bs.questions.length}`;
}

function answerBoss(btn, chosen, correct) {
  if(bossState.locked) return;
  bossState.locked = true;
  
  const isCorrect = chosen === correct;
  
  document.querySelectorAll('.boss-answer-btn').forEach((b,i)=>{
    const origIdx = parseInt(b.textContent.split('.')[0].charCodeAt(0))-65;
  });
  
  if(isCorrect) {
    btn.classList.add('correct');
    bossState.bossHP -= 15;
    state.totalCorrect++;
    addCoins(3);
    document.getElementById('boss-sprite').style.animation = 'shake 0.5s';
  } else {
    btn.classList.add('wrong');
    bossState.playerHP -= 20;
    document.getElementById('boss-arena').style.animation = 'shake 0.5s';
  }
  
  setTimeout(()=>{
    document.getElementById('boss-sprite').style.animation = 'float 2s ease-in-out infinite';
    document.getElementById('boss-arena').style.animation = '';
    
    if(bossState.bossHP<=0) { endBoss(true); return; }
    if(bossState.playerHP<=0) { endBoss(false); return; }
    
    bossState.current++;
    renderBoss();
  },1200);
  
  save();
}

function endBoss(won) {
  state.totalGames++;
  if(won) {
    state.bossDefeated++;
    addXP(40);
    addCoins(15);
    showOverlay('âš”ï¸','BOSS VAINCU !','La particratie tremble devant toi','VICTOIRE','+40 XP | +15 ğŸª™','boss');
    spawnConfetti();
  } else {
    addXP(5);
    showOverlay('ğŸ’€','DÃ‰FAITE...','La particratie a gagnÃ© cette manche','K.O.','+5 XP de consolation','boss');
  }
  save();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// TIMELINE RUNNER
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function initTimeline() {
  const events = [...TIMELINE_EVENTS].sort(()=>Math.random()-0.5);
  timelineState = { events, current:0, streak:0, score:0 };
  renderTimeline();
}

function renderTimeline() {
  const ts = timelineState;
  document.getElementById('timeline-streak').textContent = `ğŸ”¥ Streak: ${ts.streak} | Score: ${ts.score}`;
  
  if(ts.current >= ts.events.length) {
    endTimeline();
    return;
  }
  
  const ev = ts.events[ts.current];
  const correctDate = ev.date;
  
  // Generate 3 wrong dates
  const allDates = TIMELINE_EVENTS.map(e=>e.date).filter(d=>d!==correctDate);
  const wrongDates = allDates.sort(()=>Math.random()-0.5).slice(0,3);
  const choices = [correctDate, ...wrongDates].sort(()=>Math.random()-0.5);
  
  document.getElementById('timeline-area').innerHTML = `
    <div class="timeline-event-card">
      <div class="event-type">Ã‰vÃ©nement #${ts.current+1}/${ts.events.length}</div>
      <div class="event-text">${ev.text}</div>
    </div>
    <div class="timeline-choices">
      ${choices.map(d=>`<button class="timeline-choice-btn" onclick="answerTimeline(this,'${d}','${correctDate}')">${d}</button>`).join('')}
    </div>`;
}

function answerTimeline(btn, chosen, correct) {
  const ts = timelineState;
  const isCorrect = chosen===correct;
  
  document.querySelectorAll('.timeline-choice-btn').forEach(b=>{
    if(b.textContent===correct) b.classList.add('correct');
    b.onclick = null;
  });
  
  if(isCorrect) {
    ts.streak++;
    ts.score += ts.streak;
    state.totalCorrect++;
    if(ts.streak > state.bestStreak) state.bestStreak = ts.streak;
    addCoins(1);
  } else {
    btn.classList.add('wrong');
    ts.streak = 0;
  }
  
  save();
  setTimeout(()=>{ ts.current++; renderTimeline(); }, 1200);
}

function endTimeline() {
  state.totalGames++;
  const xp = timelineState.score * 2;
  addXP(xp);
  save();
  
  showOverlay('â³','CHRONO TERMINÃ‰ !',`Meilleur streak : ${state.bestStreak}`,`${timelineState.score} pts`,`+${xp} XP`,'timeline');
  if(timelineState.score > 15) spawnConfetti();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// LEARN SCREEN
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let learnTab = Object.keys(LEARN_DATA)[0];
function initLearn() {
  const tabs = document.getElementById('learn-tabs');
  tabs.innerHTML = Object.keys(LEARN_DATA).map(k=>
    `<button class="learn-tab ${k===learnTab?'active':''}" onclick="setLearnTab('${k}')">${k}</button>`
  ).join('');
  renderLearn();
}

function setLearnTab(tab) {
  learnTab = tab;
  document.querySelectorAll('.learn-tab').forEach(t=>t.classList.toggle('active',t.textContent===tab));
  renderLearn();
}

function renderLearn() {
  const items = LEARN_DATA[learnTab]||[];
  document.getElementById('learn-content').innerHTML = items.map(item=>
    `<div class="learn-card"><h4>${item.title}</h4><p>${item.text}</p><span class="learn-tag">${learnTab}</span></div>`
  ).join('');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// OVERLAY & EFFECTS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let lastGame = null;
function showOverlay(icon,title,subtitle,score,xp,game) {
  lastGame = game;
  document.getElementById('overlay-icon').textContent = icon;
  document.getElementById('overlay-title').textContent = title;
  document.getElementById('overlay-subtitle').textContent = subtitle;
  document.getElementById('overlay-score').textContent = score;
  document.getElementById('overlay-xp').textContent = xp;
  document.getElementById('overlay-gameover').classList.add('active');
}

function retryGame() {
  document.getElementById('overlay-gameover').classList.remove('active');
  if(lastGame) startGame(lastGame);
}

function spawnConfetti() {
  const c = document.getElementById('confetti');
  c.innerHTML = '';
  const colors = ['#ff2d75','#ffd700','#00f5ff','#48bb78','#9f7aea','#ff6b2b'];
  for(let i=0;i<40;i++){
    const p = document.createElement('div');
    p.className = 'confetti-piece';
    p.style.left = Math.random()*100+'%';
    p.style.background = colors[Math.floor(Math.random()*colors.length)];
    p.style.animationDelay = Math.random()*2+'s';
    p.style.animationDuration = (2+Math.random()*2)+'s';
    p.style.borderRadius = Math.random()>0.5?'50%':'0';
    p.style.width = (6+Math.random()*8)+'px';
    p.style.height = (6+Math.random()*8)+'px';
    c.appendChild(p);
  }
  setTimeout(()=>c.innerHTML='',5000);
}

function resetProgress() {
  if(confirm('âš ï¸ Supprimer toute ta progression ?')) {
    localStorage.removeItem('ouaisfieu-arcade');
    location.reload();
  }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// INIT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
updateUI();
initWheel();

// PWA Service Worker
if('serviceWorker' in navigator) {
  navigator.serviceWorker.register('sw.js').catch(()=>{});
}
</script>
</body>
</html>
