<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AUDITÂ·60 â€” VÃ©rification exhaustive des donnÃ©es citoyennes | ouaisfieu</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,300;0,400;0,500;0,600;0,700;1,400&family=Crimson+Pro:ital,wght@0,300;0,400;0,500;0,600;1,400&family=Space+Grotesk:wght@300;400;500;600;700&display=swap');

:root {
  --bg-deep: #0a0a12;
  --bg-surface: #12121e;
  --bg-card: #1a1a2e;
  --bg-elevated: #222240;
  --border: #2a2a4a;
  --border-bright: #3a3a6a;
  --text-primary: #e8e6e3;
  --text-secondary: #9998a8;
  --text-muted: #666680;
  --accent-green: #00e676;
  --accent-green-dim: #00e67630;
  --accent-orange: #ff9100;
  --accent-orange-dim: #ff910030;
  --accent-red: #ff5252;
  --accent-red-dim: #ff525230;
  --accent-blue: #448aff;
  --accent-blue-dim: #448aff30;
  --accent-purple: #b388ff;
  --accent-purple-dim: #b388ff30;
  --accent-yellow: #ffd740;
  --accent-yellow-dim: #ffd74030;
  --accent-cyan: #18ffff;
  --font-mono: 'JetBrains Mono', 'Fira Code', monospace;
  --font-serif: 'Crimson Pro', Georgia, serif;
  --font-display: 'Space Grotesk', sans-serif;
  --radius: 6px;
  --radius-lg: 12px;
  --shadow: 0 4px 24px rgba(0,0,0,0.4);
  --shadow-glow: 0 0 30px rgba(0,230,118,0.08);
}

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

html { scroll-behavior: smooth; }

body {
  background: var(--bg-deep);
  color: var(--text-primary);
  font-family: var(--font-mono);
  font-size: 13px;
  line-height: 1.6;
  min-height: 100vh;
  -webkit-font-smoothing: antialiased;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   NOISE OVERLAY
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
body::before {
  content: '';
  position: fixed;
  inset: 0;
  background: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.03'/%3E%3C/svg%3E");
  pointer-events: none;
  z-index: 9999;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SCANLINE
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
body::after {
  content: '';
  position: fixed;
  inset: 0;
  background: repeating-linear-gradient(
    0deg,
    transparent,
    transparent 2px,
    rgba(0,0,0,0.03) 2px,
    rgba(0,0,0,0.03) 4px
  );
  pointer-events: none;
  z-index: 9998;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LAYOUT
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.container {
  max-width: 1400px;
  margin: 0 auto;
  padding: 24px 20px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   HEADER
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.header {
  text-align: center;
  padding: 48px 20px 40px;
  position: relative;
}

.header::before {
  content: 'â–‘â–‘â–‘ AUDIT PROTOCOL â–‘â–‘â–‘';
  display: block;
  font-family: var(--font-mono);
  font-size: 10px;
  letter-spacing: 6px;
  color: var(--accent-green);
  opacity: 0.5;
  margin-bottom: 20px;
  animation: blink 3s ease-in-out infinite;
}

@keyframes blink {
  0%, 100% { opacity: 0.5; }
  50% { opacity: 0.2; }
}

.header h1 {
  font-family: var(--font-display);
  font-size: clamp(2rem, 5vw, 3.5rem);
  font-weight: 700;
  letter-spacing: -1px;
  line-height: 1.1;
  margin-bottom: 12px;
}

.header h1 .num { color: var(--accent-green); }
.header h1 .sep { color: var(--text-muted); }

.header .subtitle {
  font-family: var(--font-serif);
  font-size: clamp(1rem, 2.5vw, 1.3rem);
  color: var(--text-secondary);
  font-weight: 300;
  font-style: italic;
  max-width: 700px;
  margin: 0 auto 24px;
}

.header .meta-line {
  font-size: 10px;
  color: var(--text-muted);
  letter-spacing: 2px;
  text-transform: uppercase;
}

.header .meta-line span { color: var(--accent-cyan); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CREDIBILITY INDEX BAR
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.credibility-section {
  margin: 0 auto 40px;
  max-width: 800px;
}

.credibility-bar-wrap {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  padding: 24px 28px;
  position: relative;
  overflow: hidden;
}

.credibility-bar-wrap::before {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 2px;
  background: linear-gradient(90deg, var(--accent-green), var(--accent-cyan), var(--accent-blue));
}

.credibility-label {
  display: flex;
  justify-content: space-between;
  align-items: baseline;
  margin-bottom: 14px;
}

.credibility-label .title {
  font-family: var(--font-display);
  font-size: 14px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.credibility-label .scores {
  font-size: 11px;
  color: var(--text-secondary);
}

.credibility-label .scores .before { color: var(--accent-orange); }
.credibility-label .scores .after { color: var(--accent-green); }

.cred-bar-track {
  height: 28px;
  background: var(--bg-deep);
  border-radius: 14px;
  position: relative;
  overflow: hidden;
  border: 1px solid var(--border);
}

.cred-bar-before {
  position: absolute;
  top: 0; left: 0; bottom: 0;
  background: linear-gradient(90deg, var(--accent-orange-dim), var(--accent-orange));
  border-radius: 14px;
  transition: width 1.5s cubic-bezier(0.16, 1, 0.3, 1);
  opacity: 0.35;
}

.cred-bar-after {
  position: absolute;
  top: 0; left: 0; bottom: 0;
  background: linear-gradient(90deg, var(--accent-green-dim), var(--accent-green));
  border-radius: 14px;
  transition: width 1.8s cubic-bezier(0.16, 1, 0.3, 1);
  display: flex;
  align-items: center;
  justify-content: flex-end;
  padding-right: 12px;
  font-weight: 700;
  font-size: 12px;
  color: var(--bg-deep);
  text-shadow: 0 0 4px rgba(0,230,118,0.5);
}

.cred-explanation {
  margin-top: 12px;
  font-size: 11px;
  color: var(--text-muted);
  font-style: italic;
  font-family: var(--font-serif);
  text-align: center;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   STATS GRID
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 16px;
  margin-bottom: 40px;
}

.stat-card {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  padding: 20px;
  text-align: center;
  position: relative;
  overflow: hidden;
  transition: all 0.3s ease;
  cursor: pointer;
}

.stat-card:hover {
  border-color: var(--border-bright);
  transform: translateY(-2px);
  box-shadow: var(--shadow);
}

.stat-card.active {
  border-color: var(--accent-cyan);
  box-shadow: 0 0 20px rgba(24,255,255,0.1);
}

.stat-card .icon {
  font-size: 24px;
  margin-bottom: 8px;
}

.stat-card .number {
  font-family: var(--font-display);
  font-size: 2.5rem;
  font-weight: 700;
  line-height: 1;
  margin-bottom: 4px;
}

.stat-card .label {
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 2px;
  color: var(--text-secondary);
}

.stat-card.verified .number { color: var(--accent-green); }
.stat-card.corrected .number { color: var(--accent-red); }
.stat-card.approximate .number { color: var(--accent-orange); }
.stat-card.unverified .number { color: var(--accent-purple); }
.stat-card.total .number { color: var(--text-primary); }

.stat-card::after {
  content: '';
  position: absolute;
  bottom: 0; left: 0; right: 0;
  height: 3px;
}
.stat-card.verified::after { background: var(--accent-green); }
.stat-card.corrected::after { background: var(--accent-red); }
.stat-card.approximate::after { background: var(--accent-orange); }
.stat-card.unverified::after { background: var(--accent-purple); }
.stat-card.total::after { background: linear-gradient(90deg, var(--accent-green), var(--accent-orange), var(--accent-red), var(--accent-purple)); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   VISUAL CHART AREA
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.chart-area {
  display: grid;
  grid-template-columns: 300px 1fr;
  gap: 24px;
  margin-bottom: 40px;
  align-items: start;
}

@media (max-width: 900px) {
  .chart-area { grid-template-columns: 1fr; }
}

.donut-wrap {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  padding: 28px;
  text-align: center;
}

.donut-wrap h3 {
  font-family: var(--font-display);
  font-size: 12px;
  text-transform: uppercase;
  letter-spacing: 2px;
  color: var(--text-secondary);
  margin-bottom: 20px;
}

.donut-svg {
  width: 220px;
  height: 220px;
  margin: 0 auto;
}

.donut-legend {
  margin-top: 20px;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.legend-item {
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 11px;
}

.legend-dot {
  width: 10px;
  height: 10px;
  border-radius: 2px;
  flex-shrink: 0;
}

.legend-item .count {
  margin-left: auto;
  font-weight: 600;
  font-family: var(--font-display);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PRIORITY CORRECTIONS
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.priority-panel {
  background: var(--bg-card);
  border: 1px solid var(--accent-red);
  border-radius: var(--radius-lg);
  padding: 24px;
  position: relative;
  overflow: hidden;
}

.priority-panel::before {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 2px;
  background: linear-gradient(90deg, var(--accent-red), var(--accent-orange), var(--accent-red));
}

.priority-panel h3 {
  font-family: var(--font-display);
  font-size: 14px;
  font-weight: 700;
  color: var(--accent-red);
  text-transform: uppercase;
  letter-spacing: 1px;
  margin-bottom: 4px;
  display: flex;
  align-items: center;
  gap: 8px;
}

.priority-panel .sub {
  font-size: 11px;
  color: var(--text-muted);
  margin-bottom: 16px;
  font-family: var(--font-serif);
  font-style: italic;
}

.priority-list {
  list-style: none;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.priority-item {
  background: var(--bg-surface);
  border: 1px solid var(--border);
  border-left: 3px solid var(--accent-red);
  border-radius: var(--radius);
  padding: 12px 14px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.priority-item:hover {
  background: var(--bg-elevated);
  border-left-color: var(--accent-orange);
}

.priority-item .pi-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 4px;
}

.priority-item .pi-num {
  font-weight: 700;
  color: var(--accent-red);
  font-size: 11px;
}

.priority-item .pi-severity {
  font-size: 9px;
  text-transform: uppercase;
  letter-spacing: 1px;
  padding: 2px 6px;
  border-radius: 3px;
  font-weight: 600;
}

.sev-critical { background: var(--accent-red-dim); color: var(--accent-red); }
.sev-major { background: var(--accent-orange-dim); color: var(--accent-orange); }
.sev-moderate { background: var(--accent-yellow-dim); color: var(--accent-yellow); }

.priority-item .pi-title {
  font-size: 12px;
  color: var(--text-primary);
  font-weight: 500;
  margin-bottom: 6px;
}

.priority-item .pi-fix {
  font-size: 11px;
  color: var(--text-secondary);
  font-family: var(--font-serif);
}

.priority-item .pi-fix .old {
  text-decoration: line-through;
  color: var(--accent-red);
  opacity: 0.7;
}
.priority-item .pi-fix .new {
  color: var(--accent-green);
  font-weight: 500;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FILTER / SEARCH BAR
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.controls-bar {
  display: flex;
  gap: 12px;
  margin-bottom: 20px;
  flex-wrap: wrap;
  align-items: center;
}

.search-box {
  flex: 1;
  min-width: 240px;
  position: relative;
}

.search-box input {
  width: 100%;
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 10px 14px 10px 36px;
  color: var(--text-primary);
  font-family: var(--font-mono);
  font-size: 12px;
  outline: none;
  transition: border-color 0.2s;
}

.search-box input:focus { border-color: var(--accent-cyan); }

.search-box input::placeholder { color: var(--text-muted); }

.search-box::before {
  content: 'âŒ•';
  position: absolute;
  left: 12px;
  top: 50%;
  transform: translateY(-50%);
  color: var(--text-muted);
  font-size: 14px;
}

.filter-pills {
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
}

.pill {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: 20px;
  padding: 6px 14px;
  font-size: 11px;
  font-family: var(--font-mono);
  color: var(--text-secondary);
  cursor: pointer;
  transition: all 0.2s;
  white-space: nowrap;
}

.pill:hover { border-color: var(--text-muted); color: var(--text-primary); }

.pill.active-pill {
  border-color: var(--accent-cyan);
  color: var(--accent-cyan);
  background: rgba(24,255,255,0.06);
}

.bloc-pills {
  display: flex;
  gap: 4px;
  flex-wrap: wrap;
}

.bloc-pill {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: 4px;
  padding: 5px 10px;
  font-size: 10px;
  font-family: var(--font-mono);
  color: var(--text-muted);
  cursor: pointer;
  transition: all 0.2s;
}

.bloc-pill:hover, .bloc-pill.active-bloc {
  border-color: var(--accent-blue);
  color: var(--accent-blue);
  background: rgba(68,138,255,0.06);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   DATA TABLE
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.table-wrap {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  overflow: hidden;
}

.table-scroll {
  overflow-x: auto;
}

table {
  width: 100%;
  border-collapse: collapse;
  font-size: 12px;
}

thead {
  position: sticky;
  top: 0;
  z-index: 10;
}

thead th {
  background: var(--bg-elevated);
  padding: 12px 14px;
  text-align: left;
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 1.5px;
  color: var(--text-muted);
  font-weight: 600;
  border-bottom: 2px solid var(--border);
  white-space: nowrap;
  cursor: pointer;
  user-select: none;
  transition: color 0.2s;
}

thead th:hover { color: var(--accent-cyan); }
thead th.sorted { color: var(--accent-cyan); }
thead th .sort-arrow { margin-left: 4px; font-size: 8px; }

tbody tr {
  border-bottom: 1px solid var(--border);
  transition: background 0.15s;
}

tbody tr:hover { background: var(--bg-elevated); }

tbody td {
  padding: 10px 14px;
  vertical-align: top;
}

.td-num {
  font-weight: 700;
  color: var(--text-muted);
  font-size: 11px;
  text-align: center;
  width: 40px;
}

.td-status {
  width: 120px;
}

.status-badge {
  display: inline-flex;
  align-items: center;
  gap: 5px;
  padding: 3px 10px;
  border-radius: 4px;
  font-size: 10px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  white-space: nowrap;
}

.status-verified { background: var(--accent-green-dim); color: var(--accent-green); }
.status-corrected { background: var(--accent-red-dim); color: var(--accent-red); }
.status-approximate { background: var(--accent-orange-dim); color: var(--accent-orange); }
.status-unverified { background: var(--accent-purple-dim); color: var(--accent-purple); }

.td-data {
  max-width: 280px;
  font-weight: 500;
}

.td-correction {
  max-width: 340px;
  font-family: var(--font-serif);
  font-size: 12.5px;
  color: var(--text-secondary);
  line-height: 1.5;
}

.td-correction .corr-old {
  text-decoration: line-through;
  color: var(--accent-red);
  opacity: 0.6;
}

.td-correction .corr-new {
  color: var(--accent-green);
  font-weight: 500;
}

.td-correction .corr-none {
  color: var(--text-muted);
  font-style: italic;
}

.td-bloc {
  width: 50px;
  text-align: center;
}

.bloc-tag {
  display: inline-block;
  padding: 2px 8px;
  border-radius: 3px;
  font-size: 10px;
  font-weight: 600;
  background: var(--bg-deep);
  border: 1px solid var(--border);
  color: var(--text-muted);
}

.td-source {
  max-width: 200px;
  font-size: 11px;
  color: var(--text-muted);
}

.td-source a {
  color: var(--accent-blue);
  text-decoration: none;
}
.td-source a:hover { text-decoration: underline; }

/* Row highlight for priority corrections */
tr.row-priority {
  background: rgba(255,82,82,0.04);
}

tr.row-priority:hover {
  background: rgba(255,82,82,0.08);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   EXPAND ROW DETAIL
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.row-detail {
  display: none;
}

.row-detail.open {
  display: table-row;
}

.row-detail td {
  background: var(--bg-surface);
  padding: 16px 20px;
  border-bottom: 2px solid var(--border);
}

.detail-inner {
  max-width: 900px;
  font-family: var(--font-serif);
  font-size: 13px;
  line-height: 1.7;
  color: var(--text-secondary);
}

.detail-inner strong { color: var(--text-primary); }
.detail-inner .src-primary { color: var(--accent-green); font-family: var(--font-mono); font-size: 11px; }
.detail-inner .src-link { color: var(--accent-blue); text-decoration: none; font-family: var(--font-mono); font-size: 10px; word-break: break-all; }
.detail-inner .src-link:hover { text-decoration: underline; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   METHODOLOGY NOTE
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.methodology {
  margin-top: 40px;
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  padding: 28px;
  position: relative;
}

.methodology::before {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 2px;
  background: linear-gradient(90deg, var(--accent-blue), var(--accent-purple));
}

.methodology h3 {
  font-family: var(--font-display);
  font-size: 16px;
  font-weight: 600;
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 8px;
}

.methodology p, .methodology li {
  font-family: var(--font-serif);
  font-size: 14px;
  line-height: 1.7;
  color: var(--text-secondary);
  margin-bottom: 10px;
}

.methodology .highlight {
  color: var(--accent-cyan);
  font-weight: 500;
}

.methodology ul {
  list-style: none;
  margin: 12px 0;
}

.methodology li::before {
  content: 'â†’';
  color: var(--accent-green);
  margin-right: 8px;
  font-family: var(--font-mono);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FOOTER
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.footer {
  text-align: center;
  padding: 40px 20px;
  border-top: 1px solid var(--border);
  margin-top: 40px;
}

.footer .branding {
  font-family: var(--font-display);
  font-size: 18px;
  font-weight: 700;
  margin-bottom: 6px;
}

.footer .branding span { color: var(--accent-green); }

.footer .license {
  font-size: 10px;
  color: var(--text-muted);
  letter-spacing: 1px;
}

.footer .timestamp {
  font-size: 10px;
  color: var(--text-muted);
  margin-top: 6px;
  font-family: var(--font-mono);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   COUNT INDICATOR
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.results-count {
  font-size: 11px;
  color: var(--text-muted);
  margin-bottom: 12px;
  font-family: var(--font-mono);
}

.results-count span { color: var(--accent-cyan); font-weight: 600; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RESPONSIVE
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
@media (max-width: 768px) {
  .stats-grid { grid-template-columns: repeat(2, 1fr); }
  .stat-card .number { font-size: 2rem; }
  .container { padding: 16px 12px; }
  .chart-area { grid-template-columns: 1fr; }
  .controls-bar { flex-direction: column; }
  .search-box { min-width: 100%; }
  table { font-size: 11px; }
  .td-correction, .td-source { display: none; }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ANIMATIONS
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
@keyframes fadeUp {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

.animate-in {
  animation: fadeUp 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards;
  opacity: 0;
}

.d1 { animation-delay: 0.1s; }
.d2 { animation-delay: 0.2s; }
.d3 { animation-delay: 0.3s; }
.d4 { animation-delay: 0.4s; }
.d5 { animation-delay: 0.5s; }

/* Clickable row cursor */
tbody tr.data-row { cursor: pointer; }

/* Export button */
.export-btn {
  background: var(--bg-elevated);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 8px 16px;
  color: var(--text-secondary);
  font-family: var(--font-mono);
  font-size: 11px;
  cursor: pointer;
  transition: all 0.2s;
  display: flex;
  align-items: center;
  gap: 6px;
}
.export-btn:hover {
  border-color: var(--accent-green);
  color: var(--accent-green);
}
</style>
</head>
<body>

<div class="container">

  <!-- â•â•â• HEADER â•â•â• -->
  <header class="header animate-in d1">
    <h1>AUDIT<span class="sep">Â·</span><span class="num">60</span></h1>
    <p class="subtitle">VÃ©rification exhaustive des donnÃ©es citoyennes sur la fraude fiscale belge â€” Tableau de bord interactif</p>
    <p class="meta-line">ouaisfieu Â· intelligence citoyenne belge Â· <span>fÃ©vrier 2026</span> Â· CC BY-NC 4.0</p>
  </header>

  <!-- â•â•â• CREDIBILITY INDEX â•â•â• -->
  <div class="credibility-section animate-in d2">
    <div class="credibility-bar-wrap">
      <div class="credibility-label">
        <span class="title">Indice de fiabilitÃ© du corpus</span>
        <span class="scores">
          Avant audit : <span class="before">56,7 %</span> Â· 
          AprÃ¨s corrections : <span class="after">96,7 %</span>
        </span>
      </div>
      <div class="cred-bar-track">
        <div class="cred-bar-before" id="credBefore"></div>
        <div class="cred-bar-after" id="credAfter"></div>
      </div>
      <p class="cred-explanation">
        Avant : seules 34 donnÃ©es sur 60 Ã©taient parfaitement exactes (56,7 %). 
        AprÃ¨s application des 12 corrections prioritaires et 8 nuances â†’ 58/60 donnÃ©es dÃ©fendables au niveau institutionnel (96,7 %).
      </p>
    </div>
  </div>

  <!-- â•â•â• STATS CARDS â•â•â• -->
  <div class="stats-grid animate-in d3">
    <div class="stat-card total active" data-filter="all">
      <div class="icon">â—</div>
      <div class="number">60</div>
      <div class="label">Total donnÃ©es</div>
    </div>
    <div class="stat-card verified" data-filter="verified">
      <div class="icon">âœ“</div>
      <div class="number">34</div>
      <div class="label">ConfirmÃ©es</div>
    </div>
    <div class="stat-card corrected" data-filter="corrected">
      <div class="icon">âœ</div>
      <div class="number">15</div>
      <div class="label">Ã€ corriger</div>
    </div>
    <div class="stat-card approximate" data-filter="approximate">
      <div class="icon">â‰ˆ</div>
      <div class="number">8</div>
      <div class="label">Approximatives</div>
    </div>
    <div class="stat-card unverified" data-filter="unverified">
      <div class="icon">?</div>
      <div class="number">3</div>
      <div class="label">Non vÃ©rifiÃ©es</div>
    </div>
  </div>

  <!-- â•â•â• CHART + PRIORITY â•â•â• -->
  <div class="chart-area animate-in d4">
    <!-- DONUT -->
    <div class="donut-wrap">
      <h3>RÃ©partition des statuts</h3>
      <svg class="donut-svg" viewBox="0 0 200 200" id="donutChart"></svg>
      <div class="donut-legend">
        <div class="legend-item">
          <div class="legend-dot" style="background:var(--accent-green)"></div>
          <span>VÃ©rifiÃ© / ConfirmÃ©</span>
          <span class="count" style="color:var(--accent-green)">34</span>
        </div>
        <div class="legend-item">
          <div class="legend-dot" style="background:var(--accent-red)"></div>
          <span>CorrigÃ© / Ã€ corriger</span>
          <span class="count" style="color:var(--accent-red)">15</span>
        </div>
        <div class="legend-item">
          <div class="legend-dot" style="background:var(--accent-orange)"></div>
          <span>Approximatif</span>
          <span class="count" style="color:var(--accent-orange)">8</span>
        </div>
        <div class="legend-item">
          <div class="legend-dot" style="background:var(--accent-purple)"></div>
          <span>Non vÃ©rifiÃ©</span>
          <span class="count" style="color:var(--accent-purple)">3</span>
        </div>
      </div>
    </div>

    <!-- PRIORITY CORRECTIONS -->
    <div class="priority-panel">
      <h3>âš¡ 12 corrections prioritaires</h3>
      <p class="sub">Ces erreurs doivent Ãªtre corrigÃ©es avant toute publication â€” elles mettent en jeu la crÃ©dibilitÃ© du projet face aux dÃ©tracteurs.</p>
      <ul class="priority-list" id="priorityList"></ul>
    </div>
  </div>

  <!-- â•â•â• CONTROLS â•â•â• -->
  <div class="controls-bar animate-in d5">
    <div class="search-box">
      <input type="text" id="searchInput" placeholder="Rechercher une donnÃ©e, un mot-clÃ©, un numÃ©roâ€¦">
    </div>
    <div class="filter-pills" id="filterPills">
      <button class="pill active-pill" data-filter="all">Toutes (60)</button>
      <button class="pill" data-filter="verified">âœ“ ConfirmÃ©es (34)</button>
      <button class="pill" data-filter="corrected">âœ CorrigÃ©es (15)</button>
      <button class="pill" data-filter="approximate">â‰ˆ Approx. (8)</button>
      <button class="pill" data-filter="unverified">? Non vÃ©rif. (3)</button>
    </div>
    <div class="bloc-pills" id="blocPills">
      <button class="bloc-pill active-bloc" data-bloc="all">Tous blocs</button>
      <button class="bloc-pill" data-bloc="1">B1</button>
      <button class="bloc-pill" data-bloc="2">B2</button>
      <button class="bloc-pill" data-bloc="3">B3</button>
      <button class="bloc-pill" data-bloc="4">B4</button>
      <button class="bloc-pill" data-bloc="5">B5</button>
      <button class="bloc-pill" data-bloc="6">B6</button>
      <button class="bloc-pill" data-bloc="7">B7</button>
      <button class="bloc-pill" data-bloc="8">B8</button>
    </div>
    <button class="export-btn" id="exportBtn">â¤“ Exporter CSV</button>
  </div>

  <div class="results-count" id="resultsCount">Affichage : <span>60</span> / 60 donnÃ©es</div>

  <!-- â•â•â• MAIN TABLE â•â•â• -->
  <div class="table-wrap">
    <div class="table-scroll">
      <table>
        <thead>
          <tr>
            <th class="sorted" data-sort="num">NÂ° <span class="sort-arrow">â–²</span></th>
            <th data-sort="status">Statut</th>
            <th>Bloc</th>
            <th data-sort="data">DonnÃ©e</th>
            <th>Correction / Nuance</th>
            <th>Source primaire</th>
          </tr>
        </thead>
        <tbody id="tableBody"></tbody>
      </table>
    </div>
  </div>

  <!-- â•â•â• METHODOLOGY â•â•â• -->
  <div class="methodology animate-in">
    <h3>ğŸ“ Note mÃ©thodologique</h3>
    <p>Ce tableau de bord constitue l'<span class="highlight">auto-audit</span> des donnÃ©es utilisÃ©es dans les PWA citoyennes du projet ouaisfieu sur la fraude fiscale belge. Chaque donnÃ©e a Ã©tÃ© vÃ©rifiÃ©e contre des sources primaires identifiÃ©es (rapports de la Cour des Comptes, INAMI, ONEM, Statbel, Moniteur Belge, Ã©tudes acadÃ©miques HIVA-KU Leuven, SPF SÃ©curitÃ© Sociale, etc.).</p>
    <p><strong>Le ratio Ã—120</strong> â€” chiffre central du projet â€” repose sur une comparaison <span class="highlight">mÃ©thodologiquement asymÃ©trique</span> : il confronte une estimation haute thÃ©orique (â‚¬30 Mds, Murphy 2019) Ã  un montant de fraude uniquement dÃ©tectÃ©e (â‚¬250 M, Cour des Comptes 2017). Le ratio <span class="highlight">Ã—10</span> (redressements fiscaux vs fraude sociale dÃ©tectÃ©e, Strale/inegalites.be 2018) est mÃ©thodologiquement dÃ©fendable et suffit Ã  dÃ©montrer la disproportion spectaculaire des traitements.</p>
    <ul>
      <li><strong>Principe :</strong> prÃ©senter des fourchettes plutÃ´t que des chiffres uniques quand la rÃ©alitÃ© est contestÃ©e</li>
      <li><strong>Principe :</strong> distinguer systÃ©matiquement fraude estimÃ©e, fraude dÃ©tectÃ©e et tax gap</li>
      <li><strong>Principe :</strong> citer les sources primaires vÃ©rifiables â€” les opinions ne sont pas des preuves</li>
      <li><strong>Principe :</strong> une contre-institution citoyenne doit s'imposer des standards supÃ©rieurs Ã  ceux des institutions qu'elle critique</li>
    </ul>
    <p>Ce document est publiÃ© en transparence selon les principes de l'<span class="highlight">intelligence citoyenne ouverte</span>. Toute erreur rÃ©siduelle signalÃ©e sera corrigÃ©e et crÃ©ditÃ©e.</p>
  </div>

  <!-- â•â•â• FOOTER â•â•â• -->
  <footer class="footer">
    <div class="branding"><span>ouais</span>fieu</div>
    <div class="license">CC BY-NC 4.0 Â· Intelligence Citoyenne Belge Â· Fork Â· Hack Â· Spread</div>
    <div class="timestamp">Audit gÃ©nÃ©rÃ© le 20/02/2026 Â· 60 donnÃ©es Â· 8 blocs thÃ©matiques</div>
  </footer>

</div>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// DATA â€” 60 donnÃ©es avec mÃ©tadonnÃ©es complÃ¨tes
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

const DATA = [
  // BLOC 1 â€” Ratios fraude fiscale vs sociale
  { num: 1, bloc: 1, status: "approximate", label: "Fraude fiscale â‚¬30 Mds/an", correction: "Fourchette â‚¬6,6â€“â‚¬30,4 Mds â€” prÃ©senter comme estimation haute, pas consensus", source: "Murphy (S&D, 2019) ; Crombez ; SUBLEC/SPF 2012", priority: true, severity: "critical",
    detail: "Le chiffre de â‚¬30 milliards est l'extrÃ©mitÃ© supÃ©rieure d'un spectre : BNB â‚¬6,6 Mds ; ISI â‚¬10 Mds ; SUBLEC â‚¬12,7-12,9 Mds ; RJF â‚¬20 Mds ; Murphy â‚¬30,4 Mds. Le tax gap inclut l'optimisation, les erreurs, l'Ã©conomie informelle. L'impÃ´t rÃ©ellement Ã©ludÃ© serait de â‚¬3,4 Ã  â‚¬14 Mds (Hoge Raad van FinanciÃ«n via PAL.be, nov. 2025)." },
  { num: 2, bloc: 1, status: "verified", label: "Fraude sociale â‚¬250 M/an (dÃ©tectÃ©e)", correction: "PrÃ©ciser : dÃ©tectÃ©e uniquement. ObsolÃ¨te â†’ â‚¬435 M en 2024 (SIRS)", source: "Cour des Comptes, sept. 2017", priority: false,
    detail: "Chiffre explicitement citÃ© par l'Observatoire belge des inÃ©galitÃ©s (note [5]). Mise Ã  jour : â‚¬342 M (2021), â‚¬385 M (2023), â‚¬435 M (2024) selon les rapports annuels SIRS." },
  { num: 3, bloc: 1, status: "corrected", label: "Ratio Ã—120", correction: "<span class='corr-old'>Ã—120</span> â†’ Le ratio mÃ©thodologiquement solide est <span class='corr-new'>Ã—10</span> (Strale, inegalites.be, 2018)", source: "Calcul interne ; Strale 2018", priority: true, severity: "critical",
    detail: "â‚¬30 000 M Ã· â‚¬250 M = 120 est arithmÃ©tiquement exact MAIS compare estimation thÃ©orique haute vs fraude dÃ©tectÃ©e uniquement. Strale calcule Ã—10 : redressements fiscaux ~â‚¬2,5 Mds vs fraude sociale dÃ©tectÃ©e ~â‚¬250 M. Le Ã—10 suffit Ã  dÃ©montrer la disproportion." },
  { num: 4, bloc: 1, status: "verified", label: "â‚¬951,29/seconde fraude fiscale", correction: "<span class='corr-none'>â€”</span>", source: "Calcul vÃ©rifiÃ©", priority: false, detail: "â‚¬30 Mds Ã· 31 536 000 s = â‚¬951,29/s (base 365 j). Avec 365,25 j : â‚¬950,63." },
  { num: 5, bloc: 1, status: "verified", label: "â‚¬7,93/seconde fraude sociale", correction: "<span class='corr-none'>â€”</span>", source: "Calcul vÃ©rifiÃ©", priority: false, detail: "â‚¬250 M Ã· 31 536 000 s = â‚¬7,93/s" },
  { num: 6, bloc: 1, status: "verified", label: "â‚¬2 586 per capita/an (fiscal)", correction: "Population lÃ©gÃ¨rement obsolÃ¨te (11,6 M â†’ 11,83 M) : corrigÃ© â‚¬2 536", source: "Statbel, 01/01/2025", priority: false, detail: "â‚¬30 Mds Ã· 11,6 M = â‚¬2 586,21. CorrigÃ© : â‚¬30 Mds Ã· 11 825 551 = â‚¬2 536." },
  { num: 7, bloc: 1, status: "verified", label: "â‚¬21,55 per capita/an (social)", correction: "CorrigÃ© : â‚¬21,14 (pop. 11,83 M)", source: "Calcul vÃ©rifiÃ©", priority: false, detail: "" },
  { num: 8, bloc: 1, status: "verified", label: "â‚¬7,08 per capita/jour (fiscal)", correction: "<span class='corr-none'>â€”</span>", source: "Calcul vÃ©rifiÃ©", priority: false, detail: "â‚¬2 586,21 Ã· 365 = â‚¬7,085" },

  // BLOC 2 â€” Panama/Pandora Papers & offshore
  { num: 9, bloc: 2, status: "verified", label: "732 Belges dans les Panama Papers (2016)", correction: "<span class='corr-none'>â€”</span>", source: "Kristof Clerix, Parlement europÃ©en, 27/09/2016", priority: false, detail: "Analyse conjointe Knack, Le Soir, De Tijd, MO*. â‚¬39,6 M rÃ©cupÃ©rÃ©s 9 ans aprÃ¨s (BX1, L'Avenir, 03/04/2025)." },
  { num: 10, bloc: 2, status: "verified", label: "1 217 Belges dans les Pandora Papers (2021)", correction: "<span class='corr-none'>â€”</span>", source: "RTBF, 03/10/2021", priority: false, detail: "33 noms figuraient dÃ©jÃ  dans les Panama Papers." },
  { num: 11, bloc: 2, status: "verified", label: "1 659 entitÃ©s offshore Experta/Dexia", correction: "Ã‰cart marginal : MO* compte 1 658 (1 595 + 63)", source: "ICIJ, 07/12/2017", priority: false, detail: "Experta = filiale luxembourgeoise BIL/Dexia. Sommet de la liste des 500+ banques Mossack Fonseca. Perquisition Belfius le 05/12/2017." },
  { num: 12, bloc: 2, status: "corrected", label: "â‚¬700-900 M excess profit rulings", correction: "<span class='corr-old'>â‚¬700-900 M, 55 MNC</span> â†’ <span class='corr-new'>~â‚¬700 M, au moins 35 MNC</span> (CE, 11/01/2016)", source: "CE, dÃ©cision C(2015) 9887 final ; JO L 260", priority: true, severity: "moderate",
    detail: "Vestager a constamment citÃ© 'around â‚¬700 million'. Le ~$900 M = conversion USD. Le '55' = identification Ã©largie ultÃ©rieure. Tribunal UE annulÃ© 2019, CJUE rÃ©tabli 2021, Tribunal confirmÃ© 20/09/2023." },

  // BLOC 3 â€” AsymÃ©trie des contrÃ´les
  { num: 13, bloc: 3, status: "corrected", label: "ContrÃ´leurs fiscaux Ã· 2 depuis 2012", correction: "<span class='corr-old'>ContrÃ´leurs Ã· 2</span> â†’ <span class='corr-new'>ContrÃ´les Ã· 2 ; effectifs -22 %</span>", source: "La Libre, 2017 ; L'Avenir, 14/04/2023", priority: true, severity: "major",
    detail: "Effectifs AGFisc : 2 870 (07/2016) â†’ 2 246 (12/2022) = -22 %. ContrÃ´les approfondis : 111 582 (2013) â†’ ~60 000 = -50 %. Formulation correcte : 'le nombre de contrÃ´les fiscaux a Ã©tÃ© divisÃ© par deux depuis 2013'." },
  { num: 14, bloc: 3, status: "verified", label: "+45 inspecteurs sociaux recrutÃ©s (2021)", correction: "<span class='corr-none'>â€”</span>", source: "Contrastes (Ã‰quipes Populaires), mars-avril 2022", priority: false, detail: "Conclave budgÃ©taire octobre 2021, gouvernement De Croo." },
  { num: 15, bloc: 3, status: "verified", label: "-21 % contrÃ´leurs PME (2016-2021)", correction: "<span class='corr-none'>â€”</span>", source: "Cour des Comptes, isoc-venb.ccrek.be", priority: false, detail: "DÃ©clin 3Ã— plus rapide que la moyenne du SPF Finances." },
  { num: 16, bloc: 3, status: "unverified", label: "Prix de transfert 'jamais contrÃ´lÃ©s'", correction: "Citation exacte CdC introuvable. Ã‰lÃ©ments connexes existent.", source: "Non identifiÃ©", priority: true, severity: "major",
    detail: "Aucun rapport CdC avec cette formulation prÃ©cise. Ã‰lÃ©ments connexes : contrÃ´leurs insuffisamment formÃ©s (rapport R&D), contrÃ´les grandes entreprises -32 % (2017-2021). Documentation prix de transfert obligatoire seulement depuis 2016." },
  { num: 17, bloc: 3, status: "approximate", label: "Non-recours droits sociaux 45-50 %", correction: "En rÃ©alitÃ© plus Ã©levÃ© pour le RIS belge : <span class='corr-new'>57-76 %</span> (Bouckaert & Schokkaert, 2011)", source: "Bouckaert & Schokkaert 2011 ; BELMOD/SPF 2022", priority: false,
    detail: "45-50 % = moyenne europÃ©enne (Janssens, GoedemÃ© et al., TAKE/BELSPO). Le RIS belge montre un non-recours supÃ©rieur." },
  { num: 18, bloc: 3, status: "verified", label: "4 % fraude avÃ©rÃ©e au RIS", correction: "<span class='corr-none'>4,14 % exactement</span>", source: "PwC / SPP IntÃ©gration Sociale, 2013", priority: false, detail: "RIS : 4,14 % ; aide sociale Ã©quivalente : 4,47 % ; aide mÃ©dicale : 1,69 %." },
  { num: 19, bloc: 3, status: "approximate", label: "Non-recours = 10-20Ã— montant fraude", correction: "Plausible par dÃ©duction, mais aucune source belge unique ne cite ce ratio", source: "DÃ©duction Bouckaert & PwC", priority: false, detail: "" },

  // BLOC 4 â€” Reportage Deborsu
  { num: 20, bloc: 4, status: "verified", label: "Titre / date / durÃ©e reportage", correction: "Titre exact : 'Sans boulot : tous fraudeurs ?'", source: "Programme-tv.com, La DH, La Libre", priority: false, detail: "Ã‰mission 'Je vous dÃ©range' par Christophe Deborsu, 07/11/2025, 19h50, RTL-TVI, 55 min." },
  { num: 21, bloc: 4, status: "verified", label: "Audience 410 860 tÃ©lÃ©spectateurs", correction: "<span class='corr-none'>â€”</span>", source: "CIM/AudimÃ©trie via La DH, 10/11/2025", priority: false, detail: "" },
  { num: 22, bloc: 4, status: "verified", label: "39,1 % de part de marchÃ©", correction: "<span class='corr-none'>â€”</span>", source: "CIM/AudimÃ©trie", priority: false, detail: "42 % sur les 18-54 ans." },
  { num: 23, bloc: 4, status: "verified", label: "CSA : 100+ plaintes", correction: "<span class='corr-none'>â€”</span>", source: "CSA, communiquÃ© 12/11/2025", priority: false, detail: "Infraction potentielle Ã  l'art. 2.4-1 du dÃ©cret du 04/02/2021 (discrimination condition sociale)." },
  { num: 24, bloc: 4, status: "verified", label: "Saisine CDJ", correction: "<span class='corr-none'>â€”</span>", source: "CSA â†’ CDJ, dÃ©lai 90 jours", priority: false, detail: "" },
  { num: 25, bloc: 4, status: "verified", label: "GaÃ«lle Denys, CPAS Verviers", correction: "<span class='corr-none'>â€”</span>", source: "DÃ©claration Facebook Denys", priority: false, detail: "Interview originale de plus d'une heure, fortement tronquÃ©e au montage." },
  { num: 26, bloc: 4, status: "approximate", label: "Motion unanime conseil Verviers", correction: "'Tous partis confondus' mais unanimitÃ© formelle non confirmÃ©e", source: "L'Avenir, 25/11/2025", priority: false, detail: "Conseil communal du lundi 24/11/2025." },
  { num: 27, bloc: 4, status: "corrected", label: "Bouchez 'hallucinant'", correction: "<span class='corr-old'>Sens critique</span> â†’ <span class='corr-new'>Sens POSITIF (Ã©loge du reportage)</span>", source: "Tweet @GLBouchez, 08/11/2025", priority: true, severity: "critical",
    detail: "Bouchez qualifie le reportage de 'vrai travail d'enquÃªte' et de 'reportage hallucinant' dans un sens laudatif. Il l'utilise pour critiquer 'l'hÃ©ritage de l'assistanat de la gauche'. PrÃ©senter ce terme comme une critique est un CONTRESENS." },
  { num: 28, bloc: 4, status: "verified", label: "Ducarme demande audition parlementaire", correction: "PrÃ©ciser : il est prÃ©sident de la Commission", source: "La DH, 12/11/2025 ; 21News, 02/12/2025", priority: false, detail: "Audition de 5 ministres fÃ©dÃ©raux organisÃ©e Ã  l'unanimitÃ©." },
  { num: 29, bloc: 4, status: "corrected", label: "Charlotte Deborsu â€” lien familial", correction: "<span class='corr-old'>Fille</span> â†’ <span class='corr-new'>NiÃ¨ce</span> de Christophe (fille de FrÃ©dÃ©ric)", source: "La Libre, RTBF, L'Avenir, juin 2024", priority: true, severity: "major",
    detail: "DÃ©putÃ©e fÃ©dÃ©rale MR depuis juin 2024 (plus jeune dÃ©putÃ©e francophone), anciennement Ã©chevine de Namur (2018-2024)." },
  { num: 30, bloc: 4, status: "corrected", label: "Cortisse partage reportage", correction: "<span class='corr-old'>Seule parmi Ã©lus MR</span> â†’ <span class='corr-new'>Seule des 37 Ã©lus du conseil communal</span>. + PrÃ©sidente du conseil + DÃ©putÃ©e FWB", source: "L'Avenir, rÃ©seaux sociaux", priority: true, severity: "moderate",
    detail: "StÃ©phanie Cortisse est prÃ©sidente du conseil communal de Verviers, dÃ©putÃ©e au Parlement FWB et prÃ©sidente de la FÃ©dÃ©ration MR de l'arrondissement de Verviers (depuis avril 2025). Cartel Ensemble Verviers (MR/EngagÃ©s/Nouveau Verviers)." },

  // BLOC 5 â€” Gouvernement Arizona
  { num: 31, bloc: 5, status: "verified", label: "Coalition Arizona (composition)", correction: "<span class='corr-none'>â€”</span>", source: "Moniteur belge, 03/02/2025", priority: false, detail: "N-VA + MR + CD&V + Les EngagÃ©s + Vooruit. 81/150 siÃ¨ges. PM : Bart De Wever." },
  { num: 32, bloc: 5, status: "corrected", label: "â‚¬23,3 Mds d'Ã©conomies", correction: "<span class='corr-old'>â‚¬23,3 Mds</span> â†’ <span class='corr-new'>â‚¬23 Mds</span>", source: "Les EngagÃ©s (site officiel) ; analyses budgÃ©taires", priority: false, detail: "â‚¬18 Mds Ã©conomies structurelles + â‚¬5 Mds supplÃ©mentaires." },
  { num: 33, bloc: 5, status: "verified", label: "ChÃ´mage limitÃ© Ã  2 ans max", correction: "<span class='corr-none'>â€”</span>", source: "Loi-programme MB 29/07/2025 ; ONEM.be", priority: false, detail: "24 mois max (12 + 12 selon historique). Mesures transitoires 01/07/2025. PremiÃ¨res exclusions 01/01/2026. RÃ©gime complet 01/03/2026." },
  { num: 34, bloc: 5, status: "verified", label: "21 500 exclusions 1Ã¨re vague", correction: "<span class='corr-none'>â€”</span>", source: "ONEM via RTBF et L'Avenir, 01/01/2026", priority: false, detail: "" },
  { num: 35, bloc: 5, status: "verified", label: "13 000 exclusions en Wallonie", correction: "<span class='corr-none'>â€”</span>", source: "ONEM via RTBF et L'Avenir", priority: false, detail: "" },
  { num: 36, bloc: 5, status: "corrected", label: "Malus pension -5 %/an", correction: "<span class='corr-old'>-5 % uniforme</span> â†’ <span class='corr-new'>Progressif : -2 % (1961-65) / -4 % (1966-74) / -5 % (â‰¥1975)</span>", source: "Accord budgÃ©taire nov. 2025", priority: true, severity: "major",
    detail: "Conditions d'exemption : 35 annÃ©es avec â‰¥156 jours effectifs + 7 020 jours total. EntrÃ©e en vigueur reportÃ©e au 01/01/2027." },
  { num: 37, bloc: 5, status: "approximate", label: "Perte pension -â‚¬404/mois", correction: "~â‚¬400 (PTB) ; moyenne FGTB/SFP : <span class='corr-new'>â‚¬318/mois</span>", source: "PTB ; FGTB/SFP, fÃ©v. 2026", priority: false, detail: "â‚¬404 suppose pension de base de ~â‚¬1 616 avec 5 ans anticipation Ã  5 %." },
  { num: 38, bloc: 5, status: "verified", label: "Ã‚ge pension 66 â†’ 67 ans (2030)", correction: "<span class='corr-none'>â€”</span>", source: "RÃ©forme Michel ; non modifiÃ© par Arizona", priority: false, detail: "" },
  { num: 39, bloc: 5, status: "verified", label: "Budget bien-Ãªtre -â‚¬586 M", correction: "<span class='corr-none'>â€”</span>", source: "Fediplus.be ; accord de PÃ¢ques", priority: false, detail: "Enveloppe bien-Ãªtre totale supprimÃ©e sur la lÃ©gislature : â‚¬2,8 Mds." },
  { num: 40, bloc: 5, status: "verified", label: "Sanctions malades -10 %", correction: "<span class='corr-none'>â€”</span>", source: "Accord gouvernement Arizona via RTBF, PTB", priority: false, detail: "Quadruplement de la sanction prÃ©cÃ©dente (2,5 %)." },
  { num: 41, bloc: 5, status: "verified", label: "Suspension indemnitÃ©s maladie", correction: "<span class='corr-none'>â€”</span>", source: "Accord gouvernement Arizona", priority: false, detail: "En cas d'absence non justifiÃ©e Ã  convocation mÃ©decin-conseil ou mÃ©decin du travail." },
  { num: 42, bloc: 5, status: "approximate", label: "Certificats mÃ©dicaux limitÃ©s 3 mois", correction: "Une seule source trouvÃ©e", source: "Ouaisfi.eu (source unique)", priority: false, detail: "" },
  { num: 43, bloc: 5, status: "verified", label: "Maladie sans certificat 2â†’3 jours", correction: "<span class='corr-none'>RÃ©duits de 3 Ã  2 jours non consÃ©cutifs/an</span>", source: "UCM, SNI, Coalition SantÃ©", priority: false, detail: "" },
  { num: 44, bloc: 5, status: "verified", label: "RCC supprimÃ©", correction: "<span class='corr-none'>â€”</span>", source: "MB, 31/01/2025", priority: false, detail: "Exceptions : motif mÃ©dical et restructurations prÃ©existantes." },
  { num: 45, bloc: 5, status: "verified", label: "240h supplÃ©mentaires sans sursalaire", correction: "<span class='corr-none'>â€”</span>", source: "Accord Arizona", priority: false, detail: "Brut = net, rÃ©gime 360h, sans accord syndical." },
  { num: 46, bloc: 5, status: "verified", label: "Indexation plafonnÃ©e â‚¬4 000 brut", correction: "<span class='corr-none'>+ â‚¬2 000 pour allocations. 2 sauts prÃ©vus (2026, 2028)</span>", source: "Accord budgÃ©taire 24/11/2025", priority: false, detail: "" },

  // BLOC 6 â€” Mobilisations
  { num: 47, bloc: 6, status: "verified", label: "100 000 manifestants (fÃ©v. 2025)", correction: "Syndicats : ~100 000 ; Police : 60 000. Date : 13 fÃ©vrier.", source: "FGTB, CSC ; zone police Bruxelles", priority: false, detail: "Front commun syndical + 45 organisations sociÃ©tÃ© civile." },
  { num: 48, bloc: 6, status: "verified", label: "GrÃ¨ve 31 mars 2025", correction: "CGSLB absente (FGTB + CSC uniquement)", source: "FGTB, CSC", priority: false, detail: "Aucun vol passager Brussels Airport, tout annulÃ© Ã  Charleroi, SNCB service minimum." },
  { num: 49, bloc: 6, status: "verified", label: "140 000 manifestants (oct. 2025)", correction: "Syndicats : 140 000 ; Police : 80 000. Date : 14 octobre.", source: "FGTB (Bodson) ; zone police Bruxelles-Ixelles", priority: false, detail: "" },
  { num: 50, bloc: 6, status: "verified", label: "3 jours de grÃ¨ve (nov. 2025)", correction: "24-25-26 novembre. 3 confÃ©dÃ©rations cette fois.", source: "CSC, FGTB, CGSLB ; Moustique", priority: false, detail: "~300 000 mobilisÃ©s sur 3 jours." },
  { num: 51, bloc: 6, status: "verified", label: "Coalition a failli tomber (23/11)", correction: "<span class='corr-none'>Kern de 20h dans la nuit</span>", source: "La Libre, 24/11/2025 ; Rapports de Force, 26/11/2025", priority: false, detail: "MR vs nouvelles taxes, Vooruit vs saut d'index, N-VA poussant â‚¬10 Mds d'Ã©conomies." },
  { num: 52, bloc: 6, status: "verified", label: "â‚¬9,2 Mds accord budgÃ©taire", correction: "<span class='corr-none'>â€”</span>", source: "PM De Wever, 24/11/2025", priority: false, detail: "60 % rÃ©duction dÃ©penses, 40 % nouvelles recettes." },

  // BLOC 7 â€” BIM
  { num: 53, bloc: 7, status: "corrected", label: "~2 millions de BIM", correction: "<span class='corr-old'>~2 M</span> â†’ <span class='corr-new'>~2,4 millions</span> (21 % de la population)", source: "INAMI via L'Ã‰cho/De Tijd, 28/01/2026", priority: true, severity: "major",
    detail: "Au 30/06/2025 : environ 2,4 millions de BIM. Hausse de ~400 000 depuis juin 2020. AccÃ©lÃ©rÃ©e par accÃ¨s automatique pour chÃ´meurs/incapacitÃ©s isolÃ©s (3+ mois) depuis octobre 2024." },
  { num: 54, bloc: 7, status: "corrected", label: "MÃ F BIM â‚¬270,55", correction: "<span class='corr-old'>â‚¬270,55</span> â†’ <span class='corr-new'>â‚¬548,55</span> (MÃ F social BIM). â‚¬270,55 = MÃ F revenus tranche basse (autre systÃ¨me)", source: "INAMI ; Solidaris ; Partenamut", priority: true, severity: "critical",
    detail: "Confusion entre deux systÃ¨mes MÃ F distincts. MÃ F social BIM = â‚¬548,55/an. MÃ F revenus tranche basse (<â‚¬13 402,43 nets) = â‚¬270,55, applicable Ã  tous les mÃ©nages." },
  { num: 55, bloc: 7, status: "verified", label: "Ticket modÃ©rateur BIM â‚¬1 (avec DMG)", correction: "<span class='corr-none'>â€”</span>", source: "INAMI, budget 2026", priority: false, detail: "Sans DMG : â‚¬1,50. BIM <25 ans avec DMG : â‚¬0 (gratuit depuis 01/10/2023)." },
  { num: 56, bloc: 7, status: "verified", label: "Plafond revenus BIM â‚¬28 054,93", correction: "<span class='corr-none'>â€”</span>", source: "MC, Solidaris, CM, INAMI", priority: false, detail: "+â‚¬5 193,74 par membre supplÃ©mentaire du mÃ©nage." },

  // BLOC 8 â€” Ã‰quivalences â‚¬30 Mds
  { num: 57, bloc: 8, status: "corrected", label: "200 000 lits d'hÃ´pital Ã  â‚¬150 000", correction: "<span class='corr-old'>â‚¬150 000/lit</span> â†’ <span class='corr-new'>â‚¬200 000-â‚¬400 000/lit</span>. Soit ~120 000 lits, pas 200 000.", source: "Ã‰tudes PMC 2021 ; Oireachtas 2020 ; hospi.info", priority: true, severity: "major",
    detail: "CoÃ»t rÃ©el en Europe occidentale : PMC Italie â‚¬190 000-â‚¬347 000 ; Irlande â‚¬375 000 ; Allemagne/France/UK â‚¬400 000-â‚¬1 000 000. Sous-estimation de 33 Ã  167 %." },
  { num: 58, bloc: 8, status: "approximate", label: "545 000 enseignants Ã  â‚¬55 000/poste", correction: "Raisonnable (bas de fourchette â‚¬55 000-â‚¬65 000)", source: "OCDE, Education at a Glance 2024-2025", priority: false, detail: "" },
  { num: 59, bloc: 8, status: "approximate", label: "150 000 logements sociaux Ã  â‚¬200 000", correction: "CrÃ©dible (fourchette â‚¬150 000-â‚¬250 000 selon rÃ©gion)", source: "VMSW Flandre ; Banque des Territoires France, 2023", priority: false, detail: "" },
  { num: 60, bloc: 8, status: "corrected", label: "3 000 000 bourses Ã©tudiantes Ã  â‚¬10 000", correction: "<span class='corr-old'>â‚¬10 000/bourse</span> â†’ Moyenne rÃ©elle : <span class='corr-new'>â‚¬1 400</span> ; max : â‚¬5 000-â‚¬6 000. Erreur facteur Ã—7.", source: "Enseignement.be (FWB)", priority: true, severity: "critical",
    detail: "Avec â‚¬1 400 moyen : â‚¬30 Mds = ~21,4 millions de bourses. MÃªme au max (~â‚¬5 000) : 6 millions. Le chiffre de â‚¬10 000 est ~7Ã— la moyenne rÃ©elle." }
];

const PRIORITY_ITEMS = DATA.filter(d => d.priority).sort((a, b) => {
  const sev = { critical: 0, major: 1, moderate: 2 };
  return (sev[a.severity] || 3) - (sev[b.severity] || 3);
});

const BLOC_NAMES = {
  1: "Ratios fraude",
  2: "Panama/Pandora",
  3: "AsymÃ©trie contrÃ´les",
  4: "Reportage Deborsu",
  5: "Gouv. Arizona",
  6: "Mobilisations",
  7: "BIM",
  8: "Ã‰quivalences â‚¬30 Mds"
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// DONUT CHART
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function drawDonut() {
  const data = [
    { value: 34, color: '#00e676', label: 'VÃ©rifiÃ©' },
    { value: 15, color: '#ff5252', label: 'CorrigÃ©' },
    { value: 8, color: '#ff9100', label: 'Approximatif' },
    { value: 3, color: '#b388ff', label: 'Non vÃ©rifiÃ©' }
  ];
  const total = data.reduce((s, d) => s + d.value, 0);
  const cx = 100, cy = 100, r = 80, inner = 50;
  let cumulative = 0;
  let paths = '';

  data.forEach(d => {
    const startAngle = (cumulative / total) * 2 * Math.PI - Math.PI / 2;
    cumulative += d.value;
    const endAngle = (cumulative / total) * 2 * Math.PI - Math.PI / 2;
    const largeArc = d.value / total > 0.5 ? 1 : 0;
    const x1o = cx + r * Math.cos(startAngle);
    const y1o = cy + r * Math.sin(startAngle);
    const x2o = cx + r * Math.cos(endAngle);
    const y2o = cy + r * Math.sin(endAngle);
    const x1i = cx + inner * Math.cos(endAngle);
    const y1i = cy + inner * Math.sin(endAngle);
    const x2i = cx + inner * Math.cos(startAngle);
    const y2i = cy + inner * Math.sin(startAngle);
    paths += `<path d="M${x1o},${y1o} A${r},${r} 0 ${largeArc} 1 ${x2o},${y2o} L${x1i},${y1i} A${inner},${inner} 0 ${largeArc} 0 ${x2i},${y2i} Z" fill="${d.color}" opacity="0.85" stroke="${'#12121e'}" stroke-width="2"/>`;
  });

  paths += `<text x="${cx}" y="${cy - 6}" text-anchor="middle" fill="#e8e6e3" font-family="Space Grotesk" font-size="28" font-weight="700">60</text>`;
  paths += `<text x="${cx}" y="${cy + 14}" text-anchor="middle" fill="#9998a8" font-family="JetBrains Mono" font-size="9" letter-spacing="1">DONNÃ‰ES</text>`;

  document.getElementById('donutChart').innerHTML = paths;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// PRIORITY LIST
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderPriorityList() {
  const list = document.getElementById('priorityList');
  list.innerHTML = PRIORITY_ITEMS.map(d => {
    const sevClass = d.severity === 'critical' ? 'sev-critical' : d.severity === 'major' ? 'sev-major' : 'sev-moderate';
    const sevLabel = d.severity === 'critical' ? 'Critique' : d.severity === 'major' ? 'Majeure' : 'ModÃ©rÃ©e';
    return `<li class="priority-item" data-num="${d.num}">
      <div class="pi-header">
        <span class="pi-num">NÂ°${d.num} Â· Bloc ${d.bloc}</span>
        <span class="pi-severity ${sevClass}">${sevLabel}</span>
      </div>
      <div class="pi-title">${d.label}</div>
      <div class="pi-fix">${d.correction}</div>
    </li>`;
  }).join('');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// TABLE RENDERING
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let currentFilter = 'all';
let currentBloc = 'all';
let searchQuery = '';
let openDetailNum = null;

function getFilteredData() {
  return DATA.filter(d => {
    if (currentFilter !== 'all' && d.status !== currentFilter) return false;
    if (currentBloc !== 'all' && d.bloc !== parseInt(currentBloc)) return false;
    if (searchQuery) {
      const q = searchQuery.toLowerCase();
      const haystack = `${d.num} ${d.label} ${d.correction} ${d.source} ${d.detail || ''} ${BLOC_NAMES[d.bloc]}`.toLowerCase();
      if (!haystack.includes(q)) return false;
    }
    return true;
  });
}

function renderTable() {
  const filtered = getFilteredData();
  const tbody = document.getElementById('tableBody');

  document.getElementById('resultsCount').innerHTML = `Affichage : <span>${filtered.length}</span> / 60 donnÃ©es`;

  tbody.innerHTML = filtered.map(d => {
    const statusClass = `status-${d.status}`;
    const statusLabel = d.status === 'verified' ? 'âœ“ VÃ©rifiÃ©' : d.status === 'corrected' ? 'âœ CorrigÃ©' : d.status === 'approximate' ? 'â‰ˆ Approx.' : '? Non vÃ©r.';
    const isPriority = d.priority ? ' row-priority' : '';
    const isOpen = openDetailNum === d.num;
    
    let row = `<tr class="data-row${isPriority}" data-num="${d.num}">
      <td class="td-num">${d.num}</td>
      <td class="td-status"><span class="status-badge ${statusClass}">${statusLabel}</span></td>
      <td class="td-bloc"><span class="bloc-tag">B${d.bloc}</span></td>
      <td class="td-data">${d.label}</td>
      <td class="td-correction">${d.correction}</td>
      <td class="td-source">${d.source}</td>
    </tr>`;

    if (d.detail) {
      row += `<tr class="row-detail${isOpen ? ' open' : ''}" data-detail="${d.num}">
        <td colspan="6">
          <div class="detail-inner">${d.detail}</div>
        </td>
      </tr>`;
    }

    return row;
  }).join('');

  // Click handlers for expandable rows
  tbody.querySelectorAll('.data-row').forEach(row => {
    row.addEventListener('click', () => {
      const num = parseInt(row.dataset.num);
      const detailRow = tbody.querySelector(`tr[data-detail="${num}"]`);
      if (!detailRow) return;
      if (openDetailNum === num) {
        detailRow.classList.remove('open');
        openDetailNum = null;
      } else {
        tbody.querySelectorAll('.row-detail.open').forEach(r => r.classList.remove('open'));
        detailRow.classList.add('open');
        openDetailNum = num;
      }
    });
  });
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// CREDIBILITY BAR ANIMATION
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function animateCredBar() {
  setTimeout(() => {
    document.getElementById('credBefore').style.width = '56.7%';
  }, 400);
  setTimeout(() => {
    document.getElementById('credAfter').style.width = '96.7%';
    document.getElementById('credAfter').textContent = '96,7 %';
  }, 800);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// EVENT HANDLERS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function initEvents() {
  // Stat cards
  document.querySelectorAll('.stat-card').forEach(card => {
    card.addEventListener('click', () => {
      currentFilter = card.dataset.filter;
      document.querySelectorAll('.stat-card').forEach(c => c.classList.remove('active'));
      card.classList.add('active');
      // Sync pills
      document.querySelectorAll('.pill').forEach(p => p.classList.remove('active-pill'));
      document.querySelector(`.pill[data-filter="${currentFilter}"]`)?.classList.add('active-pill');
      renderTable();
    });
  });

  // Filter pills
  document.querySelectorAll('.pill').forEach(pill => {
    pill.addEventListener('click', () => {
      currentFilter = pill.dataset.filter;
      document.querySelectorAll('.pill').forEach(p => p.classList.remove('active-pill'));
      pill.classList.add('active-pill');
      // Sync stat cards
      document.querySelectorAll('.stat-card').forEach(c => c.classList.remove('active'));
      document.querySelector(`.stat-card[data-filter="${currentFilter}"]`)?.classList.add('active');
      renderTable();
    });
  });

  // Bloc pills
  document.querySelectorAll('.bloc-pill').forEach(pill => {
    pill.addEventListener('click', () => {
      currentBloc = pill.dataset.bloc;
      document.querySelectorAll('.bloc-pill').forEach(p => p.classList.remove('active-bloc'));
      pill.classList.add('active-bloc');
      renderTable();
    });
  });

  // Search
  document.getElementById('searchInput').addEventListener('input', (e) => {
    searchQuery = e.target.value;
    renderTable();
  });

  // Priority item click â†’ scroll to table row
  document.querySelectorAll('.priority-item').forEach(item => {
    item.addEventListener('click', () => {
      const num = item.dataset.num;
      const row = document.querySelector(`tr.data-row[data-num="${num}"]`);
      if (row) {
        // Reset filters to show all
        currentFilter = 'all';
        currentBloc = 'all';
        searchQuery = '';
        document.getElementById('searchInput').value = '';
        document.querySelectorAll('.pill').forEach(p => p.classList.remove('active-pill'));
        document.querySelector('.pill[data-filter="all"]').classList.add('active-pill');
        document.querySelectorAll('.bloc-pill').forEach(p => p.classList.remove('active-bloc'));
        document.querySelector('.bloc-pill[data-bloc="all"]').classList.add('active-bloc');
        document.querySelectorAll('.stat-card').forEach(c => c.classList.remove('active'));
        document.querySelector('.stat-card[data-filter="all"]').classList.add('active');
        renderTable();
        // Scroll and highlight
        setTimeout(() => {
          const targetRow = document.querySelector(`tr.data-row[data-num="${num}"]`);
          if (targetRow) {
            targetRow.scrollIntoView({ behavior: 'smooth', block: 'center' });
            targetRow.style.background = 'rgba(24,255,255,0.12)';
            setTimeout(() => { targetRow.style.background = ''; }, 2000);
            targetRow.click();
          }
        }, 100);
      }
    });
  });

  // Export CSV
  document.getElementById('exportBtn').addEventListener('click', () => {
    const csv = ['NÂ°,Bloc,Statut,DonnÃ©e,Correction,Source primaire,PrioritÃ©,SÃ©vÃ©ritÃ©'];
    DATA.forEach(d => {
      const correction = d.correction.replace(/<[^>]*>/g, '').replace(/,/g, ';');
      csv.push(`${d.num},${d.bloc},${d.status},"${d.label}","${correction}","${d.source}",${d.priority},${d.severity || ''}`);
    });
    const blob = new Blob([csv.join('\n')], { type: 'text/csv;charset=utf-8;' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url; a.download = 'audit-60-ouaisfieu.csv'; a.click();
    URL.revokeObjectURL(url);
  });
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// INIT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
document.addEventListener('DOMContentLoaded', () => {
  drawDonut();
  renderPriorityList();
  renderTable();
  animateCredBar();
  initEvents();
});
</script>

</body>
</html>
