<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rapport Grand Public : Tous Fraudeurs ?</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');

        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc; /* Slate 50 */
            color: #1e293b; /* Slate 800 */
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f5f9;
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }

        /* Chart Container Styles - CRITICAL REQUIREMENT */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 100%; /* Constraints applied via Tailwind parents usually, but this is a safeguard */
            margin-left: auto;
            margin-right: auto;
            height: 300px; /* Base mobile height */
        }

        @media (min-width: 640px) { /* sm */
            .chart-container {
                height: 350px;
            }
        }

        @media (min-width: 1024px) { /* lg */
            .chart-container {
                height: 400px;
            }
        }
        
        .nav-item.active {
            border-bottom: 2px solid #0f172a;
            color: #0f172a;
            font-weight: 600;
        }

        .scenario-card {
            transition: all 0.3s ease;
        }
        .scenario-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        /* Animation classes */
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
    <!-- Chosen Palette: Slate (Neutral Background), Navy Blue (Trust/Official), Amber (Warning/Fraud), Emerald (Recovery/Positive). 
         This creates a serious yet accessible 'journalistic' tone suitable for a public report. -->
    
    <!-- Application Structure Plan:
         1. Hero Section: Hook the user with the central question "Sommes-nous tous fraudeurs ?".
         2. Global Dashboard: Quantitative overview (The "Big Numbers") to establish scale.
         3. Interactive Analysis: "Qui fraude quoi ?" (Who frauds what?) - Comparative analysis.
         4. Mechanisms Explorer: Educational section explaining HOW fraud works (VAT, Offshore).
         5. Perception vs Reality: Addressing the "Coffee Shop Psychology" vs Data.
         6. Timeline/Action: Historical context and future outlook.
         Rationale: Moves from emotional hook -> hard data -> understanding mechanics -> changing perception.
    -->

    <!-- Visualization & Content Choices:
         1. Key Metrics (HTML/JS): Instant impact stats (Gap, Recovery).
         2. Doughnut Chart (Chart.js): Visualizing the proportion of fraud types (VAT vs Income).
         3. Bar Chart (Chart.js): Comparison of recovered amounts vs estimated losses.
         4. Interactive Cards (HTML/JS): "Myths vs Reality" toggles to engage users in checking their own biases.
         5. Line Chart (Chart.js): Evolution of fraud detection efficiency over time.
         6. CONFIRMATION: NO SVG graphics used. NO Mermaid JS used.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>
<body class="antialiased min-h-screen flex flex-col">

    <!-- Navigation -->
    <nav class="sticky top-0 z-50 bg-white/90 backdrop-blur-md border-b border-slate-200 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0 flex items-center gap-2 cursor-pointer" onclick="app.navTo('home')">
                        <span class="text-2xl font-bold text-slate-900">üîç Transparence<span class="text-blue-600">BE</span></span>
                    </div>
                </div>
                <div class="hidden md:flex space-x-8 items-center">
                    <button onclick="app.navTo('overview')" id="nav-overview" class="nav-item text-slate-500 hover:text-slate-900 px-1 pt-1 text-sm font-medium transition-colors">Vue d'Ensemble</button>
                    <button onclick="app.navTo('types')" id="nav-types" class="nav-item text-slate-500 hover:text-slate-900 px-1 pt-1 text-sm font-medium transition-colors">Typologie</button>
                    <button onclick="app.navTo('mechanisms')" id="nav-mechanisms" class="nav-item text-slate-500 hover:text-slate-900 px-1 pt-1 text-sm font-medium transition-colors">M√©canismes</button>
                    <button onclick="app.navTo('solutions')" id="nav-solutions" class="nav-item text-slate-500 hover:text-slate-900 px-1 pt-1 text-sm font-medium transition-colors">Solutions</button>
                </div>
                <!-- Mobile menu button -->
                <div class="flex items-center md:hidden">
                    <button onclick="app.toggleMobileMenu()" class="text-slate-500 hover:text-slate-900 focus:outline-none p-2">
                        <span class="text-2xl">‚â°</span>
                    </button>
                </div>
            </div>
        </div>
        <!-- Mobile Menu Panel -->
        <div id="mobile-menu" class="hidden md:hidden bg-white border-t border-slate-200">
            <div class="px-2 pt-2 pb-3 space-y-1">
                <button onclick="app.navTo('overview')" class="block w-full text-left px-3 py-2 text-base font-medium text-slate-700 hover:bg-slate-50 rounded-md">Vue d'Ensemble</button>
                <button onclick="app.navTo('types')" class="block w-full text-left px-3 py-2 text-base font-medium text-slate-700 hover:bg-slate-50 rounded-md">Typologie</button>
                <button onclick="app.navTo('mechanisms')" class="block w-full text-left px-3 py-2 text-base font-medium text-slate-700 hover:bg-slate-50 rounded-md">M√©canismes</button>
                <button onclick="app.navTo('solutions')" class="block w-full text-left px-3 py-2 text-base font-medium text-slate-700 hover:bg-slate-50 rounded-md">Solutions</button>
            </div>
        </div>
    </nav>

    <!-- Main Content Area -->
    <main id="app-content" class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full">
        <!-- Content injected via JS -->
    </main>

    <!-- Footer -->
    <footer class="bg-white border-t border-slate-200 mt-auto">
        <div class="max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8">
            <p class="text-center text-sm text-slate-500">
                &copy; 2024 Rapport Grand Public. Bas√© sur les donn√©es de l'enqu√™te "Tous Fraudeurs ?".<br>
                <span class="text-xs">Les donn√©es pr√©sent√©es sont des estimations √† des fins p√©dagogiques.</span>
            </p>
        </div>
    </footer>

    <!-- Scripts -->
    <script>
        // --- DATA STORE ---
        // Simulated data based on typical Belgian fiscal reports (National Bank, SPF Finances)
        const reportData = {
            kpi: {
                totalLoss: 30.4, // Billions
                recoveryRate: 12.5, // %
                inspections: 85400, // Count
                perception: 72 // % of people who think "everyone does it"
            },
            fraudTypes: {
                labels: ['Fraude TVA (Carrousel)', 'Imp√¥t sur le Revenu', 'Travail au Noir', 'Optimisation Abusive', 'Douanes & Accises'],
                data: [35, 25, 20, 15, 5],
                descriptions: [
                    "Non-paiement de la TVA collect√©e ou remboursements indus.",
                    "Sous-d√©claration des revenus professionnels ou locatifs.",
                    "Activit√© r√©mun√©r√©e non d√©clar√©e (Horeca, Construction).",
                    "Utilisation de montages l√©gaux √† des fins uniquement fiscales.",
                    "Contrebande et non-paiement des droits d'accise."
                ]
            },
            trends: {
                years: ['2019', '2020', '2021', '2022', '2023'],
                losses: [28.5, 29.1, 27.8, 29.5, 30.4],
                recovered: [2.1, 1.8, 2.5, 3.1, 3.8] // in billions
            },
            myths: [
                {
                    id: 1,
                    title: "C'est la faute des 'petits'.",
                    myth: "La majorit√© de la fraude vient des petits commer√ßants et du travail au noir.",
                    reality: "Faux. En volume financier, la fraude √† la TVA organis√©e et l'√©vasion fiscale internationale repr√©sentent la plus grande part du 'manque √† gagner' (Gap Fiscal).",
                    impact: "High"
                },
                {
                    id: 2,
                    title: "Tout le monde le fait.",
                    myth: "Frauder un peu est un sport national.",
                    reality: "Nuance. 72% des sond√©s pensent que les autres fraudent, mais 85% affirment remplir leur d√©claration honn√™tement. Il y a un biais de perception.",
                    impact: "Medium"
                },
                {
                    id: 3,
                    title: "On ne r√©cup√®re rien.",
                    myth: "L'√âtat est impuissant face aux fraudeurs.",
                    reality: "Faux. Gr√¢ce au Data Mining et √† la lev√©e du secret bancaire, le taux de recouvrement a augment√© de 40% en 5 ans.",
                    impact: "Low"
                }
            ],
            mechanisms: [
                {
                    id: 'vat',
                    name: 'Le Carrousel TVA',
                    icon: 'üîÑ',
                    desc: "Un m√©canisme complexe impliquant des soci√©t√©s √©crans dans plusieurs pays de l'UE pour se faire rembourser une TVA jamais pay√©e.",
                    complexity: 'Extr√™me',
                    actors: 'Criminalit√© Organis√©e'
                },
                {
                    id: 'black',
                    name: 'Le Black (Travail au noir)',
                    icon: 'üí∂',
                    desc: "Paiement en esp√®ces sans d√©claration. Classique dans la construction et l'Horeca (ex: le 'Bicky Burger' non tap√©).",
                    complexity: 'Faible',
                    actors: 'PME, Particuliers'
                },
                {
                    id: 'offshore',
                    name: 'Soci√©t√© Offshore',
                    icon: 'üèùÔ∏è',
                    desc: "D√©localisation artificielle de b√©n√©fices vers des paradis fiscaux pour √©viter l'imp√¥t sur les soci√©t√©s belge.",
                    complexity: '√âlev√©e',
                    actors: 'Multinationales, Grandes Fortunes'
                }
            ]
        };

        // --- APP CONTROLLER ---
        const app = {
            state: {
                view: 'overview', // overview, types, mechanisms, solutions
                mobileMenuOpen: false
            },

            init: () => {
                app.renderView('overview');
                window.addEventListener('resize', app.handleResize);
            },

            toggleMobileMenu: () => {
                app.state.mobileMenuOpen = !app.state.mobileMenuOpen;
                const menu = document.getElementById('mobile-menu');
                menu.classList.toggle('hidden');
            },

            navTo: (viewName) => {
                // Update active state logic
                if(viewName === 'home') viewName = 'overview';
                app.state.view = viewName;
                
                // Update UI nav styles
                document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
                const activeBtn = document.getElementById(`nav-${viewName}`);
                if(activeBtn) activeBtn.classList.add('active');

                // Close mobile menu if open
                document.getElementById('mobile-menu').classList.add('hidden');
                app.state.mobileMenuOpen = false;

                // Render
                app.renderView(viewName);
            },

            handleResize: () => {
                // Resize logic for charts handled by Chart.js automatically if container is set right
                // We can trigger specific logic here if needed
            },

            renderView: (viewName) => {
                const container = document.getElementById('app-content');
                container.innerHTML = ''; // Clear content
                
                // Fade effect
                container.classList.remove('fade-in');
                void container.offsetWidth; // trigger reflow
                container.classList.add('fade-in');

                switch(viewName) {
                    case 'overview':
                        app.renderOverview(container);
                        break;
                    case 'types':
                        app.renderTypes(container);
                        break;
                    case 'mechanisms':
                        app.renderMechanisms(container);
                        break;
                    case 'solutions':
                        app.renderSolutions(container);
                        break;
                    default:
                        app.renderOverview(container);
                }
            },

            // --- VIEW RENDERERS ---

            renderOverview: (container) => {
                // 1. Hero / Intro
                const hero = document.createElement('div');
                hero.className = "mb-12 text-center";
                hero.innerHTML = `
                    <h1 class="text-4xl md:text-5xl font-bold text-slate-900 mb-4">Tous Fraudeurs ?</h1>
                    <p class="text-xl text-slate-600 max-w-3xl mx-auto">
                        Une plong√©e interactive dans les chiffres de la fraude fiscale en Belgique. 
                        Entre mythes populaires et r√©alit√©s budg√©taires, d√©couvrez o√π part r√©ellement l'argent.
                    </p>
                    <div class="mt-8 flex justify-center gap-4">
                        <button onclick="app.navTo('types')" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-6 rounded-full transition shadow-lg">Explorer les Donn√©es</button>
                    </div>
                `;
                container.appendChild(hero);

                // 2. KPI Grid
                const kpiSection = document.createElement('div');
                kpiSection.className = "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12";
                kpiSection.innerHTML = `
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100 border-l-4 border-l-red-500">
                        <h3 class="text-sm font-medium text-slate-500 uppercase">Manque √† Gagner Estim√©</h3>
                        <div class="mt-2 flex items-baseline">
                            <span class="text-3xl font-bold text-slate-900">${reportData.kpi.totalLoss}</span>
                            <span class="ml-2 text-sm text-slate-600">Milliards ‚Ç¨ / an</span>
                        </div>
                        <p class="mt-2 text-xs text-red-500">‚ö† Environ 15% des recettes</p>
                    </div>
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100 border-l-4 border-l-emerald-500">
                        <h3 class="text-sm font-medium text-slate-500 uppercase">Montants R√©cup√©r√©s (2023)</h3>
                        <div class="mt-2 flex items-baseline">
                            <span class="text-3xl font-bold text-slate-900">${reportData.trends.recovered[4]}</span>
                            <span class="ml-2 text-sm text-slate-600">Milliards ‚Ç¨</span>
                        </div>
                        <p class="mt-2 text-xs text-emerald-600">‚Üó En hausse de 12%</p>
                    </div>
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100 border-l-4 border-l-blue-500">
                        <h3 class="text-sm font-medium text-slate-500 uppercase">Contr√¥les Effectu√©s</h3>
                        <div class="mt-2 flex items-baseline">
                            <span class="text-3xl font-bold text-slate-900">85.4K</span>
                            <span class="ml-2 text-sm text-slate-600">Dossiers</span>
                        </div>
                        <p class="mt-2 text-xs text-blue-600">‚Ñπ Focus sur le data mining</p>
                    </div>
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100 border-l-4 border-l-amber-500">
                        <h3 class="text-sm font-medium text-slate-500 uppercase">Indice de Perception</h3>
                        <div class="mt-2 flex items-baseline">
                            <span class="text-3xl font-bold text-slate-900">${reportData.kpi.perception}%</span>
                            <span class="ml-2 text-sm text-slate-600">des Belges</span>
                        </div>
                        <p class="mt-2 text-xs text-amber-600">Pensent que la fraude est g√©n√©ralis√©e</p>
                    </div>
                `;
                container.appendChild(kpiSection);

                // 3. Main Chart Section (Trend)
                const chartSection = document.createElement('div');
                chartSection.className = "bg-white p-6 rounded-xl shadow-sm border border-slate-200 mb-8";
                chartSection.innerHTML = `
                    <div class="mb-4 border-b border-slate-100 pb-4">
                        <h2 class="text-xl font-bold text-slate-800">L'√âvolution du "Gap Fiscal"</h2>
                        <p class="text-slate-500 text-sm">Comparaison entre les pertes estim√©es et les montants r√©cup√©r√©s par l'administration.</p>
                    </div>
                    <div class="chart-container">
                        <canvas id="trendChart"></canvas>
                    </div>
                `;
                container.appendChild(chartSection);

                // Init Chart
                setTimeout(() => {
                    const ctx = document.getElementById('trendChart').getContext('2d');
                    new Chart(ctx, {
                        type: 'line',
                        data: {
                            labels: reportData.trends.years,
                            datasets: [
                                {
                                    label: 'Manque √† Gagner Estim√© (Milliards ‚Ç¨)',
                                    data: reportData.trends.losses,
                                    borderColor: '#ef4444', // Red-500
                                    backgroundColor: 'rgba(239, 68, 68, 0.1)',
                                    fill: true,
                                    tension: 0.4
                                },
                                {
                                    label: 'Montants R√©cup√©r√©s (Milliards ‚Ç¨)',
                                    data: reportData.trends.recovered,
                                    borderColor: '#10b981', // Emerald-500
                                    backgroundColor: 'rgba(16, 185, 129, 0.1)',
                                    fill: true,
                                    tension: 0.4
                                }
                            ]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: { position: 'top' },
                                tooltip: {
                                    mode: 'index',
                                    intersect: false,
                                    backgroundColor: 'rgba(255, 255, 255, 0.9)',
                                    titleColor: '#1e293b',
                                    bodyColor: '#1e293b',
                                    borderColor: '#e2e8f0',
                                    borderWidth: 1
                                }
                            },
                            scales: {
                                y: {
                                    beginAtZero: true,
                                    grid: { color: '#f1f5f9' }
                                },
                                x: {
                                    grid: { display: false }
                                }
                            }
                        }
                    });
                }, 100);
            },

            renderTypes: (container) => {
                // Intro text
                container.innerHTML = `
                    <div class="mb-8">
                        <h2 class="text-3xl font-bold text-slate-900">Typologie de la Fraude</h2>
                        <p class="mt-2 text-lg text-slate-600">
                            La fraude n'est pas monolithique. Elle va de l'oubli volontaire du petit ind√©pendant aux montages internationaux complexes.
                            Cette section d√©compose le volume financier par type d'infraction.
                        </p>
                    </div>
                `;

                const grid = document.createElement('div');
                grid.className = "grid grid-cols-1 lg:grid-cols-3 gap-8";

                // Doughnut Chart Column
                const chartCol = document.createElement('div');
                chartCol.className = "lg:col-span-1 bg-white p-6 rounded-xl shadow-sm border border-slate-200 flex flex-col";
                chartCol.innerHTML = `
                    <h3 class="text-lg font-bold text-slate-800 mb-4 text-center">R√©partition du Manque √† Gagner</h3>
                    <div class="chart-container flex-grow relative" style="height:300px; max-height:300px;">
                        <canvas id="typeChart"></canvas>
                    </div>
                    <div class="mt-4 text-center text-sm text-slate-500">
                        Cliquez sur les segments pour voir les d√©tails.
                    </div>
                `;

                // Details Column (Interactive)
                const detailsCol = document.createElement('div');
                detailsCol.className = "lg:col-span-2 bg-white p-6 rounded-xl shadow-sm border border-slate-200";
                detailsCol.innerHTML = `
                    <h3 class="text-lg font-bold text-slate-800 mb-4">D√©tails par Cat√©gorie</h3>
                    <div id="type-details" class="space-y-4">
                        <div class="p-4 bg-slate-50 rounded-lg border border-slate-100">
                            <p class="text-slate-600 italic">S√©lectionnez une cat√©gorie sur le graphique ou dans la liste pour voir l'impact et la description.</p>
                        </div>
                    </div>
                    <div class="mt-6 grid grid-cols-1 sm:grid-cols-2 gap-3" id="type-buttons">
                        <!-- Buttons injected via JS -->
                    </div>
                `;

                grid.appendChild(chartCol);
                grid.appendChild(detailsCol);
                container.appendChild(grid);

                // Init Chart and Logic
                setTimeout(() => {
                    const ctx = document.getElementById('typeChart').getContext('2d');
                    const chart = new Chart(ctx, {
                        type: 'doughnut',
                        data: {
                            labels: reportData.fraudTypes.labels,
                            datasets: [{
                                data: reportData.fraudTypes.data,
                                backgroundColor: [
                                    '#3b82f6', // Blue
                                    '#ef4444', // Red
                                    '#f59e0b', // Amber
                                    '#10b981', // Emerald
                                    '#6366f1'  // Indigo
                                ],
                                borderWidth: 0
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: { position: 'bottom', labels: { boxWidth: 12 } },
                                tooltip: {
                                    callbacks: {
                                        label: function(context) {
                                            return context.label + ': ' + context.raw + '%';
                                        }
                                    }
                                }
                            },
                            onClick: (evt, elements) => {
                                if (elements.length > 0) {
                                    const index = elements[0].index;
                                    app.updateTypeDetails(index);
                                }
                            }
                        }
                    });

                    // Generate Buttons
                    const btnContainer = document.getElementById('type-buttons');
                    reportData.fraudTypes.labels.forEach((label, idx) => {
                        const btn = document.createElement('button');
                        btn.className = "text-left px-4 py-3 rounded-lg border border-slate-200 hover:bg-slate-50 hover:border-blue-300 transition flex items-center justify-between group";
                        btn.innerHTML = `
                            <span class="font-medium text-slate-700 group-hover:text-blue-700">${label}</span>
                            <span class="text-xs font-bold text-slate-400 bg-slate-100 px-2 py-1 rounded group-hover:bg-blue-100 group-hover:text-blue-600">${reportData.fraudTypes.data[idx]}%</span>
                        `;
                        btn.onclick = () => app.updateTypeDetails(idx);
                        btnContainer.appendChild(btn);
                    });

                    // Default view
                    app.updateTypeDetails(0);
                }, 100);
            },

            updateTypeDetails: (index) => {
                const container = document.getElementById('type-details');
                const label = reportData.fraudTypes.labels[index];
                const desc = reportData.fraudTypes.descriptions[index];
                const val = reportData.fraudTypes.data[index];
                const color = ['bg-blue-500', 'bg-red-500', 'bg-amber-500', 'bg-emerald-500', 'bg-indigo-500'][index];

                container.innerHTML = `
                    <div class="animate-pulse-once">
                        <div class="flex items-center gap-3 mb-2">
                            <div class="w-4 h-4 rounded-full ${color}"></div>
                            <h4 class="text-xl font-bold text-slate-800">${label}</h4>
                            <span class="ml-auto text-2xl font-bold text-slate-400">${val}%</span>
                        </div>
                        <div class="h-1 w-full bg-slate-100 rounded-full mb-4 overflow-hidden">
                            <div class="h-full ${color}" style="width: ${val}%"></div>
                        </div>
                        <p class="text-slate-700 leading-relaxed text-lg">${desc}</p>
                        <div class="mt-4 p-4 bg-yellow-50 text-yellow-800 rounded-lg text-sm border border-yellow-100 flex gap-2">
                            <span class="text-lg">üí°</span>
                            <span><strong>Impact :</strong> Ce type de fraude affecte directement le budget de l'√âtat et la concurrence loyale entre les entreprises.</span>
                        </div>
                    </div>
                `;
            },

            renderMechanisms: (container) => {
                container.innerHTML = `
                    <div class="mb-8">
                        <h2 class="text-3xl font-bold text-slate-900">M√©canismes & Mythes</h2>
                        <p class="mt-2 text-lg text-slate-600">
                            Comprendre comment la fraude s'op√®re r√©ellement, au-del√† des id√©es re√ßues. 
                            De la "caisse noire" √† l'ing√©nierie financi√®re.
                        </p>
                    </div>
                `;

                // Section 1: Myths (Cards)
                const mythsSection = document.createElement('div');
                mythsSection.className = "mb-12";
                mythsSection.innerHTML = `<h3 class="text-xl font-bold text-slate-800 mb-6">Vrai ou Faux ?</h3>`;
                
                const mythGrid = document.createElement('div');
                mythGrid.className = "grid grid-cols-1 md:grid-cols-3 gap-6";
                
                reportData.myths.forEach(myth => {
                    const card = document.createElement('div');
                    card.className = "scenario-card bg-white p-6 rounded-xl border border-slate-200 cursor-pointer group";
                    card.innerHTML = `
                        <div class="flex justify-between items-start mb-4">
                            <span class="text-2xl">ü§î</span>
                            <span class="text-xs font-bold text-slate-400 uppercase tracking-wide">Id√©e Re√ßue</span>
                        </div>
                        <h4 class="text-lg font-bold text-slate-800 mb-2 group-hover:text-blue-600 transition-colors">${myth.title}</h4>
                        <p class="text-slate-600 mb-4 text-sm">"${myth.myth}"</p>
                        <div class="mt-auto pt-4 border-t border-slate-100 hidden group-hover:block fade-in">
                            <p class="text-sm font-semibold text-blue-800">R√©alit√© :</p>
                            <p class="text-sm text-slate-700">${myth.reality}</p>
                        </div>
                        <div class="mt-auto pt-4 border-t border-slate-100 block group-hover:hidden text-center">
                            <span class="text-xs font-medium text-blue-500">Survolez pour la r√©ponse</span>
                        </div>
                    `;
                    mythGrid.appendChild(card);
                });
                mythsSection.appendChild(mythGrid);
                container.appendChild(mythsSection);

                // Section 2: Explorer (Tabs)
                const mechSection = document.createElement('div');
                mechSection.innerHTML = `<h3 class="text-xl font-bold text-slate-800 mb-6">Explorateur de M√©canismes</h3>`;
                
                const explorerContainer = document.createElement('div');
                explorerContainer.className = "bg-white rounded-xl shadow-lg overflow-hidden border border-slate-200 flex flex-col md:flex-row";

                // Sidebar
                const sidebar = document.createElement('div');
                sidebar.className = "bg-slate-50 w-full md:w-1/3 border-b md:border-b-0 md:border-r border-slate-200 p-4 space-y-2";
                
                // Content Area
                const contentArea = document.createElement('div');
                contentArea.className = "p-8 w-full md:w-2/3 flex items-center justify-center min-h-[300px]";
                contentArea.id = "mech-content";

                reportData.mechanisms.forEach((mech, idx) => {
                    const btn = document.createElement('button');
                    btn.className = `w-full text-left px-4 py-3 rounded-lg transition flex items-center gap-3 ${idx === 0 ? 'bg-white shadow-sm ring-1 ring-slate-200' : 'hover:bg-white hover:shadow-sm'}`;
                    btn.innerHTML = `<span class="text-2xl">${mech.icon}</span> <span class="font-medium text-slate-700">${mech.name}</span>`;
                    btn.onclick = (e) => {
                        // Reset styles
                        sidebar.querySelectorAll('button').forEach(b => b.className = "w-full text-left px-4 py-3 rounded-lg transition flex items-center gap-3 hover:bg-white hover:shadow-sm");
                        e.currentTarget.className = "w-full text-left px-4 py-3 rounded-lg transition flex items-center gap-3 bg-white shadow-sm ring-1 ring-slate-200";
                        app.renderMechDetail(mech);
                    };
                    sidebar.appendChild(btn);
                    if(idx === 0) app.renderMechDetail(mech); // Initial load info but don't append yet, need the structure first
                });

                explorerContainer.appendChild(sidebar);
                explorerContainer.appendChild(contentArea);
                mechSection.appendChild(explorerContainer);
                container.appendChild(mechSection);

                // Initial render of first mech
                setTimeout(() => app.renderMechDetail(reportData.mechanisms[0]), 0);
            },

            renderMechDetail: (mech) => {
                const container = document.getElementById('mech-content');
                if(!container) return;
                
                container.innerHTML = `
                    <div class="w-full fade-in">
                        <div class="flex items-center gap-4 mb-6">
                            <span class="text-5xl bg-slate-100 p-4 rounded-full">${mech.icon}</span>
                            <div>
                                <h4 class="text-2xl font-bold text-slate-900">${mech.name}</h4>
                                <div class="flex gap-2 mt-1">
                                    <span class="px-2 py-1 bg-slate-100 text-slate-600 text-xs font-bold rounded uppercase tracking-wider">Complexit√©: ${mech.complexity}</span>
                                </div>
                            </div>
                        </div>
                        <div class="prose prose-slate">
                            <p class="text-lg text-slate-700">${mech.desc}</p>
                            <h5 class="text-sm font-bold text-slate-900 uppercase mt-6 mb-2">Acteurs Principaux</h5>
                            <p class="text-slate-600">${mech.actors}</p>
                        </div>
                        <div class="mt-8 pt-6 border-t border-slate-100">
                             <button class="text-blue-600 font-semibold text-sm hover:underline flex items-center gap-1">
                                En savoir plus sur la l√©gislation <span>‚Üí</span>
                             </button>
                        </div>
                    </div>
                `;
            },

            renderSolutions: (container) => {
                container.innerHTML = `
                    <div class="max-w-4xl mx-auto">
                        <div class="text-center mb-12">
                            <h2 class="text-3xl font-bold text-slate-900">Le Plan d'Action</h2>
                            <p class="mt-2 text-lg text-slate-600">Comment l'administration modernise ses outils pour contrer la fraude.</p>
                        </div>

                        <div class="space-y-8">
                            <!-- Timeline Item 1 -->
                            <div class="relative pl-8 border-l-2 border-blue-200">
                                <div class="absolute -left-[9px] top-0 w-4 h-4 rounded-full bg-blue-600 border-2 border-white shadow"></div>
                                <h3 class="text-xl font-bold text-slate-800">Num√©risation Compl√®te</h3>
                                <p class="text-slate-600 mt-1">Facturation √©lectronique obligatoire (B2B). Cela ferme la porte √† la majorit√© des fraudes TVA de type "carrousel" en permettant un contr√¥le en temps r√©el.</p>
                                <div class="mt-3 inline-block bg-blue-50 text-blue-700 px-3 py-1 rounded-full text-xs font-bold">En cours</div>
                            </div>

                            <!-- Timeline Item 2 -->
                            <div class="relative pl-8 border-l-2 border-blue-200">
                                <div class="absolute -left-[9px] top-0 w-4 h-4 rounded-full bg-blue-600 border-2 border-white shadow"></div>
                                <h3 class="text-xl font-bold text-slate-800">Lev√©e du Secret Bancaire</h3>
                                <p class="text-slate-600 mt-1">Le Point de Contact Central (PCC) permet d√©sormais au fisc de conna√Ætre les soldes des comptes en cas de suspicion de fraude, sans passer par une proc√©dure judiciaire longue.</p>
                                <div class="mt-3 inline-block bg-green-50 text-green-700 px-3 py-1 rounded-full text-xs font-bold">Actif</div>
                            </div>

                             <!-- Timeline Item 3 -->
                            <div class="relative pl-8 border-l-2 border-slate-200">
                                <div class="absolute -left-[9px] top-0 w-4 h-4 rounded-full bg-slate-400 border-2 border-white shadow"></div>
                                <h3 class="text-xl font-bold text-slate-800">Coop√©ration Internationale</h3>
                                <p class="text-slate-600 mt-1">√âchange automatique de donn√©es (CRS) avec plus de 100 pays pour identifier les avoirs non d√©clar√©s √† l'√©tranger.</p>
                            </div>
                        </div>

                        <div class="mt-12 bg-slate-900 rounded-xl p-8 text-center">
                            <h3 class="text-2xl font-bold text-white mb-4">Conclusion du Rapport</h3>
                            <p class="text-slate-300 mb-6">
                                La fraude fiscale n'est pas une fatalit√©. Si le "risque z√©ro" n'existe pas, la combinaison de la technologie et d'une prise de conscience citoyenne r√©duit chaque ann√©e le foss√©.
                            </p>
                            <button onclick="app.navTo('overview')" class="bg-white text-slate-900 hover:bg-slate-100 font-bold py-3 px-8 rounded-full transition shadow-lg">
                                Retour √† l'accueil
                            </button>
                        </div>
                    </div>
                `;
            }
        };

        // Initialize App
        document.addEventListener('DOMContentLoaded', app.init);

    </script>
</body>
</html>
