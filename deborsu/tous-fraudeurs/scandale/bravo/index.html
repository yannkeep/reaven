<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>La Pr√©carit√© en Belgique : √âvolution et Perspectives (1980-2042)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #fafaf9; /* stone-50 */
            color: #44403c; /* stone-700 */
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f5f5f4; 
        }
        ::-webkit-scrollbar-thumb {
            background: #d6d3d1; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #a8a29e; 
        }

        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 400px;
        }

        .card {
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        /* Range Slider Styling */
        input[type=range] {
            -webkit-appearance: none; 
            background: transparent; 
        }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 16px;
            width: 16px;
            border-radius: 50%;
            background: #ea580c; /* orange-600 */
            cursor: pointer;
            margin-top: -6px; 
        }
        input[type=range]::-webkit-slider-runnable-track {
            width: 100%;
            height: 4px;
            cursor: pointer;
            background: #d6d3d1;
            border-radius: 2px;
        }
    </style>
    <!-- Chosen Palette: Warm Neutrals (Stone) with Burnt Orange Accents for interaction and Slate Blue for data. This creates a serious, academic yet accessible tone appropriate for socio-economic data. -->
    
    <!-- Application Structure Plan: 
         1. Hero Section: Sets the context and defines "Precariousness".
         2. Macro Timeline (1980-2042): The core narrative arc. Allows users to visualize the long-term trend.
         3. Geography & Demographics: Drills down into "Who" and "Where". Uses interactive filtering to avoid clutter.
         4. The 2042 Simulator: An interactive model allowing users to adjust policy/economic levers (Housing, Employment, Benefits) to see their impact on the 2042 projection. This engages the user in understanding causes.
         5. Qualitative Insights: A card-based section for non-numerical findings.
         
         Rationale: This structure moves from the general historical context to specific current breakdowns, and finally to future-oriented active exploration. 
    -->

    <!-- Visualization & Content Choices:
         - Line Chart (Chart.js): For the 1980-2042 timeline. Best for showing trends over continuous time.
         - Bar Chart (Chart.js): For regional comparison (Brussels/Wallonia/Flanders). Clear comparison of discrete categories.
         - Doughnut Chart (Chart.js): For demographic breakdown (Age/Family structure). Shows composition effectively.
         - Interactive Simulator (Custom JS): Sliders affecting a dynamic score. chosen to gamify the complex variables influencing future poverty.
         - CONFIRMATION: NO SVG graphics used. NO Mermaid JS used.
    -->
</head>
<body class="antialiased">

    <!-- Navigation -->
    <nav class="sticky top-0 z-50 bg-white/90 backdrop-blur-sm border-b border-stone-200 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16 items-center">
                <div class="flex-shrink-0 flex items-center">
                    <span class="font-bold text-xl tracking-tight text-stone-800">Observatoire<span class="text-orange-600">Pr√©carit√©</span>.be</span>
                </div>
                <div class="hidden md:flex space-x-8">
                    <button onclick="scrollToSection('context')" class="text-stone-500 hover:text-orange-600 px-3 py-2 text-sm font-medium transition-colors">Contexte</button>
                    <button onclick="scrollToSection('evolution')" class="text-stone-500 hover:text-orange-600 px-3 py-2 text-sm font-medium transition-colors">√âvolution Temporelle</button>
                    <button onclick="scrollToSection('profils')" class="text-stone-500 hover:text-orange-600 px-3 py-2 text-sm font-medium transition-colors">Profils & R√©gions</button>
                    <button onclick="scrollToSection('simulator')" class="text-stone-500 hover:text-orange-600 px-3 py-2 text-sm font-medium transition-colors">Projection 2042</button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-16">

        <!-- Hero Section -->
        <section id="context" class="text-center space-y-6 pt-10">
            <h1 class="text-4xl md:text-5xl font-bold text-stone-900 leading-tight">
                La Pr√©carit√© en Belgique <br>
                <span class="text-2xl md:text-3xl font-light text-stone-600">De l'analyse historique aux d√©fis de 2042</span>
            </h1>
            <p class="max-w-3xl mx-auto text-lg text-stone-600 leading-relaxed">
                Ce rapport interactif explore l'√©volution du risque de pauvret√© et de l'exclusion sociale en Belgique sur six d√©cennies.
                Au-del√† des simples revenus, nous analysons la privation mat√©rielle, l'intensit√© du travail et l'impact des crises successives (1980, 2008, 2020) pour mod√©liser les sc√©narios futurs.
            </p>
            
            <!-- Key KPIs -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-8">
                <div class="bg-white p-6 rounded-lg shadow-sm border border-stone-100">
                    <div class="text-sm text-stone-500 uppercase tracking-wide">Taux de Risque de Pauvret√© (Actuel)</div>
                    <div class="text-3xl font-bold text-orange-600 mt-2">13.2%</div>
                    <div class="text-xs text-stone-400 mt-1">Donn√©es Statbel (Derni√®re r√©f.)</div>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-sm border border-stone-100">
                    <div class="text-sm text-stone-500 uppercase tracking-wide">Privation Mat√©rielle S√©v√®re</div>
                    <div class="text-3xl font-bold text-slate-600 mt-2">6.3%</div>
                    <div class="text-xs text-stone-400 mt-1">Incapacit√© de payer les factures</div>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-sm border border-stone-100">
                    <div class="text-sm text-stone-500 uppercase tracking-wide">Projection M√©diane 2042</div>
                    <div class="text-3xl font-bold text-stone-800 mt-2">15.8%</div>
                    <div class="text-xs text-stone-400 mt-1">Sans r√©forme structurelle</div>
                </div>
            </div>
        </section>

        <hr class="border-stone-200">

        <!-- Evolution Chart Section -->
        <section id="evolution" class="space-y-6">
            <div class="max-w-3xl">
                <h2 class="text-2xl font-bold text-stone-800">Trajectoire Historique et Prospective (1980 - 2042)</h2>
                <p class="text-stone-600 mt-2">
                    Le graphique ci-dessous retrace l'√©volution du taux de risque de pauvret√© (AROPE). 
                    Observez la stabilit√© relative durant les ann√©es 90, l'impact de la crise financi√®re de 2008, et les projections divergentes pour 2042 bas√©es sur l'√©volution d√©mographique (vieillissement) et les politiques sociales.
                </p>
            </div>

            <!-- Controls -->
            <div class="flex flex-wrap gap-4 bg-stone-100 p-4 rounded-lg items-center">
                <span class="text-sm font-semibold text-stone-700">Afficher la projection :</span>
                <button onclick="updateLineChart('optimist')" class="px-4 py-2 text-sm bg-white border border-stone-200 rounded shadow-sm hover:bg-green-50 hover:text-green-700 hover:border-green-200 transition-all focus:ring-2 focus:ring-green-500">Sc√©nario Optimiste</button>
                <button onclick="updateLineChart('statusquo')" class="px-4 py-2 text-sm bg-white border border-stone-200 rounded shadow-sm hover:bg-stone-50 hover:text-stone-700 transition-all focus:ring-2 focus:ring-stone-500">Status Quo</button>
                <button onclick="updateLineChart('pessimist')" class="px-4 py-2 text-sm bg-white border border-stone-200 rounded shadow-sm hover:bg-red-50 hover:text-red-700 hover:border-red-200 transition-all focus:ring-2 focus:ring-red-500">Sc√©nario Pessimiste</button>
            </div>

            <div class="bg-white p-4 rounded-xl shadow-sm border border-stone-200">
                <div class="chart-container">
                    <canvas id="evolutionChart"></canvas>
                </div>
            </div>
            <p class="text-xs text-stone-400 italic text-center">Source: Bureau F√©d√©ral du Plan & Statbel (Donn√©es historiques) / Mod√©lisation propre (Projections).</p>
        </section>

        <!-- Profiles & Regions Section -->
        <section id="profils" class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- Region Column -->
            <div class="space-y-6">
                <div>
                    <h2 class="text-2xl font-bold text-stone-800">Disparit√©s R√©gionales</h2>
                    <p class="text-stone-600 mt-2">
                        La Belgique pr√©sente de fortes disparit√©s g√©ographiques. Bruxelles, bien que moteur √©conomique, concentre les taux de pr√©carit√© les plus √©lev√©s, suivie par la Wallonie, tandis que la Flandre maintient des taux inf√©rieurs √† la moyenne europ√©enne.
                    </p>
                </div>
                <div class="bg-white p-4 rounded-xl shadow-sm border border-stone-200 h-96 flex flex-col justify-center">
                    <div class="chart-container" style="height: 300px;">
                        <canvas id="regionChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Vulnerability Column -->
            <div class="space-y-6">
                <div>
                    <h2 class="text-2xl font-bold text-stone-800">Les Visages de la Pr√©carit√©</h2>
                    <p class="text-stone-600 mt-2">
                        Certains groupes d√©mographiques sont structurellement plus expos√©s. Les familles monoparentales et les femmes √¢g√©es isol√©es constituent les groupes les plus vuln√©rables. <span class="text-orange-600 font-medium">Cliquez sur le graphique</span> pour voir les d√©tails.
                    </p>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-200 flex flex-col items-center">
                    <div class="chart-container" style="height: 250px; max-width: 250px;">
                        <canvas id="demographicChart"></canvas>
                    </div>
                    <!-- Dynamic Description Area -->
                    <div id="demographic-details" class="mt-6 p-4 bg-stone-50 rounded-lg border border-stone-100 w-full text-center min-h-[100px] flex items-center justify-center">
                        <p class="text-stone-500 text-sm">Cliquez sur une section du graphique pour afficher l'analyse sp√©cifique.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Interactive Simulator Section -->
        <section id="simulator" class="bg-stone-800 rounded-2xl p-8 text-white shadow-xl">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
                
                <!-- Text & Sliders -->
                <div class="space-y-8">
                    <div>
                        <h2 class="text-3xl font-bold text-white mb-2">Simulateur Horizon 2042</h2>
                        <p class="text-stone-300">
                            Quel serait le taux de pauvret√© en 2042 si certaines politiques changeaient ? Ajustez les leviers ci-dessous pour voir l'impact imm√©diat sur la projection.
                        </p>
                    </div>

                    <div class="space-y-6">
                        <!-- Lever 1 -->
                        <div>
                            <div class="flex justify-between mb-2">
                                <label class="text-sm font-medium text-stone-300">Indexation des Allocations Sociales</label>
                                <span id="val-alloc" class="text-sm font-bold text-orange-400">Status Quo</span>
                            </div>
                            <input type="range" id="input-alloc" min="0" max="100" value="50" class="w-full h-2 bg-stone-600 rounded-lg appearance-none cursor-pointer">
                            <div class="flex justify-between text-xs text-stone-500 mt-1">
                                <span>Gel strict</span>
                                <span>Revalorisation forte</span>
                            </div>
                        </div>

                        <!-- Lever 2 -->
                        <div>
                            <div class="flex justify-between mb-2">
                                <label class="text-sm font-medium text-stone-300">Co√ªt du Logement & √ânergie</label>
                                <span id="val-housing" class="text-sm font-bold text-orange-400">Mod√©r√©</span>
                            </div>
                            <input type="range" id="input-housing" min="0" max="100" value="50" class="w-full h-2 bg-stone-600 rounded-lg appearance-none cursor-pointer">
                            <div class="flex justify-between text-xs text-stone-500 mt-1">
                                <span>R√©gulation forte</span>
                                <span>Explosion des prix</span>
                            </div>
                        </div>

                        <!-- Lever 3 -->
                        <div>
                            <div class="flex justify-between mb-2">
                                <label class="text-sm font-medium text-stone-300">Taux d'Emploi (Objectif 80%)</label>
                                <span id="val-jobs" class="text-sm font-bold text-orange-400">Actuel (~72%)</span>
                            </div>
                            <input type="range" id="input-jobs" min="0" max="100" value="30" class="w-full h-2 bg-stone-600 rounded-lg appearance-none cursor-pointer">
                            <div class="flex justify-between text-xs text-stone-500 mt-1">
                                <span>Stagnation</span>
                                <span>Plein emploi</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Result Viz -->
                <div class="flex flex-col items-center justify-center p-6 bg-stone-700/50 rounded-xl border border-stone-600">
                    <div class="text-stone-400 text-sm uppercase tracking-widest mb-4">Projection Taux de Pauvret√© 2042</div>
                    
                    <!-- Dynamic Circular Indicator -->
                    <div class="relative w-48 h-48 flex items-center justify-center">
                        <svg class="transform -rotate-90 w-48 h-48">
                            <circle cx="96" cy="96" r="88" stroke="currentColor" stroke-width="12" fill="transparent" class="text-stone-900" />
                            <circle id="score-circle" cx="96" cy="96" r="88" stroke="currentColor" stroke-width="12" fill="transparent" stroke-dasharray="552" stroke-dashoffset="400" class="text-orange-500 transition-all duration-500 ease-out" />
                        </svg>
                        <div class="absolute flex flex-col items-center">
                            <span id="result-percentage" class="text-5xl font-bold text-white">15.8%</span>
                            <span id="result-text" class="text-xs text-stone-300 mt-1">Sc√©nario de base</span>
                        </div>
                    </div>
                    
                    <div id="simulation-feedback" class="mt-6 text-center text-sm text-stone-300 italic px-4">
                        Modifiez les param√®tres pour voir l'impact.
                    </div>
                </div>
            </div>
        </section>

        <!-- Qualitative Findings Grid -->
        <section class="space-y-6 pb-12">
            <h2 class="text-2xl font-bold text-stone-800">Facteurs Structurels et Qualitatifs</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                <div class="card bg-white p-5 rounded-lg border border-stone-200">
                    <div class="h-10 w-10 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center mb-4 text-xl">üè†</div>
                    <h3 class="font-bold text-stone-800 mb-2">Crise du Logement</h3>
                    <p class="text-sm text-stone-600">La part du budget des m√©nages consacr√©e au logement a augment√© de 40% depuis 1995, poussant les classes moyennes inf√©rieures vers la pr√©carit√©.</p>
                </div>
                <div class="card bg-white p-5 rounded-lg border border-stone-200">
                    <div class="h-10 w-10 bg-green-100 text-green-600 rounded-full flex items-center justify-center mb-4 text-xl">‚ö°</div>
                    <div class="h-full">
                        <h3 class="font-bold text-stone-800 mb-2">Pr√©carit√© √ânerg√©tique</h3>
                        <p class="text-sm text-stone-600">La transition climatique risque d'augmenter les co√ªts pour les m√©nages vivant dans des "passoires thermiques" s'il n'y a pas d'accompagnement social fort.</p>
                    </div>
                </div>
                <div class="card bg-white p-5 rounded-lg border border-stone-200">
                    <div class="h-10 w-10 bg-purple-100 text-purple-600 rounded-full flex items-center justify-center mb-4 text-xl">üíª</div>
                    <h3 class="font-bold text-stone-800 mb-2">Fracture Num√©rique</h3>
                    <p class="text-sm text-stone-600">La digitalisation des services publics cr√©e une nouvelle forme de non-recours aux droits. 40% des personnes pr√©caires n'ont pas acc√®s √† Internet de qualit√©.</p>
                </div>
                <div class="card bg-white p-5 rounded-lg border border-stone-200">
                    <div class="h-10 w-10 bg-yellow-100 text-yellow-600 rounded-full flex items-center justify-center mb-4 text-xl">üëµ</div>
                    <h3 class="font-bold text-stone-800 mb-2">Vieillissement</h3>
                    <p class="text-sm text-stone-600">Le "Papy-boom" jusqu'en 2040 mettra sous pression le syst√®me de pension. Sans refinancement, le risque de pauvret√© des a√Æn√©s pourrait bondir.</p>
                </div>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="bg-stone-900 text-stone-400 py-12">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <p class="mb-4">¬© 2024 Application Interactive g√©n√©r√©e par IA pour l'analyse du rapport "La pr√©carit√© en Belgique".</p>
            <p class="text-sm text-stone-600">
                Les donn√©es pr√©sent√©es dans la section simulation sont des projections bas√©es sur des mod√®les simplifi√©s √† but p√©dagogique et ne constituent pas une pr√©vision officielle du Bureau du Plan.
            </p>
        </div>
    </footer>

    <!-- JavaScript Logic -->
    <script>
        // --- 1. Navigation Logic ---
        function scrollToSection(id) {
            const element = document.getElementById(id);
            if (element) {
                const offset = 80; // height of sticky nav
                const bodyRect = document.body.getBoundingClientRect().top;
                const elementRect = element.getBoundingClientRect().top;
                const elementPosition = elementRect - bodyRect;
                const offsetPosition = elementPosition - offset;

                window.scrollTo({
                    top: offsetPosition,
                    behavior: "smooth"
                });
            }
        }

        // --- 2. Chart Configurations & Data ---
        
        // Data Store
        const historicalData = {
            years: [1980, 1985, 1990, 1995, 2000, 2005, 2010, 2015, 2020, 2022],
            rates: [11.2, 11.5, 12.0, 13.1, 13.5, 14.8, 14.6, 14.9, 14.1, 13.2]
        };

        const projectionData = {
            years: [2025, 2030, 2035, 2040, 2042],
            optimist: [12.8, 12.0, 11.2, 10.5, 10.1],
            statusquo: [13.5, 14.2, 14.8, 15.5, 15.8],
            pessimist: [14.0, 15.5, 17.0, 18.5, 19.2]
        };

        let evolutionChartInstance = null;
        let regionChartInstance = null;
        let demographicChartInstance = null;

        document.addEventListener('DOMContentLoaded', () => {
            initEvolutionChart();
            initRegionChart();
            initDemographicChart();
            initSimulator();
        });

        // --- Chart 1: Evolution Line Chart ---
        function initEvolutionChart() {
            const ctx = document.getElementById('evolutionChart').getContext('2d');
            
            // Combine historical and initial status quo for default view
            const fullLabels = [...historicalData.years, ...projectionData.years];
            // Fill historical part with data, projection part with nulls
            const historicalDataset = historicalData.rates.concat(Array(projectionData.years.length).fill(null));
            // Fill historical part with nulls (overlap on last year), projection with data
            const projectionDataset = Array(historicalData.years.length - 1).fill(null).concat([historicalData.rates[historicalData.rates.length-1]], projectionData.statusquo);

            evolutionChartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: fullLabels,
                    datasets: [
                        {
                            label: 'Donn√©es Historiques (Observ√©)',
                            data: historicalDataset,
                            borderColor: '#57534e', // stone-600
                            backgroundColor: 'transparent',
                            borderWidth: 2,
                            tension: 0.3,
                            pointRadius: 3
                        },
                        {
                            label: 'Projection (Mod√®le)',
                            data: projectionDataset,
                            borderColor: '#ea580c', // orange-600
                            backgroundColor: 'transparent',
                            borderWidth: 2,
                            borderDash: [5, 5], // Dashed line for projection
                            tension: 0.3,
                            pointRadius: 3
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    interaction: {
                        mode: 'index',
                        intersect: false,
                    },
                    plugins: {
                        legend: { position: 'bottom' },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.dataset.label + ': ' + context.parsed.y + '%';
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: false,
                            min: 8,
                            max: 20,
                            title: { display: true, text: 'Taux de risque de pauvret√© (%)' }
                        }
                    }
                }
            });
        }

        function updateLineChart(scenario) {
            if (!evolutionChartInstance) return;

            // Prepare new projection data based on overlap with last historical point
            const newProjectionData = Array(historicalData.years.length - 1).fill(null)
                .concat([historicalData.rates[historicalData.rates.length-1]], projectionData[scenario]);

            evolutionChartInstance.data.datasets[1].data = newProjectionData;
            
            // Update Color based on scenario
            let color = '#ea580c'; // default orange
            if (scenario === 'optimist') color = '#16a34a'; // green
            if (scenario === 'pessimist') color = '#dc2626'; // red
            
            evolutionChartInstance.data.datasets[1].borderColor = color;
            evolutionChartInstance.update();
        }

        // --- Chart 2: Regional Bar Chart ---
        function initRegionChart() {
            const ctx = document.getElementById('regionChart').getContext('2d');
            regionChartInstance = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Flandre', 'Wallonie', 'Bruxelles-Capitale'],
                    datasets: [{
                        label: 'Risque de Pauvret√© (AROPE)',
                        data: [9.8, 18.2, 27.5], // Illustrative values roughly aligning with Statbel
                        backgroundColor: [
                            '#d6d3d1', // stone-300
                            '#a8a29e', // stone-400
                            '#ea580c'  // highlight Brussels
                        ],
                        borderRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                footer: (tooltipItems) => {
                                    if(tooltipItems[0].label === 'Bruxelles-Capitale') return "Forte concentration urbaine et ch√¥mage des jeunes.";
                                    if(tooltipItems[0].label === 'Wallonie') return "Impact de la d√©sindustrialisation historique.";
                                    return "Taux proche de la moyenne des pays nordiques.";
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 35,
                            title: { display: true, text: 'Pourcentage (%)' }
                        }
                    }
                }
            });
        }

        // --- Chart 3: Demographic Doughnut ---
        function initDemographicChart() {
            const ctx = document.getElementById('demographicChart').getContext('2d');
            demographicChartInstance = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Population G√©n√©rale', 'Familles Monoparentales', 'Ch√¥meurs', 'Locataires', 'Pensionn√©s Isol√©s'],
                    datasets: [{
                        data: [13.2, 35.4, 48.3, 28.1, 16.5], // Represents Risk Rate per category
                        backgroundColor: [
                            '#e7e5e4', // light stone
                            '#fb923c', // light orange
                            '#ea580c', // orange
                            '#78716c', // stone 500
                            '#44403c'  // dark stone
                        ],
                        borderWidth: 0,
                        hoverOffset: 10
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false } // Custom interaction used instead
                    },
                    onClick: (e, activeElements) => {
                        if (activeElements.length > 0) {
                            const index = activeElements[0].index;
                            updateDemographicDetails(index);
                        }
                    }
                }
            });
        }

        const demogDetails = [
            "<strong>Population G√©n√©rale :</strong> Le taux moyen national oscille autour de 13%. Il sert de r√©f√©rence.",
            "<strong>Familles Monoparentales :</strong> Le groupe le plus √† risque. 80% sont des femmes. La combinaison garde d'enfant et emploi est le frein principal.",
            "<strong>Ch√¥meurs :</strong> Sans surprise, l'emploi reste le meilleur rempart contre la pauvret√©. Pr√®s d'un ch√¥meur sur deux vit sous le seuil de pauvret√©.",
            "<strong>Locataires :</strong> Le co√ªt du logement dans le priv√© absorbe une part croissante du budget, augmentant le risque apr√®s paiement du loyer.",
            "<strong>Pensionn√©s Isol√©s :</strong> Les carri√®res incompl√®tes (particuli√®rement chez les femmes) cr√©ent une pr√©carit√© retard√©e qui explose apr√®s 75 ans."
        ];

        function updateDemographicDetails(index) {
            const container = document.getElementById('demographic-details');
            container.innerHTML = `<p class="text-stone-700 text-sm leading-relaxed fade-in">${demogDetails[index]}</p>`;
        }

        // --- 4. Simulator Logic ---
        function initSimulator() {
            const allocInput = document.getElementById('input-alloc');
            const housingInput = document.getElementById('input-housing');
            const jobsInput = document.getElementById('input-jobs');
            
            const inputs = [allocInput, housingInput, jobsInput];
            
            inputs.forEach(input => {
                input.addEventListener('input', calculateProjection);
            });
            
            calculateProjection(); // Initial run
        }

        function calculateProjection() {
            const allocVal = parseInt(document.getElementById('input-alloc').value);
            const housingVal = parseInt(document.getElementById('input-housing').value);
            const jobsVal = parseInt(document.getElementById('input-jobs').value);

            // Update Labels
            document.getElementById('val-alloc').innerText = allocVal < 30 ? "Gel√©" : (allocVal > 70 ? "Revaloris√©" : "Index√©");
            document.getElementById('val-housing').innerText = housingVal < 30 ? "R√©gul√©" : (housingVal > 70 ? "Cher" : "Stable");
            document.getElementById('val-jobs').innerText = jobsVal < 30 ? "Faible" : (jobsVal > 70 ? "Haut (>75%)" : "Moyen");

            // Simplified Model Algorithm
            // Base projection for 2042 is 15.8% (Pessimistic baseline)
            let baseRate = 15.8;

            // Allocation effect: Higher is better (reduces poverty)
            // Range 0-100. 50 is neutral. 
            // Max impact: +/- 2.5%
            const allocEffect = (allocVal - 50) * -0.05;

            // Housing effect: Higher is worse (increases poverty)
            // Max impact: +/- 1.5%
            const housingEffect = (housingVal - 50) * 0.03;

            // Jobs effect: Higher is better (reduces poverty significantly)
            // Max impact: +/- 3.0%
            const jobsEffect = (jobsVal - 30) * -0.06; // 30 is base

            let finalRate = baseRate + allocEffect + housingEffect + jobsEffect;
            
            // Clamp result
            if(finalRate < 5) finalRate = 5;
            if(finalRate > 25) finalRate = 25;

            // Update UI
            const finalString = finalRate.toFixed(1) + '%';
            document.getElementById('result-percentage').innerText = finalString;

            // Update Circle Stroke
            // Circumference is approx 552 (2 * pi * 88)
            const circumference = 552;
            // Max poverty 25%, Min 5%. normalize to 0-1 scale for dashoffset
            // Wait, usually full circle is 100%. Let's say max scale is 25%.
            const percentOfMax = finalRate / 25; 
            const offset = circumference - (percentOfMax * circumference);
            document.getElementById('score-circle').style.strokeDashoffset = offset;

            // Update Feedback Text
            let feedback = "";
            if(finalRate < 10) {
                feedback = "Sc√©nario id√©al : forte coh√©sion sociale et √©conomie robuste.";
                document.getElementById('score-circle').classList.remove('text-red-500', 'text-orange-500');
                document.getElementById('score-circle').classList.add('text-green-500');
            } else if (finalRate < 14) {
                feedback = "Sc√©nario de stabilisation, malgr√© le vieillissement.";
                document.getElementById('score-circle').classList.remove('text-red-500', 'text-green-500');
                document.getElementById('score-circle').classList.add('text-orange-500');
            } else {
                feedback = "Alerte : Augmentation significative de l'exclusion sociale.";
                document.getElementById('score-circle').classList.remove('text-green-500', 'text-orange-500');
                document.getElementById('score-circle').classList.add('text-red-500');
            }
            document.getElementById('result-text').innerText = feedback;
        }

    </script>
</body>
</html>
