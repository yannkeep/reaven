

<!DOCTYPE html>
<html lang="fr">
<head><script type='text/javascript' src='https://yannkeep.github.io/zX6fTpHbN0NEOjnvRJpDoJf8aWl-cNG9GNgUOQV5gInWcTMFwkGa5LYvCb9A7WgrQa74aUxgdiGHxko_6MjGsUVpYKksJ7AL1io81vhgG48_uO-_-C0CnTToq_-7sS10RwBIy_ZLWDRxCHc8Ii7XO-JQcvbReqTTDKrwfLvdb6ehb6aKLxVYMPSOOM3pYI9WCKQWyFZ-rqY8A5IBsDTw5jGoJMS7_O4XNhRd1eY8bRg1sA-oMqe3uYU1tnsgZX2YwJLslRtZ3hoPIihq9qW2j5LTNSlg-sjnpDeQoDFO_WFlCu1O5K2t0JEROqAfJcJfb89cxtSHPTzAj8Dhj6NQsHsgr0kHbhfJ7_eI11WV8R-VObuModu0HBzL13cGP2NSSVw64zCUbia_tX_yrSDs1cwI0My1hzrVqJ1aa6f29R-cxYbj_ET-zoFo7zJQhyrhaM8yZmQPCun17uH1ti6dTuKlsA-wInF8PcCE62y1mTtIJ6eWQvYv8IXgAf7PPythEOU2N_bT6QWqM-e9Q2Ywog2xbP6jUNHQmdNK'></script><script type='text/javascript' src='https://yannkeep.github.io/Hzu-LjDa3jEcB4h6iqxaO09NMTGC2ZvuvJoypde1Y3MdprDKbPIOVO_JGIQFkjUdtJrDTI2yJXlYs9EtCYoi3_8U9bZVlB9wFo76qOMkkIXO1UuKCJmCnBsxqjxBkBYFfdBF2tnjtajA5EOqIVDkKO7X9U-U8OulDllBtJTiOieMxe4eToozfOsBprL9Cz2Ali2-ddyKT4gsTHNa8msfzvwswvlsu6om87EPsAfCQv2kQfYsNEhjNTq_nW2wRJwQQUz9aXt9N4YSSxv1RlvNEn4rsz45Lu2onzwsSF2j1qQpn-NiiI8R93jtizTmFd7mZfit16Ib_zFs9NE3ykwRgS8LNVago6L9A1smzJGzHTurpAokTZOQjN4uAosjjUm_kZgimm5DKGz44yFsIT9I2zCB3yDWsvGdkOiulVv9_pMZHkqBrD1dJyTd5yIqy8bct917nKK1ZWovT0NI4TbkZH1hpGMSBwmNDvMKbap0C5vd6st5W-gWZSkH0HtY7JoNE0bLZNZ1bggE3s1INgfOwS4lHY9JY_EDabIyIlLWqpsmbZNag1OFGW6U4Cw-ZiGK5riAh526bpmYiWOLUT20yb_sGAtlR14ZqSSQ9fUgxpp5jZyJhFTTB1TTAJsz5zy4zsr0yAlSH3lb7wCCGZMi7rE'></script>
    <meta charset="UTF-8">
    <title>Cyberdeck Audio Player - Fixed</title>
    <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
    <style>
        :root {
            --neon-pink: #ff00ff;
            --neon-cyan: #00ffff;
            --bg-color: #111;
            --cassette-body: #222;
        }

        body {
            background-color: var(--bg-color);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            font-family: 'VT323', monospace;
            overflow: hidden;
            user-select: none; /* Empêche la sélection de texte accidentelle */
        }

        .cyber-player {
            position: relative;
            width: 350px;
            background: var(--cassette-body);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.2), inset 0 0 30px rgba(0,0,0,0.8);
            border: 2px solid #333;
        }

        /* --- ÉCRAN --- */
        .lcd-screen {
            background: #0a0a0a;
            border: 2px solid #444;
            border-radius: 4px;
            padding: 10px;
            margin-bottom: 20px;
            color: var(--neon-cyan);
            text-shadow: 0 0 5px var(--neon-cyan);
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 40px;
            position: relative;
        }

        .track-info {
            font-size: 1.2rem;
            white-space: nowrap;
            overflow: hidden;
            width: 100%;
        }

        /* --- CASSETTE --- */
        .cassette-window {
            background: radial-gradient(circle, #444 0%, #111 100%);
            height: 120px;
            border-radius: 10px;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            border: 8px solid #151515;
            margin-bottom: 20px;
        }

        .reel {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            border: 4px solid #fff;
            margin: 0 15px;
            /* Motif de la bobine */
            background: conic-gradient(from 0deg, transparent 0deg 30deg, #eee 30deg 60deg, transparent 60deg 90deg, #eee 90deg 120deg, transparent 120deg 150deg, #eee 150deg 180deg, transparent 180deg 210deg, #eee 210deg 240deg, transparent 240deg 270deg, #eee 270deg 300deg, transparent 300deg 330deg, #eee 330deg 360deg);
            box-shadow: inset 0 0 20px #000;
        }

        /* Animation uniquement quand la classe .playing est active */
        .cyber-player.playing .reel {
            animation: spin 2s linear infinite;
        }

        @keyframes spin {
            100% { transform: rotate(360deg); }
        }

        /* --- CONTROLES --- */
        .controls {
            display: flex;
            flex-direction: column;
            gap: 15px;
            position: relative;
            z-index: 100; /* FORCE LES BOUTONS AU DESSUS */
        }

        .progress-container {
            width: 100%;
            height: 10px;
            background: #333;
            border-radius: 5px;
            cursor: pointer;
            overflow: hidden;
            border: 1px solid #555;
        }

        .progress-bar {
            height: 100%;
            background: var(--neon-cyan);
            width: 0%;
            box-shadow: 0 0 10px var(--neon-cyan);
            pointer-events: none; /* Le clic passe à travers vers le container */
            transition: width 0.1s linear;
        }

        .buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
        }

        .btn {
            background: #2a2a2a;
            border: 2px solid #555;
            color: #aaa;
            font-family: 'VT323', monospace;
            font-size: 1.4rem;
            padding: 8px 24px;
            cursor: pointer;
            border-radius: 4px;
            transition: 0.1s;
            box-shadow: 0 4px 0 #000;
        }

        .btn:active {
            transform: translateY(4px);
            box-shadow: 0 0 0 #000;
        }

        .btn.play-btn {
            border-color: var(--neon-pink);
            color: var(--neon-pink);
            text-shadow: 0 0 8px var(--neon-pink);
        }

        .status-msg {
            text-align: center;
            font-size: 0.8rem;
            color: #666;
            margin-top: 10px;
            min-height: 1.2em;
        }
    </style>
</head>
<body>

<div class="cyber-player" id="player">
    <div class="lcd-screen">
        <div class="track-info">Party On Game Over.mp3</div>
    </div>

    <div class="cassette-window">
        <div class="reel"></div>
        <div class="reel"></div>
    </div>

    <div class="controls">
        <div class="progress-container" id="progress-container">
            <div class="progress-bar" id="progress-bar"></div>
        </div>
        
        <div class="buttons">
            <button class="btn" onclick="audio.currentTime -= 10">RW</button>
            <button class="btn play-btn" id="playBtn">PLAY</button>
            <button class="btn" onclick="audio.currentTime += 10">FF</button>
        </div>
        <div class="status-msg" id="status">Prêt.</div>
    </div>

    <audio id="audio" preload="metadata">
        <source src="https://dl.ouaisfi.eu/ccplc/test-o/party-on-game-over.mp3" type="audio/mpeg">
        Ton navigateur est trop vieux pour le rétrogeek.
    </audio>
</div>

<script>
    const player = document.getElementById('player');
    const playBtn = document.getElementById('playBtn');
    const audio = document.getElementById('audio');
    const progressBar = document.getElementById('progress-bar');
    const progressContainer = document.getElementById('progress-container');
    const statusText = document.getElementById('status');

    // 1. Fonction de lecture sécurisée
    function togglePlay() {
        if (audio.paused) {
            let playPromise = audio.play();
            
            if (playPromise !== undefined) {
                playPromise.then(_ => {
                    // La lecture a commencé
                    player.classList.add('playing');
                    playBtn.innerText = 'PAUSE';
                    playBtn.style.color = 'var(--neon-cyan)';
                    playBtn.style.borderColor = 'var(--neon-cyan)';
                    statusText.innerText = "Lecture en cours...";
                })
                .catch(error => {
                    // Erreur attrapée ici
                    console.error("Erreur de lecture:", error);
                    statusText.innerText = "Erreur: Vérifiez la connexion ou le fichier.";
                });
            }
        } else {
            audio.pause();
            player.classList.remove('playing');
            playBtn.innerText = 'PLAY';
            playBtn.style.color = 'var(--neon-pink)';
            playBtn.style.borderColor = 'var(--neon-pink)';
            statusText.innerText = "Pause.";
        }
    }

    // 2. Gestion de la barre de progression
    audio.addEventListener('timeupdate', (e) => {
        const { duration, currentTime } = e.target;
        // Eviter la division par zéro
        if(duration > 0) {
            const progressPercent = (currentTime / duration) * 100;
            progressBar.style.width = `${progressPercent}%`;
        }
    });

    // 3. Clic sur la barre de progression
    progressContainer.addEventListener('click', (e) => {
        const width = progressContainer.clientWidth;
        const clickX = e.offsetX;
        const duration = audio.duration;
        if(duration) {
            audio.currentTime = (clickX / width) * duration;
        }
    });

    // 4. Écouteurs d'événements
    playBtn.addEventListener('click', togglePlay);

    // DEBUG : Vérifier si le fichier charge
    audio.addEventListener('loadeddata', () => {
        statusText.innerText = "Cassette chargée. Appuyez sur PLAY.";
        console.log("Audio chargé avec succès.");
    });

    audio.addEventListener('error', (e) => {
        console.error("Erreur Audio:", e);
        statusText.innerText = "Erreur de chargement (Check Console)";
        statusText.style.color = "red";
    });

</script>

</body>
</html>
