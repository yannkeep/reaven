<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Reaven Protocol: Ecosystem Architecture Analysis</title>
    
    <!-- CSS Framework: Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Charting Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>

    <!-- Google Fonts for Material Design feel -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700;900&display=swap" rel="stylesheet">

    <!-- Palette: "Energetic & Playful" (Vibrant Orange, Deep Blue, Bright Yellow) -->
    <!-- Chosen Palette: Reaven Vibrant -->
    <!-- Application Structure Plan: 
         1. Header: High-impact title and summary.
         2. KPI Dashboard: Immediate quantitative context (Depth, Budget, Risks).
         3. Structural Analysis: Visualizing the URL recursion (1/1/1/1) using CSS diagrams (Goal: Organize).
         4. Content Composition: Chart.js Doughnut for ingredients (Goal: Inform).
         5. Performance Metrics: Chart.js Radar for Sauce Profiles (Goal: Compare).
         6. Threat Assessment: Plotly.js 3D Scatter for 'Sleepy Hollow' anomalies (Goal: Relationships).
         7. Narrative Conclusion.
         Structure chosen to move from high-level stats to deep-dive technical analysis.
    -->

    <!-- Visualization & Content Choices:
         1. KPI Cards: HTML/Tailwind. Goal: Inform. Justification: Instant readability of key metrics like 'Depth Level 6'.
         2. Recursive Path Flow: Styled HTML Blocks. Goal: Organize. Justification: Visualizes the '1/1/1/1/1/1' nesting better than a chart. NO SVG/Mermaid.
         3. Ingredient Doughnut: Chart.js. Goal: Inform. Justification: Shows proportion of 'Salade' vs 'Bicky'.
         4. Sauce Radar: Chart.js. Goal: Compare. Justification: Multi-variable comparison of 'Andalouse' attributes.
         5. Anomaly Scatter: Plotly (WebGL). Goal: Relationships. Justification: 3D visualization required for complex 'Time vs Depth vs Risk' data.
         NO SVG used.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->

    <style>
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #F3F4F6; /* Light Grey Background */
            color: #1F2937;
        }

        /* Chart Container Styling - Mandatory Requirements */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px; /* Max width constraint */
            margin-left: auto;
            margin-right: auto;
            height: 350px; /* Base height */
            max-height: 400px;
        }

        /* Responsive height adjustments */
        @media (max-width: 768px) {
            .chart-container {
                height: 300px;
            }
        }

        .chart-container-large {
            position: relative;
            width: 100%;
            max-width: 100%; /* Larger container for Plotly */
            height: 500px;
            max-height: 600px;
        }

        /* Custom Utilities for Diagram */
        .flow-arrow {
            font-size: 24px;
            color: #FF6B00; /* Vibrant Orange */
            text-align: center;
            line-height: 1;
        }

        .data-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .data-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
    </style>
</head>
<body class="antialiased">

    <!-- Header Section -->
    <header class="bg-[#1E3A8A] text-white py-12 shadow-lg">
        <div class="container mx-auto px-4 text-center">
            <h1 class="text-4xl md:text-6xl font-black mb-4 tracking-tight">THE REAVEN PROTOCOL</h1>
            <p class="text-xl md:text-2xl font-light text-orange-300">Ecosystem Architecture & Ingredient Analysis</p>
            <div class="mt-8 max-w-3xl mx-auto bg-white/10 backdrop-blur-sm rounded-lg p-6 border border-orange-500/30">
                <p class="text-sm md:text-base leading-relaxed">
                    <strong>Executive Summary:</strong> An audit of the "Fan Club" and "Budget" directories reveals a highly fragmented, recursive architecture. 
                    From the infinite depths of <code>/1/1/1/1</code> to the caloric density of the <code>bicky-boulette</code> module, this infographic 
                    dissects the chaotic interoperability of "Crispy Popples" and "Salade Tout" under the unifying standard of the 
                    <strong>Andalouse Protocol</strong>.
                </p>
            </div>
        </div>
    </header>

    <main class="container mx-auto px-4 py-12 space-y-16">

        <!-- Section 1: Core Metrics (KPIs) -->
        <section>
            <div class="mb-8 border-l-4 border-[#FF6B00] pl-4">
                <h2 class="text-3xl font-bold text-gray-800">01. System Vital Signs</h2>
                <p class="text-gray-600 mt-2">Key performance indicators extracted from the root directory analysis.</p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                <!-- KPI 1 -->
                <div class="data-card bg-white rounded-xl p-6 shadow-md border-t-4 border-[#FF6B00]">
                    <div class="text-sm font-bold text-gray-400 uppercase tracking-wider">Recursion Depth</div>
                    <div class="mt-2 text-5xl font-black text-[#1E3A8A]">Level 6</div>
                    <div class="mt-2 text-sm text-gray-500">Path: /1/1/1/1/1/1</div>
                </div>
                <!-- KPI 2 -->
                <div class="data-card bg-white rounded-xl p-6 shadow-md border-t-4 border-[#FFD700]">
                    <div class="text-sm font-bold text-gray-400 uppercase tracking-wider">Budget Allocation</div>
                    <div class="mt-2 text-5xl font-black text-[#1E3A8A]">Tropico</div>
                    <div class="mt-2 text-sm text-gray-500">Currency: Ouaisfieu</div>
                </div>
                <!-- KPI 3 -->
                <div class="data-card bg-white rounded-xl p-6 shadow-md border-t-4 border-[#1E3A8A]">
                    <div class="text-sm font-bold text-gray-400 uppercase tracking-wider">Crispiness Index</div>
                    <div class="mt-2 text-5xl font-black text-[#FF6B00]">98.4%</div>
                    <div class="mt-2 text-sm text-gray-500">Source: Crispy Popples</div>
                </div>
                <!-- KPI 4 -->
                <div class="data-card bg-white rounded-xl p-6 shadow-md border-t-4 border-red-500">
                    <div class="text-sm font-bold text-gray-400 uppercase tracking-wider">Active Threats</div>
                    <div class="mt-2 text-5xl font-black text-red-600">While(True)</div>
                    <div class="mt-2 text-sm text-gray-500">Location: Sleepy Hollow</div>
                </div>
            </div>
        </section>

        <!-- Section 2: Structural Analysis (Flow Diagram & Bar Chart) -->
        <section class="grid grid-cols-1 lg:grid-cols-2 gap-8 items-start">
            <!-- Left: Description & Diagram -->
            <div>
                <div class="mb-6 border-l-4 border-[#FF6B00] pl-4">
                    <h2 class="text-3xl font-bold text-gray-800">02. The Recursive Descent</h2>
                    <p class="text-gray-600 mt-2">
                        Visualizing the path anomalies. The system exhibits a fractally nested structure where the directory <code>1</code> repeats six times before resolving to the <code>crispy-popples</code> asset. This introduces significant latency in the "Salade Tout" rendering pipeline.
                    </p>
                </div>

                <!-- Structured HTML Diagram (NO SVG) -->
                <div class="bg-white rounded-xl shadow-md p-8">
                    <h3 class="text-lg font-bold text-gray-700 mb-4 border-b pb-2">Path Resolution Flow</h3>
                    <div class="flex flex-col items-center space-y-2">
                        <!-- Node -->
                        <div class="w-full bg-gray-100 p-3 rounded border border-gray-300 flex justify-between items-center">
                            <span class="font-mono font-bold text-[#1E3A8A]">root/fan-club</span>
                            <span class="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded">Entry</span>
                        </div>
                        <!-- Arrow -->
                        <div class="flow-arrow">↓</div>
                        <!-- Node -->
                        <div class="w-full bg-orange-50 p-3 rounded border border-orange-200 flex justify-between items-center">
                            <span class="font-mono font-bold text-[#FF6B00]">.../info/1</span>
                            <span class="text-xs bg-orange-100 text-orange-800 px-2 py-1 rounded">Recursion Start</span>
                        </div>
                        <!-- Arrow -->
                        <div class="flow-arrow">↓</div>
                        <!-- Recursive Block -->
                        <div class="w-full bg-orange-50 p-3 rounded border border-orange-200 border-dashed text-center">
                            <span class="font-mono text-gray-400">/1/1/1/1 (x4)</span>
                        </div>
                         <!-- Arrow -->
                        <div class="flow-arrow">↓</div>
                        <!-- Node -->
                        <div class="w-full bg-green-50 p-3 rounded border border-green-200 flex justify-between items-center shadow-sm">
                            <span class="font-mono font-bold text-green-700">.../salade/tout</span>
                            <span class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded">Payload</span>
                        </div>
                         <!-- Arrow -->
                        <div class="flow-arrow">↓</div>
                         <!-- Final Node -->
                        <div class="w-full bg-[#1E3A8A] p-3 rounded border border-blue-900 flex justify-between items-center shadow-lg text-white">
                            <span class="font-mono font-bold">.../andalouse/index.html</span>
                            <span class="text-xs bg-white text-[#1E3A8A] px-2 py-1 rounded font-bold">Target</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right: Chart.js Bar Chart -->
            <div class="bg-white rounded-xl shadow-md p-6 h-full flex flex-col">
                <div class="mb-4">
                    <h3 class="text-xl font-bold text-gray-800">Latency by Directory Depth</h3>
                    <p class="text-sm text-gray-500">Analysis of processing time (ms) at each level of the URL structure.</p>
                </div>
                <div class="chart-container flex-grow">
                    <canvas id="depthChart"></canvas>
                </div>
            </div>
        </section>

        <!-- Section 3: Ingredient Composition (Doughnut Chart) -->
        <section>
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Text Context -->
                <div class="lg:col-span-1">
                    <div class="mb-6 border-l-4 border-[#FFD700] pl-4">
                        <h2 class="text-3xl font-bold text-gray-800">03. Composition Analysis</h2>
                        <p class="text-gray-600 mt-2">
                            The "Budget" directory reveals a complex nutritional and financial mix. The <strong>Bicky-Boulette</strong> complex dominates the resource allocation, overshadowing the "Salade Stou" initiatives.
                        </p>
                    </div>
                    <div class="bg-yellow-50 p-4 rounded-lg border border-yellow-200">
                        <h4 class="font-bold text-yellow-800 mb-2">Note on "Frites-Dedans"</h4>
                        <p class="text-sm text-yellow-700">
                            The integration of "Frites-Dedans" (Fries Inside) significantly alters the structural integrity of the "Bicky" object, increasing the "Tropico" thirst coefficient by factor 2.4.
                        </p>
                    </div>
                </div>

                <!-- Doughnut Chart -->
                <div class="lg:col-span-2 bg-white rounded-xl shadow-md p-6">
                    <h3 class="text-xl font-bold text-gray-800 mb-4 text-center">Resource Distribution: The "Stou" Aggregation</h3>
                    <div class="chart-container">
                        <canvas id="compositionChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 4: Comparative Analytics (Radar Chart) -->
        <section>
             <div class="mb-6 border-l-4 border-[#1E3A8A] pl-4">
                <h2 class="text-3xl font-bold text-gray-800">04. The Sauce Protocol</h2>
                <p class="text-gray-600 mt-2">
                    Comparative analysis of the "Andalouse" standard against legacy protocols (Mayo, Samouraï). The Andalouse configuration provides optimal stability for "Scrap" operations.
                </p>
            </div>
            
            <div class="bg-white rounded-xl shadow-md p-6">
                <div class="chart-container">
                    <canvas id="sauceRadar"></canvas>
                </div>
            </div>
        </section>

        <!-- Section 5: Threat Topography (Plotly 3D) -->
        <section>
             <div class="mb-6 border-l-4 border-red-500 pl-4">
                <h2 class="text-3xl font-bold text-gray-800">05. Anomaly Detection: Sleepy Hollow</h2>
                <p class="text-gray-600 mt-2">
                    Deep scan of the <code>scrap/true/while</code> loop. This 3D visualization maps the correlation between Request Volume, System Fatigue (Sleepy), and Data Corruption (Scrap).
                </p>
            </div>

            <div class="bg-white rounded-xl shadow-md p-4">
                <!-- Use larger container for Plotly -->
                <div class="chart-container-large" id="plotly3d"></div>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-gray-400 py-12 border-t border-gray-700 mt-12">
        <div class="container mx-auto px-4 text-center">
            <p class="text-lg font-bold text-white mb-2">REAVEN SYSTEMS</p>
            <p class="text-sm">Generated from Source Report: <code>fan-club/info/1...</code> & <code>budget/bicky...</code></p>
            <p class="text-xs mt-4 opacity-50">No SVGs were harmed in the making of this infographic.</p>
        </div>
    </footer>

    <!-- JavaScript Logic -->
    <script>
        // --- UTILITIES ---

        // Label Wrapping Utility (Mandatory 16-char logic)
        function formatLabel(str) {
            if (str.length <= 16) return str;
            const words = str.split(' ');
            const lines = [];
            let currentLine = words[0];

            for (let i = 1; i < words.length; i++) {
                if ((currentLine + " " + words[i]).length > 16) {
                    lines.push(currentLine);
                    currentLine = words[i];
                } else {
                    currentLine += " " + words[i];
                }
            }
            lines.push(currentLine);
            return lines;
        }

        // Common Tooltip Config (Mandatory)
        const commonTooltipConfig = {
            callbacks: {
                title: function(tooltipItems) {
                    const item = tooltipItems[0];
                    let label = item.chart.data.labels[item.dataIndex];
                    if (Array.isArray(label)) {
                        return label.join(' ');
                    } else {
                        return label;
                    }
                }
            }
        };

        // --- CHART 1: DEPTH LATENCY (BAR) ---
        const depthCtx = document.getElementById('depthChart').getContext('2d');
        const depthLabels = ["Root/Fan-Club", "Info Directory", "Node 1 (Alpha)", "Node 1 (Beta)", "Node 1 (Gamma)", "Node 1 (Delta)", "Crispy Popples", "Salade Tout"];
        
        new Chart(depthCtx, {
            type: 'bar',
            data: {
                labels: depthLabels.map(formatLabel), // Apply formatting
                datasets: [{
                    label: 'Latency (ms)',
                    data: [12, 25, 45, 80, 150, 300, 600, 1200],
                    backgroundColor: '#FF6B00', // Vibrant Orange
                    borderRadius: 4,
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false },
                    tooltip: commonTooltipConfig
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        grid: { color: '#E5E7EB' }
                    },
                    x: {
                        grid: { display: false }
                    }
                }
            }
        });

        // --- CHART 2: COMPOSITION (DOUGHNUT) ---
        const compCtx = document.getElementById('compositionChart').getContext('2d');
        const compLabels = ["Bicky Boulette", "Frites Dedans", "Salade Stou", "Tropico", "Ouaisfieu (Misc)"];

        new Chart(compCtx, {
            type: 'doughnut',
            data: {
                labels: compLabels.map(formatLabel),
                datasets: [{
                    data: [40, 25, 15, 15, 5],
                    backgroundColor: [
                        '#1E3A8A', // Deep Blue
                        '#FF6B00', // Orange
                        '#10B981', // Green (Salade)
                        '#FFD700', // Yellow (Tropico)
                        '#9CA3AF'  // Grey
                    ],
                    borderWidth: 0,
                    hoverOffset: 10
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'right',
                        labels: {
                            font: { family: 'Roboto', size: 12 },
                            usePointStyle: true,
                            padding: 20
                        }
                    },
                    tooltip: commonTooltipConfig
                },
                layout: {
                    padding: 20
                }
            }
        });

        // --- CHART 3: SAUCE RADAR ---
        const radarCtx = document.getElementById('sauceRadar').getContext('2d');
        
        new Chart(radarCtx, {
            type: 'radar',
            data: {
                labels: ["Spiciness (Piquant)", "Creaminess (Onctuosité)", "Acidity (Acidité)", "Scrap Resistance", "Budget Efficiency"],
                datasets: [{
                    label: 'Andalouse (Current)',
                    data: [65, 80, 70, 95, 85],
                    fill: true,
                    backgroundColor: 'rgba(255, 107, 0, 0.2)',
                    borderColor: '#FF6B00',
                    pointBackgroundColor: '#FF6B00',
                    pointBorderColor: '#fff',
                    pointHoverBackgroundColor: '#fff',
                    pointHoverBorderColor: '#FF6B00'
                }, {
                    label: 'Samouraï (Legacy)',
                    data: [95, 40, 60, 30, 70],
                    fill: true,
                    backgroundColor: 'rgba(30, 58, 138, 0.2)',
                    borderColor: '#1E3A8A',
                    pointBackgroundColor: '#1E3A8A',
                    pointBorderColor: '#fff',
                    pointHoverBackgroundColor: '#fff',
                    pointHoverBorderColor: '#1E3A8A'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                elements: {
                    line: { borderWidth: 3 }
                },
                scales: {
                    r: {
                        angleLines: { color: '#E5E7EB' },
                        grid: { color: '#E5E7EB' },
                        pointLabels: {
                            font: { family: 'Roboto', size: 12, weight: 'bold' },
                            color: '#374151'
                        },
                        suggestedMin: 0,
                        suggestedMax: 100
                    }
                },
                plugins: {
                    tooltip: commonTooltipConfig
                }
            }
        });

        // --- CHART 4: PLOTLY 3D SCATTER ---
        // Visualizing the "Sleepy Hollow" loop anomaly
        
        // Generate dummy data representing the "While Loop"
        function generateLoopData(points) {
            const x = [], y = [], z = [], color = [];
            for (let i = 0; i < points; i++) {
                // Helix shape to represent an infinite loop
                const t = i / 10;
                x.push(Math.sin(t) * 10 + (Math.random() - 0.5)); // Chaos factor
                y.push(Math.cos(t) * 10 + (Math.random() - 0.5));
                z.push(i); // Time/Iterations
                
                // Color gradient based on "Sleepiness" (height)
                color.push(i); 
            }
            return { x, y, z, color };
        }

        const loopData = generateLoopData(200);

        const plotlyData = [{
            type: 'scatter3d',
            mode: 'markers',
            x: loopData.x,
            y: loopData.y,
            z: loopData.z,
            marker: {
                size: 4,
                color: loopData.color,
                colorscale: 'Viridis',
                opacity: 0.8
            },
            name: 'Scrap Fragments'
        }];

        const plotlyLayout = {
            margin: { l: 0, r: 0, b: 0, t: 0 },
            paper_bgcolor: 'rgba(0,0,0,0)',
            plot_bgcolor: 'rgba(0,0,0,0)',
            scene: {
                xaxis: { title: 'Loop Entropy' },
                yaxis: { title: 'Memory Leak' },
                zaxis: { title: 'Iteration Count' },
                camera: {
                    eye: { x: 1.5, y: 1.5, z: 1.5 }
                }
            },
            title: {
                text: 'Sleepy Hollow Event Horizon',
                font: { size: 12 }
            }
        };

        const plotlyConfig = {
            responsive: true,
            displayModeBar: false
        };

        // Render Plotly (WebGL enabled by scatter3d type)
        Plotly.newPlot('plotly3d', plotlyData, plotlyLayout, plotlyConfig);

    </script>
</body>
</html>
