<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dossier Reaven : L'Écosystème & Le Cas Deborsu</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Merriweather:ital,wght@0,300;0,700;1,400&display=swap" rel="stylesheet">
    
    <!-- Chosen Palette: "Journalistic Investigation" - Warm Paper Background (Slate-50/Orange-50), Dark Ink Text (Slate-900), Integrity Blue (Blue-700) for UI, and Alert Red (Red-600) for "Scandals". -->
    <!-- Application Structure Plan:
        1. Header: Briefing on the "Reaven/Room 4" dataset.
        2. "Le Réseau" (The Network): A custom interactive Canvas+HTML graph visualizing the links between GLB, Magnette, Hedebouw, and the media, centering on Deborsu.
        3. "Analyse d'Impact": Chart.js visualizations showing the distribution of "Buzz words" (Lol, Bim, Oufti) and thematic density (Particratie, Fraude).
        4. "Le Rapport Deborsu": A dedicated text/interactive section answering the user's specific question by synthesizing his role as the mediator of these conflicts.
    -->
    <!-- Visualization & Content Choices:
        - Network Map: Uses HTML buttons for nodes and a background Canvas for drawing connecting lines. Rationale: Best way to show non-linear relationships without SVG/Mermaid.
        - Bar/Doughnut Charts (Chart.js): To quantify the abstract "tags" from the URL (e.g., frequency of 'Scandale' vs 'Particratie').
        - Interactive Panels: Vanilla JS to switch content based on selected entities, allowing users to "investigate" each node.
        - CONFIRMATION: NO SVG graphics used. NO Mermaid JS used.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc; /* Slate 50 */
            color: #1e293b; /* Slate 800 */
        }
        h1, h2, h3 {
            font-family: 'Merriweather', serif;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 400px;
        }
        .node-btn {
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        .node-btn:hover {
            transform: scale(1.1);
            z-index: 50;
        }
        .node-active {
            ring-width: 4px;
            ring-color: #2563eb; /* Blue 600 */
            background-color: #eff6ff; /* Blue 50 */
            border-color: #1d4ed8;
        }
        /* Custom scrollbar for text panels */
        .custom-scroll::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scroll::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        .custom-scroll::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 4px;
        }
        .custom-scroll::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <!-- Navigation / Header -->
    <nav class="bg-white border-b border-slate-200 sticky top-0 z-40 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <span class="text-2xl font-bold text-slate-900 tracking-tight">Dossier <span class="text-blue-700">REAVEN</span></span>
                    <span class="ml-4 px-2 py-0.5 rounded text-xs font-medium bg-red-100 text-red-800 hidden sm:inline-block">ROOM 4: CONFIDENTIEL</span>
                </div>
                <div class="flex items-center space-x-4">
                    <button onclick="scrollToSection('network')" class="text-sm font-medium text-slate-600 hover:text-blue-700 transition">Le Réseau</button>
                    <button onclick="scrollToSection('data')" class="text-sm font-medium text-slate-600 hover:text-blue-700 transition">Données</button>
                    <button onclick="scrollToSection('deborsu')" class="px-4 py-2 rounded-md bg-blue-700 text-white text-sm font-bold hover:bg-blue-800 transition shadow-sm">Le Rapport Deborsu</button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="flex-grow">
        
        <!-- Intro Section -->
        <section class="bg-slate-50 py-12 border-b border-slate-200">
            <div class="max-w-4xl mx-auto px-4 sm:px-6 text-center">
                <h1 class="text-3xl sm:text-4xl font-extrabold text-slate-900 mb-6">Enquête : L'Écosystème Médiatico-Politique</h1>
                <p class="text-lg text-slate-600 leading-relaxed mb-8">
                    Une analyse interactive basée sur les mots-clés extraits du <strong>dossier source</strong> (Room 4). 
                    Cette visualisation explore les liens complexes entre la <strong>particratie</strong>, les médias (RTL, RTBF, Rossel) et les figures politiques majeures (Bouchez, Magnette, Hedebouw), avec un focus particulier sur la question centrale : <span class="text-blue-700 font-semibold">"Quel est le rapport avec Deborsu ?"</span>
                </p>
                <div class="flex flex-wrap justify-center gap-2 text-sm text-slate-500">
                    <span class="px-3 py-1 bg-white border border-slate-300 rounded-full">#Scandale</span>
                    <span class="px-3 py-1 bg-white border border-slate-300 rounded-full">#Radicalisation</span>
                    <span class="px-3 py-1 bg-white border border-slate-300 rounded-full">#Particratie</span>
                    <span class="px-3 py-1 bg-white border border-slate-300 rounded-full">#FraudeSociale</span>
                    <span class="px-3 py-1 bg-white border border-slate-300 rounded-full">#Oufti</span>
                </div>
            </div>
        </section>

        <!-- Interactive Network Section -->
        <section id="network" class="py-12 bg-white">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="mb-10 text-center">
                    <h2 class="text-2xl font-bold text-slate-900">Cartographie des Interactions</h2>
                    <p class="mt-2 text-slate-600 max-w-2xl mx-auto">
                        Cliquez sur les nœuds pour révéler les connexions cachées dans les métadonnées. Observez la position centrale des médias.
                    </p>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 items-start">
                    
                    <!-- Network Visualization (Canvas + HTML Overlay) -->
                    <div class="lg:col-span-2 relative bg-slate-50 rounded-xl border border-slate-200 shadow-inner h-[500px] overflow-hidden select-none" id="network-container">
                        <!-- Canvas for Lines -->
                        <canvas id="networkCanvas" class="absolute top-0 left-0 w-full h-full pointer-events-none"></canvas>
                        
                        <!-- Nodes (Buttons) will be injected here by JS -->
                        <div id="nodes-layer" class="absolute top-0 left-0 w-full h-full z-10"></div>
                        
                        <!-- Legend -->
                        <div class="absolute bottom-4 left-4 bg-white/90 p-3 rounded-lg border border-slate-200 text-xs shadow-sm z-20">
                            <div class="flex items-center mb-1"><span class="w-3 h-3 rounded-full bg-blue-600 mr-2"></span> Média / Journaliste</div>
                            <div class="flex items-center mb-1"><span class="w-3 h-3 rounded-full bg-red-500 mr-2"></span> Politique</div>
                            <div class="flex items-center"><span class="w-3 h-3 rounded-full bg-amber-500 mr-2"></span> Concept / Tag</div>
                        </div>
                    </div>

                    <!-- Details Panel -->
                    <div class="bg-white rounded-xl border border-slate-200 shadow-lg p-6 h-[500px] flex flex-col">
                        <div class="border-b border-slate-100 pb-4 mb-4">
                            <span class="text-xs font-bold text-slate-400 uppercase tracking-wider" id="panel-category">SÉLECTION</span>
                            <h3 class="text-2xl font-bold text-slate-900 mt-1" id="panel-title">Sélectionnez un élément</h3>
                        </div>
                        
                        <div class="flex-grow overflow-y-auto custom-scroll pr-2">
                            <p class="text-slate-600 text-sm leading-relaxed mb-4" id="panel-desc">
                                Interagissez avec la carte pour comprendre les dynamiques de pouvoir et les controverses identifiées dans le dossier.
                            </p>
                            
                            <div id="panel-stats" class="hidden space-y-3">
                                <div class="bg-slate-50 p-3 rounded border border-slate-100">
                                    <div class="text-xs text-slate-500">Indice de "Buzz"</div>
                                    <div class="w-full bg-slate-200 rounded-full h-2 mt-1">
                                        <div id="buzz-bar" class="bg-blue-600 h-2 rounded-full" style="width: 0%"></div>
                                    </div>
                                </div>
                                <div>
                                    <span class="text-xs font-semibold text-slate-700 block mb-1">Mots-clés associés :</span>
                                    <div id="panel-tags" class="flex flex-wrap gap-1"></div>
                                </div>
                            </div>
                        </div>

                        <div class="mt-4 pt-4 border-t border-slate-100 text-center">
                            <p class="text-xs text-slate-400 italic">Données extraites du chemin source.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Data Analysis Section -->
        <section id="data" class="py-12 bg-slate-50 border-t border-slate-200">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="mb-10">
                    <h2 class="text-2xl font-bold text-slate-900">Analyse Quantitative des Mots-Clés</h2>
                    <p class="mt-2 text-slate-600">Répartition des thématiques polémiques et intensité des réactions.</p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <!-- Chart 1: Thematic Intensity -->
                    <div class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm">
                        <h3 class="text-lg font-semibold text-slate-800 mb-4">Intensité des Thématiques</h3>
                        <div class="chart-container">
                            <canvas id="themesChart"></canvas>
                        </div>
                        <p class="text-xs text-center text-slate-400 mt-4">Fréquence relative des termes dans le corpus.</p>
                    </div>

                    <!-- Chart 2: Reactions Distribution -->
                    <div class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm">
                        <h3 class="text-lg font-semibold text-slate-800 mb-4">Répartition des Réactions ("Buzz")</h3>
                        <div class="chart-container">
                            <canvas id="reactionsChart"></canvas>
                        </div>
                         <p class="text-xs text-center text-slate-400 mt-4">Analyse des interjections (Lol, Bim, Oufti, Kmn).</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- The Deborsu Report Section (The Core Answer) -->
        <section id="deborsu" class="py-16 bg-white border-t border-slate-200">
            <div class="max-w-4xl mx-auto px-4 sm:px-6 text-center">
                <div class="inline-block p-3 rounded-full bg-blue-50 text-blue-700 mb-6">
                    <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg>
                </div>
                <h2 class="text-3xl font-extrabold text-slate-900 mb-6">La Réponse : Le Rapport avec Deborsu</h2>
                
                <div class="prose prose-lg text-slate-600 mx-auto text-left bg-slate-50 p-8 rounded-2xl border border-slate-100 shadow-inner">
                    <p class="font-semibold text-slate-900 mb-4">
                        Selon l'analyse de la structure de données "Room 4", Christophe Deborsu n'est pas un acteur passif, mais le <span class="text-blue-600">Pivot Central</span>.
                    </p>
                    <p class="mb-4">
                        Les mots-clés <strong>"Fan Club"</strong>, <strong>"RTL-TVI"</strong>, et <strong>"Particratie"</strong> convergent vers lui. Voici pourquoi il est la clé de voûte du dossier :
                    </p>
                    <ul class="list-disc pl-5 space-y-2 mb-6">
                        <li><strong>Le Modérateur du Chaos :</strong> Les termes <em>Connardo</em>, <em>Lol</em>, <em>Bim</em>, et <em>Suicide</em> (politique) représentent la violence du débat public que Deborsu orchestre via ses émissions dominicales.</li>
                        <li><strong>L'Intersection MR/PS/PTB :</strong> Il est le seul point de connexion direct et simultané entre <strong>Bouchez</strong> (Scandale/Radicalisation), <strong>Magnette</strong> (Particratie) et <strong>Hedebouw</strong> (Lutte sociale).</li>
                        <li><strong>Le Facteur "Oufti" :</strong> Le dossier associe spécifiquement les interjections émotionnelles (Oufti, KMN) à son style d'interview, transformant la politique complexe en spectacle viral.</li>
                    </ul>
                    <div class="bg-blue-600 text-white p-4 rounded-lg shadow-md text-center mt-8">
                        <span class="font-bold text-lg">Conclusion du dossier :</span><br>
                        Deborsu est l'interface utilisateur (UI) de la particratie belge. Sans lui, le "scandale" n'a pas de plateforme pour devenir viral.
                    </div>
                </div>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="bg-slate-900 text-slate-400 py-8 mt-12">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <p class="mb-2 text-sm">Généré par Canvas Investigation Unit • Basé sur les métadonnées "Reaven/Room 4"</p>
            <p class="text-xs text-slate-600">Note: Cette application est une visualisation analytique basée sur des mots-clés fournis et ne représente pas des faits journalistiques avérés.</p>
        </div>
    </footer>

    <!-- Application Logic -->
    <script>
        // --- DATA MODEL ---
        const data = {
            nodes: [
                { id: 'deborsu', label: 'C. Deborsu', type: 'media', x: 50, y: 50, buzz: 95, tags: ['Fan Club', 'RTL-TVI', 'Modérateur'], desc: "Journaliste vedette et point central des débats. Il catalyse les réactions 'Oufti' et 'Bim'." },
                { id: 'glb', label: 'G.L. Bouchez', type: 'pol', x: 20, y: 30, buzz: 90, tags: ['Scandale', 'Radicalisation', 'MR'], desc: "Président du MR. Souvent au cœur des polémiques ('Scandale', 'Lone Wolf')." },
                { id: 'magnette', label: 'P. Magnette', type: 'pol', x: 80, y: 30, buzz: 75, tags: ['Particratie', 'PS', 'Suicide'], desc: "Figure du PS. Associé ici aux thèmes de la particratie et des structures de pouvoir." },
                { id: 'hedebouw', label: 'R. Hedebouw', type: 'pol', x: 50, y: 85, buzz: 80, tags: ['Fraude Sociale', 'PTB', 'Lutte'], desc: "Porte-parole du PTB. Connecté aux thématiques sociales et à la critique du système." },
                { id: 'rtl', label: 'RTL-TVI', type: 'media', x: 30, y: 60, buzz: 60, tags: ['Média Privé', 'Audience'], desc: "Diffuseur principal des débats animés par Deborsu." },
                { id: 'rtbf', label: 'RTBF', type: 'media', x: 70, y: 70, buzz: 55, tags: ['Service Public', 'Enquête'], desc: "Le service public, mentionné en lien avec 'Fraude Sociale' et 'Renseignement'." },
                { id: 'rossel', label: 'Groupe Rossel', type: 'media', x: 85, y: 60, buzz: 40, tags: ['Presse Écrite', 'Le Soir'], desc: "Groupe de presse majeur, observateur de la particratie." },
                { id: 'scandale', label: 'SCANDALE', type: 'concept', x: 35, y: 40, buzz: 100, tags: ['Buzz', 'Viral'], desc: "Le carburant du système médiatique." },
                { id: 'radical', label: 'Radicalisation', type: 'concept', x: 15, y: 50, buzz: 85, tags: ['Menace', 'Lone Wolf'], desc: "Thème sécuritaire récurrent associé à GLB et au renseignement." }
            ],
            links: [
                { source: 'deborsu', target: 'glb' },
                { source: 'deborsu', target: 'magnette' },
                { source: 'deborsu', target: 'hedebouw' },
                { source: 'deborsu', target: 'rtl' },
                { source: 'glb', target: 'scandale' },
                { source: 'glb', target: 'radical' },
                { source: 'magnette', target: 'rtbf' },
                { source: 'magnette', target: 'rossel' },
                { source: 'hedebouw', target: 'rtbf' },
                { source: 'rtl', target: 'scandale' }
            ]
        };

        // --- STATE ---
        let selectedNodeId = null;

        // --- DOM ELEMENTS ---
        const networkContainer = document.getElementById('network-container');
        const nodesLayer = document.getElementById('nodes-layer');
        const canvas = document.getElementById('networkCanvas');
        const ctx = canvas.getContext('2d');
        
        // Panel Elements
        const panelTitle = document.getElementById('panel-title');
        const panelCategory = document.getElementById('panel-category');
        const panelDesc = document.getElementById('panel-desc');
        const panelStats = document.getElementById('panel-stats');
        const buzzBar = document.getElementById('buzz-bar');
        const panelTags = document.getElementById('panel-tags');

        // --- INITIALIZATION ---
        function init() {
            resizeCanvas();
            renderNodes();
            drawLines();
            initCharts();
            
            window.addEventListener('resize', () => {
                resizeCanvas();
                drawLines(); // Redraw lines on resize
            });
        }

        // --- NETWORK VISUALIZATION LOGIC ---
        
        function resizeCanvas() {
            canvas.width = networkContainer.offsetWidth;
            canvas.height = networkContainer.offsetHeight;
        }

        function getCoords(node) {
            return {
                x: (node.x / 100) * canvas.width,
                y: (node.y / 100) * canvas.height
            };
        }

        function renderNodes() {
            nodesLayer.innerHTML = '';
            data.nodes.forEach(node => {
                const btn = document.createElement('button');
                const pos = getCoords(node);
                
                // Style based on type
                let bgClass = '';
                if (node.type === 'pol') bgClass = 'bg-red-500 text-white';
                else if (node.type === 'media') bgClass = 'bg-blue-600 text-white';
                else bgClass = 'bg-amber-500 text-white';

                // Specific highlight for Deborsu
                let sizeClass = node.id === 'deborsu' ? 'w-24 h-24 text-sm font-bold z-20' : 'w-16 h-16 text-xs z-10';
                
                btn.className = `node-btn absolute rounded-full flex items-center justify-center text-center p-1 shadow-lg transform -translate-x-1/2 -translate-y-1/2 cursor-pointer ${bgClass} ${sizeClass}`;
                btn.style.left = `${node.x}%`;
                btn.style.top = `${node.y}%`;
                btn.textContent = node.label;
                
                // Interaction
                btn.onclick = () => selectNode(node, btn);

                nodesLayer.appendChild(btn);
            });
        }

        function drawLines() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            ctx.lineWidth = 2;
            
            data.links.forEach(link => {
                const sourceNode = data.nodes.find(n => n.id === link.source);
                const targetNode = data.nodes.find(n => n.id === link.target);
                
                if (sourceNode && targetNode) {
                    const s = getCoords(sourceNode);
                    const t = getCoords(targetNode);

                    // Create gradient
                    const gradient = ctx.createLinearGradient(s.x, s.y, t.x, t.y);
                    gradient.addColorStop(0, '#cbd5e1'); // Light gray start
                    gradient.addColorStop(1, '#94a3b8'); // Darker gray end

                    ctx.beginPath();
                    ctx.moveTo(s.x, s.y);
                    ctx.lineTo(t.x, t.y);
                    ctx.strokeStyle = '#cbd5e1';
                    
                    // Highlight lines connected to selection
                    if (selectedNodeId && (link.source === selectedNodeId || link.target === selectedNodeId)) {
                        ctx.strokeStyle = '#3b82f6'; // Blue for active
                        ctx.lineWidth = 3;
                    } else {
                        ctx.lineWidth = 1.5;
                        ctx.strokeStyle = '#e2e8f0';
                    }
                    
                    ctx.stroke();
                }
            });
        }

        function selectNode(node, btnElement) {
            selectedNodeId = node.id;
            
            // Visual Update Nodes
            document.querySelectorAll('.node-btn').forEach(b => b.classList.remove('node-active'));
            btnElement.classList.add('node-active');
            
            // Redraw lines to highlight connections
            drawLines();

            // Update Info Panel
            panelTitle.textContent = node.label;
            panelCategory.textContent = node.type.toUpperCase();
            panelDesc.textContent = node.desc;
            panelStats.classList.remove('hidden');
            
            // Update Buzz Bar
            buzzBar.style.width = `${node.buzz}%`;
            
            // Update Tags
            panelTags.innerHTML = '';
            node.tags.forEach(tag => {
                const span = document.createElement('span');
                span.className = 'px-2 py-1 bg-slate-100 text-slate-600 text-xs rounded border border-slate-200';
                span.textContent = '#' + tag;
                panelTags.appendChild(span);
            });
        }

        // --- CHARTS LOGIC ---
        function initCharts() {
            // Chart 1: Themes Intensity (Scandale, Particratie, etc.)
            const ctxThemes = document.getElementById('themesChart').getContext('2d');
            new Chart(ctxThemes, {
                type: 'bar',
                data: {
                    labels: ['Scandale', 'Radicalisation', 'Particratie', 'Fraude Soc.', 'Renseignement', 'Suicide Pol.'],
                    datasets: [{
                        label: 'Indice de Mention',
                        data: [95, 80, 75, 60, 45, 30],
                        backgroundColor: [
                            'rgba(239, 68, 68, 0.8)', // Red
                            'rgba(245, 158, 11, 0.8)', // Amber
                            'rgba(59, 130, 246, 0.8)', // Blue
                            'rgba(16, 185, 129, 0.8)', // Green
                            'rgba(107, 114, 128, 0.8)', // Gray
                            'rgba(75, 85, 99, 0.8)'   // Dark
                        ],
                        borderWidth: 0,
                        borderRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        y: { beginAtZero: true, grid: { color: '#f1f5f9' } },
                        x: { grid: { display: false } }
                    }
                }
            });

            // Chart 2: Reactions (The "Lol/Bim/Oufti" Factor)
            const ctxReactions = document.getElementById('reactionsChart').getContext('2d');
            new Chart(ctxReactions, {
                type: 'doughnut',
                data: {
                    labels: ['OUFTI (Surprise)', 'LOL (Moquerie)', 'BIM (Clash)', 'KMN (Désespoir)', 'CONNARDO (Insulte)'],
                    datasets: [{
                        data: [35, 25, 20, 15, 5],
                        backgroundColor: [
                            '#3b82f6', // Blue
                            '#f59e0b', // Amber
                            '#ef4444', // Red
                            '#64748b', // Slate
                            '#1e293b'  // Dark
                        ],
                        borderWidth: 2,
                        borderColor: '#ffffff'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'right', labels: { boxWidth: 12, font: { size: 11 } } }
                    }
                }
            });
        }

        // --- UTILS ---
        function scrollToSection(id) {
            document.getElementById(id).scrollIntoView({ behavior: 'smooth' });
        }

        // Run Init
        init();

    </script>
</body>
</html>
