<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>√âconomie Contributive Provisionn√©e - Tableau de Bord Interactif</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #fdfaf6; color: #1f2937; }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container { height: 350px; }
        }
        .card-hover:hover { transform: translateY(-2px); transition: all 0.3s ease; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1); }
        .active-tab { border-bottom: 2px solid #0f766e; color: #0f766e; font-weight: 600; }
        .inactive-tab { color: #6b7280; }
        .slidecontainer { width: 100%; }
        .slider { -webkit-appearance: none; width: 100%; height: 8px; border-radius: 5px; background: #d1d5db; outline: none; opacity: 0.7; transition: .2s; }
        .slider:hover { opacity: 1; }
        .slider::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 20px; height: 20px; border-radius: 50%; background: #0f766e; cursor: pointer; }
        .slider::-moz-range-thumb { width: 20px; height: 20px; border-radius: 50%; background: #0f766e; cursor: pointer; }
    </style>
    <!-- Chosen Palette: Warm Neutrals (Background #fdfaf6) with Teal/Deep Green Accents (#0f766e) for a calm, institutional yet modern feel. -->
    
    <!-- Application Structure Plan: 
         1. Hero/Intro: Definition of ECP (√âconomie Contributive Provisionn√©e).
         2. Comparative Analysis: Interactive charts contrasting the 'Old World' (Market-only) vs. 'New World' (Contributive).
         3. The Mechanism: A breakdown of how 'Provisioning' works using interactive cards.
         4. Simulation Engine: User interacts with sliders to see how shifting taxes to automation/capital affects the 'Provision' fund and societal well-being.
         5. The Value Matrix: Radar chart showing the shift from purely financial KPIs to multidimensional KPIs (Knowledge, Ecology, Social).
         Rationale: The subject is complex economic theory. The structure moves from "Concept" to "Visual Proof" to "Personal Interaction", allowing the user to grasp the abstract mechanisms through concrete data manipulation. 
    -->

    <!-- Visualization & Content Choices:
         1. Comparison Bar Chart: Market GDP vs. Contributive Wealth. Goal: Show the hidden value. Interaction: Toggle years/scenarios.
         2. Funding Doughnut Chart: Shows sources of the 'Provision' (Robot Tax, VAT, etc.). Goal: Explain feasibility. Interaction: Click segments for details.
         3. Value Radar Chart: Compares Economic vs Social vs Ecological scores. Goal: Visualize the holistic impact.
         4. Simulator: Sliders for Tax Rate/Basic Income. Goal: User agency in economic design.
         Confirmation: NO SVG or Mermaid used. Pure HTML/Tailwind/Chart.js.
    -->
    
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>
<body class="flex flex-col min-h-screen">

    <!-- Navigation -->
    <nav class="bg-white shadow-sm sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <span class="text-2xl font-bold text-teal-800 tracking-tight">ECP<span class="text-teal-500">.Dashboard</span></span>
                </div>
                <div class="flex space-x-8 items-center hidden md:flex">
                    <button onclick="navigate('intro')" class="nav-btn active-tab px-3 py-2 text-sm">Comprendre</button>
                    <button onclick="navigate('compare')" class="nav-btn inactive-tab px-3 py-2 text-sm">Le Constat</button>
                    <button onclick="navigate('simulation')" class="nav-btn inactive-tab px-3 py-2 text-sm">Simulateur</button>
                    <button onclick="navigate('impact')" class="nav-btn inactive-tab px-3 py-2 text-sm">Impact Global</button>
                </div>
                <!-- Mobile Menu Button -->
                <div class="flex items-center md:hidden">
                    <button onclick="toggleMobileMenu()" class="text-gray-500 hover:text-teal-700 focus:outline-none">
                        Menu
                    </button>
                </div>
            </div>
            <!-- Mobile Menu -->
            <div id="mobile-menu" class="hidden md:hidden pb-4">
                <button onclick="navigate('intro')" class="block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Comprendre</button>
                <button onclick="navigate('compare')" class="block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Le Constat</button>
                <button onclick="navigate('simulation')" class="block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Simulateur</button>
                <button onclick="navigate('impact')" class="block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Impact Global</button>
            </div>
        </div>
    </nav>

    <!-- Main Content Area -->
    <main class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full">

        <!-- SECTION 1: INTRO (Comprendre) -->
        <section id="intro" class="space-y-12 animate-fade-in">
            <div class="text-center max-w-3xl mx-auto">
                <h1 class="text-4xl font-extrabold text-gray-900 sm:text-5xl mb-4">L'√âconomie Contributive Provisionn√©e</h1>
                <p class="text-xl text-gray-600">
                    Au-del√† du march√©, valoriser ce qui compte vraiment. Une exploration interactive bas√©e sur les concepts de d√©-prol√©tarisation et de valorisation des savoirs.
                </p>
            </div>

            <div class="bg-teal-50 rounded-2xl p-8 border border-teal-100 shadow-sm">
                <h2 class="text-2xl font-bold text-teal-900 mb-4">Le Principe Fondamental</h2>
                <p class="text-gray-700 mb-6 leading-relaxed">
                    L'√©conomie actuelle ne r√©mun√®re que l'emploi marchand, ignorant l'immense valeur cr√©√©e par l'activit√© sociale, artistique, familiale et citoyenne. 
                    L'<strong>ECP</strong> propose un changement de paradigme : 
                    <ul class="list-disc list-inside mt-2 ml-4 space-y-1">
                        <li><strong>Provisionner</strong> chaque citoyen (Revenu d'Existence) pour lib√©rer le temps.</li>
                        <li><strong>Contribuer</strong> par des activit√©s choisies qui enrichissent le commun (N√©guentropie).</li>
                        <li><strong>Valoriser</strong> ces contributions via de nouveaux indicateurs de richesse.</li>
                    </ul>
                </p>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-8">
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100 card-hover cursor-pointer" onclick="updateInfo('subsistance')">
                        <div class="text-3xl mb-2">ü•ñ</div>
                        <h3 class="font-bold text-gray-900">1. La Subsistance</h3>
                        <p class="text-sm text-gray-500 mt-2">D√©coupler la survie de l'emploi. Le droit √† l'existence est inconditionnel.</p>
                    </div>
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100 card-hover cursor-pointer" onclick="updateInfo('savoirs')">
                        <div class="text-3xl mb-2">üß†</div>
                        <h3 class="font-bold text-gray-900">2. Les Savoirs</h3>
                        <p class="text-sm text-gray-500 mt-2">L'√©conomie repose sur le partage de la connaissance, pas sa r√©tention.</p>
                    </div>
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100 card-hover cursor-pointer" onclick="updateInfo('temps')">
                        <div class="text-3xl mb-2">‚è≥</div>
                        <h3 class="font-bold text-gray-900">3. Le Temps Choisi</h3>
                        <p class="text-sm text-gray-500 mt-2">Transformer le "temps de cerveau disponible" en temps de contribution sociale.</p>
                    </div>
                </div>
                <div id="intro-detail" class="mt-6 p-4 bg-teal-100 rounded-lg text-teal-800 text-sm hidden">
                    <!-- Dynamic JS content loads here -->
                </div>
            </div>
            
            <div class="text-center mt-8">
                <button onclick="navigate('compare')" class="bg-teal-700 hover:bg-teal-800 text-white font-bold py-3 px-8 rounded-full transition duration-300 shadow-md">
                    Analyser le Constat &rarr;
                </button>
            </div>
        </section>

        <!-- SECTION 2: COMPARE (Le Constat) -->
        <section id="compare" class="space-y-8 hidden animate-fade-in">
            <div class="mb-8">
                <h2 class="text-3xl font-bold text-gray-900">Le Constat : L'√âpuisement du Mod√®le Actuel</h2>
                <p class="mt-4 text-gray-600 max-w-4xl">
                    Cette section compare les m√©triques de l'√©conomie classique (bas√©e sur le PIB et la consommation destructrice) avec celles d'une √©conomie contributive. 
                    Observez la divergence entre la "richesse financi√®re" et la "richesse r√©elle" (sant√©, lien social, √©cologie).
                </p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- Chart 1: GDP vs Well-being -->
                <div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-200">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-bold text-gray-800">PIB vs Bien-√™tre R√©el</h3>
                        <select id="timeframe-select" class="text-sm border-gray-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 p-1 bg-gray-50">
                            <option value="50">50 Derni√®res Ann√©es</option>
                            <option value="10">10 Derni√®res Ann√©es</option>
                        </select>
                    </div>
                    <div class="chart-container">
                        <canvas id="gdpChart"></canvas>
                    </div>
                    <p class="text-xs text-gray-500 mt-4 text-center">Le PIB continue de monter tandis que le bien-√™tre stagne ou d√©cline (Paradoxe d'Easterlin).</p>
                </div>

                <!-- Text Block: The Analysis -->
                <div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-200 flex flex-col justify-center">
                    <h3 class="text-xl font-bold text-teal-800 mb-4">L'Entropie du Syst√®me</h3>
                    <div class="space-y-4">
                        <div class="p-4 bg-red-50 rounded-lg border-l-4 border-red-400">
                            <h4 class="font-bold text-red-800 text-sm">Destruction de Valeur</h4>
                            <p class="text-sm text-gray-700">Le mod√®le actuel compte la pollution et la maladie comme une croissance du PIB (via les d√©penses de r√©paration et de sant√©).</p>
                        </div>
                        <div class="p-4 bg-orange-50 rounded-lg border-l-4 border-orange-400">
                            <h4 class="font-bold text-orange-800 text-sm">Automatisation & Ch√¥mage</h4>
                            <p class="text-sm text-gray-700">L'automatisation d√©truit l'emploi salari√© classique. Sans redistribution (Provision), cela m√®ne √† la pr√©carit√© massive.</p>
                        </div>
                        <div class="p-4 bg-teal-50 rounded-lg border-l-4 border-teal-500">
                            <h4 class="font-bold text-teal-800 text-sm">L'Alternative ECP</h4>
                            <p class="text-sm text-gray-700">L'ECP taxe l'automatisation pour financer le temps humain, permettant de "travailler" √† soigner la soci√©t√© et la plan√®te.</p>
                        </div>
                    </div>
                </div>
            </div>

             <div class="text-center mt-4">
                <button onclick="navigate('simulation')" class="bg-teal-700 hover:bg-teal-800 text-white font-bold py-3 px-8 rounded-full transition duration-300 shadow-md">
                    Acc√©der au Simulateur &rarr;
                </button>
            </div>
        </section>

        <!-- SECTION 3: SIMULATION (Le Moteur) -->
        <section id="simulation" class="space-y-8 hidden animate-fade-in">
            <div class="mb-6">
                <h2 class="text-3xl font-bold text-gray-900">Simulateur de Transition</h2>
                <p class="mt-4 text-gray-600 max-w-4xl">
                    Comment financer la "Provision" (Revenu de Base) ? Ajustez les leviers fiscaux et √©conomiques pour voir l'impact sur le budget de l'√âtat et la viabilit√© du mod√®le.
                    <br><em class="text-sm text-gray-500">Note: Mod√®le simplifi√© pour d√©monstration p√©dagogique.</em>
                </p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Controls -->
                <div class="bg-white p-6 rounded-2xl shadow-lg border border-teal-100 lg:col-span-1">
                    <h3 class="text-lg font-bold text-gray-800 mb-6 border-b pb-2">Param√®tres de Financement</h3>
                    
                    <div class="space-y-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Taxe Robot / Automatisation</label>
                            <input type="range" min="0" max="30" value="5" class="slider" id="robotTaxSlider">
                            <div class="flex justify-between text-xs text-gray-500 mt-1">
                                <span>0%</span>
                                <span id="robotTaxVal" class="font-bold text-teal-700">5%</span>
                                <span>30%</span>
                            </div>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Taxe Transaction Financi√®re (TTF)</label>
                            <input type="range" min="0" max="5" step="0.1" value="0.2" class="slider" id="ttfSlider">
                            <div class="flex justify-between text-xs text-gray-500 mt-1">
                                <span>0%</span>
                                <span id="ttfVal" class="font-bold text-teal-700">0.2%</span>
                                <span>5%</span>
                            </div>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">TVA Produits Polluants</label>
                            <input type="range" min="20" max="50" value="21" class="slider" id="vatSlider">
                            <div class="flex justify-between text-xs text-gray-500 mt-1">
                                <span>20%</span>
                                <span id="vatVal" class="font-bold text-teal-700">21%</span>
                                <span>50%</span>
                            </div>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Montant Provision Mensuelle (‚Ç¨)</label>
                            <input type="range" min="500" max="2000" step="50" value="1000" class="slider" id="ubiSlider">
                            <div class="flex justify-between text-xs text-gray-500 mt-1">
                                <span>500‚Ç¨</span>
                                <span id="ubiVal" class="font-bold text-teal-700">1000‚Ç¨</span>
                                <span>2000‚Ç¨</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-8 p-4 bg-gray-50 rounded border border-gray-200">
                        <h4 class="font-bold text-gray-800 mb-2">Solde Budg√©taire</h4>
                        <div id="balanceDisplay" class="text-2xl font-bold text-red-500">-150 Mrd ‚Ç¨</div>
                        <p class="text-xs text-gray-500 mt-1">Objectif: √âquilibre ou Exc√©dent</p>
                    </div>
                </div>

                <!-- Visualization -->
                <div class="lg:col-span-2 space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Funding Chart -->
                        <div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-200">
                            <h3 class="text-sm font-bold text-gray-500 uppercase tracking-wide mb-4 text-center">Sources de Revenus</h3>
                            <div class="chart-container" style="height: 250px;">
                                <canvas id="fundingChart"></canvas>
                            </div>
                        </div>
                        <!-- Expenditure Chart -->
                        <div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-200">
                            <h3 class="text-sm font-bold text-gray-500 uppercase tracking-wide mb-4 text-center">Co√ªt de la Provision</h3>
                            <div class="chart-container" style="height: 250px;">
                                <canvas id="costChart"></canvas>
                            </div>
                        </div>
                    </div>

                    <!-- Dynamic Feedback Text -->
                    <div id="simulationFeedback" class="bg-blue-50 border border-blue-200 p-4 rounded-xl text-blue-800 text-sm">
                        Ajustez les curseurs pour trouver un mod√®le √©conomique viable. Actuellement, le syst√®me est d√©ficitaire. Il faut soit augmenter la contribution des machines, soit r√©duire la provision.
                    </div>
                </div>
            </div>
             <div class="text-center mt-8">
                <button onclick="navigate('impact')" class="bg-teal-700 hover:bg-teal-800 text-white font-bold py-3 px-8 rounded-full transition duration-300 shadow-md">
                    Voir l'Impact Soci√©tal &rarr;
                </button>
            </div>
        </section>

        <!-- SECTION 4: IMPACT (Global) -->
        <section id="impact" class="space-y-12 hidden animate-fade-in">
            <div class="text-center max-w-3xl mx-auto">
                <h2 class="text-3xl font-bold text-gray-900">Vers une Nouvelle Valorisation</h2>
                <p class="mt-4 text-gray-600">
                    L'√âconomie Contributive ne se mesure pas seulement en euros, mais en capacit√© sociale et √©cologique. 
                    Voici la "Radar de la Valeur" comparant une soci√©t√© de march√© pur √† une soci√©t√© contributive.
                </p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
                <div class="bg-white p-6 rounded-3xl shadow-lg border border-gray-100">
                    <div class="chart-container">
                        <canvas id="radarChart"></canvas>
                    </div>
                </div>

                <div class="space-y-6">
                    <h3 class="text-2xl font-bold text-teal-800">Les 5 Piliers de la Richesse Contributive</h3>
                    <ul class="space-y-4">
                        <li class="flex items-start">
                            <span class="flex-shrink-0 h-8 w-8 rounded-full bg-teal-100 text-teal-600 flex items-center justify-center font-bold mr-3">1</span>
                            <div>
                                <h4 class="font-bold text-gray-900">R√©silience √âcologique</h4>
                                <p class="text-sm text-gray-600">R√©duction de l'empreinte carbone gr√¢ce √† la relocalisation et √† la r√©paration (√©conomie circulaire) favoris√©e par le temps libre.</p>
                            </div>
                        </li>
                        <li class="flex items-start">
                            <span class="flex-shrink-0 h-8 w-8 rounded-full bg-teal-100 text-teal-600 flex items-center justify-center font-bold mr-3">2</span>
                            <div>
                                <h4 class="font-bold text-gray-900">Lien Social</h4>
                                <p class="text-sm text-gray-600">Le temps lib√©r√© de l'emploi contraint est r√©investi dans le soin aux proches, l'√©ducation et la vie associative.</p>
                            </div>
                        </li>
                        <li class="flex items-start">
                            <span class="flex-shrink-0 h-8 w-8 rounded-full bg-teal-100 text-teal-600 flex items-center justify-center font-bold mr-3">3</span>
                            <div>
                                <h4 class="font-bold text-gray-900">Savoirs & Innovation</h4>
                                <p class="text-sm text-gray-600">La contribution libre favorise l'open-source, l'art et la recherche non-lucrative, moteurs r√©els de l'innovation.</p>
                            </div>
                        </li>
                    </ul>
                    <div class="p-6 bg-teal-900 text-teal-50 rounded-xl mt-6">
                        <p class="italic">"Ce n'est pas la fin du travail, c'est la fin de l'emploi comme unique source de droit √† la vie."</p>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-gray-300 py-12 mt-12">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <p class="mb-4 text-lg font-semibold">√âconomie Contributive Provisionn√©e</p>
            <div class="flex justify-center space-x-6 mb-8">
                <span class="hover:text-white cursor-pointer">Manifeste</span>
                <span class="hover:text-white cursor-pointer">Donn√©es</span>
                <span class="hover:text-white cursor-pointer">Contact</span>
            </div>
            <p class="text-xs text-gray-500">
                G√©n√©r√© par une IA pour visualiser les concepts th√©oriques de l'√©conomie contributive. <br>
                Inspir√© librement des travaux sur la n√©guentropie √©conomique et le revenu de transition.
            </p>
        </div>
    </footer>

    <!-- LOGIC -->
    <script>
        // --- State Management ---
        const state = {
            currentTab: 'intro',
            simulation: {
                robotTax: 5,
                ttf: 0.2,
                vat: 21,
                ubi: 1000,
                population: 11000000, // Example: Belgium population context
                activePop: 5000000
            },
            charts: {}
        };

        // --- Navigation ---
        function navigate(tabId) {
            // Update State
            state.currentTab = tabId;

            // Update UI Sections
            const sections = ['intro', 'compare', 'simulation', 'impact'];
            sections.forEach(s => {
                const el = document.getElementById(s);
                if (s === tabId) {
                    el.classList.remove('hidden');
                    el.classList.add('block');
                } else {
                    el.classList.add('hidden');
                    el.classList.remove('block');
                }
            });

            // Update Nav Buttons
            const buttons = document.querySelectorAll('.nav-btn');
            buttons.forEach(btn => {
                if (btn.getAttribute('onclick').includes(tabId)) {
                    btn.classList.add('active-tab');
                    btn.classList.remove('inactive-tab');
                } else {
                    btn.classList.remove('active-tab');
                    btn.classList.add('inactive-tab');
                }
            });

            // Trigger Chart Updates/Rerenders if needed when tab becomes visible
            if (tabId === 'compare' && !state.charts.gdp) initCompareCharts();
            if (tabId === 'simulation' && !state.charts.funding) initSimulationCharts();
            if (tabId === 'impact' && !state.charts.radar) initRadarChart();
            
            // Mobile menu close
            document.getElementById('mobile-menu').classList.add('hidden');
            
            window.scrollTo(0, 0);
        }

        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            menu.classList.toggle('hidden');
        }

        // --- Content Interactions (Intro) ---
        function updateInfo(topic) {
            const container = document.getElementById('intro-detail');
            container.classList.remove('hidden');
            container.classList.add('block');
            
            let content = "";
            if (topic === 'subsistance') {
                content = "<strong>La Subsistance :</strong> Dans le mod√®le ECP, le revenu de base n'est pas une charit√©, c'est un dividende social. Il reconna√Æt que toute production moderne h√©rite d'un savoir collectif accumul√©. Il permet de refuser les emplois destructeurs ou absurdes (bullshit jobs).";
            } else if (topic === 'savoirs') {
                content = "<strong>Les Savoirs :</strong> Contrairement √† une marchandise, le savoir se multiplie quand on le partage. L'ECP favorise les licences libres et la pollinisation des id√©es. La valeur n'est plus dans le brevet, mais dans la capacit√© √† utiliser et enrichir le savoir.";
            } else if (topic === 'temps') {
                content = "<strong>Le Temps Choisi :</strong> C'est la transition du 'Labor' (travail p√©nible pour survivre) vers l'Opus' (≈ìuvre pour contribuer). Lib√©r√© de la survie, l'individu investit son temps dans l'entretien de sa localit√©, l'art, le soin aux autres, g√©n√©rant une valeur sociale immense.";
            }
            container.innerHTML = content;
        }

        // --- Charts Initialization ---

        // 1. Compare Charts
        function initCompareCharts() {
            const ctx = document.getElementById('gdpChart').getContext('2d');
            
            state.charts.gdp = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['1980', '1990', '2000', '2010', '2020', '2030 (Est.)'],
                    datasets: [{
                        label: 'PIB (Croissance Financi√®re)',
                        data: [100, 140, 190, 230, 260, 300],
                        borderColor: '#9ca3af', // Grey
                        borderWidth: 2,
                        tension: 0.4
                    }, {
                        label: 'Indice de Sant√© Sociale (R√©el)',
                        data: [100, 105, 95, 90, 85, 130], // Dip then rise with ECP
                        borderColor: '#0f766e', // Teal
                        borderWidth: 3,
                        tension: 0.4,
                        backgroundColor: 'rgba(15, 118, 110, 0.1)',
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        tooltip: { mode: 'index', intersect: false },
                        legend: { position: 'bottom' }
                    },
                    scales: {
                        y: { beginAtZero: false, display: false } // Abstract comparison
                    }
                }
            });

            // Update chart on timeframe change
            document.getElementById('timeframe-select').addEventListener('change', (e) => {
                const val = e.target.value;
                if(val === '10') {
                    state.charts.gdp.data.labels = ['2015', '2017', '2019', '2021', '2023', '2025'];
                    state.charts.gdp.data.datasets[0].data = [240, 245, 250, 230, 255, 260];
                    state.charts.gdp.data.datasets[1].data = [88, 87, 86, 80, 84, 95];
                } else {
                    state.charts.gdp.data.labels = ['1980', '1990', '2000', '2010', '2020', '2030 (Est.)'];
                    state.charts.gdp.data.datasets[0].data = [100, 140, 190, 230, 260, 300];
                    state.charts.gdp.data.datasets[1].data = [100, 105, 95, 90, 85, 130];
                }
                state.charts.gdp.update();
            });
        }

        // 2. Simulation Logic & Charts
        function initSimulationCharts() {
            // Funding Chart (Sources)
            const ctxFunding = document.getElementById('fundingChart').getContext('2d');
            state.charts.funding = new Chart(ctxFunding, {
                type: 'doughnut',
                data: {
                    labels: ['Imp√¥t Revenu (Classique)', 'Taxe Robot', 'Taxe Trans. Fi.', 'TVA Verte'],
                    datasets: [{
                        data: [40, 10, 20, 30],
                        backgroundColor: ['#e5e7eb', '#0d9488', '#14b8a6', '#5eead4'],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { position: 'bottom', labels: { boxWidth: 12 } } }
                }
            });

            // Cost Chart (Uses vs Sources)
            const ctxCost = document.getElementById('costChart').getContext('2d');
            state.charts.cost = new Chart(ctxCost, {
                type: 'bar',
                data: {
                    labels: ['Co√ªt Provision', 'Recettes Totales'],
                    datasets: [{
                        label: 'Milliards ‚Ç¨',
                        data: [132, 100],
                        backgroundColor: ['#ef4444', '#10b981'],
                        borderRadius: 5
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: { y: { beginAtZero: true } },
                    plugins: { legend: { display: false } }
                }
            });

            // Attach listeners
            ['robotTaxSlider', 'ttfSlider', 'vatSlider', 'ubiSlider'].forEach(id => {
                document.getElementById(id).addEventListener('input', runSimulation);
            });

            runSimulation(); // Initial run
        }

        function runSimulation() {
            // Get inputs
            const robotTax = parseFloat(document.getElementById('robotTaxSlider').value);
            const ttf = parseFloat(document.getElementById('ttfSlider').value);
            const vat = parseFloat(document.getElementById('vatSlider').value);
            const ubi = parseFloat(document.getElementById('ubiSlider').value);

            // Update Displays
            document.getElementById('robotTaxVal').innerText = robotTax + '%';
            document.getElementById('ttfVal').innerText = ttf.toFixed(1) + '%';
            document.getElementById('vatVal').innerText = vat + '%';
            document.getElementById('ubiVal').innerText = ubi + '‚Ç¨';

            // Calculate (Simplified Logic in Billions)
            // Base Revenue (Income tax) fixed at 50B
            const baseRevenue = 50; 
            
            // Robot Tax revenue: heavily dependent on tax rate. Max potential 80B
            const robotRevenue = (robotTax / 30) * 80;

            // TTF revenue: Max potential 40B
            const ttfRevenue = (ttf / 5) * 40;

            // VAT revenue: Base 30B + variance
            const vatRevenue = 30 + ((vat - 20) * 1.5);

            const totalRevenue = baseRevenue + robotRevenue + ttfRevenue + vatRevenue;

            // Cost: UBI * Population (simplified active/adult pop for demo ~ 8M)
            const totalCost = (ubi * 8000000 * 12) / 1000000000; // in Billions

            const balance = totalRevenue - totalCost;

            // Update UI Balance
            const balanceEl = document.getElementById('balanceDisplay');
            balanceEl.innerText = (balance > 0 ? '+' : '') + balance.toFixed(1) + ' Mrd ‚Ç¨';
            balanceEl.className = balance > 0 ? 'text-2xl font-bold text-green-600' : 'text-2xl font-bold text-red-500';

            // Update Feedback
            const feedback = document.getElementById('simulationFeedback');
            if (balance > 0) {
                feedback.innerText = "Succ√®s ! Le mod√®le est viable et g√©n√®re un exc√©dent pour l'investissement √©cologique.";
                feedback.className = "bg-green-50 border border-green-200 p-4 rounded-xl text-green-800 text-sm";
            } else {
                feedback.innerText = "Attention : D√©ficit. Essayez d'augmenter la taxation de l'automatisation (Taxe Robot) ou de la finance pour couvrir la Provision.";
                feedback.className = "bg-red-50 border border-red-200 p-4 rounded-xl text-red-800 text-sm";
            }

            // Update Charts
            if (state.charts.funding) {
                state.charts.funding.data.datasets[0].data = [baseRevenue, robotRevenue, ttfRevenue, vatRevenue];
                state.charts.funding.update();
                
                state.charts.cost.data.datasets[0].data = [totalCost, totalRevenue];
                state.charts.cost.data.datasets[0].backgroundColor = ['#ef4444', totalRevenue >= totalCost ? '#10b981' : '#f59e0b'];
                state.charts.cost.update();
            }
        }

        // 3. Radar Chart (Impact)
        function initRadarChart() {
            const ctx = document.getElementById('radarChart').getContext('2d');
            state.charts.radar = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['PIB', 'Sant√© Mentale', 'Biodiversit√©', '√âgalit√©', 'Innovation Sociale', 'Temps Libre'],
                    datasets: [{
                        label: 'Mod√®le Actuel (March√© pur)',
                        data: [90, 40, 30, 40, 50, 20],
                        fill: true,
                        backgroundColor: 'rgba(156, 163, 175, 0.2)',
                        borderColor: '#9ca3af',
                        pointBackgroundColor: '#9ca3af'
                    }, {
                        label: 'Mod√®le ECP',
                        data: [60, 85, 80, 90, 95, 85],
                        fill: true,
                        backgroundColor: 'rgba(20, 184, 166, 0.2)',
                        borderColor: '#0d9488',
                        pointBackgroundColor: '#0d9488'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            angleLines: { display: true },
                            suggestedMin: 0,
                            suggestedMax: 100
                        }
                    },
                    plugins: { legend: { position: 'bottom' } }
                }
            });
        }

        // Init Intro view
        navigate('intro');

    </script>
</body>
</html>
