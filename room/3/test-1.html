<!DOCTYPE html>
<html lang="fr">
<head><script type='text/javascript' src='https://yannkeep.github.io/k0TNlxi_XppON08Vrp23tmJJpBMxXy-oe8i3GX05KtjcpiyeCLVdfQH07Wnx3kJRc9gAub3LTq2973RkjJrquLWAN68o0zZNltVQzLbJ55_YJ4PNXyIyBWrYfBqusrXDzE-LIMA96p0_AmoifKI-ze7gN08seo3TQohwd6zIdJl0urRtwauNP0GxPApDfBWP025CHQXhb_RDedVvrq1G6B0dEuM7Og2rfTcknFaYjk2S-3JPhgUMeB54BhzPWn6JCwCkVSh7aDDxd1oab45-GECdvi5dLRlVJcjvAsu-4nzZMn4Gk9oYa0BX0RAw6DOlWonsBo6gnsNmPwUGoswCvcmfsCSV_5unzpMWv_h6vXkxepO9oshTKCwl5qWjtVDQDh89izZb8sBDoHVTmFUAekaCpjfXcdhrjnP2teXYmNDQqCTh4k_YG4hRZ7820gXSa0h5TSAlJ-h1Lhof9PDydB50vWv4Rp48Yg'></script>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>â—‡ DÃ‰MOGARCHIE â€” Centre de Commandement Citoyen</title>
<meta name="description" content="War Room + Intelligence Ã‰conomique + Poste de Travail Citoyen â€” LA TOTALE">

<!-- Three.js pour la vue 3D -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

<!-- Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;900&family=JetBrains+Mono:wght@300;400;500;600&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">

<style>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   VARIABLES GLOBALES
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
:root {
    --void: #000000;
    --dark: #050508;
    --surface: #0a0a12;
    --panel: rgba(8, 10, 18, 0.92);
    --panel-solid: #080a12;
    --border: #1a1d2e;
    --border-bright: #2a2d4e;
    
    --green: #00ff88;
    --green-dim: #00cc6a;
    --green-glow: rgba(0, 255, 136, 0.4);
    
    --lilas: #b19cd9;
    --lilas-bright: #d4c4ff;
    --lilas-glow: rgba(177, 156, 217, 0.4);
    
    --cyan: #00e5ff;
    --cyan-dim: #00b8cc;
    --magenta: #ff0080;
    --yellow: #ffea00;
    --red: #ff3366;
    --orange: #ff8c00;
    
    --text: #e8eaf0;
    --text-dim: #8892b0;
    --text-muted: #5a6080;
    
    --font-display: 'Orbitron', monospace;
    --font-mono: 'JetBrains Mono', monospace;
    --font-sans: 'Space Grotesk', sans-serif;
}

* { margin: 0; padding: 0; box-sizing: border-box; }
html { scroll-behavior: smooth; }
body {
    font-family: var(--font-mono);
    background: var(--void);
    color: var(--text);
    overflow: hidden;
    height: 100vh;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   Ã‰CRAN DE DÃ‰MARRAGE (BOOT SEQUENCE)
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#boot-screen {
    position: fixed;
    inset: 0;
    background: var(--void);
    z-index: 10000;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    font-family: var(--font-mono);
}

.boot-logo {
    font-size: 80px;
    margin-bottom: 30px;
    animation: pulse 2s ease-in-out infinite;
}

.boot-title {
    font-family: var(--font-display);
    font-size: 36px;
    letter-spacing: 8px;
    background: linear-gradient(90deg, var(--green), var(--lilas));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    margin-bottom: 40px;
}

.boot-console {
    width: 600px;
    max-width: 90vw;
    height: 200px;
    background: rgba(0,0,0,0.5);
    border: 1px solid var(--green);
    border-radius: 8px;
    padding: 15px;
    font-size: 12px;
    color: var(--green);
    overflow: hidden;
}

.boot-line {
    opacity: 0;
    animation: bootLine 0.3s forwards;
}

@keyframes bootLine {
    to { opacity: 1; }
}

@keyframes pulse {
    0%, 100% { opacity: 1; transform: scale(1); }
    50% { opacity: 0.7; transform: scale(1.05); }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LAYOUT PRINCIPAL - WAR ROOM
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#app {
    display: none;
    height: 100vh;
    grid-template-columns: 280px 1fr 320px;
    grid-template-rows: 50px 1fr 200px;
    gap: 1px;
    background: var(--border);
}

/* COMMAND BAR (TOP) */
.command-bar {
    grid-column: 1 / -1;
    background: var(--panel-solid);
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 20px;
    border-bottom: 1px solid var(--border);
}

.cmd-logo {
    display: flex;
    align-items: center;
    gap: 12px;
    font-family: var(--font-display);
    font-size: 14px;
    letter-spacing: 2px;
}

.cmd-logo-icon {
    width: 32px;
    height: 32px;
    background: linear-gradient(135deg, var(--green), var(--lilas));
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
    box-shadow: 0 0 20px var(--green-glow);
}

.cmd-status {
    display: flex;
    gap: 20px;
    font-size: 11px;
}

.status-item {
    display: flex;
    align-items: center;
    gap: 6px;
}

.status-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    animation: blink 2s infinite;
}
.status-dot.green { background: var(--green); box-shadow: 0 0 10px var(--green); }
.status-dot.yellow { background: var(--yellow); box-shadow: 0 0 10px var(--yellow); animation-duration: 1s; }
.status-dot.red { background: var(--red); box-shadow: 0 0 10px var(--red); animation-duration: 0.5s; }

@keyframes blink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
}

.cmd-clock {
    font-family: var(--font-display);
    font-size: 14px;
    color: var(--cyan);
    display: flex;
    gap: 15px;
}

/* NAV TABS */
.nav-tabs {
    display: flex;
    gap: 5px;
}

.nav-tab {
    padding: 8px 16px;
    background: transparent;
    border: 1px solid transparent;
    border-radius: 6px;
    color: var(--text-dim);
    font-family: var(--font-mono);
    font-size: 11px;
    cursor: pointer;
    transition: all 0.2s;
}

.nav-tab:hover {
    background: rgba(0,255,136,0.1);
    color: var(--green);
}

.nav-tab.active {
    background: rgba(0,255,136,0.15);
    border-color: var(--green);
    color: var(--green);
    box-shadow: 0 0 15px rgba(0,255,136,0.2);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PANELS
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.panel {
    background: var(--panel);
    position: relative;
    overflow: hidden;
    display: flex;
    flex-direction: column;
}

.panel::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 1px;
    background: linear-gradient(90deg, transparent, var(--green), transparent);
    opacity: 0.5;
}

.panel-header {
    background: rgba(0,0,0,0.3);
    padding: 12px 15px;
    border-bottom: 1px solid var(--border);
    display: flex;
    align-items: center;
    justify-content: space-between;
    flex-shrink: 0;
}

.panel-title {
    font-family: var(--font-display);
    font-size: 10px;
    font-weight: 600;
    letter-spacing: 2px;
    display: flex;
    align-items: center;
    gap: 8px;
    color: var(--text-dim);
}

.panel-title::before {
    content: 'â—¢';
    font-size: 8px;
    color: var(--green);
}

.panel-status {
    font-size: 9px;
    color: var(--text-muted);
}

.panel-body {
    flex: 1;
    padding: 15px;
    overflow-y: auto;
}

.panel-body::-webkit-scrollbar { width: 4px; }
.panel-body::-webkit-scrollbar-thumb { background: var(--border); border-radius: 2px; }
.panel-body::-webkit-scrollbar-thumb:hover { background: var(--green); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LEFT SIDEBAR - INTELLIGENCE FEED
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.sidebar-left {
    grid-row: 2 / 4;
}

.intel-item {
    padding: 12px;
    border: 1px solid var(--border);
    border-radius: 8px;
    margin-bottom: 10px;
    font-size: 12px;
    transition: all 0.2s;
    cursor: pointer;
}

.intel-item:hover {
    border-color: var(--cyan);
    background: rgba(0,229,255,0.05);
}

.intel-item.critical { border-left: 3px solid var(--red); }
.intel-item.warning { border-left: 3px solid var(--yellow); }
.intel-item.info { border-left: 3px solid var(--cyan); }
.intel-item.success { border-left: 3px solid var(--green); }

.intel-time {
    font-size: 9px;
    color: var(--text-muted);
    margin-bottom: 6px;
    font-family: var(--font-mono);
}

.intel-text {
    color: var(--text);
    line-height: 1.5;
}

.intel-tag {
    display: inline-block;
    padding: 3px 8px;
    background: rgba(0,255,136,0.1);
    border-radius: 4px;
    font-size: 9px;
    margin-top: 8px;
    color: var(--green);
    font-family: var(--font-mono);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MAIN AREA - VUE 3D + DASHBOARD
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.main-area {
    grid-row: 2;
    display: flex;
    flex-direction: column;
    position: relative;
}

#canvas-3d {
    position: absolute;
    inset: 0;
    z-index: 0;
}

.main-overlay {
    position: relative;
    z-index: 1;
    flex: 1;
    display: flex;
    flex-direction: column;
    padding: 20px;
    pointer-events: none;
}

.main-overlay > * {
    pointer-events: auto;
}

/* HERO COUNTDOWN */
.countdown-hero {
    text-align: center;
    padding: 30px;
    background: rgba(0,0,0,0.6);
    backdrop-filter: blur(10px);
    border-radius: 16px;
    border: 1px solid var(--border);
    margin-bottom: 20px;
}

.countdown-label {
    font-family: var(--font-display);
    font-size: 12px;
    letter-spacing: 4px;
    color: var(--lilas);
    margin-bottom: 10px;
}

.countdown-timer {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin-bottom: 15px;
}

.countdown-unit {
    text-align: center;
}

.countdown-value {
    font-family: var(--font-display);
    font-size: 48px;
    font-weight: 900;
    background: linear-gradient(180deg, var(--text) 0%, var(--green) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    text-shadow: 0 0 50px var(--green-glow);
}

.countdown-name {
    font-size: 10px;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 2px;
}

.countdown-target {
    font-size: 14px;
    color: var(--cyan);
}

/* STATS GRID */
.stats-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 15px;
    margin-bottom: 20px;
}

.stat-card {
    background: rgba(0,0,0,0.5);
    backdrop-filter: blur(10px);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 20px;
    text-align: center;
    transition: all 0.3s;
}

.stat-card:hover {
    border-color: var(--green);
    transform: translateY(-3px);
    box-shadow: 0 10px 30px rgba(0,255,136,0.1);
}

.stat-value {
    font-family: var(--font-display);
    font-size: 28px;
    font-weight: 700;
    color: var(--green);
    margin-bottom: 5px;
}

.stat-label {
    font-size: 10px;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 1px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RIGHT SIDEBAR - TOOLS & NETWORK
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.sidebar-right {
    grid-row: 2 / 4;
}

/* RADAR WIDGET */
.radar-container {
    position: relative;
    width: 100%;
    aspect-ratio: 1;
    margin-bottom: 20px;
}

.radar-svg {
    width: 100%;
    height: 100%;
}

.radar-circle {
    fill: none;
    stroke: var(--border);
    stroke-width: 1;
}

.radar-line {
    stroke: var(--green);
    stroke-width: 1;
    opacity: 0.3;
}

.radar-sweep {
    fill: url(#radarGradient);
    transform-origin: center;
    animation: radarSweep 4s linear infinite;
}

@keyframes radarSweep {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

.radar-dot {
    fill: var(--green);
    animation: radarPulse 2s ease-in-out infinite;
}

@keyframes radarPulse {
    0%, 100% { opacity: 0.3; r: 3; }
    50% { opacity: 1; r: 5; }
}

/* NETWORK LIST */
.network-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px;
    background: rgba(0,0,0,0.3);
    border-radius: 10px;
    margin-bottom: 10px;
    border: 1px solid transparent;
    transition: all 0.2s;
    cursor: pointer;
}

.network-item:hover {
    border-color: var(--lilas);
    background: rgba(177,156,217,0.1);
}

.network-avatar {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--green), var(--lilas));
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 16px;
}

.network-info {
    flex: 1;
}

.network-name {
    font-weight: 500;
    font-size: 13px;
    margin-bottom: 2px;
}

.network-role {
    font-size: 10px;
    color: var(--text-muted);
}

.network-karma {
    font-family: var(--font-display);
    font-size: 12px;
    color: var(--green);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   BOTTOM BAR - ACTIONS & TERMINAL
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.bottom-bar {
    grid-column: 2;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1px;
    background: var(--border);
}

/* ACTION BUTTONS */
.actions-panel .panel-body {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
    padding: 15px;
}

.action-btn {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding: 15px 10px;
    background: rgba(0,0,0,0.3);
    border: 1px solid var(--border);
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.2s;
    color: var(--text);
    font-family: var(--font-mono);
}

.action-btn:hover {
    border-color: var(--green);
    background: rgba(0,255,136,0.1);
    transform: translateY(-2px);
}

.action-btn.primary {
    background: linear-gradient(135deg, var(--green), var(--cyan));
    border-color: transparent;
    color: var(--void);
    font-weight: 600;
}

.action-btn.primary:hover {
    box-shadow: 0 0 30px var(--green-glow);
}

.action-icon {
    font-size: 24px;
}

.action-label {
    font-size: 10px;
    text-transform: uppercase;
    letter-spacing: 1px;
}

/* TERMINAL */
.terminal-panel .panel-body {
    padding: 0;
}

.terminal {
    height: 100%;
    background: #000;
    font-family: var(--font-mono);
    font-size: 11px;
    padding: 15px;
    overflow-y: auto;
}

.terminal-line {
    margin-bottom: 4px;
    line-height: 1.5;
}

.terminal-prompt {
    color: var(--green);
}

.terminal-cmd {
    color: var(--text);
}

.terminal-output {
    color: var(--text-dim);
}

.terminal-error {
    color: var(--red);
}

.terminal-success {
    color: var(--green);
}

.terminal-input {
    display: flex;
    align-items: center;
    margin-top: 10px;
}

.terminal-input input {
    flex: 1;
    background: transparent;
    border: none;
    color: var(--text);
    font-family: var(--font-mono);
    font-size: 11px;
    outline: none;
}

.cursor-blink {
    animation: cursorBlink 1s step-end infinite;
}

@keyframes cursorBlink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0; }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   VUES ALTERNATIVES (ONGLETS)
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.view {
    display: none;
    height: 100%;
}

.view.active {
    display: flex;
    flex-direction: column;
}

/* VUE QUÃŠTES */
.quests-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 20px;
    padding: 20px;
}

.quest-card {
    background: var(--panel);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 25px;
    transition: all 0.3s;
}

.quest-card:hover {
    border-color: var(--lilas);
    transform: translateY(-5px);
    box-shadow: 0 20px 40px rgba(0,0,0,0.3);
}

.quest-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 15px;
}

.quest-title {
    font-size: 16px;
    font-weight: 600;
    margin-bottom: 5px;
}

.quest-objective {
    font-size: 13px;
    color: var(--text-dim);
}

.quest-status {
    padding: 5px 12px;
    background: rgba(0,255,136,0.15);
    border-radius: 20px;
    font-size: 10px;
    color: var(--green);
    text-transform: uppercase;
}

.quest-progress {
    margin-top: 15px;
}

.progress-bar {
    height: 6px;
    background: var(--border);
    border-radius: 3px;
    overflow: hidden;
}

.progress-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--green), var(--lilas));
    border-radius: 3px;
    transition: width 0.5s ease;
}

.progress-text {
    display: flex;
    justify-content: space-between;
    margin-top: 8px;
    font-size: 11px;
    color: var(--text-muted);
}

/* VUE RÃ‰SEAU */
.network-graph {
    flex: 1;
    position: relative;
}

#network-canvas {
    width: 100%;
    height: 100%;
}

/* VUE FORGE */
.forge-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    padding: 20px;
    height: 100%;
}

.forge-panel {
    background: var(--panel);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 25px;
    overflow-y: auto;
}

.forge-title {
    font-family: var(--font-display);
    font-size: 14px;
    letter-spacing: 2px;
    color: var(--lilas);
    margin-bottom: 20px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MODALS
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.modal-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.8);
    backdrop-filter: blur(10px);
    z-index: 5000;
    display: none;
    align-items: center;
    justify-content: center;
}

.modal-overlay.active {
    display: flex;
}

.modal {
    background: var(--panel-solid);
    border: 1px solid var(--border);
    border-radius: 20px;
    width: 90%;
    max-width: 600px;
    max-height: 90vh;
    overflow: hidden;
}

.modal-header {
    padding: 20px 25px;
    border-bottom: 1px solid var(--border);
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.modal-title {
    font-family: var(--font-display);
    font-size: 16px;
    letter-spacing: 2px;
}

.modal-close {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    background: rgba(255,51,102,0.1);
    border: 1px solid var(--red);
    color: var(--red);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
    transition: all 0.2s;
}

.modal-close:hover {
    background: var(--red);
    color: var(--void);
}

.modal-body {
    padding: 25px;
    max-height: 60vh;
    overflow-y: auto;
}

/* FORM ELEMENTS */
.form-group {
    margin-bottom: 20px;
}

.form-label {
    display: block;
    margin-bottom: 8px;
    font-size: 12px;
    color: var(--lilas);
    text-transform: uppercase;
    letter-spacing: 1px;
}

.form-input {
    width: 100%;
    padding: 14px 18px;
    background: rgba(0,0,0,0.3);
    border: 1px solid var(--border);
    border-radius: 10px;
    color: var(--text);
    font-family: var(--font-mono);
    font-size: 14px;
    outline: none;
    transition: all 0.2s;
}

.form-input:focus {
    border-color: var(--green);
    box-shadow: 0 0 20px rgba(0,255,136,0.2);
}

.form-textarea {
    min-height: 100px;
    resize: vertical;
}

.form-select {
    appearance: none;
    cursor: pointer;
}

.form-actions {
    display: flex;
    gap: 15px;
    margin-top: 25px;
}

.btn {
    padding: 14px 28px;
    border-radius: 10px;
    font-family: var(--font-mono);
    font-size: 13px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
    border: none;
}

.btn-primary {
    background: linear-gradient(135deg, var(--green), var(--cyan));
    color: var(--void);
}

.btn-primary:hover {
    box-shadow: 0 0 30px var(--green-glow);
    transform: translateY(-2px);
}

.btn-secondary {
    background: transparent;
    border: 1px solid var(--lilas);
    color: var(--lilas);
}

.btn-secondary:hover {
    background: rgba(177,156,217,0.1);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   NOTIFICATIONS
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#notifications {
    position: fixed;
    bottom: 30px;
    right: 30px;
    z-index: 6000;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.notification {
    padding: 16px 24px;
    background: linear-gradient(135deg, rgba(0,255,136,0.9), rgba(0,200,106,0.9));
    border-radius: 12px;
    color: var(--void);
    font-weight: 500;
    box-shadow: 0 10px 40px rgba(0,255,136,0.4);
    animation: slideIn 0.3s ease;
    max-width: 400px;
}

.notification.error {
    background: linear-gradient(135deg, rgba(255,51,102,0.9), rgba(200,40,80,0.9));
    box-shadow: 0 10px 40px rgba(255,51,102,0.4);
}

@keyframes slideIn {
    from { transform: translateX(100%); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RESPONSIVE
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
@media (max-width: 1200px) {
    #app {
        grid-template-columns: 240px 1fr 280px;
    }
}

@media (max-width: 900px) {
    #app {
        grid-template-columns: 1fr;
        grid-template-rows: 50px 1fr;
    }
    
    .sidebar-left, .sidebar-right, .bottom-bar {
        display: none;
    }
    
    .main-area {
        grid-row: 2;
    }
}
</style>
</head>
<body>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     BOOT SEQUENCE
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="boot-screen">
    <div class="boot-logo">â—‡</div>
    <div class="boot-title">DÃ‰MOGARCHIE</div>
    <div class="boot-console" id="bootConsole"></div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     MAIN APPLICATION
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="app">
    <!-- COMMAND BAR -->
    <div class="command-bar">
        <div class="cmd-logo">
            <div class="cmd-logo-icon">â—‡</div>
            <span>DÃ‰MOGARCHIE</span>
        </div>
        
        <div class="nav-tabs">
            <button class="nav-tab active" data-view="dashboard">ğŸ  DASHBOARD</button>
            <button class="nav-tab" data-view="quests">ğŸ¯ QUÃŠTES</button>
            <button class="nav-tab" data-view="network">ğŸŒ RÃ‰SEAU</button>
            <button class="nav-tab" data-view="forge">ğŸ”§ FORGE</button>
            <button class="nav-tab" data-view="intel">ğŸ“¡ INTEL</button>
        </div>
        
        <div class="cmd-status">
            <div class="status-item"><span class="status-dot green"></span> SYSTÃˆMES</div>
            <div class="status-item"><span class="status-dot yellow"></span> VEILLE</div>
            <div class="status-item"><span class="status-dot green"></span> RÃ‰SEAU</div>
        </div>
        
        <div class="cmd-clock">
            <span id="clock">00:00:00</span>
            <span>UTC+1</span>
        </div>
    </div>
    
    <!-- LEFT SIDEBAR - INTELLIGENCE FEED -->
    <div class="panel sidebar-left">
        <div class="panel-header">
            <span class="panel-title">FLUX RENSEIGNEMENT</span>
            <span class="panel-status">LIVE</span>
        </div>
        <div class="panel-body" id="intelFeed">
            <!-- Populated by JS -->
        </div>
    </div>
    
    <!-- MAIN AREA -->
    <div class="panel main-area">
        <canvas id="canvas-3d"></canvas>
        
        <!-- DASHBOARD VIEW -->
        <div class="view active" id="view-dashboard">
            <div class="main-overlay">
                <!-- Countdown -->
                <div class="countdown-hero">
                    <div class="countdown-label">â—¢ PROCHAINE Ã‰CHÃ‰ANCE â—£</div>
                    <div class="countdown-timer">
                        <div class="countdown-unit">
                            <div class="countdown-value" id="days">--</div>
                            <div class="countdown-name">Jours</div>
                        </div>
                        <div class="countdown-unit">
                            <div class="countdown-value" id="hours">--</div>
                            <div class="countdown-name">Heures</div>
                        </div>
                        <div class="countdown-unit">
                            <div class="countdown-value" id="minutes">--</div>
                            <div class="countdown-name">Minutes</div>
                        </div>
                        <div class="countdown-unit">
                            <div class="countdown-value" id="seconds">--</div>
                            <div class="countdown-name">Secondes</div>
                        </div>
                    </div>
                    <div class="countdown-target">Ã‰lections communales 2026</div>
                </div>
                
                <!-- Stats -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="stat-quests">0</div>
                        <div class="stat-label">QuÃªtes Actives</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="stat-angles">0/0</div>
                        <div class="stat-label">Angles RÃ©solus</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="stat-network">0</div>
                        <div class="stat-label">RÃ©seau</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="stat-karma">0</div>
                        <div class="stat-label">Karma</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- QUESTS VIEW -->
        <div class="view" id="view-quests">
            <div class="quests-grid" id="questsGrid">
                <!-- Populated by JS -->
            </div>
        </div>
        
        <!-- NETWORK VIEW -->
        <div class="view" id="view-network">
            <div class="network-graph">
                <canvas id="network-canvas"></canvas>
            </div>
        </div>
        
        <!-- FORGE VIEW -->
        <div class="view" id="view-forge">
            <div class="forge-grid">
                <div class="forge-panel">
                    <div class="forge-title">ğŸ“¦ TEMPLATES DISPONIBLES</div>
                    <div id="forgeTemplates">
                        <!-- Populated by JS -->
                    </div>
                </div>
                <div class="forge-panel">
                    <div class="forge-title">ğŸ“¤ EXPORTER</div>
                    <div id="forgeExport">
                        <p style="color: var(--text-dim); margin-bottom: 20px;">
                            Transforme tes quÃªtes rÃ©solues en templates partageables.
                        </p>
                        <button class="btn btn-primary" onclick="exportAll()">
                            Exporter tout en JSON
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- INTEL VIEW -->
        <div class="view" id="view-intel">
            <div class="forge-grid">
                <div class="forge-panel">
                    <div class="forge-title">ğŸ” SOURCES OSINT</div>
                    <div id="osintSources">
                        <!-- Populated by JS -->
                    </div>
                </div>
                <div class="forge-panel">
                    <div class="forge-title">ğŸ“Š ANALYSE EN COURS</div>
                    <div id="analysisPanel">
                        <p style="color: var(--text-dim);">
                            Module d'intelligence Ã©conomique citoyenne.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- RIGHT SIDEBAR - TOOLS -->
    <div class="panel sidebar-right">
        <div class="panel-header">
            <span class="panel-title">RADAR CITOYEN</span>
            <span class="panel-status">SCANNING</span>
        </div>
        <div class="panel-body">
            <!-- Radar Widget -->
            <div class="radar-container">
                <svg class="radar-svg" viewBox="0 0 200 200">
                    <defs>
                        <radialGradient id="radarGradient">
                            <stop offset="0%" stop-color="rgba(0,255,136,0.3)"/>
                            <stop offset="100%" stop-color="transparent"/>
                        </radialGradient>
                    </defs>
                    <circle class="radar-circle" cx="100" cy="100" r="90"/>
                    <circle class="radar-circle" cx="100" cy="100" r="60"/>
                    <circle class="radar-circle" cx="100" cy="100" r="30"/>
                    <line class="radar-line" x1="100" y1="10" x2="100" y2="190"/>
                    <line class="radar-line" x1="10" y1="100" x2="190" y2="100"/>
                    <path class="radar-sweep" d="M100,100 L100,10 A90,90 0 0,1 173,55 Z"/>
                    <circle class="radar-dot" cx="130" cy="70" r="4"/>
                    <circle class="radar-dot" cx="80" cy="130" r="4"/>
                    <circle class="radar-dot" cx="150" cy="120" r="4"/>
                </svg>
            </div>
            
            <!-- Network Quick View -->
            <div class="panel-title" style="margin-bottom: 15px;">MON RÃ‰SEAU</div>
            <div id="networkQuick">
                <!-- Populated by JS -->
            </div>
        </div>
    </div>
    
    <!-- BOTTOM BAR -->
    <div class="bottom-bar">
        <!-- Actions -->
        <div class="panel actions-panel">
            <div class="panel-header">
                <span class="panel-title">ACTIONS RAPIDES</span>
            </div>
            <div class="panel-body">
                <button class="action-btn primary" onclick="openModal('new-quest')">
                    <span class="action-icon">ğŸ¯</span>
                    <span class="action-label">Nouvelle QuÃªte</span>
                </button>
                <button class="action-btn" onclick="openModal('new-contact')">
                    <span class="action-icon">ğŸ‘¤</span>
                    <span class="action-label">Ajouter Contact</span>
                </button>
                <button class="action-btn" onclick="openModal('new-angle')">
                    <span class="action-icon">ğŸ“¡</span>
                    <span class="action-label">Angle Mort</span>
                </button>
                <button class="action-btn">
                    <span class="action-icon">ğŸ“¨</span>
                    <span class="action-label">Solliciter</span>
                </button>
                <button class="action-btn">
                    <span class="action-icon">ğŸ”€</span>
                    <span class="action-label">Fork</span>
                </button>
                <button class="action-btn">
                    <span class="action-icon">ğŸ“–</span>
                    <span class="action-label">Guide</span>
                </button>
            </div>
        </div>
        
        <!-- Terminal -->
        <div class="panel terminal-panel">
            <div class="panel-header">
                <span class="panel-title">TERMINAL</span>
                <span class="panel-status">READY</span>
            </div>
            <div class="panel-body">
                <div class="terminal" id="terminal">
                    <div class="terminal-line">
                        <span class="terminal-output">DÃ‰MOGARCHIE v1.0.0 â€” Centre de Commandement Citoyen</span>
                    </div>
                    <div class="terminal-line">
                        <span class="terminal-output">Fork â€¢ Hack â€¢ Spread | CC BY-NC 4.0</span>
                    </div>
                    <div class="terminal-line">
                        <span class="terminal-success">SystÃ¨mes initialisÃ©s avec succÃ¨s.</span>
                    </div>
                    <div class="terminal-input">
                        <span class="terminal-prompt">citizen@demogarchie:~$ </span>
                        <input type="text" id="terminalInput" placeholder="help pour la liste des commandes">
                        <span class="cursor-blink">â–Œ</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     MODALS
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="modal-overlay" id="modal-new-quest">
    <div class="modal">
        <div class="modal-header">
            <div class="modal-title">ğŸ¯ NOUVELLE QUÃŠTE</div>
            <button class="modal-close" onclick="closeModal('new-quest')">Ã—</button>
        </div>
        <div class="modal-body">
            <div class="form-group">
                <label class="form-label">Titre de la quÃªte</label>
                <input type="text" class="form-input" id="quest-title" placeholder="Ex: Comprendre les enjeux fiscaux">
            </div>
            <div class="form-group">
                <label class="form-label">Objectif concret</label>
                <textarea class="form-input form-textarea" id="quest-objective" placeholder="Que veux-tu accomplir prÃ©cisÃ©ment ?"></textarea>
            </div>
            <div class="form-group">
                <label class="form-label">Contexte (optionnel)</label>
                <textarea class="form-input form-textarea" id="quest-context" placeholder="Pourquoi c'est important pour toi ?"></textarea>
            </div>
            <div class="form-actions">
                <button class="btn btn-secondary" onclick="closeModal('new-quest')">Annuler</button>
                <button class="btn btn-primary" onclick="createQuest()">CrÃ©er la quÃªte</button>
            </div>
        </div>
    </div>
</div>

<div class="modal-overlay" id="modal-new-contact">
    <div class="modal">
        <div class="modal-header">
            <div class="modal-title">ğŸ‘¤ NOUVEAU CONTACT</div>
            <button class="modal-close" onclick="closeModal('new-contact')">Ã—</button>
        </div>
        <div class="modal-body">
            <div class="form-group">
                <label class="form-label">Nom / Pseudo</label>
                <input type="text" class="form-input" id="contact-name" placeholder="Ex: Marie">
            </div>
            <div class="form-group">
                <label class="form-label">Expertise</label>
                <input type="text" class="form-input" id="contact-expertise" placeholder="Ex: Comptable, spÃ©cialiste fiscalitÃ© PME">
            </div>
            <div class="form-group">
                <label class="form-label">Domaines</label>
                <div id="contact-domains" style="display: flex; flex-wrap: wrap; gap: 8px; margin-top: 10px;">
                    <!-- Populated by JS -->
                </div>
            </div>
            <div class="form-actions">
                <button class="btn btn-secondary" onclick="closeModal('new-contact')">Annuler</button>
                <button class="btn btn-primary" onclick="createContact()">Ajouter</button>
            </div>
        </div>
    </div>
</div>

<!-- NOTIFICATIONS -->
<div id="notifications"></div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     SCRIPTS
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// CONFIGURATION & STATE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const CONFIG = {
    version: '1.0.0',
    storageKey: 'demogarchie_',
    targetDate: new Date('2026-10-11T00:00:00') // Ã‰lections communales
};

const DOMAINS = [
    { id: 'juridique', name: 'Droit & Justice', icon: 'âš–ï¸', color: '#b19cd9' },
    { id: 'fiscal', name: 'FiscalitÃ©', icon: 'ğŸ’°', color: '#00ff88' },
    { id: 'social', name: 'Droits Sociaux', icon: 'ğŸ¤', color: '#ff8c00' },
    { id: 'admin', name: 'Administration', icon: 'ğŸ“‹', color: '#00e5ff' },
    { id: 'tech', name: 'NumÃ©rique', icon: 'ğŸ’»', color: '#ff0080' },
    { id: 'sante', name: 'SantÃ©', icon: 'ğŸ¥', color: '#00cc6a' },
    { id: 'logement', name: 'Logement', icon: 'ğŸ ', color: '#ffea00' },
    { id: 'emploi', name: 'Emploi', icon: 'ğŸ’¼', color: '#00b8cc' },
    { id: 'education', name: 'Ã‰ducation', icon: 'ğŸ“š', color: '#d4c4ff' },
    { id: 'environnement', name: 'Environnement', icon: 'ğŸŒ±', color: '#7cffc4' }
];

const INTEL_FEED = [
    { time: '2026.02.01 // 04:30', text: 'DÃ©mogarchie v1.0 initialisÃ©. Bienvenue, citoyen.', type: 'success', tag: 'SYSTÃˆME' },
    { time: '2026.02.01 // 04:00', text: 'Veille citoyenne : nouveau rapport sur les finances communales.', type: 'info', tag: 'VEILLE' },
    { time: '2026.01.31 // 22:15', text: 'Alerte : Moratoire EP confirmÃ© 2026-2028. Alternatives en cours.', type: 'warning', tag: 'ALERTE' },
    { time: '2026.01.30 // 18:00', text: 'Module OSINT citoyen disponible. Formation intÃ©grÃ©e.', type: 'info', tag: 'NOUVEAU' },
    { time: '2026.01.29 // 14:22', text: 'RÃ©seau : 5 nouveaux contributeurs cette semaine.', type: 'success', tag: 'RÃ‰SEAU' }
];

const state = {
    currentView: 'dashboard',
    user: { pseudo: 'Citoyen', initialized: true },
    quests: [],
    contacts: [],
    contributions: [],
    selectedDomains: []
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// STORAGE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const Storage = {
    get: (key) => {
        try {
            const data = localStorage.getItem(CONFIG.storageKey + key);
            return data ? JSON.parse(data) : null;
        } catch (e) { return null; }
    },
    set: (key, value) => {
        try {
            localStorage.setItem(CONFIG.storageKey + key, JSON.stringify(value));
        } catch (e) { console.warn('Storage unavailable'); }
    },
    load: () => {
        state.quests = Storage.get('quests') || [];
        state.contacts = Storage.get('contacts') || [];
        state.contributions = Storage.get('contributions') || [];
    },
    save: () => {
        Storage.set('quests', state.quests);
        Storage.set('contacts', state.contacts);
        Storage.set('contributions', state.contributions);
    }
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// BOOT SEQUENCE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const bootMessages = [
    '> Initializing DÃ‰MOGARCHIE v1.0.0...',
    '> Loading citizen modules...',
    '> Connecting to distributed network...',
    '> Verifying zero-tracking compliance... OK',
    '> Loading intelligence feed...',
    '> Initializing 3D visualization...',
    '> Checking local storage... OK',
    '> All systems nominal.',
    '',
    '> Welcome, citizen. The revolution will be documented.',
    '> Fork â€¢ Hack â€¢ Spread'
];

async function runBootSequence() {
    const console = document.getElementById('bootConsole');
    
    for (let i = 0; i < bootMessages.length; i++) {
        await new Promise(r => setTimeout(r, 150));
        const line = document.createElement('div');
        line.className = 'boot-line';
        line.style.animationDelay = `${i * 0.1}s`;
        line.textContent = bootMessages[i];
        line.style.color = bootMessages[i].includes('OK') ? '#00ff88' : 
                          bootMessages[i].includes('>') ? '#00e5ff' : '#888';
        console.appendChild(line);
        console.scrollTop = console.scrollHeight;
    }
    
    await new Promise(r => setTimeout(r, 1000));
    document.getElementById('boot-screen').style.opacity = '0';
    document.getElementById('boot-screen').style.transition = 'opacity 0.5s';
    
    await new Promise(r => setTimeout(r, 500));
    document.getElementById('boot-screen').style.display = 'none';
    document.getElementById('app').style.display = 'grid';
    
    init3DScene();
    updateAll();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// 3D SCENE (THREE.JS)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let scene, camera, renderer, particles;

function init3DScene() {
    const canvas = document.getElementById('canvas-3d');
    const container = canvas.parentElement;
    
    scene = new THREE.Scene();
    camera = new THREE.PerspectiveCamera(75, container.clientWidth / container.clientHeight, 0.1, 1000);
    camera.position.z = 50;
    
    renderer = new THREE.WebGLRenderer({ canvas, alpha: true, antialias: true });
    renderer.setSize(container.clientWidth, container.clientHeight);
    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
    
    // Particle system
    const geometry = new THREE.BufferGeometry();
    const count = 1000;
    const positions = new Float32Array(count * 3);
    const colors = new Float32Array(count * 3);
    
    for (let i = 0; i < count * 3; i += 3) {
        positions[i] = (Math.random() - 0.5) * 100;
        positions[i + 1] = (Math.random() - 0.5) * 100;
        positions[i + 2] = (Math.random() - 0.5) * 100;
        
        const color = Math.random() > 0.5 ? 
            new THREE.Color(0x00ff88) : new THREE.Color(0xb19cd9);
        colors[i] = color.r;
        colors[i + 1] = color.g;
        colors[i + 2] = color.b;
    }
    
    geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
    geometry.setAttribute('color', new THREE.BufferAttribute(colors, 3));
    
    const material = new THREE.PointsMaterial({
        size: 0.5,
        vertexColors: true,
        transparent: true,
        opacity: 0.8
    });
    
    particles = new THREE.Points(geometry, material);
    scene.add(particles);
    
    // Connections (lines)
    const lineGeometry = new THREE.BufferGeometry();
    const linePositions = [];
    
    for (let i = 0; i < 50; i++) {
        const i1 = Math.floor(Math.random() * count) * 3;
        const i2 = Math.floor(Math.random() * count) * 3;
        
        linePositions.push(positions[i1], positions[i1 + 1], positions[i1 + 2]);
        linePositions.push(positions[i2], positions[i2 + 1], positions[i2 + 2]);
    }
    
    lineGeometry.setAttribute('position', new THREE.Float32BufferAttribute(linePositions, 3));
    
    const lineMaterial = new THREE.LineBasicMaterial({
        color: 0x00ff88,
        transparent: true,
        opacity: 0.1
    });
    
    const lines = new THREE.LineSegments(lineGeometry, lineMaterial);
    scene.add(lines);
    
    animate3D();
    
    window.addEventListener('resize', () => {
        camera.aspect = container.clientWidth / container.clientHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(container.clientWidth, container.clientHeight);
    });
}

function animate3D() {
    requestAnimationFrame(animate3D);
    
    if (particles) {
        particles.rotation.y += 0.0005;
        particles.rotation.x += 0.0002;
    }
    
    renderer.render(scene, camera);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// UI UPDATES
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function updateAll() {
    updateClock();
    updateCountdown();
    updateStats();
    updateIntelFeed();
    updateNetworkQuick();
    updateQuestsGrid();
    populateDomainSelectors();
}

function updateClock() {
    const now = new Date();
    document.getElementById('clock').textContent = 
        now.toLocaleTimeString('fr-FR', { hour: '2-digit', minute: '2-digit', second: '2-digit' });
    setTimeout(updateClock, 1000);
}

function updateCountdown() {
    const now = new Date();
    const diff = CONFIG.targetDate - now;
    
    if (diff > 0) {
        const days = Math.floor(diff / (1000 * 60 * 60 * 24));
        const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((diff % (1000 * 60)) / 1000);
        
        document.getElementById('days').textContent = String(days).padStart(2, '0');
        document.getElementById('hours').textContent = String(hours).padStart(2, '0');
        document.getElementById('minutes').textContent = String(minutes).padStart(2, '0');
        document.getElementById('seconds').textContent = String(seconds).padStart(2, '0');
    }
    
    setTimeout(updateCountdown, 1000);
}

function updateStats() {
    const activeQuests = state.quests.filter(q => q.status === 'active').length;
    const totalAngles = state.quests.reduce((acc, q) => acc + (q.anglesMorts?.length || 0), 0);
    const resolvedAngles = state.quests.reduce((acc, q) => 
        acc + (q.anglesMorts?.filter(am => am.resolved).length || 0), 0);
    const karma = state.contacts.reduce((acc, c) => acc + (c.karma || 0), 0);
    
    document.getElementById('stat-quests').textContent = activeQuests;
    document.getElementById('stat-angles').textContent = `${resolvedAngles}/${totalAngles}`;
    document.getElementById('stat-network').textContent = state.contacts.length;
    document.getElementById('stat-karma').textContent = karma;
}

function updateIntelFeed() {
    const container = document.getElementById('intelFeed');
    container.innerHTML = INTEL_FEED.map(item => `
        <div class="intel-item ${item.type}">
            <div class="intel-time">${item.time}</div>
            <div class="intel-text">${item.text}</div>
            <span class="intel-tag">${item.tag}</span>
        </div>
    `).join('');
}

function updateNetworkQuick() {
    const container = document.getElementById('networkQuick');
    
    if (state.contacts.length === 0) {
        container.innerHTML = `
            <p style="color: var(--text-muted); font-size: 12px; text-align: center; padding: 20px;">
                Aucun contact. Ajoute des personnes-ressources.
            </p>
        `;
        return;
    }
    
    container.innerHTML = state.contacts.slice(0, 5).map(c => `
        <div class="network-item">
            <div class="network-avatar">${c.name.charAt(0).toUpperCase()}</div>
            <div class="network-info">
                <div class="network-name">${c.name}</div>
                <div class="network-role">${c.expertise || 'Non spÃ©cifiÃ©'}</div>
            </div>
            <div class="network-karma">â­ ${c.karma || 0}</div>
        </div>
    `).join('');
}

function updateQuestsGrid() {
    const container = document.getElementById('questsGrid');
    
    if (state.quests.length === 0) {
        container.innerHTML = `
            <div style="grid-column: 1/-1; text-align: center; padding: 60px;">
                <div style="font-size: 60px; margin-bottom: 20px;">ğŸ¯</div>
                <h3 style="color: var(--green); margin-bottom: 15px;">Aucune quÃªte</h3>
                <p style="color: var(--text-muted); margin-bottom: 30px;">
                    CrÃ©e ta premiÃ¨re quÃªte pour commencer ton parcours citoyen.
                </p>
                <button class="btn btn-primary" onclick="openModal('new-quest')">
                    Nouvelle QuÃªte
                </button>
            </div>
        `;
        return;
    }
    
    container.innerHTML = state.quests.map(q => {
        const resolved = q.anglesMorts?.filter(am => am.resolved).length || 0;
        const total = q.anglesMorts?.length || 0;
        const progress = total > 0 ? (resolved / total) * 100 : 0;
        
        return `
            <div class="quest-card">
                <div class="quest-header">
                    <div>
                        <div class="quest-title">${q.title}</div>
                        <div class="quest-objective">${q.objective}</div>
                    </div>
                    <span class="quest-status">${q.status}</span>
                </div>
                <div class="quest-progress">
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: ${progress}%"></div>
                    </div>
                    <div class="progress-text">
                        <span>${resolved}/${total} angles rÃ©solus</span>
                        <span>${Math.round(progress)}%</span>
                    </div>
                </div>
            </div>
        `;
    }).join('');
}

function populateDomainSelectors() {
    const container = document.getElementById('contact-domains');
    if (!container) return;
    
    container.innerHTML = DOMAINS.map(d => `
        <button type="button" class="domain-btn" data-domain="${d.id}" 
                style="padding: 8px 14px; background: rgba(0,0,0,0.3); border: 1px solid var(--border);
                       border-radius: 8px; color: ${d.color}; cursor: pointer; font-size: 12px;
                       transition: all 0.2s;"
                onclick="toggleDomain('${d.id}', this)">
            ${d.icon} ${d.name}
        </button>
    `).join('');
}

function toggleDomain(domainId, btn) {
    const idx = state.selectedDomains.indexOf(domainId);
    if (idx > -1) {
        state.selectedDomains.splice(idx, 1);
        btn.style.borderColor = 'var(--border)';
        btn.style.background = 'rgba(0,0,0,0.3)';
    } else {
        state.selectedDomains.push(domainId);
        btn.style.borderColor = btn.style.color;
        btn.style.background = 'rgba(0,255,136,0.1)';
    }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// NAVIGATION
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
document.querySelectorAll('.nav-tab').forEach(tab => {
    tab.addEventListener('click', () => {
        const view = tab.dataset.view;
        
        document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
        tab.classList.add('active');
        
        document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
        document.getElementById(`view-${view}`).classList.add('active');
        
        state.currentView = view;
    });
});

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// MODALS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function openModal(id) {
    document.getElementById(`modal-${id}`).classList.add('active');
}

function closeModal(id) {
    document.getElementById(`modal-${id}`).classList.remove('active');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ACTIONS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function createQuest() {
    const title = document.getElementById('quest-title').value.trim();
    const objective = document.getElementById('quest-objective').value.trim();
    const context = document.getElementById('quest-context').value.trim();
    
    if (!title || !objective) {
        notify('Remplis le titre et l\'objectif.', true);
        return;
    }
    
    const quest = {
        id: Date.now().toString(36),
        title,
        objective,
        context,
        status: 'active',
        anglesMorts: [],
        forks: 0,
        createdAt: new Date().toISOString()
    };
    
    state.quests.push(quest);
    Storage.save();
    
    document.getElementById('quest-title').value = '';
    document.getElementById('quest-objective').value = '';
    document.getElementById('quest-context').value = '';
    
    closeModal('new-quest');
    updateAll();
    notify('âœ¨ Nouvelle quÃªte crÃ©Ã©e !');
}

function createContact() {
    const name = document.getElementById('contact-name').value.trim();
    const expertise = document.getElementById('contact-expertise').value.trim();
    
    if (!name) {
        notify('Entre au moins un nom.', true);
        return;
    }
    
    const contact = {
        id: Date.now().toString(36),
        name,
        expertise,
        domains: [...state.selectedDomains],
        karma: 0,
        addedAt: new Date().toISOString()
    };
    
    state.contacts.push(contact);
    state.selectedDomains = [];
    Storage.save();
    
    document.getElementById('contact-name').value = '';
    document.getElementById('contact-expertise').value = '';
    
    closeModal('new-contact');
    updateAll();
    notify(`ğŸ‘¤ ${name} ajoutÃ© au rÃ©seau.`);
}

function exportAll() {
    const data = {
        version: CONFIG.version,
        exportedAt: new Date().toISOString(),
        quests: state.quests,
        contacts: state.contacts,
        contributions: state.contributions
    };
    
    const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `demogarchie-export-${Date.now()}.json`;
    a.click();
    URL.revokeObjectURL(url);
    
    notify('ğŸ“¦ Export tÃ©lÃ©chargÃ© !');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// NOTIFICATIONS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function notify(message, isError = false) {
    const container = document.getElementById('notifications');
    const notif = document.createElement('div');
    notif.className = `notification ${isError ? 'error' : ''}`;
    notif.textContent = message;
    container.appendChild(notif);
    
    setTimeout(() => {
        notif.style.opacity = '0';
        notif.style.transform = 'translateX(100%)';
        setTimeout(() => notif.remove(), 300);
    }, 4000);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// TERMINAL
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
document.getElementById('terminalInput').addEventListener('keypress', (e) => {
    if (e.key === 'Enter') {
        const input = e.target.value.trim();
        if (input) {
            executeCommand(input);
            e.target.value = '';
        }
    }
});

function executeCommand(cmd) {
    const terminal = document.getElementById('terminal');
    const inputLine = terminal.querySelector('.terminal-input');
    
    // Add command line
    const cmdLine = document.createElement('div');
    cmdLine.className = 'terminal-line';
    cmdLine.innerHTML = `<span class="terminal-prompt">citizen@demogarchie:~$ </span><span class="terminal-cmd">${cmd}</span>`;
    terminal.insertBefore(cmdLine, inputLine);
    
    // Process command
    let output = '';
    let isError = false;
    
    switch (cmd.toLowerCase()) {
        case 'help':
            output = `Commandes disponibles:
  help     - Affiche cette aide
  status   - Ã‰tat du systÃ¨me
  quests   - Liste les quÃªtes
  network  - Liste les contacts
  clear    - Efface le terminal
  export   - Exporte les donnÃ©es
  about    - Ã€ propos`;
            break;
        case 'status':
            output = `DÃ‰MOGARCHIE v${CONFIG.version}
QuÃªtes actives: ${state.quests.filter(q => q.status === 'active').length}
Contacts: ${state.contacts.length}
Statut: OPÃ‰RATIONNEL`;
            break;
        case 'quests':
            output = state.quests.length > 0 ? 
                state.quests.map(q => `[${q.status}] ${q.title}`).join('\n') :
                'Aucune quÃªte. Utilisez le bouton "Nouvelle QuÃªte".';
            break;
        case 'network':
            output = state.contacts.length > 0 ?
                state.contacts.map(c => `${c.name} (karma: ${c.karma || 0})`).join('\n') :
                'RÃ©seau vide. Ajoutez des contacts.';
            break;
        case 'clear':
            terminal.innerHTML = '';
            terminal.appendChild(inputLine);
            return;
        case 'export':
            exportAll();
            output = 'Export lancÃ©...';
            break;
        case 'about':
            output = `DÃ‰MOGARCHIE â€” Centre de Commandement Citoyen
Fork â€¢ Hack â€¢ Spread
CC BY-NC 4.0 | Zero Tracking | Open Source`;
            break;
        default:
            output = `Commande inconnue: ${cmd}. Tapez 'help' pour l'aide.`;
            isError = true;
    }
    
    // Add output
    const outputLine = document.createElement('div');
    outputLine.className = 'terminal-line';
    outputLine.innerHTML = `<span class="terminal-${isError ? 'error' : 'output'}">${output.replace(/\n/g, '<br>')}</span>`;
    terminal.insertBefore(outputLine, inputLine);
    
    terminal.scrollTop = terminal.scrollHeight;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// INIT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
document.addEventListener('DOMContentLoaded', () => {
    Storage.load();
    runBootSequence();
});
</script>

</body>
</html>
