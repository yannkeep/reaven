<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚ñà‚ñì‚ñí‚ñë LE CERCLE DES VEILLEURS ‚ñë‚ñí‚ñì‚ñà</title>
    <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Orbitron:wght@400;700;900&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #8b5cf6;
            --secondary: #06b6d4;
            --tertiary: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --dark: #0a0a0f;
            --darker: #050508;
            --light: #e2e8f0;
            --glow: rgba(139, 92, 246, 0.5);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--darker);
            color: var(--light);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* GLITCH EFFECT */
        @keyframes glitch {
            0% { transform: translate(0); }
            20% { transform: translate(-2px, 2px); }
            40% { transform: translate(-2px, -2px); }
            60% { transform: translate(2px, 2px); }
            80% { transform: translate(2px, -2px); }
            100% { transform: translate(0); }
        }

        @keyframes glitchText {
            0% { clip-path: inset(40% 0 61% 0); transform: translate(-2px, 0); }
            20% { clip-path: inset(92% 0 1% 0); transform: translate(2px, 0); }
            40% { clip-path: inset(43% 0 1% 0); transform: translate(-2px, 0); }
            60% { clip-path: inset(25% 0 58% 0); transform: translate(2px, 0); }
            80% { clip-path: inset(54% 0 7% 0); transform: translate(-2px, 0); }
            100% { clip-path: inset(58% 0 43% 0); transform: translate(2px, 0); }
        }

        @keyframes scanline {
            0% { transform: translateY(-100%); }
            100% { transform: translateY(100vh); }
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        @keyframes typewriter {
            from { width: 0; }
            to { width: 100%; }
        }

        @keyframes blink {
            50% { border-color: transparent; }
        }

        @keyframes matrixRain {
            0% { transform: translateY(-100%); opacity: 1; }
            100% { transform: translateY(100vh); opacity: 0; }
        }

        @keyframes reveal {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* MATRIX BACKGROUND */
        #matrix-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0.15;
        }

        /* SCANLINE OVERLAY */
        .scanline {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(transparent, rgba(139, 92, 246, 0.3), transparent);
            animation: scanline 4s linear infinite;
            pointer-events: none;
            z-index: 1000;
        }

        /* INTRO SCREEN */
        #intro-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--darker);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity 1s, visibility 1s;
        }

        #intro-screen.hidden {
            opacity: 0;
            visibility: hidden;
        }

        .intro-symbol {
            font-size: 120px;
            margin-bottom: 30px;
            animation: float 3s ease-in-out infinite, pulse 2s ease-in-out infinite;
            text-shadow: 0 0 50px var(--glow);
        }

        .intro-text {
            font-family: 'Share Tech Mono', monospace;
            font-size: 14px;
            color: var(--primary);
            text-align: center;
            max-width: 600px;
            line-height: 1.8;
        }

        .intro-text .typing {
            overflow: hidden;
            white-space: nowrap;
            border-right: 2px solid var(--primary);
            animation: typewriter 3s steps(50) 1s forwards, blink 0.7s step-end infinite;
        }

        .access-prompt {
            margin-top: 40px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }

        .access-input {
            background: rgba(139, 92, 246, 0.1);
            border: 1px solid var(--primary);
            padding: 15px 30px;
            font-family: 'Share Tech Mono', monospace;
            font-size: 18px;
            color: var(--primary);
            text-align: center;
            width: 300px;
            outline: none;
            text-transform: uppercase;
            letter-spacing: 5px;
        }

        .access-input::placeholder {
            color: rgba(139, 92, 246, 0.5);
        }

        .access-hint {
            font-size: 12px;
            color: rgba(139, 92, 246, 0.6);
            font-family: 'Share Tech Mono', monospace;
        }

        .access-btn {
            background: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
            padding: 12px 40px;
            font-family: 'Orbitron', sans-serif;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 3px;
        }

        .access-btn:hover {
            background: var(--primary);
            color: var(--darker);
            box-shadow: 0 0 30px var(--glow);
        }

        /* MAIN APP */
        #main-app {
            display: none;
            min-height: 100vh;
        }

        #main-app.active {
            display: block;
        }

        /* HEADER */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(5, 5, 8, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(139, 92, 246, 0.2);
            padding: 15px 30px;
            z-index: 100;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo-symbol {
            font-size: 30px;
            animation: pulse 3s ease-in-out infinite;
        }

        .logo-text {
            font-family: 'Orbitron', sans-serif;
            font-size: 14px;
            letter-spacing: 3px;
        }

        .logo-text span {
            color: var(--primary);
        }

        .agent-info {
            display: flex;
            align-items: center;
            gap: 20px;
            font-family: 'Share Tech Mono', monospace;
            font-size: 12px;
        }

        .agent-level {
            padding: 5px 15px;
            border: 1px solid var(--tertiary);
            color: var(--tertiary);
        }

        .agent-xp {
            color: var(--warning);
        }

        /* NAVIGATION */
        .nav {
            display: flex;
            justify-content: center;
            gap: 5px;
            padding: 20px;
            margin-top: 70px;
            flex-wrap: wrap;
        }

        .nav-btn {
            background: rgba(139, 92, 246, 0.1);
            border: 1px solid rgba(139, 92, 246, 0.3);
            color: var(--light);
            padding: 12px 25px;
            font-family: 'Orbitron', sans-serif;
            font-size: 11px;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .nav-btn:hover, .nav-btn.active {
            background: rgba(139, 92, 246, 0.3);
            border-color: var(--primary);
            box-shadow: 0 0 20px rgba(139, 92, 246, 0.3);
        }

        .nav-btn.locked {
            opacity: 0.4;
            cursor: not-allowed;
        }

        .nav-btn .lock-icon {
            margin-left: 5px;
        }

        /* SECTIONS */
        .section {
            display: none;
            padding: 30px;
            max-width: 1400px;
            margin: 0 auto;
            animation: reveal 0.5s ease-out;
        }

        .section.active {
            display: block;
        }

        .section-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 24px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .section-title::before {
            content: '//';
            color: var(--primary);
        }

        .section-subtitle {
            color: rgba(255,255,255,0.5);
            font-family: 'Share Tech Mono', monospace;
            font-size: 12px;
            margin-bottom: 30px;
            padding-left: 30px;
        }

        /* BRIEFING SECTION */
        .briefing-content {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 30px;
        }

        .classified-doc {
            background: rgba(10, 10, 15, 0.8);
            border: 1px solid rgba(139, 92, 246, 0.2);
            padding: 30px;
            position: relative;
        }

        .classified-doc::before {
            content: 'CLASSIFIED // NIVEAU œâ';
            position: absolute;
            top: -10px;
            left: 20px;
            background: var(--darker);
            padding: 0 10px;
            font-family: 'Share Tech Mono', monospace;
            font-size: 10px;
            color: var(--danger);
            letter-spacing: 2px;
        }

        .doc-header {
            border-bottom: 1px solid rgba(139, 92, 246, 0.2);
            padding-bottom: 20px;
            margin-bottom: 20px;
        }

        .doc-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 18px;
            color: var(--primary);
            margin-bottom: 10px;
        }

        .doc-meta {
            font-family: 'Share Tech Mono', monospace;
            font-size: 11px;
            color: rgba(255,255,255,0.5);
        }

        .doc-content {
            line-height: 1.8;
            font-size: 14px;
        }

        .doc-content p {
            margin-bottom: 15px;
        }

        .highlight {
            color: var(--primary);
            font-weight: 600;
        }

        .redacted {
            background: var(--light);
            color: var(--light);
            padding: 0 5px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .redacted.revealed {
            background: transparent;
            color: var(--warning);
        }

        .stats-panel {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .stat-card {
            background: rgba(10, 10, 15, 0.8);
            border: 1px solid rgba(139, 92, 246, 0.2);
            padding: 20px;
        }

        .stat-card h4 {
            font-family: 'Share Tech Mono', monospace;
            font-size: 11px;
            color: rgba(255,255,255,0.5);
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .stat-value {
            font-family: 'Orbitron', sans-serif;
            font-size: 36px;
            color: var(--primary);
        }

        .stat-label {
            font-size: 12px;
            color: rgba(255,255,255,0.6);
            margin-top: 5px;
        }

        .stat-bar {
            height: 4px;
            background: rgba(139, 92, 246, 0.2);
            margin-top: 15px;
            border-radius: 2px;
            overflow: hidden;
        }

        .stat-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            transition: width 1s ease-out;
        }

        /* MISSIONS */
        .missions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
        }

        .mission-card {
            background: rgba(10, 10, 15, 0.8);
            border: 1px solid rgba(139, 92, 246, 0.2);
            padding: 25px;
            position: relative;
            transition: all 0.3s;
        }

        .mission-card:hover {
            border-color: var(--primary);
            transform: translateY(-5px);
            box-shadow: 0 10px 40px rgba(139, 92, 246, 0.2);
        }

        .mission-card.completed {
            border-color: var(--tertiary);
            opacity: 0.7;
        }

        .mission-card.locked {
            opacity: 0.4;
            pointer-events: none;
        }

        .mission-level {
            position: absolute;
            top: -10px;
            right: 20px;
            padding: 5px 15px;
            font-family: 'Share Tech Mono', monospace;
            font-size: 10px;
            letter-spacing: 2px;
        }

        .mission-level.micro {
            background: var(--secondary);
            color: var(--darker);
        }

        .mission-level.meso {
            background: var(--warning);
            color: var(--darker);
        }

        .mission-level.macro {
            background: var(--danger);
            color: white;
        }

        .mission-header {
            display: flex;
            align-items: flex-start;
            gap: 15px;
            margin-bottom: 15px;
        }

        .mission-icon {
            font-size: 30px;
            min-width: 40px;
        }

        .mission-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 14px;
            margin-bottom: 5px;
        }

        .mission-code {
            font-family: 'Share Tech Mono', monospace;
            font-size: 10px;
            color: rgba(255,255,255,0.4);
        }

        .mission-desc {
            font-size: 13px;
            line-height: 1.6;
            color: rgba(255,255,255,0.7);
            margin-bottom: 15px;
        }

        .mission-objectives {
            background: rgba(0,0,0,0.3);
            padding: 15px;
            margin-bottom: 15px;
        }

        .mission-objectives h5 {
            font-family: 'Share Tech Mono', monospace;
            font-size: 10px;
            color: var(--primary);
            margin-bottom: 10px;
            letter-spacing: 2px;
        }

        .objective {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 12px;
            padding: 5px 0;
            color: rgba(255,255,255,0.6);
        }

        .objective-check {
            width: 16px;
            height: 16px;
            border: 1px solid rgba(255,255,255,0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .objective-check.checked {
            background: var(--tertiary);
            border-color: var(--tertiary);
        }

        .mission-reward {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 15px;
            border-top: 1px solid rgba(139, 92, 246, 0.2);
        }

        .reward-xp {
            font-family: 'Share Tech Mono', monospace;
            color: var(--warning);
            font-size: 12px;
        }

        .mission-btn {
            background: transparent;
            border: 1px solid var(--primary);
            color: var(--primary);
            padding: 8px 20px;
            font-family: 'Orbitron', sans-serif;
            font-size: 10px;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
        }

        .mission-btn:hover {
            background: var(--primary);
            color: var(--darker);
        }

        .mission-btn.complete {
            background: var(--tertiary);
            border-color: var(--tertiary);
            color: var(--darker);
        }

        /* CIPHER SECTION */
        .cipher-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }

        .cipher-panel {
            background: rgba(10, 10, 15, 0.8);
            border: 1px solid rgba(139, 92, 246, 0.2);
            padding: 25px;
        }

        .cipher-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 14px;
            color: var(--primary);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .cipher-message {
            background: rgba(0,0,0,0.5);
            padding: 20px;
            font-family: 'Share Tech Mono', monospace;
            font-size: 14px;
            line-height: 1.8;
            margin-bottom: 20px;
            border-left: 3px solid var(--primary);
        }

        .cipher-input {
            width: 100%;
            background: rgba(0,0,0,0.5);
            border: 1px solid rgba(139, 92, 246, 0.3);
            padding: 15px;
            font-family: 'Share Tech Mono', monospace;
            font-size: 14px;
            color: var(--light);
            margin-bottom: 15px;
            outline: none;
        }

        .cipher-input:focus {
            border-color: var(--primary);
        }

        .cipher-result {
            padding: 15px;
            font-family: 'Share Tech Mono', monospace;
            font-size: 13px;
            min-height: 50px;
        }

        .cipher-result.success {
            background: rgba(16, 185, 129, 0.2);
            border: 1px solid var(--tertiary);
            color: var(--tertiary);
        }

        .cipher-result.error {
            background: rgba(239, 68, 68, 0.2);
            border: 1px solid var(--danger);
            color: var(--danger);
        }

        .cipher-tools {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .cipher-tool {
            background: rgba(139, 92, 246, 0.1);
            border: 1px solid rgba(139, 92, 246, 0.3);
            color: var(--light);
            padding: 8px 15px;
            font-family: 'Share Tech Mono', monospace;
            font-size: 11px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .cipher-tool:hover {
            background: rgba(139, 92, 246, 0.3);
        }

        /* NETWORK SECTION */
        .network-container {
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 30px;
        }

        .network-map {
            background: rgba(10, 10, 15, 0.8);
            border: 1px solid rgba(139, 92, 246, 0.2);
            padding: 20px;
            min-height: 500px;
            position: relative;
        }

        .network-node {
            position: absolute;
            width: 60px;
            height: 60px;
            background: rgba(139, 92, 246, 0.2);
            border: 2px solid var(--primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            cursor: pointer;
            transition: all 0.3s;
            animation: pulse 3s ease-in-out infinite;
        }

        .network-node:hover {
            transform: scale(1.2);
            box-shadow: 0 0 30px var(--glow);
        }

        .network-node.active {
            background: var(--primary);
            animation: none;
        }

        .network-node::after {
            content: attr(data-name);
            position: absolute;
            bottom: -25px;
            font-size: 10px;
            font-family: 'Share Tech Mono', monospace;
            white-space: nowrap;
            color: rgba(255,255,255,0.6);
        }

        .network-line {
            position: absolute;
            height: 2px;
            background: linear-gradient(90deg, var(--primary), transparent);
            transform-origin: left center;
            opacity: 0.3;
        }

        .network-sidebar {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .agent-card {
            background: rgba(10, 10, 15, 0.8);
            border: 1px solid rgba(139, 92, 246, 0.2);
            padding: 20px;
        }

        .agent-avatar {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            margin: 0 auto 15px;
        }

        .agent-name {
            font-family: 'Orbitron', sans-serif;
            font-size: 14px;
            text-align: center;
            margin-bottom: 5px;
        }

        .agent-role {
            font-family: 'Share Tech Mono', monospace;
            font-size: 10px;
            color: var(--primary);
            text-align: center;
            margin-bottom: 15px;
        }

        .agent-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .agent-stat {
            text-align: center;
            padding: 10px;
            background: rgba(0,0,0,0.3);
        }

        .agent-stat-value {
            font-family: 'Orbitron', sans-serif;
            font-size: 18px;
            color: var(--secondary);
        }

        .agent-stat-label {
            font-size: 9px;
            color: rgba(255,255,255,0.5);
            text-transform: uppercase;
        }

        /* MANIFESTO SECTION */
        .manifesto-content {
            max-width: 800px;
            margin: 0 auto;
        }

        .manifesto-article {
            background: rgba(10, 10, 15, 0.8);
            border: 1px solid rgba(139, 92, 246, 0.2);
            padding: 40px;
            position: relative;
        }

        .manifesto-article::before {
            content: '‚óà';
            position: absolute;
            top: 20px;
            left: 20px;
            font-size: 24px;
            color: var(--primary);
        }

        .manifesto-article::after {
            content: '‚óà';
            position: absolute;
            bottom: 20px;
            right: 20px;
            font-size: 24px;
            color: var(--primary);
        }

        .manifesto-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .manifesto-symbol {
            font-size: 60px;
            margin-bottom: 20px;
        }

        .manifesto-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 28px;
            margin-bottom: 10px;
        }

        .manifesto-subtitle {
            font-family: 'Share Tech Mono', monospace;
            color: var(--primary);
            font-size: 12px;
            letter-spacing: 5px;
        }

        .manifesto-body {
            line-height: 2;
            font-size: 15px;
        }

        .manifesto-body p {
            margin-bottom: 20px;
        }

        .manifesto-principle {
            background: rgba(139, 92, 246, 0.1);
            border-left: 3px solid var(--primary);
            padding: 20px;
            margin: 30px 0;
            font-style: italic;
        }

        .manifesto-levels {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 40px 0;
        }

        .level-card {
            text-align: center;
            padding: 25px;
            border: 1px solid rgba(139, 92, 246, 0.2);
            transition: all 0.3s;
        }

        .level-card:hover {
            border-color: var(--primary);
            transform: translateY(-5px);
        }

        .level-icon {
            font-size: 40px;
            margin-bottom: 15px;
        }

        .level-name {
            font-family: 'Orbitron', sans-serif;
            font-size: 14px;
            margin-bottom: 10px;
        }

        .level-desc {
            font-size: 12px;
            color: rgba(255,255,255,0.6);
            line-height: 1.6;
        }

        /* DROPS SECTION */
        .drops-timeline {
            position: relative;
            padding-left: 30px;
        }

        .drops-timeline::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 2px;
            background: linear-gradient(to bottom, var(--primary), transparent);
        }

        .drop-item {
            position: relative;
            margin-bottom: 30px;
            background: rgba(10, 10, 15, 0.8);
            border: 1px solid rgba(139, 92, 246, 0.2);
            padding: 20px;
            margin-left: 20px;
        }

        .drop-item::before {
            content: '‚óÜ';
            position: absolute;
            left: -31px;
            top: 20px;
            color: var(--primary);
            font-size: 12px;
        }

        .drop-date {
            font-family: 'Share Tech Mono', monospace;
            font-size: 10px;
            color: var(--primary);
            margin-bottom: 10px;
        }

        .drop-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 14px;
            margin-bottom: 10px;
        }

        .drop-content {
            font-size: 13px;
            line-height: 1.6;
            color: rgba(255,255,255,0.7);
        }

        .drop-attachment {
            margin-top: 15px;
            padding: 10px;
            background: rgba(0,0,0,0.3);
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .drop-attachment:hover {
            background: rgba(139, 92, 246, 0.2);
        }

        /* TERMINAL */
        .terminal {
            background: rgba(0, 0, 0, 0.9);
            border: 1px solid rgba(139, 92, 246, 0.3);
            padding: 20px;
            font-family: 'Share Tech Mono', monospace;
            font-size: 13px;
            max-height: 400px;
            overflow-y: auto;
        }

        .terminal-line {
            margin-bottom: 5px;
        }

        .terminal-prompt {
            color: var(--primary);
        }

        .terminal-input {
            background: transparent;
            border: none;
            color: var(--tertiary);
            font-family: inherit;
            font-size: inherit;
            outline: none;
            width: calc(100% - 20px);
        }

        .terminal-output {
            color: rgba(255,255,255,0.7);
        }

        .terminal-error {
            color: var(--danger);
        }

        .terminal-success {
            color: var(--tertiary);
        }

        /* PROGRESS BAR */
        .global-progress {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(5, 5, 8, 0.95);
            border-top: 1px solid rgba(139, 92, 246, 0.2);
            padding: 10px 30px;
            display: flex;
            align-items: center;
            gap: 20px;
            z-index: 100;
        }

        .progress-label {
            font-family: 'Share Tech Mono', monospace;
            font-size: 11px;
            color: var(--primary);
            min-width: 150px;
        }

        .progress-bar {
            flex: 1;
            height: 6px;
            background: rgba(139, 92, 246, 0.2);
            border-radius: 3px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary), var(--tertiary));
            transition: width 0.5s ease-out;
        }

        .progress-percent {
            font-family: 'Orbitron', sans-serif;
            font-size: 12px;
            color: var(--tertiary);
            min-width: 50px;
            text-align: right;
        }

        /* MODAL */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 2000;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--dark);
            border: 1px solid var(--primary);
            padding: 40px;
            max-width: 600px;
            position: relative;
            animation: reveal 0.3s ease-out;
        }

        .modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            color: var(--light);
            font-size: 24px;
            cursor: pointer;
        }

        .modal-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 20px;
            margin-bottom: 20px;
            color: var(--primary);
        }

        /* NOTIFICATIONS */
        .notification {
            position: fixed;
            top: 100px;
            right: 30px;
            background: var(--dark);
            border: 1px solid var(--primary);
            padding: 20px;
            max-width: 350px;
            z-index: 1500;
            animation: reveal 0.3s ease-out;
            display: none;
        }

        .notification.active {
            display: block;
        }

        .notification.success {
            border-color: var(--tertiary);
        }

        .notification.warning {
            border-color: var(--warning);
        }

        .notification-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 12px;
            margin-bottom: 10px;
        }

        .notification-text {
            font-size: 13px;
            color: rgba(255,255,255,0.7);
        }

        /* RESPONSIVE */
        @media (max-width: 1024px) {
            .briefing-content,
            .cipher-container,
            .network-container {
                grid-template-columns: 1fr;
            }

            .manifesto-levels {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .header {
                flex-direction: column;
                gap: 15px;
                padding: 15px;
            }

            .nav {
                margin-top: 120px;
            }

            .nav-btn {
                padding: 10px 15px;
                font-size: 10px;
            }

            .section {
                padding: 20px;
            }

            .section-title {
                font-size: 18px;
            }

            .missions-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="scanline"></div>
    <canvas id="matrix-bg"></canvas>

    <!-- INTRO SCREEN -->
    <div id="intro-screen">
        <div class="intro-symbol">‚óà</div>
        <div class="intro-text">
            <p class="typing">CONNEXION S√âCURIS√âE √âTABLIE...</p>
            <p style="margin-top: 20px; opacity: 0; animation: reveal 1s ease-out 4s forwards;">
                Bienvenue, Veilleur potentiel.<br><br>
                Vous avez √©t√© s√©lectionn√© pour rejoindre une op√©ration d'envergure.<br>
                Notre mission : <span class="highlight">briser l'isolement</span>, <span class="highlight">transformer les perceptions</span>,<br>
                <span class="highlight">tisser les liens invisibles</span> qui sauvent des vies.<br><br>
                Le Cercle des Veilleurs observe. Le Cercle des Veilleurs agit.<br>
                Dans l'ombre, pour la lumi√®re.
            </p>
        </div>
        <div class="access-prompt" style="opacity: 0; animation: reveal 1s ease-out 6s forwards;">
            <input type="text" class="access-input" id="access-code" placeholder="CODE D'ACC√àS" maxlength="10">
            <span class="access-hint">Indice : Ce que nous tissons entre les √™tres</span>
            <button class="access-btn" onclick="checkAccess()">INITIER CONNEXION</button>
        </div>
    </div>

    <!-- MAIN APPLICATION -->
    <div id="main-app">
        <!-- HEADER -->
        <header class="header">
            <div class="logo">
                <span class="logo-symbol">‚óà</span>
                <div class="logo-text">LE CERCLE DES <span>VEILLEURS</span></div>
            </div>
            <div class="agent-info">
                <span class="agent-level" id="agent-level">NIVEAU 1 - OBSERVATEUR</span>
                <span class="agent-xp" id="agent-xp">XP: 0/1000</span>
            </div>
        </header>

        <!-- NAVIGATION -->
        <nav class="nav">
            <button class="nav-btn active" onclick="showSection('briefing')">BRIEFING</button>
            <button class="nav-btn" onclick="showSection('missions')">MISSIONS</button>
            <button class="nav-btn" onclick="showSection('cipher')">D√âCHIFFREMENT</button>
            <button class="nav-btn" onclick="showSection('network')">R√âSEAU</button>
            <button class="nav-btn" onclick="showSection('manifesto')">MANIFESTE</button>
            <button class="nav-btn" onclick="showSection('drops')">DROPS</button>
            <button class="nav-btn locked" onclick="showSection('omega')">OMEGA <span class="lock-icon">üîí</span></button>
        </nav>

        <!-- BRIEFING SECTION -->
        <section id="briefing" class="section active">
            <h2 class="section-title">BRIEFING INITIAL</h2>
            <p class="section-subtitle">Dossier d'introduction √† l'Op√©ration LIEN</p>

            <div class="briefing-content">
                <div class="classified-doc">
                    <div class="doc-header">
                        <h3 class="doc-title">OP√âRATION LIEN // PHASE √âVEIL</h3>
                        <p class="doc-meta">R√©f: CDV-2025-001 | Classification: OMEGA | Date: <span id="current-date"></span></p>
                    </div>
                    <div class="doc-content">
                        <p>
                            Agent, bienvenue dans le <span class="highlight">Cercle des Veilleurs</span>. 
                            Vous avez √©t√© identifi√© comme potentiel vecteur de changement. 
                            Nos algorithmes ont d√©tect√© en vous la capacit√© de <span class="redacted" onclick="revealText(this)">cr√©er des liens</span> 
                            l√† o√π l'isolement r√®gne.
                        </p>
                        <p>
                            <strong>CONTEXTE OP√âRATIONNEL :</strong><br>
                            En Belgique, <span class="highlight">1 personne sur 5</span> souffre de troubles de sant√© mentale.
                            <span class="highlight">60%</span> de la population ressent la solitude.
                            <span class="redacted" onclick="revealText(this)">6.7%</span> se sentent seuls en permanence.
                            Ces chiffres ne sont pas une fatalit√©. Ils sont une mission.
                        </p>
                        <p>
                            <strong>OBJECTIF STRAT√âGIQUE :</strong><br>
                            L'Op√©ration LIEN vise √† infiltrer le quotidien de micro-actions bienveillantes,
                            √† construire des r√©seaux de soutien invisibles, et √† transformer la perception 
                            collective de la <span class="redacted" onclick="revealText(this)">sant√© mentale</span>.
                        </p>
                        <p>
                            <strong>VOTRE R√îLE :</strong><br>
                            Vous agirez sur trois niveaux d'influence :<br>
                            ‚Ä¢ <span class="highlight">MICRO</span> ‚Äî Actions individuelles, contacts directs<br>
                            ‚Ä¢ <span class="highlight">M√âSO</span> ‚Äî Mobilisation communautaire, r√©seaux locaux<br>
                            ‚Ä¢ <span class="highlight">MACRO</span> ‚Äî Influence syst√©mique, changement culturel
                        </p>
                        <p>
                            Les structures existent d√©j√†. <span class="highlight">Babel'zin</span>, <span class="highlight">Club Norwest</span>, 
                            les <span class="highlight">SSM</span>, les <span class="highlight">√©quipes mobiles</span>... 
                            Votre mission : les connecter, les amplifier, les faire conna√Ætre.
                        </p>
                        <p style="margin-top: 30px; font-style: italic; text-align: center; color: var(--primary);">
                            "Dans l'ombre, nous tissons la lumi√®re."
                        </p>
                    </div>
                </div>

                <div class="stats-panel">
                    <div class="stat-card">
                        <h4>Veilleurs actifs</h4>
                        <div class="stat-value" id="active-agents">147</div>
                        <div class="stat-label">agents en Belgique</div>
                        <div class="stat-bar">
                            <div class="stat-bar-fill" style="width: 14.7%;"></div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <h4>Missions compl√©t√©es</h4>
                        <div class="stat-value" id="missions-done">1,847</div>
                        <div class="stat-label">ce mois</div>
                        <div class="stat-bar">
                            <div class="stat-bar-fill" style="width: 61%;"></div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <h4>Liens cr√©√©s</h4>
                        <div class="stat-value" id="links-created">‚àû</div>
                        <div class="stat-label">et ce n'est que le d√©but</div>
                    </div>
                    <div class="stat-card">
                        <h4>Votre impact</h4>
                        <div class="stat-value" id="your-impact">0</div>
                        <div class="stat-label">personnes touch√©es</div>
                        <div class="stat-bar">
                            <div class="stat-bar-fill" id="impact-bar" style="width: 0%;"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- MISSIONS SECTION -->
        <section id="missions" class="section">
            <h2 class="section-title">MISSIONS ACTIVES</h2>
            <p class="section-subtitle">S√©lectionnez votre niveau d'engagement</p>

            <div class="missions-grid" id="missions-container">
                <!-- Missions g√©n√©r√©es par JS -->
            </div>
        </section>

        <!-- CIPHER SECTION -->
        <section id="cipher" class="section">
            <h2 class="section-title">CENTRE DE D√âCHIFFREMENT</h2>
            <p class="section-subtitle">D√©cryptez les messages du Cercle</p>

            <div class="cipher-container">
                <div class="cipher-panel">
                    <h3 class="cipher-title">üì° MESSAGE INTERCEPT√â</h3>
                    <div class="cipher-message" id="cipher-message">
                        YRWUH PLVVLRQ : WURXYHU XQ OLHX G'DFFXHLO SURFKH GH FKHC YRXV.
                        SUHPLHU SDV : UHFKHUFKHU "EDEHO'CLQ" RX "FOXE QRUZHVW".
                        OHV SRUWHV VRQW RXYHUWH. YRXV Q'HWHV SDV VHXO.
                    </div>
                    <input type="text" class="cipher-input" id="cipher-solution" placeholder="Entrez votre d√©chiffrement...">
                    <div class="cipher-result" id="cipher-result"></div>
                    <div class="cipher-tools">
                        <button class="cipher-tool" onclick="applyCipher('caesar', -3)">C√©sar -3</button>
                        <button class="cipher-tool" onclick="applyCipher('caesar', 3)">C√©sar +3</button>
                        <button class="cipher-tool" onclick="applyCipher('reverse')">Inverser</button>
                        <button class="cipher-tool" onclick="applyCipher('atbash')">Atbash</button>
                        <button class="cipher-tool" onclick="showHint()">üí° Indice</button>
                    </div>
                </div>

                <div class="cipher-panel">
                    <h3 class="cipher-title">üíª TERMINAL VEILLEUR</h3>
                    <div class="terminal" id="terminal">
                        <div class="terminal-line">
                            <span class="terminal-output">Syst√®me CERCLE v3.7.2 initialis√©</span>
                        </div>
                        <div class="terminal-line">
                            <span class="terminal-output">Tapez 'help' pour les commandes disponibles</span>
                        </div>
                        <div class="terminal-line">
                            <span class="terminal-prompt">veilleur@cercle:~$ </span>
                            <input type="text" class="terminal-input" id="terminal-input" onkeypress="handleTerminal(event)">
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- NETWORK SECTION -->
        <section id="network" class="section">
            <h2 class="section-title">CARTOGRAPHIE DU R√âSEAU</h2>
            <p class="section-subtitle">Les n≈ìuds de notre influence</p>

            <div class="network-container">
                <div class="network-map" id="network-map">
                    <!-- Nodes g√©n√©r√©s par JS -->
                </div>
                <div class="network-sidebar">
                    <div class="agent-card">
                        <div class="agent-avatar">üë§</div>
                        <div class="agent-name" id="profile-name">AGENT INCONNU</div>
                        <div class="agent-role">OBSERVATEUR</div>
                        <div class="agent-stats">
                            <div class="agent-stat">
                                <div class="agent-stat-value" id="profile-missions">0</div>
                                <div class="agent-stat-label">Missions</div>
                            </div>
                            <div class="agent-stat">
                                <div class="agent-stat-value" id="profile-impact">0</div>
                                <div class="agent-stat-label">Impact</div>
                            </div>
                        </div>
                    </div>
                    <div class="agent-card">
                        <h4 style="font-family: 'Share Tech Mono', monospace; font-size: 11px; margin-bottom: 15px; color: var(--primary);">STRUCTURES ALLI√âES</h4>
                        <div style="font-size: 12px; line-height: 2;">
                            <div>‚óà Babel'zin ‚Äî Auderghem</div>
                            <div>‚óà Club Norwest ‚Äî Jette</div>
                            <div>‚óà L'Autre Lieu ‚Äî Bruxelles</div>
                            <div>‚óà Espace 51 ‚Äî Centre</div>
                            <div>‚óà SSM Le Gr√®s ‚Äî Auderghem</div>
                            <div style="color: var(--primary); margin-top: 10px;">+ 82 autres...</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- MANIFESTO SECTION -->
        <section id="manifesto" class="section">
            <h2 class="section-title">LE MANIFESTE</h2>
            <p class="section-subtitle">Nos principes fondateurs</p>

            <div class="manifesto-content">
                <article class="manifesto-article">
                    <div class="manifesto-header">
                        <div class="manifesto-symbol">‚óà</div>
                        <h3 class="manifesto-title">LE MANIFESTE DES VEILLEURS</h3>
                        <p class="manifesto-subtitle">DANS L'OMBRE, POUR LA LUMI√àRE</p>
                    </div>
                    <div class="manifesto-body">
                        <p>
                            Nous sommes les Veilleurs. Nous observons l√† o√π les autres d√©tournent le regard.
                            Nous agissons l√† o√π l'inaction perp√©tue la souffrance. Nous croyons que 
                            <strong>chaque lien tiss√© est une victoire contre l'isolement</strong>.
                        </p>

                        <div class="manifesto-principle">
                            "La sant√© mentale n'est pas un tabou √† taire, mais un combat √† mener ensemble.
                            Chaque conversation ouverte est un acte de r√©sistance. Chaque main tendue est une r√©volution silencieuse."
                        </div>

                        <p>
                            Notre ennemi n'a pas de visage. C'est le silence qui √©touffe. C'est la honte qui isole.
                            C'est l'ignorance qui juge. C'est la solitude qui tue. Contre ces ombres, nous opposons
                            la lumi√®re de la connexion humaine.
                        </p>

                        <div class="manifesto-levels">
                            <div class="level-card">
                                <div class="level-icon">üî¨</div>
                                <div class="level-name">NIVEAU MICRO</div>
                                <div class="level-desc">
                                    L'individu au centre. Une conversation. Un sourire. Un message.
                                    Les plus petits gestes cr√©ent les plus grandes ondes.
                                </div>
                            </div>
                            <div class="level-card">
                                <div class="level-icon">üèòÔ∏è</div>
                                <div class="level-name">NIVEAU M√âSO</div>
                                <div class="level-desc">
                                    La communaut√© comme force. Quartiers, associations, lieux de vie.
                                    L√† o√π les liens se tissent au quotidien.
                                </div>
                            </div>
                            <div class="level-card">
                                <div class="level-icon">üåç</div>
                                <div class="level-name">NIVEAU MACRO</div>
                                <div class="level-desc">
                                    La soci√©t√© comme terrain. M√©dias, politiques, culture.
                                    Changer les repr√©sentations pour changer le monde.
                                </div>
                            </div>
                        </div>

                        <p>
                            Nous ne promettons pas de gu√©rir. Nous promettons d'√™tre pr√©sents.
                            Nous ne pr√©tendons pas avoir toutes les r√©ponses. Nous promettons de poser les bonnes questions.
                            Nous ne cherchons pas la gloire. Nous cherchons l'impact.
                        </p>

                        <div class="manifesto-principle">
                            "Il est aussi permis de ne rien dire, car ne rien dire ce n'est pas rien."
                            <br><small style="color: rgba(255,255,255,0.5);">‚Äî Babel'zin</small>
                        </div>

                        <p>
                            Si vous lisez ces lignes, vous √™tes d√©j√† des n√¥tres. Le Cercle n'a pas de fronti√®res,
                            pas de hi√©rarchie rigide, pas de dogme absolu. Seulement une conviction partag√©e :
                            <strong>personne ne devrait souffrir seul</strong>.
                        </p>

                        <p style="text-align: center; margin-top: 40px; font-family: 'Orbitron', sans-serif; color: var(--primary);">
                            ‚óà REJOIGNEZ LE CERCLE ‚óà<br>
                            <span style="font-size: 12px; font-family: 'Share Tech Mono', monospace;">
                                Le lien est notre arme. La bienveillance est notre force.
                            </span>
                        </p>
                    </div>
                </article>
            </div>
        </section>

        <!-- DROPS SECTION -->
        <section id="drops" class="section">
            <h2 class="section-title">DROPS INTELLIGENCE</h2>
            <p class="section-subtitle">Informations d√©classifi√©es</p>

            <div class="drops-timeline">
                <div class="drop-item">
                    <div class="drop-date">03.01.2025 ‚Äî 14:47:23 UTC</div>
                    <div class="drop-title">üìç NOUVEAU POINT D'ANCRAGE IDENTIFI√â</div>
                    <div class="drop-content">
                        Un nouveau lieu d'accueil vient d'√™tre cartographi√© dans notre r√©seau. 
                        <strong>Babel'zin</strong>, Chauss√©e de Wavre 1688, Auderghem. 
                        Contact: 0492/44.88.70. Horaires flexibles, accueil inconditionnel.
                        <br><br>
                        <em>Mission sugg√©r√©e : visiter le lieu, √©tablir un premier contact, 
                        rapporter vos observations.</em>
                    </div>
                    <div class="drop-attachment" onclick="downloadDrop('babelzin')">
                        üìé Fiche_Structure_Babelzin.pdf
                    </div>
                </div>

                <div class="drop-item">
                    <div class="drop-date">02.01.2025 ‚Äî 09:12:45 UTC</div>
                    <div class="drop-title">üìä DONN√âES SCIENSANO D√âCLASSIFI√âES</div>
                    <div class="drop-content">
                        Nouvelles statistiques alarmantes confirm√©es :<br>
                        ‚Ä¢ 1 Belge sur 5 souffre de troubles de sant√© mentale<br>
                        ‚Ä¢ 60% ressentent de la solitude<br>
                        ‚Ä¢ Les 18-29 ans sont les plus touch√©s<br>
                        ‚Ä¢ Tendance en hausse depuis la pand√©mie<br><br>
                        <em>Ces chiffres sont notre terrain d'op√©ration. Chaque action compte.</em>
                    </div>
                </div>

                <div class="drop-item">
                    <div class="drop-date">31.12.2024 ‚Äî 23:59:59 UTC</div>
                    <div class="drop-title">üîê MESSAGE DU CONSEIL ‚Äî NIVEAU OMEGA</div>
                    <div class="drop-content">
                        <span style="font-family: 'Share Tech Mono', monospace; color: var(--primary);">
                            "L'ann√©e qui s'ach√®ve a vu 1,847 missions accomplies. 147 nouveaux Veilleurs recrut√©s.
                            Un nombre incalculable de liens cr√©√©s dans l'ombre. L'Op√©ration LIEN entre dans sa phase 2.
                            Chaque agent compte. Chaque action r√©sonne. Le Cercle s'agrandit."
                        </span>
                    </div>
                </div>

                <div class="drop-item">
                    <div class="drop-date">28.12.2024 ‚Äî 16:30:00 UTC</div>
                    <div class="drop-title">üó∫Ô∏è CARTOGRAPHIE ‚Äî R√âFORME PSY 107</div>
                    <div class="drop-content">
                        La r√©forme Psy 107 a cr√©√© 22 r√©seaux couvrant la Belgique. 
                        5 fonctions cl√©s : pr√©vention, √©quipes mobiles crise, √©quipes longue dur√©e, 
                        r√©habilitation, hospitalisation.<br><br>
                        Ces structures sont nos alli√©es. Apprenez √† les conna√Ætre, √† les utiliser, √† les promouvoir.
                    </div>
                    <div class="drop-attachment" onclick="downloadDrop('psy107')">
                        üìé Guide_Reforme_Psy107.pdf
                    </div>
                </div>

                <div class="drop-item">
                    <div class="drop-date">25.12.2024 ‚Äî 00:00:01 UTC</div>
                    <div class="drop-title">üíú OP√âRATION SOLSTICE ‚Äî RAPPORT</div>
                    <div class="drop-content">
                        L'Op√©ration Solstice d'Hiver a mobilis√© 89 Veilleurs √† travers la Belgique.
                        Objectif : briser l'isolement des f√™tes.<br>
                        ‚Ä¢ 234 messages de soutien envoy√©s<br>
                        ‚Ä¢ 45 visites dans des lieux d'accueil<br>
                        ‚Ä¢ 12 √©v√©nements communautaires organis√©s<br><br>
                        <span style="color: var(--tertiary);">Statut : SUCC√àS</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- OMEGA SECTION (LOCKED) -->
        <section id="omega" class="section">
            <h2 class="section-title">NIVEAU OMEGA</h2>
            <p class="section-subtitle">Acc√®s restreint ‚Äî Niveau 5 requis</p>
            
            <div style="text-align: center; padding: 100px 20px;">
                <div style="font-size: 80px; margin-bottom: 30px; opacity: 0.3;">üîí</div>
                <p style="font-family: 'Share Tech Mono', monospace; color: var(--primary);">
                    Cette section est r√©serv√©e aux Veilleurs de niveau OMEGA.<br>
                    Compl√©tez davantage de missions pour d√©bloquer l'acc√®s.
                </p>
                <div style="margin-top: 30px;">
                    <div style="font-size: 12px; color: rgba(255,255,255,0.5);">Progression vers OMEGA</div>
                    <div class="stat-bar" style="max-width: 300px; margin: 10px auto;">
                        <div class="stat-bar-fill" id="omega-progress" style="width: 0%;"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- GLOBAL PROGRESS BAR -->
        <div class="global-progress">
            <span class="progress-label">OP√âRATION LIEN</span>
            <div class="progress-bar">
                <div class="progress-fill" id="global-progress-fill" style="width: 0%;"></div>
            </div>
            <span class="progress-percent" id="global-progress-percent">0%</span>
        </div>
    </div>

    <!-- NOTIFICATION -->
    <div class="notification" id="notification">
        <div class="notification-title" id="notification-title">NOTIFICATION</div>
        <div class="notification-text" id="notification-text"></div>
    </div>

    <!-- MODAL -->
    <div class="modal" id="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal()">√ó</button>
            <h3 class="modal-title" id="modal-title">TITRE</h3>
            <div id="modal-body"></div>
        </div>
    </div>

    <script>
        // ============================================================
        // LE CERCLE DES VEILLEURS ‚Äî ARG ENGINE
        // ============================================================

        // Game State
        let gameState = {
            accessGranted: false,
            agentName: 'AGENT INCONNU',
            level: 1,
            xp: 0,
            xpToNext: 1000,
            impact: 0,
            missionsCompleted: [],
            ciphersDecoded: [],
            secretsFound: [],
            unlockedSections: ['briefing', 'missions', 'cipher', 'network', 'manifesto', 'drops']
        };

        // Missions Database
        const missions = [
            // MICRO LEVEL
            {
                id: 'micro-001',
                level: 'micro',
                title: 'PREMIER CONTACT',
                code: 'CDV-M001',
                icon: 'üí¨',
                description: 'Engagez une conversation authentique avec quelqu\'un qui semble isol√©. Un coll√®gue, un voisin, un inconnu dans un caf√©.',
                objectives: [
                    'Identifier une personne potentiellement isol√©e',
                    'Engager une conversation de minimum 5 minutes',
                    '√âcouter sans juger',
                    'Proposer de revoir la personne (optionnel)'
                ],
                xp: 150,
                impact: 1,
                unlocked: true
            },
            {
                id: 'micro-002',
                level: 'micro',
                title: 'MESSAGE DANS LA NUIT',
                code: 'CDV-M002',
                icon: 'üì±',
                description: 'Envoyez un message de soutien √† quelqu\'un qui traverse une p√©riode difficile. Pas de conseil, juste de la pr√©sence.',
                objectives: [
                    'Identifier une personne en difficult√© dans votre entourage',
                    'R√©diger un message sinc√®re et non-intrusif',
                    'Envoyer le message',
                    'Rester disponible pour une r√©ponse'
                ],
                xp: 100,
                impact: 1,
                unlocked: true
            },
            {
                id: 'micro-003',
                level: 'micro',
                title: '√âCOUTE ACTIVE',
                code: 'CDV-M003',
                icon: 'üëÇ',
                description: 'Pratiquez l\'√©coute active pendant une journ√©e enti√®re. Pas de conseils, pas de jugements, juste √©couter.',
                objectives: [
                    'Choisir une journ√©e d√©di√©e',
                    'Pratiquer le silence attentif',
                    'Reformuler pour montrer la compr√©hension',
                    'Noter vos observations en fin de journ√©e'
                ],
                xp: 200,
                impact: 3,
                unlocked: true
            },
            {
                id: 'micro-004',
                level: 'micro',
                title: 'PARTAGE DE RESSOURCE',
                code: 'CDV-M004',
                icon: 'üìã',
                description: 'Partagez les coordonn√©es d\'un lieu d\'accueil ou d\'une ligne d\'√©coute avec quelqu\'un qui pourrait en avoir besoin.',
                objectives: [
                    'M√©moriser au moins 3 ressources (Babel\'zin, 107, 0800 32 123)',
                    'Identifier le bon moment pour partager',
                    'Partager l\'information de mani√®re naturelle',
                    'Proposer d\'accompagner si besoin'
                ],
                xp: 175,
                impact: 2,
                unlocked: true
            },
            // M√âSO LEVEL
            {
                id: 'meso-001',
                level: 'meso',
                title: 'RECONNAISSANCE TERRAIN',
                code: 'CDV-S001',
                icon: 'üó∫Ô∏è',
                description: 'Visitez un lieu d\'accueil de votre r√©gion. Observez, ressentez, rapportez.',
                objectives: [
                    'Localiser un lieu d\'accueil proche (Babel\'zin, Club Norwest...)',
                    'Planifier une visite',
                    'Passer au moins 1 heure sur place',
                    'R√©diger un rapport d\'observation'
                ],
                xp: 300,
                impact: 5,
                unlocked: true
            },
            {
                id: 'meso-002',
                level: 'meso',
                title: 'CR√âATION DE PONT',
                code: 'CDV-S002',
                icon: 'üåâ',
                description: 'Connectez deux personnes ou organisations qui pourraient s\'entraider.',
                objectives: [
                    'Identifier deux entit√©s compl√©mentaires',
                    'Contacter chaque partie',
                    'Faciliter la mise en relation',
                    'Suivre le r√©sultat de la connexion'
                ],
                xp: 400,
                impact: 10,
                unlocked: true
            },
            {
                id: 'meso-003',
                level: 'meso',
                title: '√âV√âNEMENT COMMUNAUTAIRE',
                code: 'CDV-S003',
                icon: 'üé≠',
                description: 'Organisez ou participez activement √† un √©v√©nement favorisant le lien social dans votre quartier.',
                objectives: [
                    'Choisir un format (caf√©-rencontre, atelier, marche...)',
                    'Mobiliser au moins 5 participants',
                    'Assurer un cadre bienveillant',
                    'Documenter l\'√©v√©nement'
                ],
                xp: 500,
                impact: 15,
                unlocked: true
            },
            {
                id: 'meso-004',
                level: 'meso',
                title: 'SENSIBILISATION LOCALE',
                code: 'CDV-S004',
                icon: 'üì¢',
                description: 'Organisez une session de sensibilisation sur la sant√© mentale dans une structure locale (√©cole, association, entreprise).',
                objectives: [
                    'Contacter une structure',
                    'Pr√©parer un contenu adapt√©',
                    'Animer la session (min. 30 min)',
                    'Distribuer des ressources'
                ],
                xp: 600,
                impact: 25,
                unlocked: false
            },
            // MACRO LEVEL
            {
                id: 'macro-001',
                level: 'macro',
                title: 'AMPLIFICATION DIGITALE',
                code: 'CDV-X001',
                icon: 'üì≤',
                description: 'Cr√©ez et partagez un contenu d√©stigmatisant sur les r√©seaux sociaux. T√©moignage, information, art...',
                objectives: [
                    'Choisir un angle original',
                    'Cr√©er un contenu de qualit√©',
                    'Publier sur au moins 2 plateformes',
                    'Engager la conversation'
                ],
                xp: 400,
                impact: 50,
                unlocked: true
            },
            {
                id: 'macro-002',
                level: 'macro',
                title: 'LETTRE OUVERTE',
                code: 'CDV-X002',
                icon: '‚úâÔ∏è',
                description: 'R√©digez une lettre √† un d√©cideur (politique, m√©dia, entreprise) pour d√©fendre la cause de la sant√© mentale.',
                objectives: [
                    'Identifier la cible pertinente',
                    'R√©diger une lettre argument√©e',
                    'Envoyer la lettre',
                    'Assurer un suivi'
                ],
                xp: 500,
                impact: 75,
                unlocked: false
            },
            {
                id: 'macro-003',
                level: 'macro',
                title: 'INFILTRATION M√âDIATIQUE',
                code: 'CDV-X003',
                icon: 'üì∫',
                description: 'Proposez un sujet sur la sant√© mentale √† un m√©dia local ou participez √† une √©mission/podcast.',
                objectives: [
                    'Identifier les m√©dias cibles',
                    'Pr√©parer un pitch',
                    'Contacter les r√©dactions',
                    'R√©aliser l\'intervention'
                ],
                xp: 750,
                impact: 100,
                unlocked: false
            },
            {
                id: 'macro-004',
                level: 'macro',
                title: 'COALITION',
                code: 'CDV-X004',
                icon: 'ü§ù',
                description: 'Cr√©ez ou rejoignez une coalition d\'acteurs travaillant sur la sant√© mentale dans votre r√©gion.',
                objectives: [
                    'Cartographier les acteurs existants',
                    'Initier des contacts',
                    'Organiser une premi√®re rencontre',
                    'D√©finir des objectifs communs'
                ],
                xp: 1000,
                impact: 200,
                unlocked: false
            }
        ];

        // Cipher Messages
        const cipherMessages = [
            {
                id: 'cipher-001',
                encrypted: 'YRWUH PLVVLRQ : WURXYHU XQ OLHX G\'DFFXHLO SURFKH GH FKHC YRXV. SUHPLHU SDV : UHFKHUFKHU "EDEHO\'CLQ" RX "FOXE QRUZHVW". OHV SRUWHV VRQW RXYHUWH. YRXV Q\'HWHV SDV VHXO.',
                decrypted: 'VOTRE MISSION : TROUVER UN LIEU D\'ACCUEIL PROCHE DE CHEZ VOUS. PREMIER PAS : RECHERCHER "BABEL\'ZIN" OU "CLUB NORWEST". LES PORTES SONT OUVERTE. VOUS N\'√äTES PAS SEUL.',
                method: 'caesar',
                shift: 3,
                reward: 250
            }
        ];

        // Network Nodes
        const networkNodes = [
            { id: 'babelzin', name: 'Babel\'zin', x: 70, y: 40, icon: 'üè†' },
            { id: 'norwest', name: 'Club Norwest', x: 30, y: 25, icon: 'üèòÔ∏è' },
            { id: 'legres', name: 'SSM Le Gr√®s', x: 75, y: 50, icon: 'üè•' },
            { id: 'autrelieu', name: 'L\'Autre Lieu', x: 45, y: 60, icon: 'üåø' },
            { id: 'espace51', name: 'Espace 51', x: 50, y: 35, icon: 'üé≠' },
            { id: 'mobile2a', name: '√âquipe 2A', x: 55, y: 75, icon: 'üöó' },
            { id: 'mobile2b', name: '√âquipe 2B', x: 25, y: 70, icon: 'üöê' },
            { id: 'psytoyens', name: 'Psytoyens', x: 85, y: 65, icon: 'üë•' },
            { id: 'cercle', name: 'LE CERCLE', x: 50, y: 50, icon: '‚óà' }
        ];

        // ============================================================
        // INITIALIZATION
        // ============================================================

        document.addEventListener('DOMContentLoaded', function() {
            initMatrix();
            loadGameState();
            setCurrentDate();
            
            // Check if already accessed
            if (gameState.accessGranted) {
                document.getElementById('intro-screen').classList.add('hidden');
                document.getElementById('main-app').classList.add('active');
                updateUI();
            }
        });

        function initMatrix() {
            const canvas = document.getElementById('matrix-bg');
            const ctx = canvas.getContext('2d');
            
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            
            const chars = '‚óàVEILLEUR01„Ç¢„Ç§„Ç¶„Ç®„Ç™'.split('');
            const fontSize = 14;
            const columns = Math.floor(canvas.width / fontSize);
            const drops = Array(columns).fill(1);
            
            function draw() {
                ctx.fillStyle = 'rgba(5, 5, 8, 0.05)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                ctx.fillStyle = 'rgba(139, 92, 246, 0.5)';
                ctx.font = `${fontSize}px monospace`;
                
                for (let i = 0; i < drops.length; i++) {
                    const char = chars[Math.floor(Math.random() * chars.length)];
                    ctx.fillText(char, i * fontSize, drops[i] * fontSize);
                    
                    if (drops[i] * fontSize > canvas.height && Math.random() > 0.975) {
                        drops[i] = 0;
                    }
                    drops[i]++;
                }
            }
            
            setInterval(draw, 50);
            
            window.addEventListener('resize', () => {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            });
        }

        function setCurrentDate() {
            const date = new Date();
            const formatted = date.toLocaleDateString('fr-BE', { 
                day: '2-digit', 
                month: '2-digit', 
                year: 'numeric' 
            });
            document.getElementById('current-date').textContent = formatted;
        }

        // ============================================================
        // ACCESS CONTROL
        // ============================================================

        function checkAccess() {
            const code = document.getElementById('access-code').value.toLowerCase().trim();
            const validCodes = ['lien', 'liens', 'le lien', 'connexion', 'veilleur', 'cercle'];
            
            if (validCodes.includes(code)) {
                gameState.accessGranted = true;
                saveGameState();
                
                document.getElementById('intro-screen').classList.add('hidden');
                setTimeout(() => {
                    document.getElementById('main-app').classList.add('active');
                    renderMissions();
                    renderNetwork();
                    updateUI();
                    showNotification('BIENVENUE, VEILLEUR', 'Acc√®s autoris√©. Votre mission commence maintenant.', 'success');
                }, 1000);
            } else {
                document.getElementById('access-code').style.borderColor = '#ef4444';
                document.getElementById('access-code').style.animation = 'glitch 0.3s';
                setTimeout(() => {
                    document.getElementById('access-code').style.borderColor = '';
                    document.getElementById('access-code').style.animation = '';
                }, 300);
            }
        }

        // ============================================================
        // NAVIGATION
        // ============================================================

        function showSection(sectionId) {
            // Check if locked
            if (sectionId === 'omega' && gameState.level < 5) {
                showNotification('ACC√àS REFUS√â', 'Niveau OMEGA requis. Continuez vos missions.', 'warning');
                return;
            }
            
            // Hide all sections
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            
            // Show selected section
            document.getElementById(sectionId).classList.add('active');
            event.target.classList.add('active');
        }

        // ============================================================
        // MISSIONS
        // ============================================================

        function renderMissions() {
            const container = document.getElementById('missions-container');
            container.innerHTML = '';
            
            missions.forEach(mission => {
                const isCompleted = gameState.missionsCompleted.includes(mission.id);
                const isLocked = !mission.unlocked && gameState.level < 2;
                
                const card = document.createElement('div');
                card.className = `mission-card ${isCompleted ? 'completed' : ''} ${isLocked ? 'locked' : ''}`;
                card.innerHTML = `
                    <div class="mission-level ${mission.level}">${mission.level.toUpperCase()}</div>
                    <div class="mission-header">
                        <div class="mission-icon">${mission.icon}</div>
                        <div>
                            <div class="mission-title">${mission.title}</div>
                            <div class="mission-code">${mission.code}</div>
                        </div>
                    </div>
                    <div class="mission-desc">${mission.description}</div>
                    <div class="mission-objectives">
                        <h5>OBJECTIFS</h5>
                        ${mission.objectives.map((obj, i) => `
                            <div class="objective">
                                <div class="objective-check ${isCompleted ? 'checked' : ''}" 
                                     onclick="toggleObjective('${mission.id}', ${i}, event)">
                                    ${isCompleted ? '‚úì' : ''}
                                </div>
                                <span>${obj}</span>
                            </div>
                        `).join('')}
                    </div>
                    <div class="mission-reward">
                        <span class="reward-xp">+${mission.xp} XP | Impact: +${mission.impact}</span>
                        <button class="mission-btn ${isCompleted ? 'complete' : ''}" 
                                onclick="completeMission('${mission.id}')"
                                ${isLocked ? 'disabled' : ''}>
                            ${isCompleted ? 'ACCOMPLIE' : isLocked ? 'üîí VERROUILL√â' : 'VALIDER'}
                        </button>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        function toggleObjective(missionId, index, event) {
            event.stopPropagation();
            const check = event.target;
            check.classList.toggle('checked');
            check.textContent = check.classList.contains('checked') ? '‚úì' : '';
        }

        function completeMission(missionId) {
            if (gameState.missionsCompleted.includes(missionId)) return;
            
            const mission = missions.find(m => m.id === missionId);
            if (!mission) return;
            
            gameState.missionsCompleted.push(missionId);
            gameState.xp += mission.xp;
            gameState.impact += mission.impact;
            
            // Check level up
            checkLevelUp();
            
            // Save and update
            saveGameState();
            updateUI();
            renderMissions();
            
            showNotification('MISSION ACCOMPLIE', `+${mission.xp} XP | Impact: +${mission.impact}`, 'success');
        }

        function checkLevelUp() {
            const levels = [
                { level: 1, xp: 0, title: 'OBSERVATEUR' },
                { level: 2, xp: 1000, title: 'VEILLEUR' },
                { level: 3, xp: 3000, title: '√âCLAIREUR' },
                { level: 4, xp: 6000, title: 'SENTINELLE' },
                { level: 5, xp: 10000, title: 'OMEGA' }
            ];
            
            for (let i = levels.length - 1; i >= 0; i--) {
                if (gameState.xp >= levels[i].xp) {
                    if (gameState.level < levels[i].level) {
                        gameState.level = levels[i].level;
                        showModal('NIVEAU SUP√âRIEUR', `
                            <div style="text-align: center;">
                                <div style="font-size: 60px; margin-bottom: 20px;">üéñÔ∏è</div>
                                <p style="font-family: 'Orbitron', sans-serif; font-size: 24px; margin-bottom: 10px;">
                                    NIVEAU ${levels[i].level}
                                </p>
                                <p style="color: var(--primary); font-size: 18px; margin-bottom: 20px;">
                                    ${levels[i].title}
                                </p>
                                <p style="color: rgba(255,255,255,0.7);">
                                    Nouvelles missions d√©bloqu√©es. Le Cercle compte sur vous.
                                </p>
                            </div>
                        `);
                        
                        // Unlock new missions
                        missions.forEach(m => {
                            if (!m.unlocked && gameState.level >= 2) {
                                m.unlocked = true;
                            }
                        });
                    }
                    break;
                }
            }
        }

        // ============================================================
        // CIPHER
        // ============================================================

        function applyCipher(method, shift) {
            const message = document.getElementById('cipher-message').textContent;
            let result = '';
            
            switch(method) {
                case 'caesar':
                    result = caesarCipher(message, shift);
                    break;
                case 'reverse':
                    result = message.split('').reverse().join('');
                    break;
                case 'atbash':
                    result = atbashCipher(message);
                    break;
            }
            
            document.getElementById('cipher-message').textContent = result;
            
            // Check if decoded
            const currentCipher = cipherMessages[0];
            if (result.includes('VOTRE MISSION')) {
                if (!gameState.ciphersDecoded.includes(currentCipher.id)) {
                    gameState.ciphersDecoded.push(currentCipher.id);
                    gameState.xp += currentCipher.reward;
                    saveGameState();
                    updateUI();
                    
                    document.getElementById('cipher-result').className = 'cipher-result success';
                    document.getElementById('cipher-result').textContent = 
                        `‚úì MESSAGE D√âCHIFFR√â ! +${currentCipher.reward} XP`;
                }
            }
        }

        function caesarCipher(text, shift) {
            return text.split('').map(char => {
                if (char.match(/[A-Z]/)) {
                    return String.fromCharCode(((char.charCodeAt(0) - 65 + shift + 26) % 26) + 65);
                }
                return char;
            }).join('');
        }

        function atbashCipher(text) {
            return text.split('').map(char => {
                if (char.match(/[A-Z]/)) {
                    return String.fromCharCode(90 - (char.charCodeAt(0) - 65));
                }
                return char;
            }).join('');
        }

        function showHint() {
            showNotification('INDICE', 'Jules C√©sar utilisait ce chiffrement. Essayez de reculer dans l\'alphabet...', 'warning');
        }

        // ============================================================
        // TERMINAL
        // ============================================================

        function handleTerminal(event) {
            if (event.key !== 'Enter') return;
            
            const input = document.getElementById('terminal-input');
            const command = input.value.trim().toLowerCase();
            const terminal = document.getElementById('terminal');
            
            // Add command to history
            const cmdLine = document.createElement('div');
            cmdLine.className = 'terminal-line';
            cmdLine.innerHTML = `<span class="terminal-prompt">veilleur@cercle:~$ </span><span>${input.value}</span>`;
            terminal.insertBefore(cmdLine, terminal.lastElementChild);
            
            // Process command
            let output = processCommand(command);
            
            const outLine = document.createElement('div');
            outLine.className = 'terminal-line';
            outLine.innerHTML = `<span class="${output.class}">${output.text}</span>`;
            terminal.insertBefore(outLine, terminal.lastElementChild);
            
            input.value = '';
            terminal.scrollTop = terminal.scrollHeight;
        }

        function processCommand(cmd) {
            const commands = {
                'help': {
                    text: `Commandes disponibles:
    help        - Affiche cette aide
    status      - Affiche votre statut
    missions    - Liste vos missions
    locate      - Localise les structures proches
    contact     - Num√©ros d'urgence
    clear       - Efface le terminal
    omega       - ???`,
                    class: 'terminal-output'
                },
                'status': {
                    text: `Agent: ${gameState.agentName}
Niveau: ${gameState.level}
XP: ${gameState.xp}
Impact: ${gameState.impact}
Missions: ${gameState.missionsCompleted.length}/${missions.length}`,
                    class: 'terminal-success'
                },
                'missions': {
                    text: `Missions compl√©t√©es: ${gameState.missionsCompleted.length}
Missions disponibles: ${missions.filter(m => m.unlocked && !gameState.missionsCompleted.includes(m.id)).length}
Missions verrouill√©es: ${missions.filter(m => !m.unlocked).length}`,
                    class: 'terminal-output'
                },
                'locate': {
                    text: `Structures √† proximit√©:
> Babel'zin ‚Äî Chauss√©e de Wavre 1688, Auderghem ‚Äî 0492/44.88.70
> Club Norwest ‚Äî Jette ‚Äî clubnorwest.be
> SSM Le Gr√®s ‚Äî Auderghem ‚Äî 02/660.50.73
> L'Autre Lieu ‚Äî Bruxelles ‚Äî autrelieu.be`,
                    class: 'terminal-success'
                },
                'contact': {
                    text: `NUM√âROS D'URGENCE:
> Centre Pr√©vention Suicide: 0800 32 123 (24h/24)
> T√©l√©-Accueil: 107 (24h/24)
> Urgences: 112
> √âcoute Enfants: 103`,
                    class: 'terminal-success'
                },
                'clear': {
                    text: 'CLEAR',
                    class: 'terminal-output',
                    action: 'clear'
                },
                'omega': {
                    text: gameState.level >= 5 
                        ? 'ACC√àS OMEGA AUTORIS√â. Bienvenue dans le cercle int√©rieur.'
                        : 'ACC√àS REFUS√â. Niveau insuffisant.',
                    class: gameState.level >= 5 ? 'terminal-success' : 'terminal-error'
                }
            };
            
            if (cmd === 'clear') {
                const terminal = document.getElementById('terminal');
                terminal.innerHTML = `
                    <div class="terminal-line"><span class="terminal-output">Terminal effac√©.</span></div>
                    <div class="terminal-line">
                        <span class="terminal-prompt">veilleur@cercle:~$ </span>
                        <input type="text" class="terminal-input" id="terminal-input" onkeypress="handleTerminal(event)">
                    </div>
                `;
                return { text: '', class: '' };
            }
            
            return commands[cmd] || { text: `Commande inconnue: ${cmd}. Tapez 'help' pour l'aide.`, class: 'terminal-error' };
        }

        // ============================================================
        // NETWORK
        // ============================================================

        function renderNetwork() {
            const map = document.getElementById('network-map');
            
            // Clear existing nodes
            map.querySelectorAll('.network-node, .network-line').forEach(el => el.remove());
            
            // Add lines first
            const centerNode = networkNodes.find(n => n.id === 'cercle');
            networkNodes.forEach(node => {
                if (node.id !== 'cercle') {
                    const line = document.createElement('div');
                    line.className = 'network-line';
                    
                    const dx = node.x - centerNode.x;
                    const dy = node.y - centerNode.y;
                    const length = Math.sqrt(dx*dx + dy*dy);
                    const angle = Math.atan2(dy, dx) * 180 / Math.PI;
                    
                    line.style.left = `${centerNode.x}%`;
                    line.style.top = `${centerNode.y}%`;
                    line.style.width = `${length}%`;
                    line.style.transform = `rotate(${angle}deg)`;
                    
                    map.appendChild(line);
                }
            });
            
            // Add nodes
            networkNodes.forEach(node => {
                const nodeEl = document.createElement('div');
                nodeEl.className = `network-node ${node.id === 'cercle' ? 'active' : ''}`;
                nodeEl.style.left = `${node.x}%`;
                nodeEl.style.top = `${node.y}%`;
                nodeEl.setAttribute('data-name', node.name);
                nodeEl.textContent = node.icon;
                nodeEl.onclick = () => showNodeInfo(node);
                map.appendChild(nodeEl);
            });
        }

        function showNodeInfo(node) {
            const info = {
                'babelzin': `
                    <p><strong>Type:</strong> Lieu d'accueil</p>
                    <p><strong>Adresse:</strong> Chauss√©e de Wavre 1688, 1160 Auderghem</p>
                    <p><strong>Contact:</strong> 0492/44.88.70</p>
                    <p><strong>Description:</strong> Espace de liens pour tous les "zinnekes" en recherche de connexion.</p>
                    <p><strong>Horaires:</strong> Lun 10h-16h, Mar 14h-20h, Mer 11h-17h, Jeu 10h-16h, Ven 14h-20h, Dim 14h-17h</p>
                `,
                'norwest': `
                    <p><strong>Type:</strong> Club d'accueil</p>
                    <p><strong>Localisation:</strong> Jette</p>
                    <p><strong>Site:</strong> clubnorwest.be</p>
                    <p><strong>Description:</strong> Lieu ouvert √† tous, n√© de l'initiative de 16 institutions du Nord-Ouest bruxellois.</p>
                `,
                'cercle': `
                    <p style="text-align: center; font-size: 40px; margin-bottom: 20px;">‚óà</p>
                    <p style="text-align: center; font-family: 'Orbitron', sans-serif; color: var(--primary);">
                        LE CERCLE DES VEILLEURS
                    </p>
                    <p style="text-align: center; margin-top: 15px;">
                        Le centre du r√©seau. L√† o√π tout converge. L√† d'o√π tout part.
                    </p>
                `
            };
            
            showModal(node.name, info[node.id] || `<p>N≈ìud du r√©seau: ${node.name}</p>`);
        }

        // ============================================================
        // UI UPDATES
        // ============================================================

        function updateUI() {
            // Level and XP
            const levels = [
                { level: 1, title: 'OBSERVATEUR', xpNext: 1000 },
                { level: 2, title: 'VEILLEUR', xpNext: 3000 },
                { level: 3, title: '√âCLAIREUR', xpNext: 6000 },
                { level: 4, title: 'SENTINELLE', xpNext: 10000 },
                { level: 5, title: 'OMEGA', xpNext: 999999 }
            ];
            
            const currentLevel = levels[gameState.level - 1];
            document.getElementById('agent-level').textContent = `NIVEAU ${gameState.level} - ${currentLevel.title}`;
            document.getElementById('agent-xp').textContent = `XP: ${gameState.xp}/${currentLevel.xpNext}`;
            
            // Impact
            document.getElementById('your-impact').textContent = gameState.impact;
            document.getElementById('impact-bar').style.width = `${Math.min(100, gameState.impact)}%`;
            
            // Profile
            document.getElementById('profile-missions').textContent = gameState.missionsCompleted.length;
            document.getElementById('profile-impact').textContent = gameState.impact;
            
            // Global progress
            const totalXP = 10000;
            const progress = Math.min(100, (gameState.xp / totalXP) * 100);
            document.getElementById('global-progress-fill').style.width = `${progress}%`;
            document.getElementById('global-progress-percent').textContent = `${progress.toFixed(1)}%`;
            
            // Omega progress
            document.getElementById('omega-progress').style.width = `${(gameState.level / 5) * 100}%`;
            
            // Unlock omega if level 5
            if (gameState.level >= 5) {
                document.querySelector('.nav-btn.locked').classList.remove('locked');
                document.querySelector('.nav-btn.locked .lock-icon').textContent = 'üîì';
            }
        }

        // ============================================================
        // UTILITIES
        // ============================================================

        function revealText(element) {
            element.classList.add('revealed');
            
            if (!gameState.secretsFound.includes(element.textContent)) {
                gameState.secretsFound.push(element.textContent);
                gameState.xp += 25;
                saveGameState();
                updateUI();
                showNotification('SECRET D√âCOUVERT', '+25 XP', 'success');
            }
        }

        function showNotification(title, text, type = '') {
            const notif = document.getElementById('notification');
            notif.className = `notification active ${type}`;
            document.getElementById('notification-title').textContent = title;
            document.getElementById('notification-text').textContent = text;
            
            setTimeout(() => {
                notif.classList.remove('active');
            }, 4000);
        }

        function showModal(title, content) {
            document.getElementById('modal-title').textContent = title;
            document.getElementById('modal-body').innerHTML = content;
            document.getElementById('modal').classList.add('active');
        }

        function closeModal() {
            document.getElementById('modal').classList.remove('active');
        }

        function downloadDrop(id) {
            showNotification('T√âL√âCHARGEMENT', 'Document d√©classifi√© en cours de t√©l√©chargement...', 'success');
            // In real ARG, this would trigger actual file download
        }

        // ============================================================
        // PERSISTENCE
        // ============================================================

        function saveGameState() {
            localStorage.setItem('cercleDesVeilleurs', JSON.stringify(gameState));
        }

        function loadGameState() {
            const saved = localStorage.getItem('cercleDesVeilleurs');
            if (saved) {
                gameState = { ...gameState, ...JSON.parse(saved) };
            }
        }

        // ============================================================
        // EASTER EGGS
        // ============================================================

        // Konami Code
        let konamiSequence = [];
        const konamiCode = [38, 38, 40, 40, 37, 39, 37, 39, 66, 65];
        
        document.addEventListener('keydown', (e) => {
            konamiSequence.push(e.keyCode);
            konamiSequence = konamiSequence.slice(-10);
            
            if (konamiSequence.join(',') === konamiCode.join(',')) {
                gameState.xp += 500;
                saveGameState();
                updateUI();
                showModal('üéÆ EASTER EGG', `
                    <div style="text-align: center;">
                        <p style="font-size: 40px; margin-bottom: 20px;">‚óà</p>
                        <p>Le code Konami... Un classique.</p>
                        <p style="color: var(--tertiary); margin-top: 15px;">+500 XP</p>
                        <p style="margin-top: 20px; font-style: italic; color: rgba(255,255,255,0.5);">
                            "Les vrais savent."
                        </p>
                    </div>
                `);
            }
        });

        // Close modal on escape
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') closeModal();
        });

        // Close modal on outside click
        document.getElementById('modal').addEventListener('click', (e) => {
            if (e.target.id === 'modal') closeModal();
        });
    </script>
</body>
</html>
