<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ROLEX ‚Äì War Room Citoyenne</title>
  <meta name="description" content="Parcours ludique r√©tro-geek dystopico-politique. Fork¬∑Hack¬∑Spread. Projet ouaisfieu.">
  <meta name="theme-color" content="#020617">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="manifest" href="manifest.json">
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>‚ö°</text></svg>">
  <style>
    :root{--bg:#020617;--card:#020617;--accent:#22c55e;--accent2:#38bdf8;--accent3:#f97316;--accent4:#a855f7;--text:#e5e7eb;--muted:#9ca3af;--border:rgba(148,163,184,0.6);--font-main:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;--font-mono:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;--radius-xl:18px;--shadow-soft:0 18px 40px rgba(0,0,0,0.95)}
    *{box-sizing:border-box;margin:0;padding:0}
    body{min-height:100vh;min-height:100dvh;font-family:var(--font-main);background:radial-gradient(circle at 0 0,rgba(56,189,248,0.26),transparent 55%),radial-gradient(circle at 100% 100%,rgba(34,197,94,0.26),transparent 55%),var(--bg);color:var(--text);display:flex;flex-direction:column;overflow-x:hidden}
    body::before{content:"";position:fixed;inset:0;pointer-events:none;background-image:linear-gradient(rgba(15,23,42,0.25) 1px,transparent 1px);background-size:100% 2px;mix-blend-mode:soft-light;opacity:0.7;z-index:1}
    header{position:sticky;top:0;z-index:10;backdrop-filter:blur(14px);background:radial-gradient(circle at 0 0,rgba(56,189,248,0.3),transparent 60%),rgba(3,7,18,0.96);border-bottom:1px solid rgba(30,64,175,0.8);padding:8px 14px;display:flex;align-items:center;justify-content:space-between;gap:10px;box-shadow:0 16px 40px rgba(0,0,0,0.95)}
    .header-left{display:flex;align-items:center;gap:8px}
    .logo-frame{width:46px;height:46px;border-radius:16px;padding:2px;background:conic-gradient(from 180deg,#22c55e,#38bdf8,#f97316,#a855f7,#22c55e);box-shadow:0 0 0 1px #020617,0 0 26px rgba(56,189,248,0.9);flex-shrink:0}
    .logo-inner{width:100%;height:100%;border-radius:14px;background:radial-gradient(circle at 30% 20%,#0f172a,#020617);display:flex;align-items:center;justify-content:center;font-family:var(--font-mono);font-size:0.9rem;font-weight:700;letter-spacing:0.08em;color:#bbf7d0}
    .header-titles{display:flex;flex-direction:column;gap:2px}
    .title-main{font-size:1.05rem;letter-spacing:0.14em;text-transform:uppercase;font-weight:600}
    .title-sub{font-size:0.8rem;color:var(--muted);max-width:360px}
    .header-right{text-align:right;font-size:0.78rem;color:var(--muted);max-width:280px}
    .header-right strong{color:#e5e7eb}
    .mobile-tabs{display:none;position:sticky;top:64px;z-index:9;background:rgba(3,7,18,0.96);backdrop-filter:blur(14px);border-bottom:1px solid rgba(30,64,175,0.5)}
    .mobile-tabs-inner{display:flex;overflow-x:auto;-webkit-overflow-scrolling:touch;scrollbar-width:none}
    .mobile-tabs-inner::-webkit-scrollbar{display:none}
    .mtab{flex:1;min-width:0;padding:8px 6px;font-family:var(--font-mono);font-size:0.68rem;text-transform:uppercase;letter-spacing:0.12em;color:var(--muted);background:none;border:none;border-bottom:2px solid transparent;cursor:pointer;text-align:center;white-space:nowrap;transition:all 0.15s}
    .mtab.active{color:var(--accent);border-bottom-color:var(--accent)}
    main{flex:1;padding:12px;position:relative;z-index:2;display:grid;grid-template-columns:minmax(0,1.4fr) minmax(0,2fr) minmax(0,1.2fr);gap:10px}
    @media(max-width:1100px){main{grid-template-columns:minmax(0,1.2fr) minmax(0,1.8fr);grid-template-rows:auto auto}.side-panel{grid-column:1/-1}}
    @media(max-width:840px){.mobile-tabs{display:block}main{grid-template-columns:1fr;grid-template-rows:auto;padding:8px;gap:8px}main>section{display:none}main>section.mob-visible{display:flex}header{flex-direction:column;align-items:flex-start}.header-right{text-align:left;max-width:none}}
    .panel{background:rgba(3,7,18,0.98);border-radius:var(--radius-xl);border:1px solid var(--border);box-shadow:var(--shadow-soft);padding:10px 10px 11px;position:relative;overflow:hidden;font-size:0.82rem}
    .panel::before{content:"";position:absolute;inset:0;pointer-events:none;background:radial-gradient(circle at 0 0,rgba(56,189,248,0.3),transparent 60%),radial-gradient(circle at 100% 100%,rgba(168,85,247,0.22),transparent 60%);mix-blend-mode:soft-light;opacity:0.7}
    .panel-inner{position:relative;z-index:2;height:100%;display:flex;flex-direction:column;gap:6px}
    .panel h2{font-size:0.96rem;margin-bottom:2px}
    .muted{color:var(--muted);font-size:0.8rem}
    .search-row{margin-top:4px;display:flex;flex-wrap:wrap;gap:6px;align-items:center}
    input[type="search"]{border-radius:999px;border:1px solid rgba(51,65,85,0.98);background:rgba(15,23,42,0.98);color:var(--text);font-size:0.8rem;padding:5px 9px;font-family:var(--font-main);outline:none;min-width:0;flex:1}
    input[type="search"]::placeholder{color:#6b7280}
    select{border-radius:999px;border:1px solid rgba(51,65,85,0.98);background:rgba(15,23,42,0.98);color:var(--text);font-size:0.8rem;padding:4px 7px;font-family:var(--font-main);outline:none}
    .badge-small{border-radius:999px;border:1px solid rgba(148,163,184,0.7);padding:2px 7px;font-size:0.74rem;color:var(--muted);font-family:var(--font-mono)}
    .modules-list{margin-top:6px;border-radius:13px;border:1px solid rgba(55,65,81,0.98);background:#020617;padding:5px 5px 6px;flex:1;overflow:hidden;display:flex;flex-direction:column;gap:4px}
    .modules-scroll{overflow-y:auto;max-height:480px;padding-right:3px}
    @media(max-width:840px){.modules-scroll{max-height:none}}
    .group-title{font-size:0.74rem;color:var(--muted);text-transform:uppercase;letter-spacing:0.16em;margin:4px 4px 3px;font-family:var(--font-mono)}
    .module-item{border-radius:11px;border:1px solid rgba(55,65,81,0.95);background:rgba(15,23,42,0.98);padding:5px 7px;font-size:0.8rem;margin-bottom:3px;cursor:pointer;display:flex;justify-content:space-between;gap:6px;align-items:center;transition:background 0.15s,border-color 0.15s,transform 0.15s,box-shadow 0.15s}
    .module-item:hover{background:rgba(15,23,42,1);border-color:rgba(148,163,184,0.9);transform:translateY(-1px);box-shadow:0 8px 18px rgba(0,0,0,0.9)}
    .module-item.active{background:rgba(22,163,74,0.18);border-color:rgba(34,197,94,0.9);box-shadow:0 10px 24px rgba(0,0,0,0.95)}
    .module-main{display:flex;flex-direction:column;gap:2px;min-width:0}
    .module-title{font-size:0.84rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .module-sub{font-size:0.75rem;color:var(--muted)}
    .module-file{font-family:var(--font-mono);font-size:0.7rem;color:#9ca3af;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:130px}
    .module-kind{font-size:0.72rem;padding:1px 6px;border-radius:999px;border:1px solid rgba(75,85,99,0.9);text-transform:lowercase;white-space:nowrap}
    .kind-base{border-color:rgba(34,197,94,0.9);color:#bbf7d0}.kind-brol{border-color:rgba(56,189,248,0.9);color:#bae6fd}.kind-univ{border-color:rgba(168,85,247,0.9);color:#e9d5ff}.kind-intra{border-color:rgba(249,115,22,0.9);color:#fed7aa}.kind-ia{border-color:rgba(248,113,113,0.9);color:#fecaca}.kind-meta{border-color:rgba(148,163,184,0.9);color:#e5e7eb}.kind-dikw{border-color:rgba(234,179,8,0.9);color:#fef08a}
    .viewer-panel{background:rgba(3,7,18,0.98);border-radius:var(--radius-xl);border:1px solid var(--border);box-shadow:var(--shadow-soft);padding:10px 10px 11px;position:relative;overflow:hidden;display:flex;flex-direction:column;gap:6px}
    .viewer-panel::before{content:"";position:absolute;inset:0;pointer-events:none;background:radial-gradient(circle at 50% 0,rgba(56,189,248,0.3),transparent 60%),radial-gradient(circle at 100% 100%,rgba(34,197,94,0.2),transparent 60%);mix-blend-mode:soft-light;opacity:0.7}
    .viewer-inner{position:relative;z-index:2;display:flex;flex-direction:column;gap:6px;height:100%}
    .viewer-header{display:flex;justify-content:space-between;align-items:baseline;gap:6px;flex-wrap:wrap}
    .viewer-title-block{display:flex;flex-direction:column;gap:2px;min-width:0}
    .viewer-title{font-size:0.96rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .viewer-subtitle{font-size:0.78rem;color:var(--muted)}
    .viewer-badges{display:flex;flex-wrap:wrap;gap:4px;justify-content:flex-end}
    .viewer-badge{border-radius:999px;border:1px solid rgba(148,163,184,0.9);padding:2px 7px;font-size:0.74rem;font-family:var(--font-mono);color:var(--muted);display:inline-flex;align-items:center;gap:4px}
    .viewer-dot{width:7px;height:7px;border-radius:999px;background:#22c55e;box-shadow:0 0 8px rgba(34,197,94,0.95)}
    .viewer-body{border-radius:13px;border:1px solid rgba(55,65,81,0.98);background:#020617;flex:1;display:flex;flex-direction:column;overflow:hidden;min-height:200px}
    .viewer-iframe-wrapper{flex:1;min-height:300px;border-bottom:1px solid rgba(31,41,55,0.98);background:#020617;overflow:hidden}
    @media(max-width:840px){.viewer-iframe-wrapper{min-height:55vh}}
    #viewerFrame{width:100%;height:100%;border:none;border-radius:11px 11px 0 0;background:#020617}
    .viewer-info{padding:5px 7px;font-size:0.78rem;color:var(--muted);display:flex;justify-content:space-between;gap:6px;flex-wrap:wrap;align-items:center}
    .viewer-file{font-family:var(--font-mono);font-size:0.74rem;color:#9ca3af;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:260px}
    .btn-open{border-radius:999px;border:1px solid rgba(56,189,248,0.9);background:rgba(15,23,42,0.98);color:#e0f2fe;font-size:0.76rem;padding:3px 8px;cursor:pointer;font-family:var(--font-mono);text-decoration:none;transition:all 0.15s}
    .btn-open:hover{background:rgba(15,23,42,1);box-shadow:0 8px 20px rgba(0,0,0,0.95)}
    .side-panel{background:rgba(3,7,18,0.98);border-radius:var(--radius-xl);border:1px solid var(--border);box-shadow:var(--shadow-soft);padding:10px 10px 11px;position:relative;overflow:hidden;display:flex;flex-direction:column;gap:7px;font-size:0.8rem}
    .side-panel::before{content:"";position:absolute;inset:0;pointer-events:none;background:radial-gradient(circle at 100% 0,rgba(56,189,248,0.3),transparent 60%),radial-gradient(circle at 0 100%,rgba(234,179,8,0.2),transparent 60%);mix-blend-mode:soft-light;opacity:0.7}
    .side-inner{position:relative;z-index:2;display:flex;flex-direction:column;gap:7px;height:100%}
    .side-section h2{font-size:0.9rem;margin-bottom:3px}
    .tiny{font-size:0.74rem;color:var(--muted)}
    .embed-row{display:flex;flex-wrap:wrap;gap:5px;margin-top:4px}
    .embed-btn{border-radius:999px;border:1px solid rgba(55,65,81,0.98);background:#020617;color:#e5e7eb;font-size:0.76rem;padding:3px 7px;cursor:pointer;display:inline-flex;align-items:center;gap:4px;font-family:var(--font-mono);transition:background 0.15s,border-color 0.15s,transform 0.15s}
    .embed-btn span.icon{font-size:0.9rem}
    .embed-btn:hover{background:rgba(15,23,42,1);border-color:rgba(148,163,184,0.9);transform:translateY(-1px);box-shadow:0 8px 20px rgba(0,0,0,0.9)}
    .howto-box{border-radius:12px;border:1px solid rgba(55,65,81,0.98);background:#020617;padding:6px 7px;font-size:0.78rem;line-height:1.5}
    .howto-box code{font-family:var(--font-mono);font-size:0.76rem;background:rgba(15,23,42,0.95);padding:1px 4px;border-radius:4px}
    .level-nav{display:flex;flex-wrap:wrap;gap:4px;margin-top:6px}
    .level-btn{border-radius:999px;padding:3px 8px;font-family:var(--font-mono);font-size:0.7rem;cursor:pointer;border:1px solid rgba(55,65,81,0.98);background:#020617;color:var(--muted);text-decoration:none;display:inline-flex;align-items:center;gap:3px;transition:all 0.15s}
    .level-btn:hover,.level-btn.active{border-color:rgba(34,197,94,0.9);color:#bbf7d0;background:rgba(22,163,74,0.12)}
    .level-btn .ldot{width:6px;height:6px;border-radius:50%;background:var(--accent);box-shadow:0 0 6px rgba(34,197,94,0.7)}
    footer{padding:6px 12px 8px;font-size:0.74rem;color:var(--muted);border-top:1px solid rgba(30,64,175,0.7);background:rgba(3,7,18,0.98);display:flex;justify-content:space-between;gap:6px;flex-wrap:wrap;position:relative;z-index:2}
    footer a{color:var(--accent2);text-decoration:none}footer a:hover{text-decoration:underline}
    @media(max-width:720px){footer{flex-direction:column}}
    .modal-overlay{display:none;position:fixed;inset:0;z-index:1000;background:rgba(0,0,0,0.8);backdrop-filter:blur(6px)}
    .modal-overlay.open{display:flex;flex-direction:column}
    .modal-bar{padding:8px 12px;display:flex;justify-content:space-between;align-items:center;gap:6px;background:rgba(3,7,18,0.98);border-bottom:1px solid rgba(30,64,175,0.8)}
    .modal-bar-title{font-size:0.84rem;font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex:1}
    .modal-bar-close{border-radius:8px;border:1px solid var(--border);background:transparent;color:var(--text);font-size:1rem;padding:2px 8px;cursor:pointer;font-family:var(--font-mono)}
    .modal-frame-wrap{flex:1;background:#020617;overflow:hidden}
    .modal-frame-wrap iframe{width:100%;height:100%;border:none;background:#020617}
    .modal-info-bar{padding:5px 10px;background:rgba(3,7,18,0.98);border-top:1px solid rgba(55,65,81,0.98);display:flex;justify-content:space-between;align-items:center;gap:6px;flex-wrap:wrap;padding-bottom:calc(env(safe-area-inset-bottom,0px) + 5px)}
  </style>
</head>
<body>
<header>
  <div class="header-left">
    <div class="logo-frame"><div class="logo-inner">RLX</div></div>
    <div class="header-titles">
      <div class="title-main">ROLEX ‚Äì War Room Citoyenne</div>
      <div class="title-sub">Parcours r√©tro-geek dystopico-politique</div>
    </div>
  </div>
  <div class="header-right">
    <div>. ‚Äì Fork¬∑Hack¬∑Spread<br>. ‚Äì Connect√© √† <strong>dl.ouaisfi.eu/usba/</strong></div>
  </div>
</header>
<nav class="mobile-tabs"><div class="mobile-tabs-inner">
  <button class="mtab active" data-tab="tab-modules">‚ö° Modules</button>
  <button class="mtab" data-tab="tab-viewer">‚ñ§ Viewer</button>
  <button class="mtab" data-tab="tab-embeds">üêß Embeds</button>
</div></nav>
<main>
  <section class="panel mob-visible" id="tab-modules"><div class="panel-inner">
    <div>
      <h2>Pages &amp; modules</h2>
      <div class="search-row">
        <input type="search" id="moduleSearch" placeholder="Rechercher (nom ou fichier)‚Ä¶">
        <select id="moduleCategory">
          <option value="all">Toutes cat√©gories</option>
          <option value="base">La Base</option>
          <option value="brol">BAC √Ä SPAM</option>
          <option value="univ">Univers & jeu</option>
          <option value="intra">Liens en vrac</option>
          <option value="ia">IA fictive</option>
          <option value="dikw">DIKW</option>
          <option value="meta">Tests</option>
        </select>
      </div>
      <div style="margin-top:4px;display:flex;justify-content:space-between;gap:6px;flex-wrap:wrap;">
        <span class="badge-small" id="modulesCount">‚Äì</span>
        <span class="muted">ouaisfieu √ó CCPLC</span>
      </div>
    </div>
    <div class="modules-list"><div class="modules-scroll" id="modulesContainer"></div></div>
  </div></section>

  <section class="viewer-panel" id="tab-viewer"><div class="viewer-inner">
    <div class="viewer-header">
      <div class="viewer-title-block">
        <div class="viewer-title" id="viewerTitle">ROLEX ‚Äì Boot</div>
        <div class="viewer-subtitle" id="viewerSubtitle">S√©lectionne un module.</div>
      </div>
      <div class="viewer-badges">
        <span class="viewer-badge"><span class="viewer-dot"></span><span id="viewerCategoryBadge">La Base</span></span>
        <span class="viewer-badge" id="viewerKindBadge">niveaux 0 ‚Üí 999</span>
      </div>
    </div>
    <div class="viewer-body">
      <div class="viewer-iframe-wrapper"><iframe id="viewerFrame" src="https://dl.ouaisfi.eu/usba/"></iframe></div>
      <div class="viewer-info">
        <div class="viewer-file" id="viewerFile">Fichier / URL : https://dl.ouaisfi.eu/usba/</div>
        <div class="viewer-actions"><a href="https://dl.ouaisfi.eu/usba/" id="viewerOpenNew" class="btn-open" target="_blank" rel="noopener noreferrer">Ouvrir dans un nouvel onglet</a></div>
      </div>
    </div>
  </div></section>

  <section class="side-panel" id="tab-embeds"><div class="side-inner">
    <section class="side-section">
      <h2>Navigation √©cosyst√®me</h2>
      <p class="tiny">Chaque niveau = un palier DIKW dans l'arborescence BROL.</p>
      <div class="level-nav" id="levelNav">
        <a class="level-btn active" data-level="0" href="#"><span class="ldot"></span> /usba/</a>
        <a class="level-btn" data-level="1" href="#">/1/</a>
        <a class="level-btn" data-level="2" href="#">/1/2/</a>
        <a class="level-btn" data-level="3" href="#">/1/2/3/</a>
        <a class="level-btn" data-level="9" href="#">/‚Ä¶/9/</a>
        <a class="level-btn" data-level="99" href="#">/‚Ä¶/9/9/</a>
        <a class="level-btn" data-level="999" href="#">/‚Ä¶/9/9/9/</a>
      </div>
    </section>
    <section class="side-section">
      <h2>Distractions &amp; annexes</h2>
      <p class="tiny">.</p>
      <div class="embed-row">
        <button type="button" class="embed-btn" data-embed="penguin"><span class="icon">üêß</span> Tarot</button>
        <button type="button" class="embed-btn" data-embed="youtube"><span class="icon">‚ñ∂Ô∏è</span> YouTube</button>
        <button type="button" class="embed-btn" data-embed="intranet"><span class="icon">üêß</span> Intranet</button>
        <button type="button" class="embed-btn" data-embed="spotify"><span class="icon">üéµ</span> Spotify</button>
        <button type="button" class="embed-btn" data-embed="pdf-plaidoyer-2"><span class="icon">üìÑ</span> PDF plaidoyer</button>
        <button type="button" class="embed-btn" data-embed="pdf-veille-1"><span class="icon">üìÑ</span> Veille (1)</button>
        <button type="button" class="embed-btn" data-embed="pdf-veille-2"><span class="icon">üìÑ</span> Veille (2)</button>
        <button type="button" class="embed-btn" data-embed="speaker"><span class="icon">üêß</span> Speaker</button>
        <button type="button" class="embed-btn" data-embed="dices"><span class="icon">üêß</span> Tirage D√©s</button>
        <button type="button" class="embed-btn" data-embed="hub"><span class="icon">üè†</span> ouaisfi.eu</button>
        <button type="button" class="embed-btn" data-embed="doctech"><span class="icon">üìö</span> DOCTech</button>
        <button type="button" class="embed-btn" data-embed="ccplc"><span class="icon">‚úä</span> CCPLC</button>
      </div>
    </section>
    <section class="side-section">
      <h2>Charte technique</h2>
      <div class="howto-box">
        <code>Budget : 29‚Ç¨/mois</code> ¬∑ <code>Tracking : 0</code> ¬∑ <code>CC BY-NC</code><br>
        <code>Infra : statique pur</code> ¬∑ <code>Censurable : non</code><br><br>
        Tout contre-r√©cit doit √™tre plus rigoureusement sourc√© que le r√©cit qu'il combat. Tout outil doit √™tre forkable, m√™me par qui nous combat.<br><br>
        ‰∏âÁßçÂÖ¨Ê∞ëÊàòÊ≥ï ‚Äî Surveiller ¬∑ √âveiller ¬∑ Contraindre
      </div>
    </section>
  </div></section>
</main>
<footer>
  <span>ROLEX ‚Äì War Room Citoyenne ¬∑ ouaisfieu √ó CCPLC<br>. ‚Äì Retour au <a href="https://dl.ouaisfi.eu/usba/" target="_blank">BROL 2.0</a> ¬∑ <a href="https://ouaisfi.eu" target="_blank">ouaisfi.eu</a> ¬∑ <a href="https://github.com/ouaisfieu" target="_blank">Fork GitHub</a></span>
  <span>‰∏âÁßçÂÖ¨Ê∞ëÊàòÊ≥ï ¬∑ Surveiller ¬∑ √âveiller ¬∑ Contraindre</span>
</footer>
<div class="modal-overlay" id="mobileViewerModal">
  <div class="modal-bar">
    <div class="modal-bar-title" id="modalTitle">‚Äì</div>
    <div class="modal-bar-badges"><span class="viewer-badge" id="modalCatBadge">‚Äì</span><span class="viewer-badge" id="modalKindBadge">‚Äì</span></div>
    <button class="modal-bar-close" id="modalClose">‚úï</button>
  </div>
  <div class="modal-frame-wrap"><iframe id="modalFrame" src="about:blank"></iframe></div>
  <div class="modal-info-bar">
    <span class="viewer-file" id="modalFile">‚Äì</span>
    <a href="#" id="modalOpenNew" class="btn-open" target="_blank" rel="noopener noreferrer">Ouvrir ‚Üó</a>
  </div>
</div>
<script>
const BASE="https://dl.ouaisfi.eu/usba/";
const modules=[
  {id:"boot",title:"BROL 2.0 ‚Äì Dashboard central",file:BASE,category:"base",kind:"secteur 0",description:"Le point d'entr√©e. Niveau 0 de l'arborescence."},
  {id:"index",title:"LE SITE ULTIME (index)",file:BASE+"index.html",category:"base",kind:"niveaux -1 ‚Üí 3",description:"Le fichier qui permet de partir de z√©ro et monter progressivement."},
  {id:"scratchy",title:"Support technique",file:BASE+"404.html",category:"base",kind:"au cas o√π",description:"Il faut √©teindre et rallumer."},
  {id:"cookies",title:"Politique des Cookies",file:BASE+"browniz-politik.html",category:"base",kind:"d√©butant+",description:"Si tu passes pas ce test, t'as rat√© ta vie."},
  {id:"boussole",title:"Boussole de valeurs",file:BASE+"valeurs.html",category:"base",kind:"boussole",description:"Pour faire le point de temps en temps."},
  {id:"sec-1",title:"Secteur 1 ‚Äì Donn√©es Brutes",file:BASE+"1/index.html",category:"dikw",kind:"DIKW:donn√©e",description:"Budget Arizona, projections Bureau du Plan. Les chiffres qu'ils ne veulent pas que tu connectes."},
  {id:"sec-2",title:"Secteur 2 ‚Äì D√©cryptage Syst√®me",file:BASE+"1/2/index.html",category:"dikw",kind:"DIKW:info",description:"Particratie, pilarisation, concentration m√©diatique. Les r√®gles du jeu qu'on ne t'explique jamais."},
  {id:"sec-3",title:"Secteur 3 ‚Äì Trois Guerres Civiques",file:BASE+"1/2/3/index.html",category:"dikw",kind:"DIKW:connaissance",description:"‰∏âÁßçÂÖ¨Ê∞ëÊàòÊ≥ï ‚Äî Surveiller, √©veiller, contraindre. Architecture strat√©gique de r√©sistance d√©mocratique."},
  {id:"sec-9",title:"Secteur 9 ‚Äì Sagesse Op√©rationnelle",file:BASE+"1/2/3/9/index.html",category:"dikw",kind:"DIKW:sagesse",description:"Fork¬∑Hack¬∑Spread. √âducation permanente. Transformer l'indignation en capacit√© d'action."},
  {id:"sec-99",title:"Secteur 99 ‚Äì Activation",file:BASE+"1/2/3/9/9/index.html",category:"dikw",kind:"mission",description:"Choisis ta mission : Scribe, Veilleur ou Hacker. L'intelligence civile se pratique."},
  {id:"sec-999",title:"Secteur 999 ‚Äì Transmission",file:BASE+"1/2/3/9/9/9/",category:"dikw",kind:"r√©plication",description:"Devenir facilitateur. Former d'autres. L'√©cosyst√®me se forke, se propage. Tu es le r√©seau."},
  {id:"hub-illustre",title:"Hub illustr√©",file:BASE+"portail.html",category:"brol",kind:"codigic",description:"Pour faire tout √† fait autre chose."},
  {id:"rolex",title:"Lien suspect",file:BASE+"777.html",category:"brol",kind:"#pirat√©",description:"Pour faire encore autre chose."},
  {id:"amazing",title:"Lien HYPER suspect",file:BASE+"amazing.html",category:"brol",kind:"#vendu",description:"Pour faire encore TOUT autre chose."},
  {id:"stic",title:"STIC de l'anarchie ‚Äì licornes & bisounours",file:BASE+"stic-anarchie.html",category:"univ",kind:"jeu pas fun",description:"Version ultra color√©e / Scratch-like pour jouer avec le capitalisme."},
  {id:"detective",title:"Agence d√©tective publique",file:BASE+"veilleuxses.html",category:"intra",kind:"site m√©tier",description:"Vitrine + intranet l√©ger pour une activit√© de d√©tective / enqu√™te."},
  {id:"extranet",title:"Extronet organisation lambda",file:BASE+"xyno.html",category:"intra",kind:"extronet",description:"Mod√®le extranet."},
  {id:"kalifox",title:"Extronet organisation b√™ta",file:BASE+"kalifox.html",category:"intra",kind:"outil",description:"Parce que bon parfois."},
  {id:"gork",title:"GORK / Pauvre Gork",file:BASE+"minitel.html",category:"ia",kind:"graph",description:"Il voudrait √™tre d√©branch√©."},
  {id:"gorki",title:"GORKI / Pauvre GorkI",file:BASE+"terminal-ia.html",category:"ia",kind:"grave",description:"Il voudrait AUSSI √™tre d√©branch√©."},
  {id:"test-1",title:"√Ä r√©ussir d'urgence",file:BASE+"test-1.html",category:"meta",kind:"bisous",description:"C'est √ßa ou rien."},
];
const embeds={
  penguin:{label:"Tarot pas illustr√©",url:"https://ouaisfieu.appsmith.com/app/tarotboulotproto-v3-1/tarotsimpletirage-68555a12a22d7c48aa0d27ad",description:"Tarot de Boulot et de Marseille sans illustration."},
  intranet:{label:"Intranet",url:"https://boot-a-rat.vercel.app/",description:"C'est par l√† que √ßa se passe."},
  youtube:{label:"YouTube ‚Äì exemple",url:"https://www.youtube.com/embed/dQw4w9WgXcQ",description:"Exemple d'embed YouTube."},
  spotify:{label:"Spotify ‚Äì playlist",url:"https://open.spotify.com/embed/playlist/7eTeIkIqbfmyXnC6Ilo4d2?si=QRW5lAbiRwerORLkra3Raw",description:"Playlist Spotify."},
  "pdf-plaidoyer-2":{label:"plaidoyer-ulb.pdf",url:"https://www.ulb-cooperation.org/wp-content/uploads/2020/08/manuel-plaidoyer-2.pdf",description:"PDF externe"},
  "pdf-veille-1":{label:"Veille (1)",url:BASE+"pdfs/veille-citoyenne-enjeux.pdf",description:"PDF local."},
  "pdf-veille-2":{label:"Veille (2)",url:BASE+"pdfs/guide-reseau-veille.pdf",description:"PDF local."},
  speaker:{label:"Charg√© de com'",url:"https://ouaisfieu.github.io/vitrine/",description:"Charg√© de communication en boucle."},
  dices:{label:"Tirage de d√©s",url:"https://tirage-one.vercel.app/",description:"Application."},
  hub:{label:"Hub ouaisfi.eu",url:"https://ouaisfi.eu",description:"Portail principal du projet."},
  doctech:{label:"DOCTech",url:"https://ouaisfieu.github.io/tech/",description:"Petit impr√©cis de pseudoscience sociale."},
  ccplc:{label:"CCPLC ‚Äì Le Collectif",url:"https://ouaisfieu.github.io/tech/ccplc/",description:"Collectif Citoyen pour la Participation Libre & Consciente."},
};
const levelUrls={"0":BASE,"1":BASE+"1/index.html","2":BASE+"1/2/index.html","3":BASE+"1/2/3/index.html","9":BASE+"1/2/3/9/index.html","99":BASE+"1/2/3/9/9/index.html","999":BASE+"1/2/3/9/9/9/"};

const $=id=>document.getElementById(id);
const moduleSearch=$("moduleSearch"),moduleCategory=$("moduleCategory"),modulesContainer=$("modulesContainer"),modulesCount=$("modulesCount");
const viewerTitle=$("viewerTitle"),viewerSubtitle=$("viewerSubtitle"),viewerCatBadge=$("viewerCategoryBadge"),viewerKindBadge=$("viewerKindBadge"),viewerFile=$("viewerFile"),viewerFrame=$("viewerFrame"),viewerOpenNew=$("viewerOpenNew");
const modalOverlay=$("mobileViewerModal"),modalTitle=$("modalTitle"),modalCat=$("modalCatBadge"),modalKind=$("modalKindBadge"),modalFrame=$("modalFrame"),modalFile=$("modalFile"),modalOpenNew=$("modalOpenNew"),modalClose=$("modalClose");
let filteredModules=[],activeModuleId=null;

function catLabel(c){return{base:"La Base",brol:"BAC √Ä SPAM",univ:"Univers & jeu",intra:"Liens en vrac",ia:"IA fictive",dikw:"DIKW",meta:"Tests"}[c]||"Autre"}
function kindCls(c){return{base:"kind-base",brol:"kind-brol",univ:"kind-univ",intra:"kind-intra",ia:"kind-ia",dikw:"kind-dikw",meta:"kind-meta"}[c]||""}
function isMobile(){return window.innerWidth<=840}

function applyFilter(){
  const q=moduleSearch.value.trim().toLowerCase(),cat=moduleCategory.value;
  filteredModules=modules.filter(m=>{if(cat!=="all"&&m.category!==cat)return false;if(!q)return true;return(m.title+" "+m.file+" "+(m.description||"")).toLowerCase().includes(q)});
  render();
}
function render(){
  modulesContainer.innerHTML="";
  if(!filteredModules.length){modulesContainer.innerHTML='<div class="muted" style="padding:4px 6px;">Aucun module trouv√©.</div>';modulesCount.textContent="0 module";return}
  modulesCount.textContent=filteredModules.length+" module"+(filteredModules.length>1?"s":"");
  const g={};filteredModules.forEach(m=>{(g[m.category]=g[m.category]||[]).push(m)});
  const ord=["dikw","base","brol","univ","intra","ia","meta"];
  Object.keys(g).sort((a,b)=>ord.indexOf(a)-ord.indexOf(b)).forEach(cat=>{
    const ge=document.createElement("div");
    const t=document.createElement("div");t.className="group-title";t.textContent=catLabel(cat);ge.appendChild(t);
    g[cat].forEach(m=>{
      const it=document.createElement("div");it.className="module-item";if(m.id===activeModuleId)it.classList.add("active");it.dataset.id=m.id;
      it.innerHTML=`<div class="module-main"><div class="module-title" title="${m.title}">${m.title}</div><div class="module-sub">${m.description||""}</div></div><div style="display:flex;flex-direction:column;align-items:flex-end;gap:2px;min-width:0;"><div class="module-file" title="${m.file}">${m.file.replace(BASE,"")||"/"}</div><div class="module-kind ${kindCls(m.category)}">${m.kind||""}</div></div>`;
      it.addEventListener("click",()=>selectMod(m.id));ge.appendChild(it);
    });modulesContainer.appendChild(ge);
  });
}
function selectMod(id){
  const m=modules.find(x=>x.id===id);if(!m)return;activeModuleId=id;
  modulesContainer.querySelectorAll(".module-item").forEach(el=>el.classList.toggle("active",el.dataset.id===id));
  loadViewer(m.title,m.description||"",catLabel(m.category),m.kind||"",m.file);
  if(isMobile())openModal(m.title,catLabel(m.category),m.kind,m.file);
}
function loadViewer(t,sub,cat,kind,url){
  viewerTitle.textContent=t;viewerSubtitle.textContent=sub;viewerCatBadge.textContent=cat;viewerKindBadge.textContent=kind;viewerFile.textContent="Fichier / URL : "+url;viewerFrame.src=url;viewerOpenNew.href=url;
}
function openModal(t,cat,kind,url){
  modalTitle.textContent=t;modalCat.textContent=cat;modalKind.textContent=kind||"";modalFile.textContent=url;modalFrame.src=url;modalOpenNew.href=url;modalOverlay.classList.add("open");document.body.style.overflow="hidden";
}
function closeModal(){modalOverlay.classList.remove("open");modalFrame.src="about:blank";document.body.style.overflow=""}
modalClose.addEventListener("click",closeModal);
modalOverlay.addEventListener("click",e=>{if(e.target===modalOverlay)closeModal()});
document.addEventListener("keydown",e=>{if(e.key==="Escape")closeModal()});

document.querySelectorAll(".embed-btn").forEach(btn=>{btn.addEventListener("click",()=>{
  const e=embeds[btn.dataset.embed];if(!e)return;activeModuleId=null;
  modulesContainer.querySelectorAll(".module-item").forEach(el=>el.classList.remove("active"));
  loadViewer(e.label,e.description||"","Embed externe","annexe / distraction",e.url);
  if(isMobile())openModal(e.label,"Embed","annexe",e.url);
})});

document.querySelectorAll(".level-btn").forEach(btn=>{btn.addEventListener("click",e=>{
  e.preventDefault();const lvl=btn.dataset.level,url=levelUrls[lvl];if(!url)return;
  document.querySelectorAll(".level-btn").forEach(b=>b.classList.remove("active"));btn.classList.add("active");
  const labels={"0":"Secteur 0 ‚Äì Boot","1":"Secteur 1 ‚Äì Donn√©es","2":"Secteur 2 ‚Äì Syst√®me","3":"Secteur 3 ‚Äì Trois Guerres","9":"Secteur 9 ‚Äì Sagesse","99":"Secteur 99 ‚Äì Activation","999":"Secteur 999 ‚Äì Transmission"};
  loadViewer(labels[lvl]||"Secteur "+lvl,url,"DIKW","niveau "+lvl,url);
  if(isMobile())openModal(labels[lvl]||"Secteur "+lvl,"DIKW","niveau "+lvl,url);
})});

document.querySelectorAll(".mtab").forEach(tab=>{tab.addEventListener("click",()=>{
  document.querySelectorAll(".mtab").forEach(t=>t.classList.remove("active"));tab.classList.add("active");
  document.querySelectorAll("main>section").forEach(s=>s.classList.remove("mob-visible"));
  $(tab.dataset.tab).classList.add("mob-visible");
})});

moduleSearch.addEventListener("input",applyFilter);
moduleCategory.addEventListener("change",applyFilter);
applyFilter();
const def=modules.find(m=>m.id==="boot")||modules[0];if(def)selectMod(def.id);
if("serviceWorker"in navigator)navigator.serviceWorker.register("sw.js").catch(()=>{});
</script>
</body>
</html>
