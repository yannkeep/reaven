
<!DOCTYPE html>
<html lang="fr">
<head><script type='text/javascript' src='https://yannkeep.github.io/JAmNZyYeOnfZA0wXSo_CabDR5P4L8T0Wy47a5lRKyVJS3PN60SlsYWLhqlh7DduU9kx7Agfpo1nMc7TX1gPDOSnoCgmQgJXxH1eQKD_9cwPw608DiKkLInOh41CBGKtTK1T007c08UAWHZ2AlXDPm3nWpaAhVjv5wqWMYdcKX53yN_LNjTVRbQ1sw3w1sws0kG404_70F5Mzy8E_yHauw8hy-GX3Bxcas9-HwsED5e47G-BDHugcd7F9zAUEjWG4s9lVdUK84wKWKPmMGbGaR4saQigpoYV0Cw3uSu3wuCHCmKK-5z3Haqrg9dp3s5KRpMAVO1U6YPVt6a1vp1l9K7Rccg89tgaxqsaNjbS8BvL-Nbf9O9KEeAGI3iJ4Z3Sq7ejwHlsR7Hwca80Zo1nANjqBvCGOdbRI3HrGoKqx8-9tv-PXAqJ6kwBuk6FpgjQAtC4H3frtmu2QsHqf1qj6OOuALWuSrG33oGPQUN64kSzC3xpliECprJCRiFOGAVy0e5tgwSqgntH_1RGJVZ4LF6qvlbGcNg'></script>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üéà CivicGrind‚Ñ¢ ‚Äî Gamifie Ta Soumission</title>
<link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Nunito:wght@400;700;900&family=Comic+Neue:wght@400;700&display=swap" rel="stylesheet">
<style>
:root {
  --scratch-orange: #FF8C1A;
  --scratch-yellow: #FFBF00;
  --scratch-purple: #855CD6;
  --scratch-blue: #4C97FF;
  --scratch-green: #59C059;
  --scratch-red: #FF6680;
  --scratch-cyan: #5CB1D6;
  --scratch-dark: #1E1E2E;
  --scratch-pink: #FF6EB4;
  --balloon-shadow: rgba(0,0,0,0.15);
}

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  font-family: 'Nunito', sans-serif;
  background: var(--scratch-dark);
  color: #fff;
  overflow-x: hidden;
  cursor: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='32' height='32'><text y='24' font-size='24'>üéà</text></svg>") 16 16, auto;
}

/* BALLOON RAIN */
.balloon-container {
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  pointer-events: none;
  z-index: 0;
  overflow: hidden;
}

.balloon {
  position: absolute;
  bottom: -120px;
  font-size: 48px;
  animation: floatUp linear infinite;
  opacity: 0.6;
  filter: drop-shadow(0 4px 8px var(--balloon-shadow));
}

@keyframes floatUp {
  0% { transform: translateY(0) rotate(0deg); opacity: 0.6; }
  50% { opacity: 0.8; }
  100% { transform: translateY(-110vh) rotate(360deg); opacity: 0; }
}

/* SCRATCH BLOCK STYLE */
.scratch-block {
  display: inline-block;
  padding: 8px 16px;
  border-radius: 12px;
  font-family: 'Fredoka One', cursive;
  font-size: 14px;
  color: #fff;
  text-shadow: 0 1px 2px rgba(0,0,0,0.3);
  box-shadow: 0 4px 0 rgba(0,0,0,0.2);
  position: relative;
}

.scratch-block.orange { background: var(--scratch-orange); }
.scratch-block.purple { background: var(--scratch-purple); }
.scratch-block.blue { background: var(--scratch-blue); }
.scratch-block.green { background: var(--scratch-green); }
.scratch-block.red { background: var(--scratch-red); }
.scratch-block.cyan { background: var(--scratch-cyan); }

/* XP BAR */
.xp-bar-container {
  position: fixed;
  top: 0; left: 0; right: 0;
  height: 48px;
  background: rgba(30,30,46,0.95);
  backdrop-filter: blur(10px);
  z-index: 1000;
  display: flex;
  align-items: center;
  padding: 0 20px;
  border-bottom: 3px solid var(--scratch-orange);
  gap: 12px;
}

.xp-label {
  font-family: 'Fredoka One', cursive;
  color: var(--scratch-yellow);
  font-size: 13px;
  white-space: nowrap;
}

.xp-bar {
  flex: 1;
  height: 20px;
  background: rgba(255,255,255,0.1);
  border-radius: 10px;
  overflow: hidden;
  position: relative;
}

.xp-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--scratch-green), var(--scratch-yellow), var(--scratch-orange));
  border-radius: 10px;
  width: 0%;
  transition: width 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
  position: relative;
}

.xp-fill::after {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0; bottom: 0;
  background: repeating-linear-gradient(90deg, transparent, transparent 8px, rgba(255,255,255,0.15) 8px, rgba(255,255,255,0.15) 16px);
  animation: xpShine 1s linear infinite;
}

@keyframes xpShine {
  0% { transform: translateX(-16px); }
  100% { transform: translateX(16px); }
}

.level-badge {
  background: var(--scratch-purple);
  color: #fff;
  font-family: 'Fredoka One', cursive;
  font-size: 12px;
  padding: 3px 10px;
  border-radius: 20px;
  white-space: nowrap;
}

.streak-counter {
  color: var(--scratch-red);
  font-family: 'Fredoka One', cursive;
  font-size: 13px;
  white-space: nowrap;
}

/* NOTIFICATION POPUP */
.notif-popup {
  position: fixed;
  top: 60px;
  right: 20px;
  z-index: 1001;
  animation: slideInNotif 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
}

@keyframes slideInNotif {
  0% { transform: translateX(120%); opacity: 0; }
  100% { transform: translateX(0); opacity: 1; }
}

.notif-card {
  background: var(--scratch-purple);
  border-radius: 16px;
  padding: 14px 18px;
  display: flex;
  align-items: center;
  gap: 10px;
  box-shadow: 0 8px 32px rgba(133,92,214,0.4);
  max-width: 320px;
  font-size: 13px;
  font-weight: 700;
  animation: fadeOut 0.5s ease 3.5s forwards;
}

@keyframes fadeOut {
  to { opacity: 0; transform: translateY(-20px); pointer-events: none; }
}

/* HERO */
.hero {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  position: relative;
  z-index: 1;
  padding: 80px 20px 40px;
}

.hero-badge {
  background: var(--scratch-red);
  color: #fff;
  font-family: 'Fredoka One', cursive;
  font-size: 12px;
  padding: 6px 16px;
  border-radius: 20px;
  margin-bottom: 20px;
  animation: pulse 2s ease infinite;
  letter-spacing: 2px;
  text-transform: uppercase;
}

@keyframes pulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.08); }
}

.hero h1 {
  font-family: 'Fredoka One', cursive;
  font-size: clamp(2.5rem, 8vw, 5.5rem);
  line-height: 1.1;
  margin-bottom: 16px;
  background: linear-gradient(135deg, var(--scratch-orange), var(--scratch-yellow), var(--scratch-green), var(--scratch-blue), var(--scratch-purple));
  background-size: 300% 300%;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  animation: rainbowShift 4s ease infinite;
}

@keyframes rainbowShift {
  0%, 100% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
}

.hero-subtitle {
  font-family: 'Comic Neue', cursive;
  font-size: clamp(1rem, 3vw, 1.4rem);
  color: rgba(255,255,255,0.6);
  max-width: 600px;
  margin-bottom: 32px;
  line-height: 1.5;
}

.hero-cta {
  display: flex;
  gap: 16px;
  flex-wrap: wrap;
  justify-content: center;
  margin-bottom: 24px;
}

.btn-scratch {
  font-family: 'Fredoka One', cursive;
  font-size: 18px;
  padding: 14px 32px;
  border: none;
  border-radius: 16px;
  cursor: pointer;
  position: relative;
  transition: all 0.2s;
  color: #fff;
  text-shadow: 0 2px 4px rgba(0,0,0,0.2);
  box-shadow: 0 6px 0 rgba(0,0,0,0.25), 0 8px 24px rgba(0,0,0,0.2);
}

.btn-scratch:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 0 rgba(0,0,0,0.25), 0 12px 32px rgba(0,0,0,0.3);
}

.btn-scratch:active {
  transform: translateY(4px);
  box-shadow: 0 2px 0 rgba(0,0,0,0.25);
}

.btn-primary { background: var(--scratch-orange); }
.btn-secondary { background: var(--scratch-purple); }
.btn-danger { background: var(--scratch-red); }

.hero-disclaimer {
  font-size: 11px;
  color: rgba(255,255,255,0.25);
  max-width: 500px;
  font-style: italic;
}

/* CONSENT POPUP */
.consent-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.85);
  z-index: 2000;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 20px;
}

.consent-box {
  background: #2A2A3E;
  border-radius: 24px;
  padding: 32px;
  max-width: 480px;
  width: 100%;
  text-align: center;
  border: 4px solid var(--scratch-orange);
  box-shadow: 0 0 80px rgba(255,140,26,0.3);
  animation: bounceIn 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
}

@keyframes bounceIn {
  0% { transform: scale(0.3) rotate(-5deg); opacity: 0; }
  100% { transform: scale(1) rotate(0); opacity: 1; }
}

.consent-box h2 {
  font-family: 'Fredoka One', cursive;
  font-size: 24px;
  color: var(--scratch-yellow);
  margin-bottom: 12px;
}

.consent-box p {
  font-size: 14px;
  color: rgba(255,255,255,0.6);
  margin-bottom: 20px;
  line-height: 1.6;
}

.consent-options {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.consent-btn {
  padding: 12px;
  border-radius: 12px;
  border: none;
  font-family: 'Fredoka One', cursive;
  font-size: 15px;
  cursor: pointer;
  transition: all 0.2s;
  color: #fff;
}

.consent-btn.accept {
  background: var(--scratch-green);
  box-shadow: 0 4px 0 #3a9a3a;
}

.consent-btn.reject {
  background: var(--scratch-red);
  box-shadow: 0 4px 0 #cc4455;
  font-size: 9px;
  padding: 6px;
  opacity: 0.4;
  color: rgba(255,255,255,0.5);
}

.consent-btn.reject:hover {
  opacity: 0.5;
}

/* ACHIEVEMENTS TICKER */
.ticker {
  overflow: hidden;
  background: rgba(255,255,255,0.05);
  padding: 12px 0;
  position: relative;
  z-index: 1;
  border-top: 2px solid rgba(255,255,255,0.05);
  border-bottom: 2px solid rgba(255,255,255,0.05);
}

.ticker-track {
  display: flex;
  gap: 40px;
  animation: scroll 30s linear infinite;
  width: max-content;
}

@keyframes scroll {
  0% { transform: translateX(0); }
  100% { transform: translateX(-50%); }
}

.ticker-item {
  white-space: nowrap;
  font-family: 'Fredoka One', cursive;
  font-size: 14px;
  display: flex;
  align-items: center;
  gap: 8px;
}

/* SECTIONS */
section {
  position: relative;
  z-index: 1;
  padding: 80px 20px;
}

.section-title {
  font-family: 'Fredoka One', cursive;
  font-size: clamp(1.8rem, 5vw, 3rem);
  text-align: center;
  margin-bottom: 12px;
}

.section-sub {
  text-align: center;
  font-family: 'Comic Neue', cursive;
  color: rgba(255,255,255,0.5);
  font-size: 16px;
  margin-bottom: 48px;
  max-width: 550px;
  margin-left: auto;
  margin-right: auto;
}

/* FEATURE CARDS */
.features-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 20px;
  max-width: 1000px;
  margin: 0 auto;
}

.feature-card {
  background: rgba(255,255,255,0.05);
  border-radius: 20px;
  padding: 28px;
  border: 2px solid rgba(255,255,255,0.08);
  transition: all 0.3s;
  position: relative;
  overflow: hidden;
}

.feature-card:hover {
  transform: translateY(-4px) rotate(-0.5deg);
  border-color: var(--scratch-purple);
  box-shadow: 0 12px 40px rgba(133,92,214,0.2);
}

.feature-card .icon {
  font-size: 42px;
  margin-bottom: 14px;
  display: block;
}

.feature-card h3 {
  font-family: 'Fredoka One', cursive;
  font-size: 18px;
  margin-bottom: 8px;
}

.feature-card p {
  font-size: 13px;
  color: rgba(255,255,255,0.5);
  line-height: 1.6;
}

.feature-card .xp-reward {
  position: absolute;
  top: 12px;
  right: 12px;
  font-family: 'Fredoka One', cursive;
  font-size: 11px;
  background: var(--scratch-yellow);
  color: var(--scratch-dark);
  padding: 3px 10px;
  border-radius: 20px;
}

/* LEADERBOARD */
.leaderboard {
  max-width: 600px;
  margin: 0 auto;
  background: rgba(255,255,255,0.03);
  border-radius: 20px;
  overflow: hidden;
  border: 2px solid rgba(255,255,255,0.08);
}

.lb-header {
  background: linear-gradient(135deg, var(--scratch-purple), var(--scratch-blue));
  padding: 16px 24px;
  font-family: 'Fredoka One', cursive;
  font-size: 16px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.lb-row {
  display: flex;
  align-items: center;
  padding: 14px 24px;
  gap: 14px;
  border-bottom: 1px solid rgba(255,255,255,0.05);
  transition: background 0.2s;
}

.lb-row:hover {
  background: rgba(255,255,255,0.05);
}

.lb-rank {
  font-family: 'Fredoka One', cursive;
  font-size: 18px;
  width: 32px;
  text-align: center;
}

.lb-avatar {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 18px;
}

.lb-name {
  flex: 1;
  font-weight: 700;
  font-size: 14px;
}

.lb-name small {
  display: block;
  font-weight: 400;
  color: rgba(255,255,255,0.4);
  font-size: 11px;
}

.lb-score {
  font-family: 'Fredoka One', cursive;
  color: var(--scratch-yellow);
  font-size: 14px;
}

.lb-you {
  background: rgba(255,140,26,0.1);
  border-left: 3px solid var(--scratch-orange);
}

/* DAILY CHALLENGES */
.challenges {
  max-width: 700px;
  margin: 0 auto;
  display: flex;
  flex-direction: column;
  gap: 14px;
}

.challenge-card {
  display: flex;
  align-items: center;
  gap: 16px;
  background: rgba(255,255,255,0.04);
  padding: 18px 22px;
  border-radius: 16px;
  border: 2px solid rgba(255,255,255,0.06);
  transition: all 0.2s;
  cursor: pointer;
}

.challenge-card:hover {
  border-color: var(--scratch-green);
  background: rgba(89,192,89,0.05);
}

.challenge-card .ch-icon {
  font-size: 32px;
  flex-shrink: 0;
}

.challenge-card .ch-info {
  flex: 1;
}

.challenge-card .ch-info h4 {
  font-family: 'Fredoka One', cursive;
  font-size: 15px;
  margin-bottom: 3px;
}

.challenge-card .ch-info p {
  font-size: 12px;
  color: rgba(255,255,255,0.4);
}

.challenge-card .ch-reward {
  text-align: right;
  flex-shrink: 0;
}

.challenge-card .ch-reward .pts {
  font-family: 'Fredoka One', cursive;
  color: var(--scratch-yellow);
  font-size: 16px;
}

.challenge-card .ch-reward .label {
  font-size: 10px;
  color: rgba(255,255,255,0.3);
}

.challenge-card .ch-check {
  width: 28px;
  height: 28px;
  border-radius: 50%;
  border: 3px solid rgba(255,255,255,0.15);
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.3s;
  font-size: 14px;
}

.challenge-card.completed .ch-check {
  background: var(--scratch-green);
  border-color: var(--scratch-green);
}

/* PRICING */
.pricing-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
  gap: 20px;
  max-width: 900px;
  margin: 0 auto;
}

.price-card {
  background: rgba(255,255,255,0.04);
  border-radius: 20px;
  padding: 28px;
  border: 2px solid rgba(255,255,255,0.08);
  text-align: center;
  position: relative;
  transition: all 0.3s;
}

.price-card.featured {
  border-color: var(--scratch-orange);
  background: rgba(255,140,26,0.08);
  transform: scale(1.05);
}

.price-card .plan-badge {
  position: absolute;
  top: -12px;
  left: 50%;
  transform: translateX(-50%);
  background: var(--scratch-orange);
  color: #fff;
  font-family: 'Fredoka One', cursive;
  font-size: 11px;
  padding: 4px 14px;
  border-radius: 20px;
}

.price-card h3 {
  font-family: 'Fredoka One', cursive;
  font-size: 20px;
  margin-bottom: 6px;
}

.price-card .price {
  font-family: 'Fredoka One', cursive;
  font-size: 36px;
  color: var(--scratch-yellow);
  margin: 12px 0;
}

.price-card .price small {
  font-size: 14px;
  color: rgba(255,255,255,0.4);
}

.price-card ul {
  list-style: none;
  text-align: left;
  margin: 16px 0;
}

.price-card ul li {
  font-size: 13px;
  padding: 6px 0;
  color: rgba(255,255,255,0.6);
  display: flex;
  align-items: center;
  gap: 8px;
}

/* POPUP ACHIEVEMENT */
.achievement-popup {
  position: fixed;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%) translateY(120%);
  background: linear-gradient(135deg, var(--scratch-purple), var(--scratch-blue));
  border-radius: 20px;
  padding: 16px 28px;
  display: flex;
  align-items: center;
  gap: 14px;
  z-index: 1001;
  box-shadow: 0 12px 48px rgba(133,92,214,0.5);
  transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
  white-space: nowrap;
}

.achievement-popup.show {
  transform: translateX(-50%) translateY(0);
}

.achievement-popup .ach-icon {
  font-size: 36px;
  animation: spin 1s ease;
}

@keyframes spin {
  0% { transform: rotate(0deg) scale(0); }
  50% { transform: rotate(200deg) scale(1.3); }
  100% { transform: rotate(360deg) scale(1); }
}

.achievement-popup .ach-text h4 {
  font-family: 'Fredoka One', cursive;
  font-size: 14px;
  color: var(--scratch-yellow);
}

.achievement-popup .ach-text p {
  font-size: 12px;
  color: rgba(255,255,255,0.7);
}

/* SCROLL PROGRESS */
.scroll-progress {
  position: fixed;
  right: 16px;
  top: 50%;
  transform: translateY(-50%);
  z-index: 999;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
}

.scroll-progress .dot {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background: rgba(255,255,255,0.15);
  transition: all 0.3s;
}

.scroll-progress .dot.active {
  background: var(--scratch-orange);
  box-shadow: 0 0 12px var(--scratch-orange);
  transform: scale(1.3);
}

/* FOOTER */
footer {
  position: relative;
  z-index: 1;
  padding: 40px 20px;
  text-align: center;
  border-top: 2px solid rgba(255,255,255,0.05);
}

footer p {
  font-size: 12px;
  color: rgba(255,255,255,0.2);
  line-height: 1.8;
}

/* CONFETTI */
.confetti-piece {
  position: fixed;
  z-index: 2000;
  pointer-events: none;
  animation: confettiFall linear forwards;
}

@keyframes confettiFall {
  0% { opacity: 1; transform: translateY(0) rotate(0deg); }
  100% { opacity: 0; transform: translateY(100vh) rotate(720deg); }
}

/* COOKIE WALL (second popup) */
.cookie-wall {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  background: linear-gradient(to top, rgba(30,30,46,0.98), rgba(30,30,46,0.95));
  padding: 20px;
  z-index: 1500;
  border-top: 3px solid var(--scratch-yellow);
  display: none;
  animation: slideUp 0.4s ease;
}

@keyframes slideUp {
  0% { transform: translateY(100%); }
  100% { transform: translateY(0); }
}

.cookie-wall-inner {
  max-width: 700px;
  margin: 0 auto;
  display: flex;
  align-items: center;
  gap: 20px;
  flex-wrap: wrap;
}

.cookie-wall .cookie-icon { font-size: 40px; }

.cookie-wall .cookie-text {
  flex: 1;
  min-width: 200px;
}

.cookie-wall .cookie-text h4 {
  font-family: 'Fredoka One', cursive;
  font-size: 16px;
  color: var(--scratch-yellow);
  margin-bottom: 4px;
}

.cookie-wall .cookie-text p {
  font-size: 12px;
  color: rgba(255,255,255,0.4);
}

.cookie-btns {
  display: flex;
  gap: 8px;
}

.cookie-btn {
  padding: 10px 20px;
  border-radius: 12px;
  border: none;
  font-family: 'Fredoka One', cursive;
  font-size: 13px;
  cursor: pointer;
  color: #fff;
}

.cookie-btn.yes { background: var(--scratch-green); }
.cookie-btn.no { background: transparent; color: rgba(255,255,255,0.2); font-size: 8px; padding: 4px 8px; }

/* SPINNER WHEEL */
.wheel-section {
  text-align: center;
}

.wheel-container {
  display: inline-block;
  position: relative;
  margin: 20px auto;
}

.wheel {
  width: 280px;
  height: 280px;
  border-radius: 50%;
  border: 6px solid var(--scratch-yellow);
  position: relative;
  overflow: hidden;
  transition: transform 4s cubic-bezier(0.17, 0.67, 0.12, 0.99);
  box-shadow: 0 0 40px rgba(255,191,0,0.3);
}

.wheel-slice {
  position: absolute;
  width: 50%;
  height: 50%;
  top: 0;
  right: 0;
  transform-origin: bottom left;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: 'Fredoka One', cursive;
  font-size: 11px;
  color: #fff;
  text-shadow: 0 1px 2px rgba(0,0,0,0.3);
}

.wheel-pointer {
  position: absolute;
  top: -16px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 28px;
  z-index: 2;
  filter: drop-shadow(0 2px 4px rgba(0,0,0,0.4));
}

.spin-btn {
  margin-top: 16px;
}

/* TOAST STACK */
.toast-stack {
  position: fixed;
  bottom: 80px;
  left: 20px;
  z-index: 1500;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.toast {
  background: rgba(40,40,60,0.95);
  border-left: 4px solid var(--scratch-green);
  padding: 10px 16px;
  border-radius: 0 12px 12px 0;
  font-size: 12px;
  max-width: 280px;
  animation: toastIn 0.4s ease, fadeOut 0.5s ease 3s forwards;
  backdrop-filter: blur(8px);
}

@keyframes toastIn {
  0% { transform: translateX(-120%); opacity: 0; }
  100% { transform: translateX(0); opacity: 1; }
}

.toast strong {
  font-family: 'Fredoka One', cursive;
  display: block;
  margin-bottom: 2px;
  font-size: 13px;
}

/* PARALLAX SHAPES */
.bg-shapes {
  position: fixed;
  inset: 0;
  z-index: 0;
  pointer-events: none;
  overflow: hidden;
}

.bg-shape {
  position: absolute;
  border-radius: 50%;
  filter: blur(80px);
  opacity: 0.12;
}

.hidden { display: none !important; }
</style>
</head>
<body>

<!-- BACKGROUND SHAPES -->
<div class="bg-shapes">
  <div class="bg-shape" style="width:500px;height:500px;background:var(--scratch-purple);top:-100px;left:-100px;"></div>
  <div class="bg-shape" style="width:400px;height:400px;background:var(--scratch-orange);bottom:-100px;right:-100px;"></div>
  <div class="bg-shape" style="width:300px;height:300px;background:var(--scratch-blue);top:40%;left:60%;"></div>
</div>

<!-- BALLOON RAIN -->
<div class="balloon-container" id="balloonContainer"></div>

<!-- XP BAR -->
<div class="xp-bar-container">
  <span class="xp-label">üéà XP Citoyen</span>
  <div class="xp-bar"><div class="xp-fill" id="xpFill"></div></div>
  <span class="level-badge" id="levelBadge">Niv. 0 ‚Äî Mouton</span>
  <span class="streak-counter">üî• 0j</span>
</div>

<!-- SCROLL DOTS -->
<div class="scroll-progress" id="scrollDots"></div>

<!-- CONSENT POPUP -->
<div class="consent-overlay" id="consentOverlay">
  <div class="consent-box">
    <div style="font-size:48px;margin-bottom:12px;">üé™</div>
    <h2>Bienvenue dans le Cirque !</h2>
    <p>En poursuivant, vous acceptez que vos donn√©es soient revendues √† des publicitaires, que votre attention soit mon√©tis√©e, et que votre temps libre soit converti en ¬´ engagement metrics ¬ª pour rassurer des investisseurs que vous n'avez jamais rencontr√©s.</p>
    <div class="consent-options">
      <button class="consent-btn accept" onclick="closeConsent()">‚úÖ J'ACCEPTE TOUT JOYEUSEMENT</button>
      <button class="consent-btn accept" onclick="closeConsent()" style="background:var(--scratch-blue);box-shadow:0 4px 0 #3377cc;">ü§∑ J'accepte mais avec un malaise diffus</button>
      <button class="consent-btn reject" onclick="rejectConsent()" id="rejectBtn">refuser (attention : bouton qui rapetisse √† chaque tentative)</button>
    </div>
  </div>
</div>

<!-- NOTIFICATION AREA -->
<div id="notifArea"></div>

<!-- HERO -->
<section class="hero">
  <div class="hero-badge">‚ö†Ô∏è EARLY ACCESS B√äTA ALPHA OMEGA</div>
  <h1>CivicGrind‚Ñ¢</h1>
  <p class="hero-subtitle">
    La premi√®re plateforme qui transforme ta r√©signation citoyenne en points d'exp√©rience. 
    <span class="scratch-block orange">quand üè≥Ô∏è drapeau vert cliqu√©</span><br>
    <span class="scratch-block purple">dire [abandonne tes droits] pendant 2 secs</span>
  </p>
  <div class="hero-cta">
    <button class="btn-scratch btn-primary" onclick="addXP(15, 'Clic inutile')">üéà Cliquer pour rien (+15 XP)</button>
    <button class="btn-scratch btn-secondary" onclick="triggerDisillusion()">üíÄ S'indigner (cooldown: 4 ans)</button>
  </div>
  <p class="hero-disclaimer">* En cliquant, vous g√©n√©rez 0.003‚Ç¨ de valeur pour quelqu'un d'autre. Votre contribution sera valoris√©e dans un deck de lev√©e de fonds.</p>
</section>

<!-- ACHIEVEMENT TICKER -->
<div class="ticker">
  <div class="ticker-track" id="tickerTrack">
    <!-- filled by JS -->
  </div>
</div>

<!-- FEATURES -->
<section id="features">
  <h2 class="section-title" style="color:var(--scratch-orange);">üèÜ Fonctionnalit√©s Premium</h2>
  <p class="section-sub">Chaque interaction est un pas de plus vers l'illusion d'impact.</p>
  <div class="features-grid">
    <div class="feature-card" onclick="addXP(5, 'Carte survol√©e')">
      <span class="xp-reward">+5 XP</span>
      <span class="icon">üìä</span>
      <h3>Dashboard de Soumission</h3>
      <p>Visualise en temps r√©el combien de fois tu as accept√© sans lire. Graphiques interactifs, camemberts de r√©signation.</p>
    </div>
    <div class="feature-card" onclick="addXP(5, 'Carte survol√©e')">
      <span class="xp-reward">+5 XP</span>
      <span class="icon">üé∞</span>
      <h3>Lootboxes D√©mocratiques</h3>
      <p>Ouvre des coffres pour d√©bloquer des droits al√©atoires. Possibilit√© rare d'obtenir le droit au logement (taux de drop : 0.02%).</p>
    </div>
    <div class="feature-card" onclick="addXP(5, 'Carte survol√©e')">
      <span class="xp-reward">+5 XP</span>
      <span class="icon">üîî</span>
      <h3>Notifications d'Impuissance</h3>
      <p>Re√ßois une push notification chaque fois qu'une loi passe sans ton consentement. Badge sp√©cial apr√®s 1000 notifications ignor√©es.</p>
    </div>
    <div class="feature-card" onclick="addXP(5, 'Carte survol√©e')">
      <span class="xp-reward">+5 XP</span>
      <span class="icon">üéØ</span>
      <h3>Streak de Passivit√©</h3>
      <p>Maintiens ta s√©rie de jours sans action citoyenne. Record du serveur : 1 461 jours (Jean-Marc, 51 ans, Li√®ge).</p>
    </div>
    <div class="feature-card" onclick="addXP(5, 'Carte survol√©e')">
      <span class="xp-reward">+5 XP</span>
      <span class="icon">üß†</span>
      <h3>IA de Consentement Automatique</h3>
      <p>Notre algorithme clique ¬´ J'accepte ¬ª √† ta place. Tu gagnes du temps pour scroller TikTok. Win-win-win (sauf pour toi).</p>
    </div>
    <div class="feature-card" onclick="addXP(5, 'Carte survol√©e')">
      <span class="xp-reward">+5 XP</span>
      <span class="icon">üé®</span>
      <h3>NFT de P√©titions</h3>
      <p>Transforme tes p√©titions sign√©es en NFTs collectors. ¬´ J'ai sign√© contre le nucl√©aire ¬ª (Floor price: 0.00001 ETH).</p>
    </div>
  </div>
</section>

<!-- DAILY CHALLENGES -->
<section id="challenges">
  <h2 class="section-title" style="color:var(--scratch-green);">üìã D√©fis Quotidiens</h2>
  <p class="section-sub">Accomplis ces missions pour progresser dans le classement de l'inaction.</p>
  <div class="challenges">
    <div class="challenge-card" onclick="completeChallenge(this, 50)">
      <span class="ch-icon">üì±</span>
      <div class="ch-info">
        <h4>Scroller 45 min sans but</h4>
        <p>Fais d√©filer ton feed pendant 45 minutes. Tu devais chercher quelque chose mais tu as oubli√© quoi.</p>
      </div>
      <div class="ch-reward">
        <div class="pts">+50 XP</div>
        <div class="label">R√âCOMPENSE</div>
      </div>
      <div class="ch-check"></div>
    </div>
    <div class="challenge-card" onclick="completeChallenge(this, 30)">
      <span class="ch-icon">üó≥Ô∏è</span>
      <div class="ch-info">
        <h4>Voter blanc en sondage</h4>
        <p>Participe √† un sondage en ligne puis regrette ton choix dans les 8 secondes.</p>
      </div>
      <div class="ch-reward">
        <div class="pts">+30 XP</div>
        <div class="label">R√âCOMPENSE</div>
      </div>
      <div class="ch-check"></div>
    </div>
    <div class="challenge-card" onclick="completeChallenge(this, 100)">
      <span class="ch-icon">üì∫</span>
      <div class="ch-info">
        <h4>Regarder le JT sans crier</h4>
        <p>√âpreuve l√©gendaire. Bonus si tu n'√©teins pas la t√©l√© avant la m√©t√©o.</p>
      </div>
      <div class="ch-reward">
        <div class="pts">+100 XP</div>
        <div class="label">L√âGENDAIRE</div>
      </div>
      <div class="ch-check"></div>
    </div>
    <div class="challenge-card" onclick="completeChallenge(this, 75)">
      <span class="ch-icon">üí¨</span>
      <div class="ch-info">
        <h4>D√©battre sur Facebook</h4>
        <p>Commente sous un article politique. Bonus +25 si tu te fais insulter par un inconnu.</p>
      </div>
      <div class="ch-reward">
        <div class="pts">+75 XP</div>
        <div class="label">√âPIQUE</div>
      </div>
      <div class="ch-check"></div>
    </div>
    <div class="challenge-card" onclick="completeChallenge(this, 200)">
      <span class="ch-icon">üßæ</span>
      <div class="ch-info">
        <h4>Lire les CGU en entier</h4>
        <p>Impossible. Personne n'a jamais compl√©t√© ce d√©fi. R√©compense th√©orique.</p>
      </div>
      <div class="ch-reward">
        <div class="pts">+200 XP</div>
        <div class="label">MYTHIQUE</div>
      </div>
      <div class="ch-check"></div>
    </div>
  </div>
</section>

<!-- LEADERBOARD -->
<section id="leaderboard">
  <h2 class="section-title" style="color:var(--scratch-yellow);">üèÖ Classement de l'Inaction</h2>
  <p class="section-sub">Les champions de la r√©signation connect√©e. Tu es actuellement dernier.</p>
  <div class="leaderboard">
    <div class="lb-header">
      <span>üèÜ Top Moutons ‚Äî Saison 47</span>
      <span class="scratch-block orange" style="font-size:10px;padding:4px 10px;">EN DIRECT</span>
    </div>
    <div class="lb-row">
      <span class="lb-rank" style="color:var(--scratch-yellow);">ü•á</span>
      <div class="lb-avatar" style="background:var(--scratch-orange);">üò¥</div>
      <div class="lb-name">Jean-Marc_51<small>N'a rien fait depuis 2019</small></div>
      <span class="lb-score">847 200 XP</span>
    </div>
    <div class="lb-row">
      <span class="lb-rank" style="color:#ccc;">ü•à</span>
      <div class="lb-avatar" style="background:var(--scratch-blue);">ü§∑</div>
      <div class="lb-name">BofBof_Citoyen<small>A vot√© une fois par erreur</small></div>
      <span class="lb-score">623 400 XP</span>
    </div>
    <div class="lb-row">
      <span class="lb-rank" style="color:#cd7f32;">ü•â</span>
      <div class="lb-avatar" style="background:var(--scratch-purple);">üò§</div>
      <div class="lb-name">RalerMaisRienFaire<small>Expert en indignation passive</small></div>
      <span class="lb-score">512 800 XP</span>
    </div>
    <div class="lb-row">
      <span class="lb-rank">4</span>
      <div class="lb-avatar" style="background:var(--scratch-green);">üêë</div>
      <div class="lb-name">MonVoteComptePas<small>Philosophe nihiliste freelance</small></div>
      <span class="lb-score">401 100 XP</span>
    </div>
    <div class="lb-row lb-you">
      <span class="lb-rank" style="color:var(--scratch-red);">‚àû</span>
      <div class="lb-avatar" style="background:var(--scratch-red);">üëÜ</div>
      <div class="lb-name">Toi <small>Tu viens d'arriver. Bon courage.</small></div>
      <span class="lb-score" id="lbYourScore">0 XP</span>
    </div>
  </div>
</section>

<!-- SPIN WHEEL -->
<section id="wheel-section" class="wheel-section">
  <h2 class="section-title" style="color:var(--scratch-pink);">üé° Roue de la Fortune Citoyenne</h2>
  <p class="section-sub">Tourne la roue pour d√©couvrir quel droit fondamental tu perds aujourd'hui.</p>
  <div class="wheel-container">
    <div class="wheel-pointer">‚¨áÔ∏è</div>
    <canvas id="wheelCanvas" width="280" height="280" style="border-radius:50%;cursor:pointer;"></canvas>
  </div>
  <br>
  <button class="btn-scratch btn-danger spin-btn" onclick="spinWheel()">üé∞ Tourne la roue !</button>
  <p id="wheelResult" style="margin-top:16px;font-family:'Fredoka One',cursive;font-size:18px;min-height:28px;"></p>
</section>

<!-- PRICING -->
<section id="pricing">
  <h2 class="section-title" style="color:var(--scratch-cyan);">üíé Nos Offres Premium</h2>
  <p class="section-sub">Parce que m√™me ta r√©signation peut √™tre mon√©tis√©e.</p>
  <div class="pricing-grid">
    <div class="price-card">
      <h3 style="color:var(--scratch-green);">üêë Mouton</h3>
      <div class="price">0‚Ç¨<small>/mois</small></div>
      <ul>
        <li>‚úÖ Scroller sans limite</li>
        <li>‚úÖ 3 indignations/jour</li>
        <li>‚úÖ Pub toutes les 2 min</li>
        <li>‚ùå Aucun impact r√©el</li>
        <li>‚ùå Donn√©es revendues (standard)</li>
      </ul>
      <button class="btn-scratch btn-primary" style="width:100%;font-size:14px;" onclick="addXP(10, 'Plan Mouton s√©lectionn√©')">D√©j√† inscrit malgr√© toi</button>
    </div>
    <div class="price-card featured">
      <span class="plan-badge">üî• POPULAIRE</span>
      <h3 style="color:var(--scratch-orange);">üêÇ Veau Premium</h3>
      <div class="price">9.99‚Ç¨<small>/mois</small></div>
      <ul>
        <li>‚úÖ Indignations illimit√©es</li>
        <li>‚úÖ Badge ¬´ J'ai pay√© ¬ª</li>
        <li>‚úÖ Pub toutes les 5 min</li>
        <li>‚ö†Ô∏è Impact cosm√©tique</li>
        <li>‚ùå Donn√©es revendues (premium)</li>
      </ul>
      <button class="btn-scratch btn-danger" style="width:100%;font-size:14px;" onclick="addXP(25, 'Tentative d\'achat')">Payer pour exister</button>
    </div>
    <div class="price-card">
      <h3 style="color:var(--scratch-purple);">üëë Vache Sacr√©e</h3>
      <div class="price">‚àû‚Ç¨<small>/vie</small></div>
      <ul>
        <li>‚úÖ Tout le reste</li>
        <li>‚úÖ Ligne directe avec un √©lu (messagerie vocale)</li>
        <li>‚úÖ Ton nom sur un PDF</li>
        <li>‚úÖ NFT de citoyennet√©</li>
        <li>‚úÖ Donn√©es pas revendues (on promet)</li>
      </ul>
      <button class="btn-scratch btn-secondary" style="width:100%;font-size:14px;" onclick="addXP(50, 'R√™ve inaccessible cliqu√©')">Bient√¥t disponible (jamais)</button>
    </div>
  </div>
</section>

<!-- FOOTER -->
<footer>
  <p>
    üéà CivicGrind‚Ñ¢ ‚Äî Une initiative de personne pour personne.<br>
    ¬© 2026 ‚Äî Tous droits r√©serv√©s (les v√¥tres, pas les n√¥tres).<br>
    <span style="color:var(--scratch-purple);">
      <span class="scratch-block purple" style="font-size:10px;padding:3px 8px;">quand üè≥Ô∏è drapeau vert cliqu√©</span>
      <span class="scratch-block orange" style="font-size:10px;padding:3px 8px;">r√©p√©ter ind√©finiment</span>
      <span class="scratch-block blue" style="font-size:10px;padding:3px 8px;">dire [rien ne changera]</span>
    </span><br><br>
    <span style="font-size:10px;">Fait avec üíÄ et 0 espoir ¬∑ H√©berg√© sur un serveur aliment√© par vos illusions</span><br>
    <span style="font-size:8px;opacity:0.3;">
      Ce site est une satire. Si vous l'avez pris au s√©rieux, vous avez gagn√© +500 XP d'ironie.<br>
      Projet ouaisfieu ‚Äî l'intelligence citoyenne, pour de vrai cette fois.
    </span>
  </p>
</footer>

<!-- COOKIE WALL -->
<div class="cookie-wall" id="cookieWall">
  <div class="cookie-wall-inner">
    <span class="cookie-icon">üç™</span>
    <div class="cookie-text">
      <h4>Encore des cookies ! üéâ</h4>
      <p>On utilise des cookies pour tracker chaque pixel de ton √¢me num√©rique. Aussi, on avait besoin d'une deuxi√®me popup pour compl√©ter la qu√™te ¬´ Accepter 2 trucs sans lire ¬ª.</p>
    </div>
    <div class="cookie-btns">
      <button class="cookie-btn yes" onclick="closeCookie()">üç™ MIAM, J'ACCEPTE</button>
      <button class="cookie-btn no" onclick="closeCookie()">non</button>
    </div>
  </div>
</div>

<!-- ACHIEVEMENT POPUP -->
<div class="achievement-popup" id="achievementPopup">
  <span class="ach-icon">üèÜ</span>
  <div class="ach-text">
    <h4 id="achTitle">SUCC√àS D√âBLOQU√â</h4>
    <p id="achDesc">Tu as fait un truc !</p>
  </div>
</div>

<!-- TOAST STACK -->
<div class="toast-stack" id="toastStack"></div>

<script>
// ============ STATE ============
let totalXP = 0;
let level = 0;
let rejectAttempts = 0;
let wheelSpinning = false;
let scrollListenerAdded = false;
let achievements = [];

const levelNames = [
  'Mouton', 'Mouton √âveill√©', 'Ch√®vre Sceptique', 'Veau Contestataire',
  'Boeuf Indign√©', 'Taureau R√©sign√©', 'Vache Sacr√©e', 'Licorne Cynique',
  'Phoenix D√©sabus√©', 'Dieu du Scroll'
];

const tickerMessages = [
  'üéà Jean-Marc_51 vient de perdre son 847√®me droit ‚Äî NOUVEAU RECORD',
  'üèÜ BofBof_Citoyen a d√©bloqu√© le badge ¬´ J\'ai lu une ligne de CGU ¬ª',
  'üî• Streak de passivit√© mondiale : 487 jours sans manif',
  'üíÄ RalerMaisRienFaire a atteint le rang Platine en indignation passive',
  'üé∞ MonVoteComptePas a ouvert une lootbox : droit de p√©tition (doublon)',
  'üìä Statistique du jour : 99.7% des utilisateurs n\'ont rien fait',
  'üêë Nouveau joueur rejoint ‚Äî bienvenue dans le troupeau',
  '‚ö†Ô∏è MAINTENANCE : la d√©mocratie est temporairement indisponible',
  'üç™ Record : 14 cookies accept√©s en 3 secondes par K√©vin_Bruxelles',
  'üì± Temps moyen sur l\'app : 4h12 ‚Äî Temps moyen d\'action citoyenne : 0s',
  'üé™ Le cirque continue ‚Äî prochaine √©lection dans 1461 jours',
  'üíé OFFRE FLASH : -50% sur le pack ¬´ Illusion de Choix ¬ª',
];

// ============ BALLOONS ============
function spawnBalloon() {
  const container = document.getElementById('balloonContainer');
  const balloon = document.createElement('div');
  balloon.className = 'balloon';
  balloon.textContent = ['üéà','üéà','üéà','üé™','üêë','üíÄ','üèÜ','üç™','üó≥Ô∏è'][Math.floor(Math.random()*9)];
  balloon.style.left = Math.random() * 100 + '%';
  balloon.style.animationDuration = (8 + Math.random() * 12) + 's';
  balloon.style.animationDelay = Math.random() * 2 + 's';
  balloon.style.fontSize = (30 + Math.random() * 30) + 'px';
  container.appendChild(balloon);
  setTimeout(() => balloon.remove(), 22000);
}

setInterval(spawnBalloon, 800);
for(let i = 0; i < 8; i++) setTimeout(spawnBalloon, i * 200);

// ============ TICKER ============
function initTicker() {
  const track = document.getElementById('tickerTrack');
  const allMessages = [...tickerMessages, ...tickerMessages]; // duplicate for seamless
  track.innerHTML = allMessages.map(msg => 
    `<span class="ticker-item">${msg}</span>`
  ).join('');
}
initTicker();

// ============ XP SYSTEM ============
function addXP(amount, reason) {
  totalXP += amount;
  const newLevel = Math.min(Math.floor(totalXP / 100), levelNames.length - 1);
  
  // Update bar
  const progress = (totalXP % 100);
  document.getElementById('xpFill').style.width = progress + '%';
  document.getElementById('lbYourScore').textContent = totalXP.toLocaleString() + ' XP';
  
  // Level up?
  if (newLevel > level) {
    level = newLevel;
    document.getElementById('levelBadge').textContent = `Niv. ${level} ‚Äî ${levelNames[level]}`;
    showAchievement('üéà LEVEL UP !', `Tu es maintenant ${levelNames[level]}. Toujours aucun impact.`);
    spawnConfetti();
  }
  
  // Toast
  showToast(`+${amount} XP`, reason);
  
  // Random notification
  if (Math.random() > 0.6) {
    setTimeout(() => showNotification(), 1000);
  }
}

// ============ TOAST ============
function showToast(title, msg) {
  const stack = document.getElementById('toastStack');
  const toast = document.createElement('div');
  toast.className = 'toast';
  toast.innerHTML = `<strong style="color:var(--scratch-green);">${title}</strong>${msg}`;
  stack.appendChild(toast);
  setTimeout(() => toast.remove(), 4000);
}

// ============ ACHIEVEMENTS ============
function showAchievement(title, desc) {
  const popup = document.getElementById('achievementPopup');
  document.getElementById('achTitle').textContent = title;
  document.getElementById('achDesc').textContent = desc;
  popup.classList.add('show');
  setTimeout(() => popup.classList.remove('show'), 3500);
}

// ============ NOTIFICATIONS ============
const notifMessages = [
  { icon: 'üó≥Ô∏è', text: 'Une loi est pass√©e pendant que tu scrollais. -1 droit.' },
  { icon: 'üìä', text: 'Ton score de passivit√© a augment√© de 2.7%.' },
  { icon: 'üêë', text: '3 nouveaux moutons ont rejoint le troupeau.' },
  { icon: 'üé∞', text: 'Ta lootbox d√©mocratique est pr√™te ! (Contenu : d√©ception)' },
  { icon: 'üîî', text: 'Rappel : tu n\'as rien fait depuis 0 secondes.' },
  { icon: 'üíÄ', text: 'Ton d√©put√© n\'a pas lu ta p√©tition. Comme d\'habitude.' },
  { icon: 'üç™', text: 'Nouveau cookie install√©. Total : 847.' },
  { icon: 'üéà', text: 'Un ballon s\'est envol√©. Comme tes espoirs.' },
];

function showNotification() {
  const area = document.getElementById('notifArea');
  const msg = notifMessages[Math.floor(Math.random() * notifMessages.length)];
  const notif = document.createElement('div');
  notif.className = 'notif-popup';
  notif.innerHTML = `<div class="notif-card">${msg.icon} ${msg.text}</div>`;
  area.appendChild(notif);
  setTimeout(() => notif.remove(), 4500);
}

// ============ CONSENT ============
function closeConsent() {
  document.getElementById('consentOverlay').classList.add('hidden');
  addXP(25, 'Consentement aveugle donn√©');
  showAchievement('üêë SUCC√àS : MOUTON DOCILE', 'Tu as accept√© sans lire. Classique.');
  
  // Show cookie wall after 3s
  setTimeout(() => {
    document.getElementById('cookieWall').style.display = 'block';
  }, 3000);
  
  // Start notification spam
  setTimeout(() => showNotification(), 5000);
  setInterval(() => {
    if (Math.random() > 0.7) showNotification();
  }, 8000);
}

function rejectConsent() {
  rejectAttempts++;
  const btn = document.getElementById('rejectBtn');
  const newSize = Math.max(4, 9 - rejectAttempts);
  btn.style.fontSize = newSize + 'px';
  btn.style.padding = Math.max(2, 6 - rejectAttempts) + 'px';
  btn.style.opacity = Math.max(0.1, 0.4 - rejectAttempts * 0.05);
  
  const responses = [
    'refuser (le bouton rapetisse...)',
    'ref... (il rapetisse encore...)',
    're... (presque invisible...)',
    'r.. (...)',
    '. (abandonnes ?)',
    '',
  ];
  btn.textContent = responses[Math.min(rejectAttempts, responses.length - 1)] || '';
  
  if (rejectAttempts >= 6) {
    closeConsent();
    setTimeout(() => showAchievement('üíÄ R√âSISTANCE FUTILE', 'Tu as essay√© 6 fois. On a accept√© pour toi.'), 500);
  }
}

function closeCookie() {
  document.getElementById('cookieWall').style.display = 'none';
  addXP(15, 'Cookie accept√© sans r√©fl√©chir');
}

// ============ CHALLENGES ============
function completeChallenge(el, xp) {
  if (el.classList.contains('completed')) return;
  el.classList.add('completed');
  el.querySelector('.ch-check').textContent = '‚úÖ';
  addXP(xp, el.querySelector('h4').textContent);
  
  // Check if all completed
  const allCards = document.querySelectorAll('.challenge-card');
  const allCompleted = [...allCards].every(c => c.classList.contains('completed'));
  if (allCompleted) {
    setTimeout(() => {
      showAchievement('üèÜ QU√äTES TERMIN√âES', 'Bravo ! Aucun de ces d√©fis n\'√©tait r√©el. +0 impact.');
      spawnConfetti();
    }, 800);
  }
}

// ============ WHEEL ============
const wheelItems = [
  { text: 'Droit au logement', color: '#FF6680' },
  { text: 'Vie priv√©e', color: '#855CD6' },
  { text: 'Cong√©s pay√©s', color: '#4C97FF' },
  { text: 'Sant√© gratuite', color: '#59C059' },
  { text: 'Retraite', color: '#FF8C1A' },
  { text: '√âducation', color: '#5CB1D6' },
  { text: 'Libert√© de presse', color: '#FFBF00' },
  { text: 'Rien du tout lol', color: '#FF6EB4' },
];

function drawWheel() {
  const canvas = document.getElementById('wheelCanvas');
  const ctx = canvas.getContext('2d');
  const cx = 140, cy = 140, r = 136;
  const sliceAngle = (2 * Math.PI) / wheelItems.length;
  
  wheelItems.forEach((item, i) => {
    const startAngle = i * sliceAngle;
    const endAngle = (i + 1) * sliceAngle;
    
    ctx.beginPath();
    ctx.moveTo(cx, cy);
    ctx.arc(cx, cy, r, startAngle, endAngle);
    ctx.fillStyle = item.color;
    ctx.fill();
    ctx.strokeStyle = 'rgba(0,0,0,0.2)';
    ctx.lineWidth = 2;
    ctx.stroke();
    
    // Text
    ctx.save();
    ctx.translate(cx, cy);
    ctx.rotate(startAngle + sliceAngle / 2);
    ctx.fillStyle = '#fff';
    ctx.font = 'bold 10px Nunito';
    ctx.textAlign = 'center';
    ctx.shadowColor = 'rgba(0,0,0,0.4)';
    ctx.shadowBlur = 3;
    ctx.fillText(item.text, r * 0.6, 4);
    ctx.restore();
  });
  
  // Center
  ctx.beginPath();
  ctx.arc(cx, cy, 18, 0, 2 * Math.PI);
  ctx.fillStyle = '#1E1E2E';
  ctx.fill();
  ctx.strokeStyle = '#FFBF00';
  ctx.lineWidth = 3;
  ctx.stroke();
  ctx.fillStyle = '#fff';
  ctx.font = '14px serif';
  ctx.textAlign = 'center';
  ctx.fillText('üé™', cx, cy + 5);
}

drawWheel();

function spinWheel() {
  if (wheelSpinning) return;
  wheelSpinning = true;
  
  const canvas = document.getElementById('wheelCanvas');
  const resultEl = document.getElementById('wheelResult');
  resultEl.textContent = 'üé™ La roue tourne...';
  
  const spins = 5 + Math.random() * 5;
  const finalAngle = spins * 360 + Math.random() * 360;
  
  canvas.style.transition = 'transform 4s cubic-bezier(0.17, 0.67, 0.12, 0.99)';
  canvas.style.transform = `rotate(${finalAngle}deg)`;
  
  setTimeout(() => {
    const normalizedAngle = finalAngle % 360;
    const sliceAngle = 360 / wheelItems.length;
    const index = Math.floor(((360 - normalizedAngle + sliceAngle / 2) % 360) / sliceAngle);
    const item = wheelItems[index % wheelItems.length];
    
    resultEl.innerHTML = `üíÄ Tu perds : <span style="color:${item.color}">${item.text}</span>`;
    addXP(35, `Droit perdu : ${item.text}`);
    showAchievement('üé∞ ROUE TOURN√âE', `F√©licitations ! Tu as perdu : ${item.text}`);
    spawnConfetti();
    
    wheelSpinning = false;
    setTimeout(() => {
      canvas.style.transition = 'none';
    }, 100);
  }, 4200);
}

// ============ CONFETTI ============
function spawnConfetti() {
  const colors = ['#FF8C1A', '#FFBF00', '#855CD6', '#4C97FF', '#59C059', '#FF6680', '#FF6EB4'];
  for (let i = 0; i < 40; i++) {
    const piece = document.createElement('div');
    piece.className = 'confetti-piece';
    piece.style.left = Math.random() * 100 + 'vw';
    piece.style.top = '-10px';
    piece.style.width = (6 + Math.random() * 8) + 'px';
    piece.style.height = (6 + Math.random() * 8) + 'px';
    piece.style.background = colors[Math.floor(Math.random() * colors.length)];
    piece.style.borderRadius = Math.random() > 0.5 ? '50%' : '2px';
    piece.style.animationDuration = (1.5 + Math.random() * 2) + 's';
    piece.style.animationDelay = Math.random() * 0.5 + 's';
    document.body.appendChild(piece);
    setTimeout(() => piece.remove(), 4000);
  }
}

// ============ DISILLUSION BUTTON ============
function triggerDisillusion() {
  showAchievement('üíÄ INDIGNATION D√âTECT√âE', 'Cooldown actif. Prochaine indignation disponible en 2029.');
  addXP(5, 'Tentative d\'indignation');
  showToast('‚è≥ COOLDOWN', 'S\'indigner est limit√© √† 1 fois par cycle √©lectoral.');
}

// ============ SCROLL DOTS ============
const sections = ['features', 'challenges', 'leaderboard', 'wheel-section', 'pricing'];
const dotsContainer = document.getElementById('scrollDots');
sections.forEach(() => {
  const dot = document.createElement('div');
  dot.className = 'dot';
  dotsContainer.appendChild(dot);
});

window.addEventListener('scroll', () => {
  const scrollY = window.scrollY;
  const dots = dotsContainer.querySelectorAll('.dot');
  
  sections.forEach((id, i) => {
    const el = document.getElementById(id);
    if (!el) return;
    const rect = el.getBoundingClientRect();
    if (rect.top < window.innerHeight / 2 && rect.bottom > window.innerHeight / 2) {
      dots.forEach(d => d.classList.remove('active'));
      dots[i].classList.add('active');
    }
  });
  
  // Random scroll XP (rare)
  if (Math.random() > 0.995) {
    addXP(1, 'Scroll passif d√©tect√©');
  }
});

// ============ RANDOM EVENTS ============
setTimeout(() => {
  showNotification();
}, 8000);

// Fake "someone just joined" every 15-25s
setInterval(() => {
  const names = ['K√©vin_Brux', 'Martine_42', 'xX_Citoyen_Xx', 'JCVD_Fan_1960', 'Anonyme_7742', 'PasContent_Mais_Bon', 'SilentMajority_BE'];
  const name = names[Math.floor(Math.random() * names.length)];
  showToast('üêë Nouveau mouton', `${name} vient de rejoindre le troupeau.`);
}, 18000);

// Easter egg: Konami code
let konamiSequence = [];
const konamiCode = [38,38,40,40,37,39,37,39,66,65];
document.addEventListener('keydown', (e) => {
  konamiSequence.push(e.keyCode);
  if (konamiSequence.length > 10) konamiSequence.shift();
  if (konamiSequence.join(',') === konamiCode.join(',')) {
    addXP(999, 'CODE KONAMI ACTIV√â');
    showAchievement('üïπÔ∏è HACK D√âTECT√â', 'Tu as trouv√© le code. √áa ne change toujours rien.');
    spawnConfetti();
    document.body.style.animation = 'rainbowShift 0.5s linear infinite';
    document.body.style.backgroundSize = '300% 300%';
    document.body.style.backgroundImage = 'linear-gradient(135deg, #FF8C1A, #FFBF00, #59C059, #4C97FF, #855CD6, #FF6680)';
    setTimeout(() => {
      document.body.style.animation = '';
      document.body.style.backgroundImage = '';
      document.body.style.backgroundColor = 'var(--scratch-dark)';
    }, 5000);
  }
});
</script>
</body>
</html>
