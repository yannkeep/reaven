<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‚óá D√âMOGARCHIE ‚Äî Tracker de Droits</title>
<meta name="description" content="Combien de droits avez-vous sans le savoir ? Combien d'argent laissez-vous sur la table ? V√©rifiez.">
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;600;700&family=Bitter:wght@400;700;900&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
:root{
  --bg:#080708;--surface:#0d0c0e;--panel:#131215;--border:#211f24;
  --text:#bcb8c2;--dim:#635e6b;--white:#f0ecf5;
  --teal:#14b8a6;--teal-dim:rgba(20,184,166,0.1);
  --red:#f43f5e;--amber:#f59e0b;--green:#22c55e;--violet:#a78bfa;
  --mono:'IBM Plex Mono',monospace;--serif:'Bitter',Georgia,serif;
}
html{font-size:16px;scroll-behavior:smooth}
body{background:var(--bg);color:var(--text);font-family:var(--mono);min-height:100vh}
body::before{content:'';position:fixed;inset:0;background:url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.03'/%3E%3C/svg%3E");pointer-events:none;z-index:9999}

.header{border-bottom:1px solid var(--border);padding:1.5rem 2rem;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:1rem}
.logo{font-family:var(--serif);font-weight:900;font-size:1.4rem;color:var(--teal)}
.logo span{color:var(--dim);font-weight:400;font-size:.8rem}
.badge{font-size:.65rem;text-transform:uppercase;letter-spacing:.1em;padding:.25rem .6rem;border:1px solid var(--teal);color:var(--teal);border-radius:2px}

.container{max-width:820px;margin:0 auto;padding:2rem 1.5rem 6rem}

.intro{padding:2rem 0;border-bottom:1px solid var(--border);margin-bottom:2rem}
.intro h1{font-family:var(--serif);font-weight:900;font-size:2.2rem;line-height:1.15;color:var(--white);margin-bottom:1rem}
.intro h1 em{font-style:normal;color:var(--teal)}
.intro p{font-size:.82rem;line-height:1.7;color:var(--dim);max-width:620px}

/* PROFILE QUICK */
.profile-section{margin-bottom:2rem;padding:1.5rem;background:var(--panel);border:1px solid var(--border);border-radius:2px}
.profile-title{font-weight:700;font-size:.85rem;color:var(--white);margin-bottom:1rem}
.profile-grid{display:grid;grid-template-columns:1fr 1fr;gap:.6rem}
.pg-item{display:flex;flex-direction:column;gap:.3rem}
.pg-label{font-size:.65rem;text-transform:uppercase;letter-spacing:.1em;color:var(--dim)}
.pg-select{
  padding:.5rem .7rem;background:var(--surface);border:1px solid var(--border);
  color:var(--text);font-family:var(--mono);font-size:.78rem;border-radius:2px;outline:none
}
.pg-select:focus{border-color:var(--teal)}
option{background:var(--panel);color:var(--text)}

.scan-btn{
  display:block;width:100%;padding:1rem;margin-top:1rem;
  background:var(--teal);color:var(--bg);border:none;
  font-family:var(--mono);font-size:.85rem;font-weight:700;
  text-transform:uppercase;letter-spacing:.04em;cursor:pointer;border-radius:2px;transition:all .2s
}
.scan-btn:hover{background:#0d9488}

/* RESULTS */
#results{display:none}

/* SCORE */
.score-bar{
  padding:1.5rem;margin-bottom:2rem;
  background:var(--surface);border:1px solid var(--border);border-radius:2px;
  display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:1rem
}
.sb-main{text-align:center}
.sb-big{font-family:var(--serif);font-weight:900;font-size:2.5rem;color:var(--teal)}
.sb-label{font-size:.65rem;text-transform:uppercase;letter-spacing:.1em;color:var(--dim)}
.sb-money{text-align:center}
.sb-money-val{font-family:var(--serif);font-weight:900;font-size:1.8rem;color:var(--amber)}
.sb-money-label{font-size:.65rem;text-transform:uppercase;letter-spacing:.1em;color:var(--dim)}

/* RIGHTS LIST */
.rights-category{margin-bottom:2rem}
.rc-header{
  display:flex;justify-content:space-between;align-items:center;
  padding-bottom:.6rem;border-bottom:1px solid var(--border);margin-bottom:.8rem
}
.rc-name{font-family:var(--serif);font-weight:700;font-size:1rem;color:var(--white)}
.rc-count{font-size:.7rem;color:var(--dim)}

.right-card{
  padding:1rem 1.2rem;margin-bottom:.5rem;
  background:var(--panel);border:1px solid var(--border);border-radius:2px;
  cursor:pointer;transition:all .15s
}
.right-card:hover{border-color:var(--dim)}
.right-card.open{border-color:var(--teal)}
.right-card.claimed{opacity:.5;border-left:3px solid var(--green)}
.right-card.missed{border-left:3px solid var(--red)}
.right-card.maybe{border-left:3px solid var(--amber)}

.rc-top{display:flex;justify-content:space-between;align-items:center}
.rc-title{font-weight:600;font-size:.82rem;color:var(--white);flex:1}
.rc-value{font-size:.78rem;font-weight:700;margin-left:1rem;white-space:nowrap}
.rc-value.money{color:var(--amber)}
.rc-value.right{color:var(--teal)}

.rc-detail{display:none;margin-top:.8rem;padding-top:.8rem;border-top:1px solid var(--border)}
.right-card.open .rc-detail{display:block;animation:fadeIn .3s ease}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}

.rc-desc{font-size:.75rem;line-height:1.7;color:var(--text);margin-bottom:.6rem}
.rc-desc strong{color:var(--white)}
.rc-how{font-size:.72rem;line-height:1.6;color:var(--dim);padding:.6rem;background:var(--surface);border-radius:2px;margin-bottom:.5rem}
.rc-how strong{color:var(--teal)}
.rc-legal{font-size:.62rem;color:var(--dim);margin-top:.4rem}

.rc-actions{display:flex;gap:.4rem;margin-top:.6rem}
.rc-action{
  padding:.3rem .7rem;font-family:var(--mono);font-size:.65rem;
  background:var(--surface);border:1px solid var(--border);color:var(--dim);
  cursor:pointer;border-radius:2px;transition:all .12s
}
.rc-action:hover{border-color:var(--teal);color:var(--teal)}
.rc-action.done{background:var(--green);color:var(--bg);border-color:var(--green)}

/* SUMMARY */
.summary-box{
  margin:2rem 0;padding:2rem;
  background:var(--surface);border:1px solid var(--border);border-left:3px solid var(--teal);
  border-radius:0 2px 2px 0
}
.summary-box h3{font-family:var(--serif);font-weight:700;font-size:1rem;color:var(--teal);margin-bottom:.8rem}
.summary-box p{font-size:.8rem;line-height:1.75;color:var(--text)}
.summary-box strong{color:var(--white)}

.cta-row{display:grid;grid-template-columns:1fr 1fr;gap:.6rem;margin-top:2rem}
.cta-btn{padding:.8rem 1rem;font-family:var(--mono);font-size:.75rem;font-weight:600;cursor:pointer;border-radius:2px;transition:all .15s;text-align:center;text-decoration:none;display:block}
.cta-btn.primary{background:var(--teal);color:var(--bg);border:1px solid var(--teal)}
.cta-btn.secondary{background:transparent;color:var(--text);border:1px solid var(--border)}

.footer{margin-top:4rem;padding:1.5rem 0;border-top:1px solid var(--border);display:flex;justify-content:space-between;flex-wrap:wrap;gap:1rem;font-size:.65rem;color:var(--dim)}
.footer a{color:var(--green);text-decoration:none}

@media(max-width:600px){
  .container{padding:1.5rem 1rem 4rem}
  .intro h1{font-size:1.7rem}
  .profile-grid{grid-template-columns:1fr}
  .cta-row{grid-template-columns:1fr}
}
</style>
</head>
<body>

<div class="header">
  <div style="display:flex;align-items:center;gap:1rem">
    <div class="logo">‚óá D√âMOGARCHIE <span>/ droits</span></div>
    <div class="badge">Ê≥ïÂæãÊàò JURIDIQUE</div>
  </div>
  <div style="font-size:.7rem;color:var(--dim)">M√âSO ¬∑ Module 08/17</div>
</div>

<div class="container">

  <div class="intro">
    <h1>Tracker de <em>droits</em></h1>
    <p>
      En Belgique, 20 √† 50% des personnes √©ligibles ne r√©clament pas leurs droits sociaux. R√©sultat : des milliards d'euros non distribu√©s chaque ann√©e. Cet outil scanne votre profil et liste <strong>tous les droits que vous pourriez exercer ‚Äî et l'argent que vous laissez sur la table</strong>.
    </p>
  </div>

  <!-- PROFILE -->
  <div class="profile-section">
    <div class="profile-title">Votre profil (rien n'est transmis)</div>
    <div class="profile-grid">
      <div class="pg-item">
        <div class="pg-label">Situation professionnelle</div>
        <select class="pg-select" id="pro">
          <option value="emploi">En emploi (salari√©)</option>
          <option value="independant">Ind√©pendant</option>
          <option value="chomage">Demandeur d'emploi</option>
          <option value="cpas">B√©n√©ficiaire CPAS/RIS</option>
          <option value="maladie">En incapacit√© / maladie</option>
          <option value="pension">Pensionn√©</option>
          <option value="etudiant">√âtudiant</option>
        </select>
      </div>
      <div class="pg-item">
        <div class="pg-label">Revenu mensuel net</div>
        <select class="pg-select" id="revenu">
          <option value="0">Moins de 1.200 ‚Ç¨</option>
          <option value="1200">1.200 ‚Äî 1.800 ‚Ç¨</option>
          <option value="1800" selected>1.800 ‚Äî 2.500 ‚Ç¨</option>
          <option value="2500">2.500 ‚Äî 3.500 ‚Ç¨</option>
          <option value="3500">Plus de 3.500 ‚Ç¨</option>
        </select>
      </div>
      <div class="pg-item">
        <div class="pg-label">Situation familiale</div>
        <select class="pg-select" id="famille">
          <option value="isole">Isol√©¬∑e</option>
          <option value="couple">En couple</option>
          <option value="enfants">Avec enfant(s)</option>
          <option value="mono">Famille monoparentale</option>
        </select>
      </div>
      <div class="pg-item">
        <div class="pg-label">Logement</div>
        <select class="pg-select" id="logement">
          <option value="locataire">Locataire</option>
          <option value="proprio">Propri√©taire</option>
          <option value="social">Logement social</option>
        </select>
      </div>
      <div class="pg-item">
        <div class="pg-label">R√©gion</div>
        <select class="pg-select" id="region">
          <option value="wallonie">Wallonie</option>
          <option value="bruxelles">Bruxelles</option>
          <option value="flandre">Flandre</option>
        </select>
      </div>
      <div class="pg-item">
        <div class="pg-label">√Çge</div>
        <select class="pg-select" id="age">
          <option value="18">18-25 ans</option>
          <option value="26">26-40 ans</option>
          <option value="41" selected>41-55 ans</option>
          <option value="56">56-65 ans</option>
          <option value="66">65+ ans</option>
        </select>
      </div>
    </div>
    <button class="scan-btn" onclick="scan()">Scanner mes droits</button>
  </div>

  <!-- RESULTS -->
  <div id="results"></div>

</div>

<script>
// ============================================================
// RIGHTS DATABASE
// ============================================================
const RIGHTS = [
  // --- FISCALIT√â ---
  { cat:'Fiscalit√©', name:'R√©duction pour habitation propre', val:760, type:'money', conditions:{logement:['proprio']}, desc:'Si vous avez un cr√©dit hypoth√©caire, vous avez droit √† une r√©duction d\'imp√¥t r√©gionale. En Wallonie : bonus logement wallon. √Ä Bruxelles : abattement droits d\'enregistrement.', how:'<strong>Comment :</strong> V√©rifiez votre d√©claration fiscale (codes 1370-1374). Si vous ne l\'avez pas d√©clar√©, introduisez une r√©clamation au SPF Finances dans les 6 mois.', legal:'CIR 1992, art. 145/46 ¬∑ D√©crets r√©gionaux' },
  { cat:'Fiscalit√©', name:'D√©duction frais r√©els', val:500, type:'money', conditions:{pro:['emploi']}, desc:'Par d√©faut, le fisc applique des frais forfaitaires. Si vos frais r√©els (trajet, bureau, mat√©riel) d√©passent le forfait, vous pouvez les d√©duire.', how:'<strong>Comment :</strong> Conservez tickets, factures, justificatifs de trajet. Comparez avec le forfait (30% sur la premi√®re tranche). Si vos frais r√©els sont sup√©rieurs, d√©clarez-les en case 1258.', legal:'CIR 1992, art. 49-66' },
  { cat:'Fiscalit√©', name:'√âpargne-pension (avantage fiscal)', val:310, type:'money', conditions:{pro:['emploi','independant'],age:['26','41','56']}, desc:'Jusqu\'√† 1.020 ‚Ç¨/an √©pargn√©s avec r√©duction de 30% (=306‚Ç¨). Si vous √©pargnez d√©j√† mais d√©claration mal remplie, vous perdez l\'avantage.', how:'<strong>Comment :</strong> Souscrivez via votre banque. L\'attestation est normalement pr√©-remplie via tax-on-web. V√©rifiez les codes 1361-1362.', legal:'CIR 1992, art. 145/1' },
  { cat:'Fiscalit√©', name:'Cr√©dit d\'imp√¥t pour bas revenus', val:440, type:'money', conditions:{revenu:['0','1200']}, desc:'Si vos revenus sont faibles, un cr√©dit d\'imp√¥t (remboursable !) peut √™tre accord√©.', how:'<strong>Comment :</strong> Automatique si d√©claration correcte. V√©rifiez que vos revenus sont bien d√©clar√©s. Le cr√©dit appara√Æt dans l\'AER.', legal:'CIR 1992, art. 289ter' },
  { cat:'Fiscalit√©', name:'Statut BIM (intervention major√©e)', val:600, type:'money', conditions:{revenu:['0','1200','1800']}, desc:'Le statut BIM r√©duit drastiquement vos frais de sant√© : tickets mod√©rateurs r√©duits, maximum √† facturer abaiss√©. Beaucoup d\'√©ligibles ne le demandent pas.', how:'<strong>Comment :</strong> Contactez votre mutuelle. L\'octroi est automatique pour b√©n√©ficiaires CPAS/GRAPA. Pour les autres : demande sur base des revenus. Seuil isol√© : ~22.411 ‚Ç¨/an brut.', legal:'Loi coordonn√©e 14 juillet 1994, art. 37' },

  // --- SOCIAL ---
  { cat:'Social', name:'Aide du CPAS (revenu d\'int√©gration)', val:1200, type:'money', conditions:{revenu:['0'],pro:['chomage','cpas']}, desc:'Le RIS est un droit, pas une faveur. Isol√© : 1.186,78 ‚Ç¨/mois. Cohabitant : 791,19 ‚Ç¨. Chef de famille : 1.607,02 ‚Ç¨. Beaucoup de personnes √©ligibles ne le demandent pas par honte ou ignorance.', how:'<strong>Comment :</strong> Pr√©sentez-vous au CPAS de votre commune. La demande est un droit l√©gal. Le CPAS a 30 jours pour d√©cider. En cas de refus : recours gratuit au Tribunal du Travail.', legal:'Loi 26 mai 2002 ¬∑ Loi organique CPAS 8 juillet 1976' },
  { cat:'Social', name:'Allocations familiales major√©es', val:600, type:'money', conditions:{famille:['enfants','mono']}, desc:'Un suppl√©ment mensuel est accord√© aux familles √† bas revenus, monoparentales ou en situation de handicap. Jusqu\'√† 50 ‚Ç¨/enfant/mois suppl√©mentaire.', how:'<strong>Comment :</strong> Demande aupr√®s de votre caisse d\'allocations familiales. Suppl√©ment social : automatique si BIM ou RIS. Sinon : demande √† faire.', legal:'D√©crets r√©gionaux allocations familiales' },
  { cat:'Social', name:'Aide alimentaire / √©piceries sociales', val:0, type:'right', conditions:{revenu:['0','1200']}, desc:'Le r√©seau belge d\'aide alimentaire (BIRB, Restos du C≈ìur, CPAS, √©piceries sociales) est accessible sans conditions complexes. Aucune honte √† avoir.', how:'<strong>Comment :</strong> Contactez le CPAS ou recherchez "√©picerie sociale + votre commune". Pas de conditions d\'emploi.', legal:'Programme europ√©en FEAD' },
  { cat:'Social', name:'Prime de fin d\'ann√©e (ch√¥mage)', val:350, type:'money', conditions:{pro:['chomage']}, desc:'Les demandeurs d\'emploi ont droit √† une prime de fin d\'ann√©e de l\'ONEM, sous conditions. Beaucoup ne la r√©clament pas.', how:'<strong>Comment :</strong> V√©rifiez avec votre organisme de paiement (syndicat ou CAPAC). La prime est li√©e au nombre de jours d\'indemnisation dans l\'ann√©e.', legal:'AR 25 novembre 1991' },

  // --- √âNERGIE ---
  { cat:'√ânergie & Logement', name:'Tarif social √©nergie', val:900, type:'money', conditions:{revenu:['0','1200','1800']}, desc:'Le tarif social gaz et √©lectricit√© r√©duit votre facture de 25 √† 40%. Cat√©gories : BIM, GRAPA, RIS, handicap, m√©diation de dettes.', how:'<strong>Comment :</strong> L\'octroi est automatique pour les cat√©gories reconnues via la Banque-Carrefour. Si vous pensez y avoir droit et ne l\'avez pas : contactez votre fournisseur ou le SPF √âconomie.', legal:'AR 29 mars 2012 ¬∑ Loi 29 avril 1999' },
  { cat:'√ânergie & Logement', name:'Fonds social mazout', val:210, type:'money', conditions:{revenu:['0','1200','1800'],logement:['locataire','proprio']}, desc:'Si vous vous chauffez au mazout et avez de faibles revenus, le Fonds mazout octroie une allocation de chauffage.', how:'<strong>Comment :</strong> Demande au CPAS dans les 60 jours suivant la livraison. Munissez-vous de la facture de mazout et d\'une preuve de revenus.', legal:'Loi 4 septembre 2002' },
  { cat:'√ânergie & Logement', name:'Primes r√©novation / isolation', val:2500, type:'money', conditions:{logement:['proprio']}, desc:'Chaque R√©gion offre des primes importantes pour l\'isolation, le remplacement de chaudi√®re, les panneaux solaires. Jusqu\'√† 70% du co√ªt pour les bas revenus.', how:'<strong>Comment :</strong> Wallonie : primes √©nergie (energie.wallonie.be). Bruxelles : Renolution. Flandre : MijnVerbouwPremie. Demandez AVANT de commencer les travaux.', legal:'D√©crets r√©gionaux √©nergie' },
  { cat:'√ânergie & Logement', name:'Allocation de d√©m√©nagement / loyer', val:1000, type:'money', conditions:{logement:['locataire'],revenu:['0','1200','1800'],region:['wallonie','bruxelles']}, desc:'En Wallonie (ADEL) et Bruxelles (ADeL), une allocation existe pour les locataires √† bas revenus inscrits en logement social.', how:'<strong>Comment :</strong> Wallonie : demande √† la SWL (logement.wallonie.be). Bruxelles : SLRB. Condition : √™tre inscrit en logement social ET en logement priv√©.', legal:'Code wallon logement art. 82-92 ¬∑ Code bruxellois logement' },

  // --- SANT√â ---
  { cat:'Sant√©', name:'Maximum √† facturer (MAF)', val:450, type:'money', conditions:{}, desc:'Le MAF plafonne vos d√©penses de sant√© annuelles. Au-del√† d\'un certain montant (li√© au revenu), tout est rembours√© √† 100%. Beaucoup de gens paient trop sans le savoir.', how:'<strong>Comment :</strong> Le MAF social est automatique (mutuelle). Le MAF revenus est calcul√© au 1er janvier de l\'ann√©e suivante. V√©rifiez avec votre mutuelle que vous √™tes bien dans le syst√®me.', legal:'Loi coordonn√©e 14 juillet 1994, art. 37¬ß19' },
  { cat:'Sant√©', name:'Remboursement soins psychologiques', val:240, type:'money', conditions:{}, desc:'Depuis 2022, des s√©ances de psychologie sont rembours√©es par l\'INAMI via les r√©seaux de soins en sant√© mentale. 20 s√©ances/an √† 11‚Ç¨ pour les adultes.', how:'<strong>Comment :</strong> Cherchez un psychologue conventionn√© via les r√©seaux de sant√© mentale (r√©seau107.be). Pas besoin de prescription m√©dicale.', legal:'Convention INAMI-Psychologues 2022' },

  // --- DROITS FONDAMENTAUX ---
  { cat:'Droits fondamentaux', name:'Acc√®s aux documents administratifs', val:0, type:'right', conditions:{}, desc:'La Constitution (art. 32) vous garantit l\'acc√®s √† TOUT document administratif. Budgets communaux, PV de conseil, √©tudes d\'impact, courriers internes ‚Äî tout est accessible.', how:'<strong>Comment :</strong> Envoyez une demande √©crite (courrier, email) √† l\'administration. Elle a 30 jours pour r√©pondre. En cas de refus : plainte √† la CADA (gratuite). La CADA peut forcer la communication.', legal:'Constitution belge art. 32 ¬∑ D√©crets transparence r√©gionaux' },
  { cat:'Droits fondamentaux', name:'Droit de p√©tition au Parlement', val:0, type:'right', conditions:{}, desc:'Tout citoyen peut adresser une p√©tition au Parlement f√©d√©ral, r√©gional ou communautaire. Si elle recueille assez de signatures, elle DOIT √™tre examin√©e en commission.', how:'<strong>Comment :</strong> R√©digez une p√©tition claire et circonstanci√©e. Adressez-la au pr√©sident de l\'assembl√©e. Seuil Parlement wallon : 1.000 signatures pour droit d\'audition.', legal:'Constitution belge art. 28 ¬∑ R√®glement Parlement wallon art. 110' },
  { cat:'Droits fondamentaux', name:'Plainte √† Unia (discrimination)', val:0, type:'right', conditions:{}, desc:'Toute discrimination (emploi, logement, services) bas√©e sur l\'origine, le genre, le handicap, la fortune, l\'√©tat de sant√©... est un d√©lit. Unia intervient gratuitement.', how:'<strong>Comment :</strong> Signalement en ligne sur unia.be. Unia peut tenter une m√©diation ou ester en justice √† votre place (gratuitement, avec votre accord).', legal:'Loi 10 mai 2007 anti-discrimination ¬∑ Loi 30 juillet 1981' },
  { cat:'Droits fondamentaux', name:'RGPD : acc√®s √† vos donn√©es', val:0, type:'right', conditions:{}, desc:'Toute entreprise ou administration doit vous communiquer vos donn√©es personnelles dans les 30 jours sur simple demande. Et les supprimer si vous le demandez.', how:'<strong>Comment :</strong> Email ou courrier au DPO de l\'organisme, en citant l\'art. 15 du RGPD. En cas de non-r√©ponse apr√®s 30 jours : plainte √† l\'APD (gratuite).', legal:'RGPD art. 15 (acc√®s), 17 (effacement), 20 (portabilit√©)' },
  { cat:'Droits fondamentaux', name:'Aide juridique gratuite (1re ligne)', val:0, type:'right', conditions:{}, desc:'TOUTE personne, quel que soit son revenu, a droit √† une consultation juridique gratuite de 1re ligne. C\'est dans la loi.', how:'<strong>Comment :</strong> Contactez le Bureau d\'Aide Juridique (BAJ) du tribunal de votre arrondissement. Permanences sans rendez-vous dans la plupart des palais de justice.', legal:'Code judiciaire art. 508/1-508/25' },
];

function scan() {
  const profile = {
    pro: document.getElementById('pro').value,
    revenu: document.getElementById('revenu').value,
    famille: document.getElementById('famille').value,
    logement: document.getElementById('logement').value,
    region: document.getElementById('region').value,
    age: document.getElementById('age').value
  };

  const applicable = RIGHTS.filter(r => {
    if (!r.conditions || Object.keys(r.conditions).length === 0) return true;
    return Object.entries(r.conditions).every(([key, vals]) => {
      return vals.includes(profile[key]);
    });
  });

  const totalMoney = applicable.filter(r => r.type === 'money').reduce((s, r) => s + r.val, 0);
  const totalRights = applicable.filter(r => r.type === 'right').length;
  const totalMoneyRights = applicable.filter(r => r.type === 'money').length;

  // Group by category
  const grouped = {};
  applicable.forEach(r => {
    if (!grouped[r.cat]) grouped[r.cat] = [];
    grouped[r.cat].push(r);
  });

  const el = document.getElementById('results');
  el.innerHTML = `
    <div class="score-bar">
      <div class="sb-main">
        <div class="sb-big">${applicable.length}</div>
        <div class="sb-label">Droits identifi√©s</div>
      </div>
      <div class="sb-money">
        <div class="sb-money-val">${totalMoney.toLocaleString('fr-BE')} ‚Ç¨/an</div>
        <div class="sb-label">Valeur estim√©e des aides non r√©clam√©es</div>
      </div>
      <div>
        <div style="font-family:var(--serif);font-weight:900;font-size:1.2rem;color:var(--teal)">${totalRights}</div>
        <div class="sb-label">Droits fondamentaux</div>
      </div>
    </div>

    ${Object.entries(grouped).map(([cat, rights]) => `
      <div class="rights-category">
        <div class="rc-header">
          <div class="rc-name">${cat}</div>
          <div class="rc-count">${rights.length} droit${rights.length > 1 ? 's' : ''}</div>
        </div>
        ${rights.map((r, i) => `
          <div class="right-card maybe" id="rc-${cat.replace(/\s/g,'')}-${i}" onclick="this.classList.toggle('open')">
            <div class="rc-top">
              <div class="rc-title">${r.name}</div>
              <div class="rc-value ${r.type === 'money' ? 'money' : 'right'}">
                ${r.type === 'money' ? '~' + r.val.toLocaleString('fr-BE') + ' ‚Ç¨/an' : '‚öñ Droit'}
              </div>
            </div>
            <div class="rc-detail">
              <div class="rc-desc">${r.desc}</div>
              <div class="rc-how">${r.how}</div>
              <div class="rc-legal">${r.legal}</div>
              <div class="rc-actions">
                <button class="rc-action" onclick="event.stopPropagation();markRight(this,'claimed')">‚úì Je l'exerce d√©j√†</button>
                <button class="rc-action" onclick="event.stopPropagation();markRight(this,'missed')">‚úó Je ne le savais pas</button>
                <button class="rc-action" onclick="event.stopPropagation();markRight(this,'todo')">‚Üí √Ä faire</button>
              </div>
            </div>
          </div>
        `).join('')}
      </div>
    `).join('')}

    <div class="summary-box">
      <h3>Pourquoi vous ne saviez pas ?</h3>
      <p>
        Le non-recours aux droits en Belgique est <strong>massif et structurel</strong>. Ce n'est pas de la paresse ‚Äî c'est de l'architecture. Formulaires opaques, guichets surcharg√©s, jargon juridique, d√©lais absurdes, fracture num√©rique.
        <br><br>
        <strong>${totalMoney.toLocaleString('fr-BE')} ‚Ç¨/an</strong> : c'est potentiellement ce que vous laissez sur la table. Et vous n'√™tes pas seul¬∑e : <strong>20 √† 50% des Belges √©ligibles</strong> ne r√©clament pas leurs droits sociaux.
        <br><br>
        Chaque euro non r√©clam√© est un euro √©conomis√© par le syst√®me. <strong>Votre ignorance est leur budget.</strong>
      </p>
    </div>

    <div class="cta-row">
      <button class="cta-btn primary" onclick="exportRights()">üìã Copier ma liste</button>
      <a class="cta-btn secondary" href="generateur-recours.html">‚öñ G√©n√©rateur de recours</a>
      <a class="cta-btn secondary" href="calculateur-impact.html">üí∞ Calculateur d'impact</a>
      <a class="cta-btn secondary" href="miroir-noir.html">‚óá Miroir Noir</a>
    </div>

    <div class="footer">
      <div>‚óá D√âMOGARCHIE ¬∑ <a href="https://ouaisfi.eu">ouaisfieu</a> ¬∑ CC BY-NC 4.0</div>
      <div>Ê≥ïÂæãÊàò Module 08/17 ¬∑ Fork ‚Ä¢ Hack ‚Ä¢ Spread</div>
    </div>
  `;

  el.style.display = 'block';
  setTimeout(() => el.scrollIntoView({ behavior: 'smooth', block: 'start' }), 200);
}

function markRight(btn, status) {
  const card = btn.closest('.right-card');
  card.classList.remove('maybe','claimed','missed');
  card.classList.add(status === 'claimed' ? 'claimed' : status === 'missed' ? 'missed' : 'maybe');
  btn.classList.add('done');
}

function exportRights() {
  const cards = document.querySelectorAll('.right-card');
  let text = '‚óá D√âMOGARCHIE ‚Äî Tracker de Droits\n\nMes droits identifi√©s :\n\n';
  cards.forEach(c => {
    const name = c.querySelector('.rc-title').textContent;
    const val = c.querySelector('.rc-value').textContent;
    text += `‚Üí ${name} : ${val}\n`;
  });
  text += '\n#D√©mogarchie #TrackerDroits\nhttps://ouaisfi.eu';
  navigator.clipboard.writeText(text).then(() => alert('Liste copi√©e !')).catch(() => alert('Erreur'));
}
</script>

</body>
</html>
