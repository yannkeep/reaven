<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‚óá D√âMOGARCHIE ‚Äî G√©n√©rateur de Recours</title>
<meta name="description" content="D√©crivez votre situation. L'outil identifie vos voies de recours et g√©n√®re une lettre structur√©e.">
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;600;700&family=Bitter:wght@400;700;900&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
:root{
  --bg:#080906;--surface:#0e0f0b;--panel:#141511;--border:#222318;
  --text:#c5c6b8;--dim:#6b6c5e;--white:#f0f0e5;
  --gold:#d4a017;--gold-dim:rgba(212,160,23,0.12);
  --red:#dc2626;--red-dim:rgba(220,38,38,0.1);
  --green:#16a34a;--green-dim:rgba(22,163,74,0.1);
  --cyan:#0891b2;--cyan-dim:rgba(8,145,178,0.1);
  --mono:'IBM Plex Mono',monospace;--serif:'Bitter',Georgia,serif;
}
html{font-size:16px;scroll-behavior:smooth}
body{background:var(--bg);color:var(--text);font-family:var(--mono);min-height:100vh}
body::before{content:'';position:fixed;inset:0;background:url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.03'/%3E%3C/svg%3E");pointer-events:none;z-index:9999}

.header{border-bottom:1px solid var(--border);padding:1.5rem 2rem;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:1rem}
.logo{font-family:var(--serif);font-weight:900;font-size:1.4rem;color:var(--gold)}
.logo span{color:var(--dim);font-weight:400;font-size:.8rem}
.badge{font-size:.65rem;text-transform:uppercase;letter-spacing:.1em;padding:.25rem .6rem;border:1px solid var(--gold);color:var(--gold);border-radius:2px}
.header-right{font-size:.7rem;color:var(--dim);text-align:right}

.container{max-width:780px;margin:0 auto;padding:2rem 1.5rem 6rem}

.intro{padding:2.5rem 0 2rem;border-bottom:1px solid var(--border);margin-bottom:2rem}
.intro h1{font-family:var(--serif);font-weight:900;font-size:2.2rem;line-height:1.15;color:var(--white);margin-bottom:1rem}
.intro h1 em{font-style:normal;color:var(--gold)}
.intro p{font-size:.82rem;line-height:1.7;color:var(--dim);max-width:600px}
.disclaimer{margin-top:1rem;padding:.8rem 1rem;background:var(--gold-dim);border:1px solid rgba(212,160,23,0.25);border-radius:2px;font-size:.72rem;color:var(--gold);line-height:1.5}

/* WIZARD STEPS */
.wizard-step{display:none;animation:fadeIn .4s ease}
.wizard-step.active{display:block}
@keyframes fadeIn{from{opacity:0;transform:translateY(15px)}to{opacity:1;transform:translateY(0)}}

.step-indicator{display:flex;gap:.3rem;margin-bottom:2rem}
.step-dot{height:3px;flex:1;background:var(--border);border-radius:2px;transition:background .3s}
.step-dot.done{background:var(--gold)}
.step-dot.current{background:var(--gold);box-shadow:0 0 8px var(--gold-dim)}

.step-title{font-family:var(--serif);font-weight:700;font-size:1.15rem;color:var(--white);margin-bottom:.4rem}
.step-desc{font-size:.78rem;color:var(--dim);line-height:1.6;margin-bottom:1.5rem}

/* CATEGORY CARDS */
.cat-grid{display:grid;grid-template-columns:1fr 1fr;gap:.6rem}
.cat-card{
  padding:1.2rem;background:var(--panel);border:1px solid var(--border);
  cursor:pointer;border-radius:2px;transition:all .15s;text-align:left
}
.cat-card:hover{border-color:var(--dim);background:#1a1b15}
.cat-card.selected{border-color:var(--gold);background:var(--gold-dim)}
.cat-card .cc-icon{font-size:1.3rem;margin-bottom:.5rem}
.cat-card .cc-title{font-weight:700;font-size:.82rem;color:var(--white);margin-bottom:.2rem}
.cat-card .cc-desc{font-size:.65rem;color:var(--dim);line-height:1.4}

/* TEXT INPUT */
.text-input{
  width:100%;min-height:120px;padding:1rem;
  background:var(--panel);border:1px solid var(--border);color:var(--text);
  font-family:var(--mono);font-size:.82rem;line-height:1.7;
  border-radius:2px;resize:vertical;outline:none;transition:border-color .2s
}
.text-input:focus{border-color:var(--gold)}
.text-input::placeholder{color:var(--dim)}

/* SELECT */
.select-grid{display:flex;flex-direction:column;gap:.5rem}
.select-btn{
  padding:.9rem 1.2rem;background:var(--panel);border:1px solid var(--border);
  color:var(--text);font-family:var(--mono);font-size:.8rem;cursor:pointer;
  border-radius:2px;transition:all .15s;text-align:left
}
.select-btn:hover{border-color:var(--dim)}
.select-btn.selected{border-color:var(--gold);background:var(--gold-dim);color:var(--white)}

/* NAV BUTTONS */
.nav-row{display:flex;gap:.6rem;margin-top:2rem}
.nav-btn{
  padding:.8rem 1.5rem;font-family:var(--mono);font-size:.8rem;font-weight:600;
  cursor:pointer;border-radius:2px;transition:all .15s
}
.nav-btn.next{background:var(--gold);color:var(--bg);border:1px solid var(--gold)}
.nav-btn.next:hover{background:#b8860b}
.nav-btn.next:disabled{background:var(--panel);color:var(--dim);border-color:var(--border);cursor:not-allowed}
.nav-btn.back{background:transparent;color:var(--dim);border:1px solid var(--border)}
.nav-btn.back:hover{border-color:var(--dim);color:var(--text)}

/* RESULTS */
#results{display:none}

.routes-section{margin-bottom:2.5rem}
.route-card{
  padding:1.5rem;margin-bottom:1rem;
  background:var(--panel);border:1px solid var(--border);border-radius:2px
}
.route-header{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:.8rem;flex-wrap:wrap;gap:.5rem}
.route-name{font-family:var(--serif);font-weight:700;font-size:1rem;color:var(--white)}
.route-badges{display:flex;gap:.4rem;flex-wrap:wrap}
.rbadge{font-size:.6rem;padding:.2rem .5rem;border-radius:2px;font-weight:600;text-transform:uppercase;letter-spacing:.05em}
.rbadge.free{background:var(--green-dim);color:var(--green);border:1px solid rgba(22,163,74,0.3)}
.rbadge.paid{background:var(--red-dim);color:var(--red);border:1px solid rgba(220,38,38,0.3)}
.rbadge.fast{background:var(--cyan-dim);color:var(--cyan);border:1px solid rgba(8,145,178,0.3)}
.rbadge.slow{background:var(--gold-dim);color:var(--gold);border:1px solid rgba(212,160,23,0.3)}
.route-body{font-size:.78rem;line-height:1.7;color:var(--text)}
.route-body strong{color:var(--white)}
.route-details{margin-top:.8rem;display:grid;grid-template-columns:1fr 1fr 1fr;gap:.5rem}
.rd-item{padding:.5rem;background:var(--surface);border-radius:2px;text-align:center}
.rd-value{font-weight:700;font-size:.85rem;color:var(--white)}
.rd-label{font-size:.6rem;color:var(--dim);text-transform:uppercase;letter-spacing:.08em}

/* GENERATED LETTER */
.letter-section{margin:2.5rem 0}
.letter-box{
  padding:2rem;background:#faf9f5;color:#1a1a1a;
  font-family:'Bitter',Georgia,serif;font-size:.82rem;line-height:1.8;
  border-radius:2px;border:1px solid #ddd;
  max-height:600px;overflow-y:auto
}
.letter-box .l-header{text-align:right;margin-bottom:2rem;font-size:.75rem;color:#555}
.letter-box .l-dest{margin-bottom:1.5rem;font-size:.75rem;color:#333}
.letter-box .l-object{font-weight:700;margin-bottom:1.5rem;font-size:.85rem}
.letter-box .l-body{margin-bottom:1.5rem}
.letter-box .l-body p{margin-bottom:.8rem;text-align:justify}
.letter-box .l-footer{margin-top:2rem;font-size:.75rem;color:#555}
.letter-box .l-placeholder{color:#b88a00;font-weight:700;background:rgba(212,160,23,0.15);padding:0 3px;border-radius:2px}

/* COPY BTN */
.copy-row{display:flex;gap:.6rem;margin-top:1rem}
.copy-btn{
  padding:.8rem 1.5rem;font-family:var(--mono);font-size:.75rem;font-weight:600;
  cursor:pointer;border-radius:2px;transition:all .15s
}
.copy-btn.primary{background:var(--gold);color:var(--bg);border:1px solid var(--gold)}
.copy-btn.primary:hover{background:#b8860b}
.copy-btn.secondary{background:transparent;color:var(--text);border:1px solid var(--border)}
.copy-btn.secondary:hover{border-color:var(--dim)}

/* RIGHTS CHECKLIST */
.rights-box{
  margin:2rem 0;padding:1.5rem;
  background:var(--surface);border:1px solid var(--border);border-left:3px solid var(--green);border-radius:0 2px 2px 0
}
.rights-box h3{font-family:var(--serif);font-weight:700;font-size:.95rem;color:var(--green);margin-bottom:.8rem}
.rights-list{font-size:.78rem;line-height:1.8;color:var(--text)}
.rights-list li{list-style:none;margin-bottom:.3rem}
.rights-list li::before{content:'‚úì ';color:var(--green);font-weight:700}

/* TIMELINE */
.timeline{margin:2rem 0}
.tl-item{display:flex;gap:1rem;padding:.8rem 0;border-bottom:1px solid rgba(34,35,24,0.5)}
.tl-when{font-size:.7rem;font-weight:700;color:var(--gold);min-width:100px}
.tl-what{font-size:.78rem;color:var(--text);line-height:1.5}

.footer{margin-top:4rem;padding:1.5rem 0;border-top:1px solid var(--border);display:flex;justify-content:space-between;flex-wrap:wrap;gap:1rem;font-size:.65rem;color:var(--dim)}
.footer a{color:var(--green);text-decoration:none}

@media(max-width:600px){
  .container{padding:1.5rem 1rem 4rem}
  .intro h1{font-size:1.7rem}
  .cat-grid{grid-template-columns:1fr}
  .route-details{grid-template-columns:1fr}
  .copy-row{flex-direction:column}
}
</style>
</head>
<body>

<div class="header">
  <div style="display:flex;align-items:center;gap:1rem">
    <div class="logo">‚óá D√âMOGARCHIE <span>/ recours</span></div>
    <div class="badge">Ê≥ïÂæãÊàò JURIDIQUE</div>
  </div>
  <div class="header-right">MICRO ¬∑ Module 04/17</div>
</div>

<div class="container">

  <div class="intro">
    <h1>G√©n√©rateur de <em>recours</em></h1>
    <p>
      D√©crivez votre situation. L'outil identifie les voies de recours disponibles, les d√©lais, les co√ªts ‚Äî et g√©n√®re un mod√®le de lettre structur√©e avec les articles de loi pertinents.
    </p>
    <div class="disclaimer">
      ‚ö† Cet outil est √©ducatif. Il ne remplace pas un avocat. Mais il vous met en position de savoir <em>que vous avez des droits</em>, <em>lesquels</em>, et <em>comment les activer</em>. En Belgique, 20 √† 50% des √©ligibles ne font pas valoir leurs droits (source : CPAS / Eurofound). Cet outil existe pour r√©duire ce chiffre.
    </div>
  </div>

  <!-- STEP INDICATOR -->
  <div class="step-indicator" id="step-indicator">
    <div class="step-dot current" data-step="0"></div>
    <div class="step-dot" data-step="1"></div>
    <div class="step-dot" data-step="2"></div>
    <div class="step-dot" data-step="3"></div>
  </div>

  <!-- STEP 0: DOMAIN -->
  <div class="wizard-step active" id="ws-0">
    <div class="step-title">Quel domaine ?</div>
    <div class="step-desc">S√©lectionnez le domaine qui concerne votre probl√®me.</div>
    <div class="cat-grid" id="domain-grid">
      <div class="cat-card" data-val="social" onclick="selectDomain(this)">
        <div class="cc-icon">üè•</div>
        <div class="cc-title">Social / CPAS / Ch√¥mage</div>
        <div class="cc-desc">Refus d'aide, radiation, sanction ONEM, revenu d'int√©gration</div>
      </div>
      <div class="cat-card" data-val="logement" onclick="selectDomain(this)">
        <div class="cc-icon">üè†</div>
        <div class="cc-title">Logement</div>
        <div class="cc-desc">Expulsion, insalubrit√©, loyer abusif, bail, logement social</div>
      </div>
      <div class="cat-card" data-val="admin" onclick="selectDomain(this)">
        <div class="cc-icon">üìã</div>
        <div class="cc-title">Administration / Commune</div>
        <div class="cc-desc">Refus, retard, permis, urbanisme, √©tat civil</div>
      </div>
      <div class="cat-card" data-val="fiscal" onclick="selectDomain(this)">
        <div class="cc-icon">üí∞</div>
        <div class="cc-title">Fiscalit√© / Imp√¥ts</div>
        <div class="cc-desc">Avertissement-extrait de r√¥le, taxation d'office, contr√¥le</div>
      </div>
      <div class="cat-card" data-val="media" onclick="selectDomain(this)">
        <div class="cc-icon">üì∫</div>
        <div class="cc-title">M√©dias / Presse</div>
        <div class="cc-desc">Diffamation, atteinte vie priv√©e, d√©ontologie, CSA</div>
      </div>
      <div class="cat-card" data-val="travail" onclick="selectDomain(this)">
        <div class="cc-icon">‚öñÔ∏è</div>
        <div class="cc-title">Travail / Emploi</div>
        <div class="cc-desc">Licenciement, harc√®lement, discrimination, contrat</div>
      </div>
      <div class="cat-card" data-val="sante" onclick="selectDomain(this)">
        <div class="cc-icon">üíä</div>
        <div class="cc-title">Sant√© / Mutuelle / INAMI</div>
        <div class="cc-desc">Refus remboursement, incapacit√©, contr√¥le m√©decin-conseil</div>
      </div>
      <div class="cat-card" data-val="donnees" onclick="selectDomain(this)">
        <div class="cc-icon">üîí</div>
        <div class="cc-title">Donn√©es personnelles / RGPD</div>
        <div class="cc-desc">Droit d'acc√®s, suppression, violation vie priv√©e</div>
      </div>
    </div>
    <div class="nav-row">
      <button class="nav-btn next" id="next-0" disabled onclick="goStep(1)">Suivant ‚Üí</button>
    </div>
  </div>

  <!-- STEP 1: SITUATION -->
  <div class="wizard-step" id="ws-1">
    <div class="step-title">D√©crivez votre situation</div>
    <div class="step-desc">En quelques phrases : que s'est-il pass√© ? Quand ? Quelle d√©cision contestez-vous ?</div>
    <textarea class="text-input" id="situation-input" placeholder="Exemple : Le CPAS de ma commune a refus√© ma demande de revenu d'int√©gration le 15 janvier 2026. La d√©cision m'a √©t√© notifi√©e par courrier recommand√© le 20 janvier. Le motif invoqu√© est que je suis propri√©taire d'un bien, mais il s'agit d'un terrain non constructible que j'ai h√©rit√©."></textarea>
    <div class="nav-row">
      <button class="nav-btn back" onclick="goStep(0)">‚Üê Retour</button>
      <button class="nav-btn next" id="next-1" onclick="goStep(2)">Suivant ‚Üí</button>
    </div>
  </div>

  <!-- STEP 2: DETAILS -->
  <div class="wizard-step" id="ws-2">
    <div class="step-title">Pr√©cisions</div>
    <div class="step-desc" id="detail-desc">S√©lectionnez ce qui correspond le mieux.</div>
    <div class="select-grid" id="detail-grid">
      <!-- Filled by JS -->
    </div>
    <div class="nav-row">
      <button class="nav-btn back" onclick="goStep(1)">‚Üê Retour</button>
      <button class="nav-btn next" id="next-2" onclick="goStep(3)">Suivant ‚Üí</button>
    </div>
  </div>

  <!-- STEP 3: URGENCY & GENERATE -->
  <div class="wizard-step" id="ws-3">
    <div class="step-title">Quand avez-vous re√ßu la d√©cision ?</div>
    <div class="step-desc">Le d√©lai de recours court souvent √† partir de la notification. C'est crucial.</div>
    <div class="select-grid" id="urgency-grid">
      <button class="select-btn" data-val="recent" onclick="selectUrgency(this)">Il y a moins de 2 semaines</button>
      <button class="select-btn" data-val="month" onclick="selectUrgency(this)">Il y a 2 √† 4 semaines</button>
      <button class="select-btn" data-val="old" onclick="selectUrgency(this)">Il y a plus d'un mois</button>
      <button class="select-btn" data-val="unknown" onclick="selectUrgency(this)">Je ne sais pas / pas de notification formelle</button>
    </div>
    <div class="nav-row">
      <button class="nav-btn back" onclick="goStep(2)">‚Üê Retour</button>
      <button class="nav-btn next" id="generate-btn" disabled onclick="generate()">‚öñ G√©n√©rer mes recours</button>
    </div>
  </div>

  <!-- RESULTS -->
  <div id="results"></div>

</div>

<script>
// ============================================================
// RECOURSE DATABASE ‚Äî Belgian law
// ============================================================
const ROUTES = {
  social: {
    details: [
      {val:'cpas_refus', label:'Refus de revenu d\'int√©gration (RIS)'},
      {val:'cpas_radiation', label:'Radiation / suppression d\'aide'},
      {val:'onem_sanction', label:'Sanction ONEM (ch√¥mage)'},
      {val:'onem_exclusion', label:'Exclusion des allocations de ch√¥mage'},
      {val:'allocations_familiales', label:'Probl√®me allocations familiales'},
      {val:'autre_social', label:'Autre probl√®me social'}
    ],
    routes: [
      {
        name: 'Recours au Tribunal du Travail',
        badges: ['free','fast'],
        body: 'Le Tribunal du Travail est comp√©tent pour <strong>tous les litiges avec le CPAS et l\'ONEM</strong>. La proc√©dure est gratuite (pas de mise au r√¥le pour les affaires sociales). Vous pouvez vous y pr√©senter sans avocat.',
        delay: '3 mois',
        cost: 'Gratuit',
        strength: 'Contraignant',
        articles: ['Loi organique CPAS du 8 juillet 1976, art. 71', 'Loi du 26 mai 2002 sur le RIS', 'Code judiciaire, art. 580-582'],
        how: 'Envoyez une requ√™te par courrier recommand√© au greffe du Tribunal du Travail de votre arrondissement. La requ√™te peut √™tre manuscrite. Indiquez vos nom, adresse, la d√©cision contest√©e, et ce que vous demandez.'
      },
      {
        name: 'R√©clamation aupr√®s du M√©diateur f√©d√©ral',
        badges: ['free','fast'],
        body: 'Le M√©diateur f√©d√©ral traite les plaintes contre les administrations f√©d√©rales (ONEM, INAMI, SPF). Il peut intervenir, formuler des recommandations et m√™me signaler des dysfonctionnements au Parlement.',
        delay: '2-6 semaines',
        cost: 'Gratuit',
        strength: 'Recommandation',
        articles: ['Loi du 22 mars 1995 instaurant les m√©diateurs f√©d√©raux'],
        how: 'Plainte en ligne sur mediateurfederal.be, par courrier, par t√©l√©phone ou en personne. Joignez copie de la d√©cision contest√©e et de vos √©changes.'
      },
      {
        name: 'Aide juridique de 1re et 2e ligne',
        badges: ['free'],
        body: 'Avant tout recours, consultez le <strong>Bureau d\'Aide Juridique (BAJ)</strong> de votre barreau. Aide de 1re ligne : consultation gratuite pour tous. Aide de 2e ligne (avocat pro deo) : accessible si revenus inf√©rieurs √† <strong>1 582 ‚Ç¨/mois</strong> (isol√©) ou 1 838 ‚Ç¨ (m√©nage).',
        delay: 'Imm√©diat',
        cost: 'Gratuit',
        strength: 'Conseil',
        articles: ['Code judiciaire, art. 508/1 √† 508/25'],
        how: 'Contactez le BAJ du barreau le plus proche. Permanences sans rendez-vous dans la plupart des palais de justice. Munissez-vous d\'une preuve de revenus.'
      }
    ],
    letterTemplate: {
      dest: '[Nom du Tribunal / CPAS / ONEM]\n[Adresse]',
      object: 'Recours contre la d√©cision du [DATE] ‚Äî [TYPE DE D√âCISION]',
      body: `Madame, Monsieur le Pr√©sident,\n\nJe soussign√©¬∑e, [VOTRE NOM], domicili√©¬∑e √† [VOTRE ADRESSE], ai l'honneur de former un recours contre la d√©cision de [ORGANISME] en date du [DATE D√âCISION], notifi√©e le [DATE NOTIFICATION], portant [OBJET DE LA D√âCISION].\n\n**EXPOS√â DES FAITS :**\n[SITUATION D√âCRITE PAR L'UTILISATEUR]\n\n**MOYENS :**\nCette d√©cision est contestable pour les motifs suivants :\n\n1. Sur le plan de la l√©galit√© : la d√©cision ne respecte pas les conditions pr√©vues par [ARTICLE DE LOI PERTINENT], qui dispose que [PRINCIPE].\n\n2. Sur le plan de la proportionnalit√© : la d√©cision ne tient pas compte de ma situation particuli√®re, √† savoir [CIRCONSTANCES ATT√âNUANTES].\n\n3. Sur le plan de la motivation : la d√©cision est insuffisamment motiv√©e au regard de la loi du 29 juillet 1991 relative √† la motivation formelle des actes administratifs.\n\n**DEMANDE :**\nPar ces motifs, je vous demande de bien vouloir :\n‚Äî Annuler la d√©cision du [DATE] ;\n‚Äî [R√âTABLIR MES DROITS / M'ACCORDER L'AIDE DEMAND√âE] ;\n‚Äî Subsidiairement, ordonner un nouvel examen de ma situation.\n\nJe me tiens √† votre disposition pour tout compl√©ment d'information.\n\nVeuillez agr√©er, Madame, Monsieur le Pr√©sident, l'expression de ma consid√©ration distingu√©e.`
    }
  },
  logement: {
    details: [
      {val:'expulsion', label:'Menace d\'expulsion'},
      {val:'insalubrite', label:'Logement insalubre / dangereux'},
      {val:'loyer', label:'Augmentation abusive de loyer'},
      {val:'garantie', label:'Non-restitution de garantie locative'},
      {val:'social', label:'Probl√®me logement social'},
      {val:'autre_logement', label:'Autre probl√®me logement'}
    ],
    routes: [
      {
        name: 'Justice de Paix',
        badges: ['paid','fast'],
        body: 'Le Juge de Paix est comp√©tent pour <strong>tous les litiges locatifs</strong> : loyer, expulsion, garantie, insalubrit√©. Proc√©dure rapide et accessible.',
        delay: '1-3 mois',
        cost: '~165 ‚Ç¨ (mise au r√¥le)',
        strength: 'Contraignant',
        articles: ['Code civil, art. 1708-1762bis', 'D√©cret wallon bail d\'habitation 2018', 'Code bruxellois du logement'],
        how: 'Requ√™te au greffe de la Justice de Paix du canton o√π se situe le logement. Formulaire disponible sur justicedepaix.be.'
      },
      {
        name: 'Inspection r√©gionale du Logement',
        badges: ['free'],
        body: 'En cas d\'insalubrit√©, vous pouvez saisir le <strong>Service d\'Inspection r√©gionale du Logement</strong> (DIRL en Wallonie, Inspection r√©gionale √† Bruxelles). L\'inspecteur peut ordonner des travaux au propri√©taire.',
        delay: '2-8 semaines',
        cost: 'Gratuit',
        strength: 'Contraignant (travaux)',
        articles: ['Code wallon du logement, art. 3-13', 'Code bruxellois du logement, art. 4-8'],
        how: 'Plainte par courrier ou en ligne aupr√®s de votre Service r√©gional du logement. Joignez photos et preuves.'
      },
      {
        name: 'Aide juridique + Associations',
        badges: ['free'],
        body: 'Le <strong>Syndicat des Locataires</strong> et les associations de droit au logement offrent accompagnement gratuit. Le BAJ offre consultations gratuites.',
        delay: 'Imm√©diat',
        cost: 'Gratuit',
        strength: 'Conseil',
        articles: [],
        how: 'Contactez le Syndicat des Locataires de votre r√©gion, le RBDL (Bruxelles) ou le R√©seau wallon de Lutte contre la Pauvret√©.'
      }
    ],
    letterTemplate: {
      dest: '[Propri√©taire / Agence / Justice de Paix]\n[Adresse]',
      object: 'Mise en demeure ‚Äî [TYPE DE PROBL√àME]',
      body: `Madame, Monsieur,\n\nJe soussign√©¬∑e, [VOTRE NOM], locataire du bien situ√© [ADRESSE DU LOGEMENT] en vertu du bail sign√© le [DATE], me permets de vous adresser la pr√©sente mise en demeure.\n\n**CONSTAT :**\n[SITUATION D√âCRITE PAR L'UTILISATEUR]\n\n**FONDEMENT JURIDIQUE :**\nConform√©ment aux dispositions du [CODE R√âGIONAL DU LOGEMENT / CODE CIVIL], le bailleur est tenu de [OBLIGATION L√âGALE]. En l'esp√®ce, cette obligation n'est pas respect√©e.\n\n**DEMANDE :**\nJe vous mets en demeure de [ACTION DEMAND√âE] dans un d√©lai de [15/30 JOURS] √† compter de la r√©ception de la pr√©sente.\n\n√Ä d√©faut de r√©ponse satisfaisante dans ce d√©lai, je me r√©serve le droit de saisir la Justice de Paix comp√©tente et/ou le Service d'Inspection du Logement, sans autre avertissement.\n\nVeuillez agr√©er, Madame, Monsieur, mes salutations distingu√©es.`
    }
  },
  admin: {
    details: [
      {val:'refus_permis', label:'Refus de permis (urbanisme, environnement)'},
      {val:'retard', label:'Retard excessif de traitement'},
      {val:'erreur', label:'Erreur administrative'},
      {val:'acces_documents', label:'Refus d\'acc√®s √† un document administratif'},
      {val:'autre_admin', label:'Autre probl√®me administratif'}
    ],
    routes: [
      {
        name: 'Recours administratif (tutelle)',
        badges: ['free','fast'],
        body: 'Tout acte communal peut faire l\'objet d\'un recours aupr√®s de la <strong>tutelle r√©gionale</strong>. Le Gouverneur de Province peut aussi intervenir.',
        delay: '30-60 jours',
        cost: 'Gratuit',
        strength: 'Peut annuler',
        articles: ['CDLD art. L3111-1 et suiv. (Wallonie)', 'Ordonnance du 14 mai 1998 (Bruxelles)'],
        how: 'Courrier recommand√© au Gouverneur de Province ou √† la tutelle r√©gionale. D√©taillez l\'acte contest√©, le motif et votre demande.'
      },
      {
        name: 'Commission d\'Acc√®s aux Documents Administratifs (CADA)',
        badges: ['free','fast'],
        body: 'Si une administration refuse de vous communiquer un document, la <strong>CADA</strong> peut l\'y contraindre. Transparence administrative garantie par la Constitution.',
        delay: '30 jours',
        cost: 'Gratuit',
        strength: 'Avis contraignant',
        articles: ['Constitution belge, art. 32', 'D√©cret wallon du 30 mars 1995', 'Ordonnance bruxelloise du 30 mars 1995'],
        how: 'Demande √©crite √† la CADA de votre R√©gion. Joignez preuve de votre demande initiale et du refus.'
      },
      {
        name: 'M√©diateur communal / r√©gional',
        badges: ['free'],
        body: 'Certaines communes et toutes les R√©gions ont un ombudsman. Il intervient en cas de dysfonctionnement administratif.',
        delay: '2-6 semaines',
        cost: 'Gratuit',
        strength: 'Recommandation',
        articles: ['D√©cret wallon du 1er avril 2004 (m√©diateur r√©gional)'],
        how: 'Contactez le m√©diateur de votre commune (si existant) ou le m√©diateur r√©gional. Proc√©dure informelle.'
      }
    ],
    letterTemplate: {
      dest: '[Administration concern√©e]\n[Adresse]',
      object: 'Recours gracieux / Demande de r√©examen ‚Äî [OBJET]',
      body: `Madame, Monsieur,\n\nJe soussign√©¬∑e, [VOTRE NOM], domicili√©¬∑e √† [VOTRE ADRESSE], conteste par la pr√©sente la d√©cision / le refus de [OBJET] en date du [DATE].\n\n**EXPOS√â :**\n[SITUATION D√âCRITE PAR L'UTILISATEUR]\n\n**FONDEMENT :**\nEn vertu du principe de bonne administration et de la loi du 29 juillet 1991 relative √† la motivation formelle des actes administratifs, toute d√©cision doit √™tre motiv√©e de mani√®re ad√©quate. La Constitution belge (art. 32) garantit par ailleurs le droit d'acc√®s aux documents administratifs.\n\n**DEMANDE :**\nJe vous demande de bien vouloir :\n‚Äî R√©examiner ma demande ;\n‚Äî Motiver pr√©cis√©ment le refus, le cas √©ch√©ant ;\n‚Äî Me communiquer l'ensemble des documents relatifs √† mon dossier.\n\n√Ä d√©faut de r√©ponse dans un d√©lai de 30 jours, je saisirai la tutelle r√©gionale comp√©tente.\n\nVeuillez agr√©er, Madame, Monsieur, l'expression de ma consid√©ration distingu√©e.`
    }
  },
  fiscal: {
    details: [
      {val:'aer_contestation', label:'Contestation avertissement-extrait de r√¥le'},
      {val:'taxation_office', label:'Taxation d\'office'},
      {val:'precompte', label:'Pr√©compte immobilier contest√©'},
      {val:'autre_fiscal', label:'Autre probl√®me fiscal'}
    ],
    routes: [
      {
        name: 'R√©clamation administrative (1re instance)',
        badges: ['free','fast'],
        body: 'Tout contribuable peut contester son imposition par <strong>r√©clamation √©crite au Directeur r√©gional</strong> dans un d√©lai de 6 mois (IPP) ou 3 mois (pr√©compte) apr√®s l\'envoi de l\'avertissement-extrait de r√¥le.',
        delay: '6 mois max.',
        cost: 'Gratuit',
        strength: 'Peut annuler/modifier',
        articles: ['CIR 1992, art. 366-375', 'Code des imp√¥ts sur les revenus'],
        how: 'Courrier recommand√© au Directeur r√©gional des contributions. Indiquez le num√©ro d\'article de r√¥le, le motif de contestation et joignez les preuves.'
      },
      {
        name: 'Tribunal de 1re instance (fiscal)',
        badges: ['paid','slow'],
        body: 'Si la r√©clamation est rejet√©e ou sans r√©ponse apr√®s 6 mois, recours devant le <strong>Tribunal de 1re instance</strong>.',
        delay: '1-2 ans',
        cost: '165 ‚Ç¨ + avocat recommand√©',
        strength: 'Contraignant',
        articles: ['CIR 1992, art. 1385undecies Code judiciaire'],
        how: 'Requ√™te au greffe du Tribunal de 1re instance comp√©tent. Conseil : consultez le BAJ pour aide juridique.'
      }
    ],
    letterTemplate: {
      dest: 'Monsieur le Directeur r√©gional\nAdministration des contributions directes\n[Adresse du bureau de taxation]',
      object: 'R√©clamation ‚Äî Exercice d\'imposition [ANN√âE] ‚Äî Article de r√¥le n¬∞ [NUM√âRO]',
      body: `Monsieur le Directeur,\n\nJe soussign√©¬∑e, [VOTRE NOM], num√©ro national [NN], domicili√©¬∑e √† [ADRESSE], ai l'honneur de former une r√©clamation contre l'imposition √©tablie √† mon nom pour l'exercice [ANN√âE], article de r√¥le n¬∞ [NUM√âRO], dont l'avertissement-extrait de r√¥le m'a √©t√© envoy√© le [DATE].\n\n**MOTIFS DE LA R√âCLAMATION :**\n[SITUATION D√âCRITE PAR L'UTILISATEUR]\n\n**FONDEMENT JURIDIQUE :**\nConform√©ment √† l'article 366 du CIR 1992, la pr√©sente r√©clamation est introduite dans le d√©lai l√©gal de six mois. Je conteste l'imposition pour les motifs suivants :\n\n1. [MOTIF 1]\n2. [MOTIF 2]\n\n**DEMANDE :**\nJe demande le d√©gr√®vement [TOTAL / PARTIEL] de l'imposition contest√©e, soit un montant de [MONTANT] ‚Ç¨.\n\nJe reste √† votre disposition pour fournir tout document compl√©mentaire.\n\nVeuillez agr√©er, Monsieur le Directeur, mes salutations distingu√©es.`
    }
  },
  media: {
    details: [
      {val:'deontologie', label:'Manquement d√©ontologique (CDJ)'},
      {val:'audiovisuel', label:'Contenu audiovisuel probl√©matique (CSA)'},
      {val:'vie_privee', label:'Atteinte √† la vie priv√©e'},
      {val:'diffamation', label:'Diffamation'},
      {val:'autre_media', label:'Autre probl√®me m√©diatique'}
    ],
    routes: [
      {
        name: 'Plainte au CDJ (Conseil de D√©ontologie Journalistique)',
        badges: ['free','fast'],
        body: 'Le CDJ examine les plaintes d√©ontologiques contre <strong>tous les m√©dias francophones</strong>. D√©lai de d√©p√¥t : <strong>2 mois</strong> apr√®s publication. 57% des d√©cisions sont favorables aux plaignants.',
        delay: '2-4 mois',
        cost: 'Gratuit',
        strength: 'Moral (publication d√©cision)',
        articles: ['Code de d√©ontologie journalistique (CDJ)'],
        how: 'Formulaire en ligne sur lecdj.be. Identifiez pr√©cis√©ment l\'article/√©mission, le passage contest√©, et le principe d√©ontologique viol√©.'
      },
      {
        name: 'Plainte au CSA',
        badges: ['free'],
        body: 'Le CSA peut sanctionner les m√©dias audiovisuels : avertissement, communiqu√© obligatoire, <strong>amendes</strong>. Il a d√©j√† sanctionn√© RTL Belgium par le pass√©.',
        delay: '3-6 mois',
        cost: 'Gratuit',
        strength: 'Sanctions possibles',
        articles: ['D√©cret SMA, art. 2.4-1 (interdiction discrimination)', 'D√©cret coordonn√© sur les m√©dias audiovisuels'],
        how: 'Plainte en ligne sur csa.be. D√©crivez pr√©cis√©ment le contenu contest√© et la r√®gle que vous estimez viol√©e.'
      },
      {
        name: 'Signalement √† Unia',
        badges: ['free'],
        body: 'Pour les contenus discriminatoires, <strong>Unia</strong> peut ouvrir un dossier, tenter une m√©diation, et dans des cas graves, ester en justice gratuitement.',
        delay: 'Variable',
        cost: 'Gratuit',
        strength: 'M√©diation + action judiciaire possible',
        articles: ['Loi du 10 mai 2007 (anti-discrimination)', 'Loi du 30 juillet 1981 (racisme)'],
        how: 'Signalement en ligne sur unia.be. Joignez le contenu probl√©matique et expliquez en quoi il est discriminatoire.'
      }
    ],
    letterTemplate: {
      dest: '[CDJ / CSA / R√©daction du m√©dia]\n[Adresse]',
      object: 'Plainte ‚Äî [TITRE DE L\'ARTICLE/√âMISSION] diffus√© le [DATE]',
      body: `Madame, Monsieur,\n\nJe soussign√©¬∑e, [VOTRE NOM], souhaite porter plainte concernant [TITRE] publi√©/diffus√© le [DATE] par [NOM DU M√âDIA].\n\n**CONTENU CONTEST√â :**\n[SITUATION D√âCRITE PAR L'UTILISATEUR]\n\n**PRINCIPES D√âONTOLOGIQUES / L√âGAUX POTENTIELLEMENT VIOL√âS :**\n1. [PRINCIPE ‚Äî ex: respect de la dignit√©, v√©rification des sources, droit de r√©ponse]\n2. [PRINCIPE]\n\n**DEMANDE :**\nJe demande que le Conseil examine ce contenu au regard des principes d√©ontologiques applicables et, le cas √©ch√©ant, prononce un avis.\n\nJe reste √† disposition pour tout compl√©ment.\n\nCordialement,`
    }
  },
  travail: {
    details: [
      {val:'licenciement', label:'Licenciement (contestation)'},
      {val:'harcelement', label:'Harc√®lement moral ou sexuel'},
      {val:'discrimination', label:'Discrimination'},
      {val:'salaire', label:'Non-paiement de salaire / arri√©r√©s'},
      {val:'autre_travail', label:'Autre probl√®me au travail'}
    ],
    routes: [
      {
        name: 'Tribunal du Travail',
        badges: ['free','fast'],
        body: 'Comp√©tent pour <strong>tous les litiges employeur-travailleur</strong>. Proc√©dure gratuite en mati√®re sociale.',
        delay: '3-12 mois',
        cost: 'Gratuit (social)',
        strength: 'Contraignant',
        articles: ['Loi du 3 juillet 1978 sur les contrats de travail', 'Code judiciaire, art. 578-583'],
        how: 'Requ√™te au greffe du Tribunal du Travail. Possibilit√© de se pr√©senter sans avocat. BAJ pour aide juridique gratuite.'
      },
      {
        name: 'Inspection sociale (Contr√¥le des lois sociales)',
        badges: ['free'],
        body: 'Le CLS peut intervenir pour non-respect du droit du travail : heures, salaire, s√©curit√©. Pouvoir de sanction.',
        delay: '2-8 semaines',
        cost: 'Gratuit',
        strength: 'Contraignant',
        articles: ['Code p√©nal social'],
        how: 'Plainte au Contr√¥le des lois sociales (Direction g√©n√©rale du SPF ETCS). Peut √™tre anonyme.'
      }
    ],
    letterTemplate: {
      dest: '[Employeur / Tribunal du Travail]\n[Adresse]',
      object: 'Contestation de [LICENCIEMENT / D√âCISION] ‚Äî Mise en demeure',
      body: `Madame, Monsieur,\n\nJe soussign√©¬∑e, [VOTRE NOM], engag√©¬∑e depuis le [DATE D'ENTR√âE] en qualit√© de [FONCTION], conteste par la pr√©sente [OBJET DE LA CONTESTATION].\n\n**EXPOS√â :**\n[SITUATION D√âCRITE PAR L'UTILISATEUR]\n\n**FONDEMENT :**\nConform√©ment √† la loi du 3 juillet 1978 sur les contrats de travail, [ARTICLE PERTINENT].\n\n**DEMANDE :**\n[DEMANDE SP√âCIFIQUE]\n\n√Ä d√©faut de r√©ponse dans les 15 jours, je saisirai le Tribunal du Travail comp√©tent.\n\nVeuillez agr√©er, Madame, Monsieur, mes salutations distingu√©es.`
    }
  },
  sante: {
    details: [
      {val:'remboursement', label:'Refus de remboursement mutuelle/INAMI'},
      {val:'incapacite', label:'Contestation de d√©cision d\'incapacit√©'},
      {val:'medecin_conseil', label:'Convocation m√©decin-conseil'},
      {val:'autre_sante', label:'Autre probl√®me sant√©'}
    ],
    routes: [
      {
        name: 'Tribunal du Travail (contentieux INAMI)',
        badges: ['free'],
        body: 'Le Tribunal du Travail est comp√©tent pour les litiges INAMI/mutuelle. Expertise m√©dicale judiciaire possible.',
        delay: '3-12 mois',
        cost: 'Gratuit',
        strength: 'Contraignant',
        articles: ['Loi coordonn√©e du 14 juillet 1994 (assurance soins de sant√©)', 'Code judiciaire, art. 580, 2¬∞'],
        how: 'Requ√™te au Tribunal du Travail dans les 3 mois suivant la notification de la d√©cision contest√©e.'
      },
      {
        name: 'M√©diation mutuelle',
        badges: ['free','fast'],
        body: 'Chaque mutuelle dispose d\'un service de m√©diation interne. Premi√®re √©tape recommand√©e.',
        delay: '2-4 semaines',
        cost: 'Gratuit',
        strength: 'Conciliation',
        articles: [],
        how: 'Contactez le service de m√©diation de votre mutuelle. Demandez un r√©examen motiv√© de la d√©cision.'
      }
    ],
    letterTemplate: {
      dest: '[Mutuelle / INAMI / Tribunal du Travail]\n[Adresse]',
      object: 'Contestation de la d√©cision du [DATE] ‚Äî [OBJET]',
      body: `Madame, Monsieur,\n\nJe soussign√©¬∑e, [VOTRE NOM], affili√©¬∑e sous le n¬∞ [NUM√âRO], conteste la d√©cision du [DATE] concernant [OBJET].\n\n**EXPOS√â :**\n[SITUATION D√âCRITE PAR L'UTILISATEUR]\n\n**FONDEMENT :**\nConform√©ment √† la loi coordonn√©e du 14 juillet 1994, [ARTICLE]. Je joins √† la pr√©sente [DOCUMENTS M√âDICAUX / ATTESTATION].\n\n**DEMANDE :**\nJe demande le r√©examen de cette d√©cision / la d√©signation d'un expert m√©dical ind√©pendant.\n\nVeuillez agr√©er, Madame, Monsieur, mes salutations distingu√©es.`
    }
  },
  donnees: {
    details: [
      {val:'acces', label:'Demande d\'acc√®s √† mes donn√©es personnelles'},
      {val:'suppression', label:'Demande de suppression de donn√©es'},
      {val:'violation', label:'Violation de donn√©es / fuite'},
      {val:'surveillance', label:'Surveillance / cam√©ras'},
      {val:'autre_donnees', label:'Autre probl√®me RGPD'}
    ],
    routes: [
      {
        name: 'Plainte √† l\'APD (Autorit√© de Protection des Donn√©es)',
        badges: ['free'],
        body: 'L\'APD peut imposer des <strong>sanctions allant jusqu\'√† 20 millions d\'euros</strong> sous le RGPD. La plainte est gratuite.',
        delay: '6-18 mois (backlog)',
        cost: 'Gratuit',
        strength: 'Sanctions lourdes possibles',
        articles: ['RGPD, art. 15-17, 77', 'Loi du 30 juillet 2018'],
        how: 'Formulaire en ligne sur autoriteprotectiondonnees.be. Joignez preuve de votre demande initiale aupr√®s du responsable de traitement et de sa non-r√©ponse (d√©lai 30 jours).'
      },
      {
        name: 'Demande directe au responsable de traitement',
        badges: ['free','fast'],
        body: 'Avant de saisir l\'APD, exercez d\'abord votre droit directement. Le responsable a <strong>30 jours</strong> pour r√©pondre.',
        delay: '30 jours',
        cost: 'Gratuit',
        strength: 'Obligatoire (RGPD)',
        articles: ['RGPD, art. 12-15 (acc√®s)', 'art. 17 (effacement)', 'art. 20 (portabilit√©)'],
        how: 'Envoyez un courrier recommand√© ou email formel au DPO de l\'organisme. Citez explicitement les articles du RGPD.'
      }
    ],
    letterTemplate: {
      dest: '[Responsable de traitement / DPO]\n[Adresse / Email]',
      object: 'Exercice du droit [D\'ACC√àS / D\'EFFACEMENT / D\'OPPOSITION] ‚Äî RGPD art. [15/17/21]',
      body: `Madame, Monsieur,\n\nConform√©ment au R√®glement G√©n√©ral sur la Protection des Donn√©es (UE) 2016/679, j'exerce par la pr√©sente mon droit [D'ACC√àS / D'EFFACEMENT / D'OPPOSITION] pr√©vu √† l'article [15/17/21].\n\n**DEMANDE :**\n[SITUATION D√âCRITE PAR L'UTILISATEUR]\n\nJe vous rappelle que vous disposez d'un d√©lai de 30 jours pour me r√©pondre (art. 12¬ß3 RGPD). En l'absence de r√©ponse satisfaisante, j'introduirai une plainte aupr√®s de l'Autorit√© de Protection des Donn√©es (autoriteprotectiondonnees.be).\n\nConform√©ment √† l'article 12¬ß5, l'exercice de ce droit est gratuit.\n\nVeuillez agr√©er, Madame, Monsieur, mes salutations distingu√©es.\n\n[VOTRE NOM]\n[VOTRE ADRESSE]\n[Pi√®ce d'identit√© jointe si n√©cessaire]`
    }
  }
};

// STATE
let state = { domain: null, detail: null, urgency: null, situation: '' };

function selectDomain(el) {
  document.querySelectorAll('#domain-grid .cat-card').forEach(c => c.classList.remove('selected'));
  el.classList.add('selected');
  state.domain = el.dataset.val;
  document.getElementById('next-0').disabled = false;
}

function goStep(n) {
  // Save situation text
  if (n >= 2) state.situation = document.getElementById('situation-input')?.value || state.situation;

  // Populate detail grid for step 2
  if (n === 2 && state.domain && ROUTES[state.domain]) {
    const grid = document.getElementById('detail-grid');
    grid.innerHTML = ROUTES[state.domain].details.map(d =>
      `<button class="select-btn" data-val="${d.val}" onclick="selectDetail(this)">${d.label}</button>`
    ).join('');
  }

  // Show/hide steps
  document.querySelectorAll('.wizard-step').forEach(s => s.classList.remove('active'));
  document.getElementById('ws-' + n).classList.add('active');

  // Update indicator
  document.querySelectorAll('.step-dot').forEach((d, i) => {
    d.classList.remove('done', 'current');
    if (i < n) d.classList.add('done');
    if (i === n) d.classList.add('current');
  });

  window.scrollTo({ top: 0, behavior: 'smooth' });
}

function selectDetail(el) {
  document.querySelectorAll('#detail-grid .select-btn').forEach(b => b.classList.remove('selected'));
  el.classList.add('selected');
  state.detail = el.dataset.val;
}

function selectUrgency(el) {
  document.querySelectorAll('#urgency-grid .select-btn').forEach(b => b.classList.remove('selected'));
  el.classList.add('selected');
  state.urgency = el.dataset.val;
  document.getElementById('generate-btn').disabled = false;
}

function generate() {
  const d = state.domain;
  if (!d || !ROUTES[d]) return;

  const data = ROUTES[d];
  const situation = state.situation || '[D√©crivez votre situation ici]';
  const urgencyWarning = state.urgency === 'old'
    ? '<div style="padding:1rem;background:var(--red-dim);border:1px solid rgba(220,38,38,0.3);border-radius:2px;font-size:.78rem;color:var(--red);margin-bottom:1.5rem"><strong>‚ö† Attention d√©lais :</strong> Certains recours ont des d√©lais stricts (3 mois pour le Tribunal du Travail, 2 mois pour le CDJ, 6 mois pour les imp√¥ts). Si la notification date de plus d\'un mois, v√©rifiez en urgence que vous √™tes encore dans les d√©lais. Consultez le BAJ sans attendre.</div>'
    : state.urgency === 'month'
    ? '<div style="padding:1rem;background:var(--gold-dim);border:1px solid rgba(212,160,23,0.3);border-radius:2px;font-size:.78rem;color:var(--gold);margin-bottom:1.5rem"><strong>‚è∞ D√©lai en cours :</strong> Agissez rapidement. Certains d√©lais de recours sont de 3 mois √† compter de la notification.</div>'
    : '';

  // Generate letter
  const tmpl = data.letterTemplate;
  const letterText = tmpl.body
    .replace(/\[SITUATION D√âCRITE PAR L'UTILISATEUR\]/g, situation)
    .replace(/\n/g, '</p><p>');

  const el = document.getElementById('results');
  el.innerHTML = `
    ${urgencyWarning}

    <div class="routes-section">
      <div class="step-title" style="margin-bottom:1.5rem">Vos voies de recours</div>
      ${data.routes.map(r => `
        <div class="route-card">
          <div class="route-header">
            <div class="route-name">${r.name}</div>
            <div class="route-badges">
              ${r.badges.map(b => `<span class="rbadge ${b}">${b === 'free' ? 'Gratuit' : b === 'paid' ? 'Payant' : b === 'fast' ? 'Rapide' : 'Long'}</span>`).join('')}
            </div>
          </div>
          <div class="route-body">${r.body}</div>
          <div class="route-details">
            <div class="rd-item"><div class="rd-value">${r.delay}</div><div class="rd-label">D√©lai</div></div>
            <div class="rd-item"><div class="rd-value">${r.cost}</div><div class="rd-label">Co√ªt</div></div>
            <div class="rd-item"><div class="rd-value">${r.strength}</div><div class="rd-label">Force</div></div>
          </div>
          ${r.articles.length > 0 ? `<div style="margin-top:.8rem;font-size:.68rem;color:var(--dim)"><strong>Base l√©gale :</strong> ${r.articles.join(' ¬∑ ')}</div>` : ''}
          <div style="margin-top:.8rem;font-size:.75rem;color:var(--text);padding-top:.6rem;border-top:1px solid var(--border)"><strong>Comment :</strong> ${r.how}</div>
        </div>
      `).join('')}
    </div>

    <!-- LETTER -->
    <div class="letter-section">
      <div class="step-title" style="margin-bottom:.5rem">Mod√®le de lettre</div>
      <div style="font-size:.72rem;color:var(--dim);margin-bottom:1rem">Adaptez les champs en <span style="color:var(--gold)">[JAUNE]</span> √† votre situation. Envoyez par courrier recommand√©.</div>

      <div class="letter-box" id="letter-content">
        <div class="l-header">
          <span class="l-placeholder">[VOTRE NOM]</span><br>
          <span class="l-placeholder">[VOTRE ADRESSE]</span><br>
          <span class="l-placeholder">[DATE]</span>
        </div>
        <div class="l-dest">${tmpl.dest.replace(/\[/g, '<span class="l-placeholder">[').replace(/\]/g, ']</span>').replace(/\n/g, '<br>')}</div>
        <div class="l-object"><strong>Objet :</strong> ${tmpl.object.replace(/\[/g, '<span class="l-placeholder">[').replace(/\]/g, ']</span>')}</div>
        <div class="l-body"><p>${letterText.replace(/\[/g, '<span class="l-placeholder">[').replace(/\]/g, ']</span>')}</p></div>
        <div class="l-footer">
          <span class="l-placeholder">[VOTRE SIGNATURE]</span><br>
          <span class="l-placeholder">[PI√àCES JOINTES : copie d√©cision, preuves]</span>
        </div>
      </div>

      <div class="copy-row">
        <button class="copy-btn primary" onclick="copyLetter()">üìã Copier la lettre (texte brut)</button>
        <button class="copy-btn secondary" onclick="printLetter()">üñ® Imprimer</button>
        <button class="copy-btn secondary" onclick="resetAll()">Nouveau recours</button>
      </div>
    </div>

    <!-- RIGHTS -->
    <div class="rights-box">
      <h3>Vos droits fondamentaux en jeu</h3>
      <ul class="rights-list">
        <li>Constitution belge, art. 23 : droit √† la dignit√© humaine (effet cliquet / standstill)</li>
        <li>Constitution belge, art. 32 : droit d'acc√®s aux documents administratifs</li>
        <li>Loi du 29 juillet 1991 : obligation de motivation formelle des actes administratifs</li>
        <li>CEDH, art. 6 : droit √† un proc√®s √©quitable</li>
        <li>CEDH, art. 8 : droit au respect de la vie priv√©e</li>
        <li>CEDH, art. 14 : non-discrimination (y compris "origine sociale" et "fortune")</li>
        <li>Charte des droits fondamentaux UE, art. 47 : droit √† un recours effectif</li>
        <li>RGPD : droit d'acc√®s, d'effacement, de portabilit√© des donn√©es</li>
      </ul>
    </div>

    <!-- TIMELINE -->
    <div class="timeline">
      <div class="step-title" style="margin-bottom:1rem">Calendrier d'action recommand√©</div>
      <div class="tl-item"><div class="tl-when">Jour 1</div><div class="tl-what">Rassemblez tous les documents : d√©cision contest√©e, courriers, preuves, dates. Photocopiez tout.</div></div>
      <div class="tl-item"><div class="tl-when">Jour 2-3</div><div class="tl-what">Consultez le BAJ (aide juridique gratuite) pour v√©rifier vos d√©lais et la solidit√© de votre dossier.</div></div>
      <div class="tl-item"><div class="tl-when">Jour 3-7</div><div class="tl-what">Envoyez le recours/la lettre par courrier recommand√©. Gardez l'accus√© de r√©ception.</div></div>
      <div class="tl-item"><div class="tl-when">Jour 7-14</div><div class="tl-what">Saisissez les voies parall√®les (M√©diateur, CDJ, CSA, Unia selon le cas).</div></div>
      <div class="tl-item"><div class="tl-when">Jour 30+</div><div class="tl-what">Relancez si pas de r√©ponse. L'absence de r√©ponse dans le d√©lai l√©gal √©quivaut souvent √† un refus, ce qui ouvre la voie judiciaire.</div></div>
    </div>

    <div class="footer">
      <div>‚óá D√âMOGARCHIE ¬∑ <a href="https://ouaisfi.eu">ouaisfieu</a> ¬∑ CC BY-NC 4.0</div>
      <div>Ê≥ïÂæãÊàò Module 04/17 ¬∑ Fork ‚Ä¢ Hack ‚Ä¢ Spread</div>
    </div>
  `;

  el.style.display = 'block';
  document.querySelectorAll('.wizard-step').forEach(s => s.classList.remove('active'));
  setTimeout(() => el.scrollIntoView({ behavior: 'smooth', block: 'start' }), 200);
}

function copyLetter() {
  const el = document.getElementById('letter-content');
  const text = el.innerText;
  navigator.clipboard.writeText(text).then(() => alert('Lettre copi√©e dans le presse-papier. Collez-la dans votre traitement de texte.')).catch(() => alert('Erreur'));
}

function printLetter() {
  const content = document.getElementById('letter-content').innerHTML;
  const win = window.open('', '', 'width=800,height=600');
  win.document.write(`<html><head><title>Lettre de recours</title><style>body{font-family:Georgia,serif;font-size:14px;line-height:1.8;padding:40px;color:#1a1a1a}.l-placeholder{color:#b88a00;font-weight:bold}</style></head><body>${content}</body></html>`);
  win.document.close();
  win.print();
}

function resetAll() {
  state = { domain: null, detail: null, urgency: null, situation: '' };
  document.getElementById('results').style.display = 'none';
  document.getElementById('results').innerHTML = '';
  document.querySelectorAll('.cat-card,.select-btn').forEach(b => b.classList.remove('selected'));
  document.getElementById('situation-input').value = '';
  document.getElementById('next-0').disabled = true;
  document.getElementById('generate-btn').disabled = true;
  goStep(0);
}
</script>

</body>
</html>
