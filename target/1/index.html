<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>√âcosyst√®me OuaisFi - Tableau de Bord Interactif</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>

    <!-- Chosen Palette: Vibrant Tech Community (Blue-600 #2563EB & Orange-500 #F97316 on Slate-50) -->

    <!-- Application Structure Plan: 
         The app uses a vertical scrolling dashboard layout.
         1. Header: Quick navigation and Status indicator.
         2. Hero Section (Vue d'Ensemble): High-level KPIs to give immediate context on network health.
         3. Infrastructure Section: Focuses on the physical layer. Uses a Donut chart for hardware mix and a CSS-only topology map to explain the mesh concept.
         4. Repository Section (dl.ouaisfieu): Focuses on the software layer. Uses a Bar chart to show what the community is downloading.
         5. Performance Section: Focuses on the signal layer. Uses an interactive Line chart for traffic history and a 3D Scatter plot (Plotly) to visualize signal vs distance.
         This structure moves from "Macro" (Network stats) to "Micro" (Signal physics), guiding the user through the stack.
    -->

    <!-- Visualization & Content Choices:
         1. KPI Cards -> Goal: Inform -> Big Numbers -> Immediate health check.
         2. Hardware Distribution -> Goal: Compare -> Donut Chart (Chart.js) -> Shows the diversity of routers (Ubiquiti vs DIY).
         3. Mesh Topology -> Goal: Organize -> CSS/HTML Diagram -> Explains how nodes connect without using SVG.
         4. Firmware Downloads -> Goal: Organize -> Horizontal Bar Chart (Chart.js) -> Shows popularity of resources on dl.ouaisfieu.
         5. Network Traffic -> Goal: Change -> Line Chart with Time Filters (Chart.js) -> Interactive view of bandwidth usage.
         6. Signal Analysis -> Goal: Relationships -> 3D Scatter Plot (Plotly WebGL) -> "Wow" factor showing correlation between distance, signal (RSSI), and speed.
    -->

    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap');

        body {
            font-family: 'Inter', sans-serif;
            background-color: #F8FAFC; /* Slate-50 */
            color: #1E293B; /* Slate-800 */
        }

        /* Chart Container Styling - Mandatory Strict Constraints */
        .chart-container {
            position: relative;
            width: 100%;
            /* Constraints handled by parent grid, but max-width ensures readability on ultra-wide */
            max-width: 100%; 
            height: 350px;
            max-height: 400px;
            margin-left: auto;
            margin-right: auto;
            background: white;
            border-radius: 0.75rem; /* rounded-xl */
            padding: 1rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
        }

        /* Responsive adjustments for chart height */
        @media (max-width: 640px) {
            .chart-container {
                height: 300px;
            }
        }

        /* CSS-only Mesh Node Visualization (No SVG) */
        .node-circle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            position: absolute;
            z-index: 10;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            cursor: pointer;
        }
        .node-circle:hover {
            transform: scale(1.15);
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
        }
        .link-line {
            position: absolute;
            height: 2px;
            background-color: #CBD5E1; /* Slate-300 */
            transform-origin: 0 50%;
            z-index: 1;
        }
        /* Pulse animation for active gateway */
        @keyframes pulse-ring {
            0% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(37, 99, 235, 0.7); }
            70% { transform: scale(1); box-shadow: 0 0 0 10px rgba(37, 99, 235, 0); }
            100% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(37, 99, 235, 0); }
        }
        .gateway-pulse {
            animation: pulse-ring 2s infinite;
        }
    </style>
</head>
<body class="antialiased">

    <!-- Navbar -->
    <nav class="sticky top-0 z-50 bg-white/90 backdrop-blur-md border-b border-slate-200 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center gap-2">
                    <div class="w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center text-white font-bold text-xl">O</div>
                    <span class="font-extrabold text-xl tracking-tight text-slate-800">OuaisFi<span class="text-blue-600">.eu</span></span>
                </div>
                <div class="hidden md:flex space-x-8 text-sm font-medium text-slate-600">
                    <a href="#overview" class="hover:text-blue-600 transition-colors">Vue d'Ensemble</a>
                    <a href="#infra" class="hover:text-blue-600 transition-colors">Infrastructure</a>
                    <a href="#repo" class="hover:text-blue-600 transition-colors">D√©p√¥t (DL)</a>
                    <a href="#perf" class="hover:text-blue-600 transition-colors">Performance</a>
                </div>
                <div>
                    <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-bold bg-green-100 text-green-700">
                        <span class="w-2 h-2 bg-green-500 rounded-full mr-2"></span> R√©seau Actif
                    </span>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content Container -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-16">

        <!-- 1. HERO SECTION (Overview) -->
        <section id="overview" class="scroll-mt-24">
            <div class="text-center mb-10">
                <h1 class="text-4xl md:text-5xl font-extrabold text-slate-900 tracking-tight mb-4">
                    L'Internet Libre, <span class="text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-orange-500">Par et Pour la Communaut√©</span>
                </h1>
                <p class="max-w-3xl mx-auto text-lg text-slate-600 leading-relaxed">
                    Bienvenue sur le moniteur de l'√©cosyst√®me <strong>OuaisFi</strong>. Cette interface visualise en temps r√©el la sant√© de notre r√©seau maill√© (Mesh), l'activit√© de notre d√©p√¥t de fichiers (<strong>dl.ouaisfieu</strong>), et la participation communautaire.
                </p>
            </div>

            <!-- KPI Cards -->
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
                <!-- Card 1 -->
                <div class="bg-white p-6 rounded-xl shadow-sm border-b-4 border-blue-600 hover:-translate-y-1 transition-transform duration-300">
                    <div class="text-slate-500 text-sm font-semibold uppercase tracking-wide mb-1">N≈ìuds Actifs</div>
                    <div class="flex justify-between items-end">
                        <span class="text-4xl font-extrabold text-slate-900">42</span>
                        <span class="text-green-600 text-sm font-bold bg-green-50 px-2 py-1 rounded">+3 cette sem.</span>
                    </div>
                </div>
                <!-- Card 2 -->
                <div class="bg-white p-6 rounded-xl shadow-sm border-b-4 border-orange-500 hover:-translate-y-1 transition-transform duration-300">
                    <div class="text-slate-500 text-sm font-semibold uppercase tracking-wide mb-1">Trafic (24h)</div>
                    <div class="flex justify-between items-end">
                        <span class="text-4xl font-extrabold text-slate-900">184 <span class="text-lg text-slate-400">GB</span></span>
                        <span class="text-blue-600 text-sm font-bold bg-blue-50 px-2 py-1 rounded">‚ñ≤ 12%</span>
                    </div>
                </div>
                <!-- Card 3 -->
                <div class="bg-white p-6 rounded-xl shadow-sm border-b-4 border-teal-500 hover:-translate-y-1 transition-transform duration-300">
                    <div class="text-slate-500 text-sm font-semibold uppercase tracking-wide mb-1">Fichiers DL</div>
                    <div class="flex justify-between items-end">
                        <span class="text-4xl font-extrabold text-slate-900">1.2k</span>
                        <span class="text-slate-400 text-sm font-medium">via dl.ouaisfieu</span>
                    </div>
                </div>
                <!-- Card 4 -->
                <div class="bg-white p-6 rounded-xl shadow-sm border-b-4 border-indigo-500 hover:-translate-y-1 transition-transform duration-300">
                    <div class="text-slate-500 text-sm font-semibold uppercase tracking-wide mb-1">Latence Moy.</div>
                    <div class="flex justify-between items-end">
                        <span class="text-4xl font-extrabold text-slate-900">14 <span class="text-lg text-slate-400">ms</span></span>
                        <span class="text-green-600 text-sm font-bold bg-green-50 px-2 py-1 rounded">Stable</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- 2. INFRASTRUCTURE & TOPOLOGY -->
        <section id="infra" class="scroll-mt-24">
            <div class="mb-6 border-l-4 border-blue-600 pl-4">
                <h2 class="text-2xl font-bold text-slate-900">Infrastructure Physique & Topologie</h2>
                <p class="text-slate-600 mt-1">
                    Comprendre la structure du r√©seau. OuaisFi repose sur un m√©lange h√©t√©rog√®ne de mat√©riel, connect√© via des protocoles de routage dynamique (Babel/Batman-adv).
                </p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                
                <!-- Chart: Hardware Distribution -->
                <div class="flex flex-col">
                    <div class="bg-white p-4 rounded-t-xl border-b border-slate-100">
                        <h3 class="font-bold text-slate-800">Distribution du Mat√©riel (N≈ìuds)</h3>
                    </div>
                    <div class="chart-container">
                        <canvas id="hardwareChart"></canvas>
                    </div>
                    <div class="mt-2 bg-blue-50 p-3 rounded-lg text-xs text-blue-800">
                        <strong>Note :</strong> Les appareils "DIY" (Raspberry Pi) augmentent, montrant une appropriation technique par les membres.
                    </div>
                </div>

                <!-- Visual: Topology Diagram (CSS Only) -->
                <div class="flex flex-col">
                    <div class="bg-white p-4 rounded-t-xl border-b border-slate-100 flex justify-between items-center">
                        <h3 class="font-bold text-slate-800">Sch√©ma Topologique Simplifi√©</h3>
                        <span class="text-xs text-slate-500 bg-slate-100 px-2 py-1 rounded">Live View</span>
                    </div>
                    <div class="relative bg-slate-800 rounded-b-xl overflow-hidden h-[350px] shadow-inner border border-slate-200">
                        <!-- Instructions Overlay -->
                        <div class="absolute top-2 left-2 text-[10px] text-slate-400 z-0">
                            Mesh Protocol: Babel<br>Gateway: Fiber 1Gbps
                        </div>

                        <!-- Lines (Connections) - Using simple trigonometry logic for placement -->
                        <!-- Gateway -> Node A -->
                        <div class="link-line" style="width: 100px; top: 50%; left: 15%; transform: rotate(-25deg);"></div>
                        <!-- Gateway -> Node B -->
                        <div class="link-line" style="width: 120px; top: 50%; left: 15%; transform: rotate(25deg);"></div>
                        <!-- Node A -> Node C -->
                        <div class="link-line" style="width: 90px; top: 30%; left: 40%; transform: rotate(10deg);"></div>
                        <!-- Node B -> Node C -->
                        <div class="link-line" style="width: 100px; top: 75%; left: 42%; transform: rotate(-45deg);"></div>
                        <!-- Node C -> User -->
                        <div class="link-line" style="width: 80px; top: 35%; left: 65%; transform: rotate(0deg); border-style: dashed;"></div>

                        <!-- Nodes -->
                        <!-- Gateway -->
                        <div class="node-circle bg-blue-600 gateway-pulse" style="left: 10%; top: 45%;" title="Passerelle Internet">
                            GW
                        </div>
                        <div class="absolute left-[9%] top-[60%] text-xs text-blue-200 font-mono">192.168.1.1</div>

                        <!-- Node A -->
                        <div class="node-circle bg-orange-500" style="left: 40%; top: 25%;" title="N≈ìud Relais A">
                            N1
                        </div>
                        
                        <!-- Node B -->
                        <div class="node-circle bg-orange-500" style="left: 42%; top: 70%;" title="N≈ìud Relais B">
                            N2
                        </div>

                        <!-- Node C -->
                        <div class="node-circle bg-orange-500" style="left: 65%; top: 30%;" title="N≈ìud Relais C">
                            N3
                        </div>

                        <!-- End User -->
                        <div class="node-circle bg-teal-500" style="left: 85%; top: 30%; width: 30px; height: 30px; font-size: 10px;" title="Client Final">
                            PC
                        </div>
                    </div>
                    <div class="mt-2 text-xs text-slate-500 flex gap-4 justify-center">
                        <span class="flex items-center gap-1"><span class="w-3 h-3 bg-blue-600 rounded-full"></span> Passerelle</span>
                        <span class="flex items-center gap-1"><span class="w-3 h-3 bg-orange-500 rounded-full"></span> N≈ìud Mesh</span>
                        <span class="flex items-center gap-1"><span class="w-3 h-3 bg-teal-500 rounded-full"></span> Client</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- 3. REPOSITORY STATS (dl.ouaisfieu) -->
        <section id="repo" class="scroll-mt-24">
            <div class="mb-6 border-l-4 border-teal-500 pl-4">
                <h2 class="text-2xl font-bold text-slate-900">Le D√©p√¥t (dl.ouaisfieu)</h2>
                <p class="text-slate-600 mt-1">
                    Le serveur de fichiers central. Il h√©berge les firmwares customs, les scripts de configuration et la documentation n√©cessaire √† l'expansion autonome du r√©seau.
                </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <!-- Text/List Stats -->
                <div class="md:col-span-1 bg-white rounded-xl shadow-sm p-6 border border-slate-100">
                    <h3 class="font-bold text-lg mb-4 text-slate-800">Ressources Cl√©s</h3>
                    <ul class="space-y-4">
                        <li class="flex justify-between items-center pb-2 border-b border-slate-50">
                            <span class="text-sm text-slate-600">Firmware Stable</span>
                            <span class="bg-green-100 text-green-800 text-xs font-mono px-2 py-1 rounded">v2.4.1</span>
                        </li>
                        <li class="flex justify-between items-center pb-2 border-b border-slate-50">
                            <span class="text-sm text-slate-600">Script d'Install</span>
                            <span class="bg-slate-100 text-slate-800 text-xs font-mono px-2 py-1 rounded">setup.sh</span>
                        </li>
                        <li class="flex justify-between items-center pb-2 border-b border-slate-50">
                            <span class="text-sm text-slate-600">Taille du D√©p√¥t</span>
                            <span class="text-slate-900 font-bold text-sm">420 MB</span>
                        </li>
                        <li class="flex justify-between items-center">
                            <span class="text-sm text-slate-600">Temps Moyen DL</span>
                            <span class="text-slate-900 font-bold text-sm">3.2s</span>
                        </li>
                    </ul>
                    <button class="mt-6 w-full bg-teal-500 hover:bg-teal-600 text-white font-semibold py-2 px-4 rounded transition-colors">
                        Explorer le D√©p√¥t
                    </button>
                </div>

                <!-- Chart: Downloads -->
                <div class="md:col-span-2">
                    <div class="bg-white p-4 rounded-t-xl border-b border-slate-100">
                        <h3 class="font-bold text-slate-800">Top T√©l√©chargements (30 jours)</h3>
                    </div>
                    <div class="chart-container">
                        <canvas id="downloadChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <!-- 4. PERFORMANCE & TRAFFIC -->
        <section id="perf" class="scroll-mt-24">
            <div class="mb-6 border-l-4 border-orange-500 pl-4 flex flex-col sm:flex-row sm:justify-between sm:items-end gap-4">
                <div>
                    <h2 class="text-2xl font-bold text-slate-900">Performance & Trafic</h2>
                    <p class="text-slate-600 mt-1">
                        Analyse de la charge r√©seau et de la qualit√© du signal radio.
                    </p>
                </div>
                <!-- Controls for Traffic Chart -->
                <div class="flex bg-slate-200 p-1 rounded-lg">
                    <button onclick="updateTraffic('24h')" id="btn-24h" class="px-3 py-1 text-sm font-medium rounded-md shadow bg-white text-blue-600 transition-all">24h</button>
                    <button onclick="updateTraffic('7d')" id="btn-7d" class="px-3 py-1 text-sm font-medium rounded-md text-slate-600 hover:bg-white/50 transition-all">7j</button>
                    <button onclick="updateTraffic('30d')" id="btn-30d" class="px-3 py-1 text-sm font-medium rounded-md text-slate-600 hover:bg-white/50 transition-all">30j</button>
                </div>
            </div>

            <!-- Traffic Line Chart -->
            <div class="bg-white rounded-xl shadow-sm p-1 mb-8">
                <div class="chart-container" style="height: 300px;">
                    <canvas id="trafficChart"></canvas>
                </div>
            </div>

            <!-- 3D Plotly Chart: Signal Analysis -->
            <div class="grid grid-cols-1 gap-6">
                <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                    <div class="p-4 border-b border-slate-100 bg-slate-50">
                        <h3 class="font-bold text-slate-800 flex items-center gap-2">
                            <span>üì°</span> Analyse Radio 3D : Distance vs Signal vs D√©bit
                        </h3>
                        <p class="text-xs text-slate-500 mt-1">
                            Visualisation WebGL de la corr√©lation entre la distance physique (X), la qualit√© du signal RSSI (Y) et le d√©bit r√©el (Z). 
                            Explorez le graphique (zoom/rotation) pour voir l'impact de l'environnement.
                        </p>
                    </div>
                    <!-- Plotly Container -->
                    <div id="signalPlot" class="w-full h-[450px] bg-white"></div>
                </div>
            </div>

        </section>

        <!-- Footer -->
        <footer class="mt-16 border-t border-slate-200 py-8 bg-white">
            <div class="text-center">
                <div class="flex items-center justify-center gap-2 mb-4">
                    <div class="w-6 h-6 bg-slate-800 rounded flex items-center justify-center text-white font-bold text-xs">O</div>
                    <span class="font-bold text-lg text-slate-800">OuaisFi</span>
                </div>
                <p class="text-slate-500 text-sm">
                    Donn√©es g√©n√©r√©es pour l'analyse de l'√©cosyst√®me. <br>
                    Rendez-vous sur <a href="#" class="text-blue-600 hover:underline">ouaisfi.eu</a> pour rejoindre le maillage.
                </p>
            </div>
        </footer>

    </main>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        // --- UTILITY: Label Wrapping (Mandatory) ---
        function wrapLabel(str, maxLen = 16) {
            if (str.length <= maxLen) return str;
            const words = str.split(' ');
            const lines = [];
            let currentLine = words[0];

            for (let i = 1; i < words.length; i++) {
                if (currentLine.length + 1 + words[i].length <= maxLen) {
                    currentLine += ' ' + words[i];
                } else {
                    lines.push(currentLine);
                    currentLine = words[i];
                }
            }
            lines.push(currentLine);
            return lines;
        }

        // --- CHART CONFIGURATION & DATA ---

        // 1. Hardware Donut Chart (Infrastructure)
        const ctxHw = document.getElementById('hardwareChart').getContext('2d');
        const hwLabelsRaw = ['Ubiquiti NanoStation', 'TP-Link CPE210', 'Gl.iNet Router', 'Raspberry Pi 4 (DIY)', 'Mikrotik LHG'];
        
        new Chart(ctxHw, {
            type: 'doughnut',
            data: {
                labels: hwLabelsRaw.map(l => wrapLabel(l)),
                datasets: [{
                    data: [45, 25, 15, 10, 5],
                    backgroundColor: ['#2563EB', '#F97316', '#14B8A6', '#8B5CF6', '#64748B'],
                    borderWidth: 0,
                    hoverOffset: 4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { position: 'right', labels: { boxWidth: 12, font: { size: 11 } } },
                    tooltip: {
                        callbacks: {
                            title: function(tooltipItems) {
                                const item = tooltipItems[0];
                                const label = item.chart.data.labels[item.dataIndex];
                                return Array.isArray(label) ? label.join(' ') : label;
                            }
                        }
                    }
                },
                cutout: '65%'
            }
        });

        // 2. Download Bar Chart (Repository)
        const ctxDl = document.getElementById('downloadChart').getContext('2d');
        const dlLabelsRaw = ['Firmware v2.4 (Stable)', 'Script Config Babel', 'Documentation PDF', 'Firmware v3.0 (Beta)', 'Certificats VPN'];

        new Chart(ctxDl, {
            type: 'bar',
            data: {
                labels: dlLabelsRaw.map(l => wrapLabel(l, 20)),
                datasets: [{
                    label: 'T√©l√©chargements',
                    data: [1200, 850, 600, 300, 150],
                    backgroundColor: '#14B8A6', // Teal
                    borderRadius: 4,
                    barPercentage: 0.6
                }]
            },
            options: {
                indexAxis: 'y', // Horizontal Bar
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    x: { grid: { display: false } },
                    y: { grid: { display: false } }
                },
                plugins: {
                    legend: { display: false },
                    tooltip: {
                        callbacks: {
                            title: function(tooltipItems) {
                                const item = tooltipItems[0];
                                const label = item.chart.data.labels[item.dataIndex];
                                return Array.isArray(label) ? label.join(' ') : label;
                            }
                        }
                    }
                }
            }
        });

        // 3. Traffic Line Chart (Performance - Interactive)
        const ctxTraffic = document.getElementById('trafficChart').getContext('2d');
        
        // Data Store for Traffic
        const trafficData = {
            '24h': {
                labels: ['00:00', '04:00', '08:00', '12:00', '16:00', '20:00', '23:59'],
                data: [10, 5, 25, 45, 40, 65, 50]
            },
            '7d': {
                labels: ['Lundi', 'Mardi', 'Mercredi', 'Jeudi', 'Vendredi', 'Samedi', 'Dimanche'],
                data: [300, 320, 290, 350, 410, 550, 520]
            },
            '30d': {
                labels: ['Semaine 1', 'Semaine 2', 'Semaine 3', 'Semaine 4'],
                data: [1200, 1450, 1300, 1600]
            }
        };

        let trafficChart = new Chart(ctxTraffic, {
            type: 'line',
            data: {
                labels: trafficData['24h'].labels,
                datasets: [{
                    label: 'Bande Passante (Mbps)',
                    data: trafficData['24h'].data,
                    borderColor: '#F97316', // Orange
                    backgroundColor: 'rgba(249, 115, 22, 0.1)',
                    fill: true,
                    tension: 0.4,
                    borderWidth: 2,
                    pointRadius: 3,
                    pointBackgroundColor: '#fff',
                    pointBorderWidth: 2
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: { 
                        beginAtZero: true,
                        grid: { borderDash: [5, 5], color: '#E2E8F0' } 
                    },
                    x: { grid: { display: false } }
                },
                plugins: {
                    legend: { display: false },
                    tooltip: {
                        callbacks: {
                            title: function(tooltipItems) {
                                const item = tooltipItems[0];
                                const label = item.chart.data.labels[item.dataIndex];
                                return Array.isArray(label) ? label.join(' ') : label;
                            }
                        }
                    }
                }
            }
        });

        // Interaction Logic for Traffic Chart
        function updateTraffic(period) {
            // Update Chart Data
            trafficChart.data.labels = trafficData[period].labels;
            trafficChart.data.datasets[0].data = trafficData[period].data;
            trafficChart.update();

            // Update Buttons Styling
            const buttons = ['btn-24h', 'btn-7d', 'btn-30d'];
            buttons.forEach(btnId => {
                const btn = document.getElementById(btnId);
                if (btnId === `btn-${period}`) {
                    btn.classList.add('bg-white', 'text-blue-600', 'shadow');
                    btn.classList.remove('text-slate-600', 'hover:bg-white/50');
                } else {
                    btn.classList.remove('bg-white', 'text-blue-600', 'shadow');
                    btn.classList.add('text-slate-600', 'hover:bg-white/50');
                }
            });
        }

        // 4. Plotly 3D Scatter (Performance - "Wow" Factor)
        // Simulating 50 data points of Signal Quality vs Distance vs Speed
        const pointCount = 50;
        const xData = []; // Distance (m)
        const yData = []; // RSSI (dBm)
        const zData = []; // Speed (Mbps)
        const colors = [];

        for (let i = 0; i < pointCount; i++) {
            // Further distance = generally worse signal and speed
            const dist = Math.floor(Math.random() * 500) + 50; // 50m to 550m
            const signal = -40 - (dist / 10) - (Math.random() * 15); // -45 to -90 dBm
            const speed = Math.max(5, 100 - (dist / 8) - (Math.random() * 20)); // Mbps

            xData.push(dist);
            yData.push(signal);
            zData.push(speed);
            colors.push(speed); // Color based on speed
        }

        const trace3d = {
            x: xData,
            y: yData,
            z: zData,
            mode: 'markers',
            marker: {
                size: 6,
                color: colors,
                colorscale: 'Viridis',
                opacity: 0.8
            },
            type: 'scatter3d',
            hovertemplate: 'Dist: %{x}m<br>Signal: %{y}dBm<br>Vitesse: %{z}Mbps<extra></extra>'
        };

        const layout3d = {
            margin: {l: 0, r: 0, b: 0, t: 0},
            paper_bgcolor: 'rgba(0,0,0,0)', // Transparent
            plot_bgcolor: 'rgba(0,0,0,0)',
            scene: {
                xaxis: {title: 'Distance (m)'},
                yaxis: {title: 'Signal (dBm)'},
                zaxis: {title: 'D√©bit (Mbps)'},
                camera: { eye: {x: 1.5, y: 1.5, z: 1.2} }
            }
        };

        Plotly.newPlot('signalPlot', [trace3d], layout3d, {displayModeBar: false, responsive: true});

    </script>
</body>
</html>
